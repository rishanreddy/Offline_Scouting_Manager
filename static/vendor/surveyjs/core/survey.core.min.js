/*!
 * For license information please see survey.core.min.js.LICENSE.txt
 */

(function(m,k){typeof exports=="object"&&typeof module<"u"?k(exports):typeof define=="function"&&define.amd?define(["exports"],k):(m=typeof globalThis<"u"?globalThis:m||self,k(m.Survey={}))})(this,(function(m){"use strict";var k=(function(){function r(){}return r.isAvailable=function(){return typeof window<"u"},r.isFileReaderAvailable=function(){return r.isAvailable()?!!window.FileReader:!1},r.getLocation=function(){if(r.isAvailable())return window.location},r.getVisualViewport=function(){return r.isAvailable()?window.visualViewport:null},r.getInnerWidth=function(){if(r.isAvailable())return window.innerWidth},r.getInnerHeight=function(){return r.isAvailable()?window.innerHeight:null},r.getDevicePixelRatio=function(){return r.isAvailable()?window.devicePixelRatio:null},r.getWindow=function(){if(r.isAvailable())return window},r.hasOwn=function(t){if(r.isAvailable())return t in window},r.getSelection=function(){if(r.isAvailable()&&window.getSelection)return window.getSelection()},r.requestAnimationFrame=function(t){if(r.isAvailable())return window.requestAnimationFrame(t)},r.addEventListener=function(t,e){r.isAvailable()&&window.addEventListener(t,e)},r.removeEventListener=function(t,e){r.isAvailable()&&window.removeEventListener(t,e)},r.matchMedia=function(t){return!r.isAvailable()||typeof window.matchMedia>"u"?null:window.matchMedia(t)},r})(),D=(function(){function r(){}return r.isAvailable=function(){return typeof document<"u"},r.getBody=function(){if(r.isAvailable())return document.body},r.getDocumentElement=function(){if(r.isAvailable())return document.documentElement},r.getDocument=function(){if(r.isAvailable())return document},r.getCookie=function(){if(r.isAvailable())return document.cookie},r.setCookie=function(t){r.isAvailable()&&(document.cookie=t)},r.activeElementBlur=function(){if(r.isAvailable()){var t=document.activeElement;t&&t.blur&&t.blur()}},r.createElement=function(t){if(r.isAvailable())return document.createElement(t)},r.getComputedStyle=function(t){return r.isAvailable()?document.defaultView.getComputedStyle(t):new CSSStyleDeclaration},r.addEventListener=function(t,e){r.isAvailable()&&document.addEventListener(t,e)},r.removeEventListener=function(t,e){r.isAvailable()&&document.removeEventListener(t,e)},r})();function ne(r,t){if(!t)return C.onDateCreated(new Date,r,t);!C.storeUtcDates&&typeof t=="string"&&oa(t)&&(t+="T00:00:00");var e=new Date(t);return C.onDateCreated(e,r,t)}function oa(r){return r.indexOf("T")>0||!/\d{4}-\d{2}-\d{2}/.test(r)?!1:!isNaN(new Date(r).getTime())}var w=(function(){function r(){}return r.isValueEmpty=function(t){if(Array.isArray(t)&&t.length===0)return!0;if(t&&r.isValueObject(t)&&t.constructor===Object){for(var e in t)if(!r.isValueEmpty(t[e]))return!1;return!0}return!t&&t!==0&&t!==!1},r.isValueUndefined=function(t){return t==null||typeof t=="number"&&isNaN(t)},r.isArrayContainsEqual=function(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++){for(var n=0;n<e.length&&!r.isTwoValueEquals(t[i],e[n]);n++);if(n===e.length)return!1}return!0},r.checkIfArraysEqual=function(t,e,i){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;var n=i.ignoreOrder!==void 0?i.ignoreOrder:!1;if(n){for(var o=[],s=[],a=0;a<t.length;a++)o.push(t[a]),s.push(e[a]);o.sort(),s.sort(),t=o,e=s}for(var a=0;a<t.length;a++)if(!r.checkIfValuesEqual(t[a],e[a],i))return!1;return!0},r.isArraysEqual=function(t,e,i,n,o){return i===void 0&&(i=!1),r.checkIfArraysEqual(t,e,{ignoreOrder:i,caseSensitive:n,trimStrings:o})},r.compareStrings=function(t,e){var i=C.comparator.normalizeTextCallback;if(t&&(t=i(t,"compare").trim()),e&&(e=i(e,"compare").trim()),!t&&!e)return 0;if(!t)return-1;if(!e)return 1;if(t===e)return 0;for(var n=-1,o=0;o<t.length&&o<e.length;o++){if(this.isCharDigit(t[o])&&this.isCharDigit(e[o])){n=o;break}if(t[o]!==e[o])break}if(n>-1){var s=this.getNumberFromStr(t,n),a=this.getNumberFromStr(e,n);if(!Number.isNaN(s)&&!Number.isNaN(a)&&s!==a)return s>a?1:-1}return t>e?1:-1},r.checkIfValuesEqual=function(t,e,i){if(t===e||Array.isArray(t)&&t.length===0&&typeof e>"u"||Array.isArray(e)&&e.length===0&&typeof t>"u"||t==null&&e===""||e==null&&t==="")return!0;var n=i.caseSensitive!==void 0?i.caseSensitive:C.comparator.caseSensitive,o=i.trimStrings!==void 0?i.trimStrings:C.comparator.trimStrings;if(typeof t=="string"&&typeof e=="string"){var s=C.comparator.normalizeTextCallback;return t=s(t,"compare"),e=s(e,"compare"),o&&(t=t.trim(),e=e.trim()),n||(t=t.toLowerCase(),e=e.toLowerCase()),t===e}if(t instanceof Date&&e instanceof Date)return t.getTime()==e.getTime();var a=!i.doNotConvertNumbers;if(a&&r.isConvertibleToNumber(t)&&r.isConvertibleToNumber(e)&&parseInt(t)===parseInt(e)&&parseFloat(t)===parseFloat(e))return!0;if(!r.isValueEmpty(t)&&r.isValueEmpty(e)||r.isValueEmpty(t)&&!r.isValueEmpty(e))return!1;if((t===!0||t===!1)&&typeof e=="string")return t.toString()===e.toLocaleLowerCase();if((e===!0||e===!1)&&typeof t=="string")return e.toString()===t.toLocaleLowerCase();var l=r.isValueObject(t),u=r.isValueObject(e);if(!l&&!u&&(a||typeof t!="number"&&typeof e!="number"))return t==e;if(!l||!u)return!1;if(t.equals&&e.equals)return t.equals(e);if(Array.isArray(t)&&Array.isArray(e))return r.checkIfArraysEqual(t,e,i);for(var f in t)if(t.hasOwnProperty(f)&&(!e.hasOwnProperty(f)||!this.checkIfValuesEqual(t[f],e[f],i)))return!1;for(f in e)if(e.hasOwnProperty(f)&&!t.hasOwnProperty(f))return!1;return!0},r.isTwoValueEquals=function(t,e,i,n,o){return i===void 0&&(i=!1),this.checkIfValuesEqual(t,e,{ignoreOrder:i,caseSensitive:n,trimStrings:o})},r.randomizeArray=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},r.getUnbindValue=function(t){if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)e.push(r.getUnbindValue(t[i]));return e}return t&&r.isValueObject(t)&&!(t instanceof Date)?JSON.parse(JSON.stringify(t)):t},r.createCopy=function(t){return this.createCopyWithPrefix(t,void 0)},r.createCopyWithPrefix=function(t,e){var i={};if(!t)return i;for(var n in t){var o=e?e+n:n;i[o]=t[n]}return i},r.createDiff=function(t,e){var i={};if(typeof t!="object"||typeof e!="object")return i;for(var n in t)r.isTwoValueEquals(t[n],e[n])||(i[n]=t[n]);return i},r.isConvertibleToNumber=function(t){return t!=null&&!Array.isArray(t)&&!isNaN(t)},r.isValueObject=function(t,e){return t instanceof Object&&(!e||!Array.isArray(t))},r.isNumber=function(t){return!isNaN(this.getNumber(t))},r.getNumber=function(t){var e=r.getNumberCore(t);return C.parseNumber(t,e)},r.getNumberCore=function(t){if(typeof t=="string"){if(t=t.trim(),!t)return NaN;if(t.indexOf("0x")==0)return t.length>32?NaN:parseInt(t);if(t.length>15&&r.isDigitsOnly(t))return NaN;if(r.isStringHasOperator(t))return NaN}t=this.prepareStringToNumber(t);var e=parseFloat(t);return isNaN(e)||!isFinite(t)?NaN:e},r.isStringHasOperator=function(t){if(t.lastIndexOf("-")>0||t.lastIndexOf("+")>0)return!1;for(var e="*^/%",i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return!0;return!1},r.prepareStringToNumber=function(t){if(typeof t!="string"||!t)return t;var e=t.indexOf(",");return e>-1&&t.indexOf(",",e+1)<0?t.replace(",","."):t},r.getMaxLength=function(t,e){return t<0&&(t=e),t>0?t:null},r.getRemainingCharacterCounterText=function(t,e){if(!e||e<=0||!C.showMaxLengthIndicator)return"";var i=t?t.length:"0";return[i,e].join("/")},r.getNumberByIndex=function(t,e,i){if(t<0)return"";var n=1,o="",s=e&&e[e.length-1]!=="."?"":".",a=!0,l="A",u="",f=function(R){if(!R)return!1;for(var A=0;A<R.length;A++)if(r.isCharDigit(R[A]))return!0;return!1};if(e){u=e;for(var y=u.length-1,b=f(u),E=function(){return b&&!r.isCharDigit(u[y])||r.isCharNotLetterAndDigit(u[y])};y>=0&&E();)y--;var S="";for(y<u.length-1&&(S=u.substring(y+1),u=u.substring(0,y+1)),y=u.length-1;y>=0&&!(E()||(y--,!b)););l=u.substring(y+1),o=u.substring(0,y+1),parseInt(l)?n=parseInt(l):l.length==1&&(a=!1),(S||o)&&(s=S)}if(i>-1&&f(o)&&(o=this.getNumberByIndex(i,o)),a){for(var O=(t+n).toString();O.length<l.length;)O="0"+O;return o+O+s}return o+String.fromCharCode(l.charCodeAt(0)+t)+s},r.isCharNotLetterAndDigit=function(t){return t.toUpperCase()==t.toLowerCase()&&!r.isCharDigit(t)},r.isCharDigit=function(t){return t>="0"&&t<="9"},r.isDigitsOnly=function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(!r.isCharDigit(t[e]))return!1;return!0},r.getNumberFromStr=function(t,e){if(!this.isCharDigit(t[e]))return NaN;for(var i="";e<t.length&&this.isCharDigit(t[e]);)i+=t[e],e++;return i?this.getNumber(i):NaN},r.countDecimals=function(t){if(r.isNumber(t)&&Math.floor(t)!==t){var e=t.toString().split(".");return e.length>1&&e[1].length||0}return 0},r.correctAfterPlusMinis=function(t,e,i){var n=r.countDecimals(t),o=r.countDecimals(e);if(n>0||o>0){var s=Math.max(n,o);i=parseFloat(i.toFixed(s))}return i},r.sumAnyValues=function(t,e){if(!r.isNumber(t)||!r.isNumber(e)){if(Array.isArray(t)&&Array.isArray(e))return[].concat(t).concat(e);if(Array.isArray(t)||Array.isArray(e)){var i=Array.isArray(t)?t:e,n=i===t?e:t;if(typeof n=="string"){var o=i.join(", ");return i===t?o+n:n+o}if(typeof n=="number"){for(var s=0,a=0;a<i.length;a++)typeof i[a]=="number"&&(s=r.correctAfterPlusMinis(s,i[a],s+i[a]));return r.correctAfterPlusMinis(s,n,s+n)}}return t+e}return typeof t=="string"||typeof e=="string"?t+e:r.correctAfterPlusMinis(t,e,t+e)},r.correctAfterMultiple=function(t,e,i){var n=r.countDecimals(t)+r.countDecimals(e);return n>0&&(i=parseFloat(i.toFixed(n))),i},r.findObjByPropValue=function(t,e,i){for(var n=0;n<t.length;n++)if(r.isTwoValueEquals(t[n][e],i))return t[n]},r.convertArrayObjectToValue=function(t,e){var i=new Array;if(!t||!Array.isArray(t))return i;for(var n=0;n<t.length;n++){var o=t[n]?t[n][e]:void 0;r.isValueEmpty(o)||i.push(o)}return i},r.convertDateToString=function(t){var e=function(i){return i<10?"0"+i.toString():i.toString()};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())},r.convertDateTimeToString=function(t,e,i){var n=function(a){return a<10?"0"+a.toString():a.toString()},o=e?"T":" ",s=this.convertDateToString(t)+o+n(t.getHours())+":"+n(t.getMinutes());return i&&(s+=":"+n(t.getSeconds())),s},r.convertValToQuestionVal=function(t,e){return t instanceof Date?e==="datetime-local"?r.convertDateTimeToString(t,!0):e==="datetime-seconds"?r.convertDateTimeToString(t,!0,!0):r.convertDateToString(t):this.getUnbindValue(t)},r.compareVerions=function(t,e){if(!t&&!e)return 0;for(var i=t.split("."),n=e.split("."),o=i.length,s=n.length,a=0;a<o&&a<s;a++){var l=i[a],u=n[a];if(l.length===u.length){if(l!==u)return l<u?-1:1}else return l.length<u.length?-1:1}return o===s?0:o<s?-1:1},r.isUrlYoutubeVideo=function(t){if(!t)return!1;var e=["www.youtube.com","m.youtube.com","youtube.com","youtu.be"];t=t.toLowerCase(),t=t.replace(/^https?:\/\//,"");for(var i=0;i<e.length;i++)if(t.indexOf(e[i]+"/")===0)return!0;return!1},r})();String.prototype.format||(String.prototype.format=function(){var r=arguments;return this.replace(/{(\d+)}/g,function(t,e){return typeof r[e]<"u"?r[e]:t})});var hi={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",commentText:"Please leave a comment",otherItemText:"Other (describe)",noneItemText:"None",refuseItemText:"Refuse to answer",dontKnowItemText:"Don't know",selectAllItemText:"Select All",deselectAllItemText:"Deselect all",progressText:"Page {0} of {1}",indexText:"{0} of {1}",panelDynamicProgressText:"{0} of {1}",panelDynamicTabTextFormat:"Panel {panelIndex}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"The survey doesn't contain any visible elements.",completingSurvey:"Thank you for completing the survey",completingSurveyBefore:"You have already completed this survey.",loadingSurvey:"Loading Survey...",placeholder:"Select...",ratingOptionsCaption:"Select...",buttongroupOptionsCaption:"Select...",value:"value",requiredError:"Response required.",requiredErrorInPanel:"Response required: answer at least one question.",requiredInAllRowsError:"Response required: answer questions in all rows.",eachRowUniqueError:"Each row must have a unique value.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",stepError:"Please enter a value that matches the step size of {0}.",maxError:"The value should not be greater than {0}",textNoDigitsAllow:"Numbers are not allowed.",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} option(s).",maxSelectError:"Please select no more than {0} option(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",exceedMaxFiles:"The maximum number of files you can upload is {0}.",noUploadFilesHandler:"Files cannot be uploaded. Please add a handler for the 'onUploadFiles' event.",otherRequiredError:"Response required: enter another value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file selected",filePlaceholder:"Drag and drop a file here or click the button below to select a file to upload.",confirmDelete:"Are you sure you want to delete this record?",keyDuplicationError:"This value should be unique.",addColumn:"Add Column",addRow:"Add Row",removeRow:"Remove",noRowsText:"There are no rows.",rowIndexTemplateTitle:"Row {rowIndex}",rowNameTemplateTitle:"{rowTitle}",addPanel:"Add new",removePanel:"Remove",showDetails:"Show Details",hideDetails:"Hide Details",choices_Item:"item",choices_Choice:"Choice option",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",savingExceedSize:"Your response exceeds 64KB. Please reduce the size of your file(s) and try again or contact the survey owner.",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",clearCaption:"Clear",selectCaption:"Select",signaturePlaceHolder:"Sign here",signaturePlaceHolderReadOnly:"No signature",chooseFileCaption:"Select File",takePhotoCaption:"Take Photo",photoPlaceholder:"Click the button below to take a photo using the camera.",fileOrPhotoPlaceholder:"Drag and drop or select a file to upload or take a photo using the camera.",replaceFileCaption:"Replace file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply",filterStringPlaceholder:"Type to search...",emptyMessage:"No data to display",loadingPage:"Loading...",loadingData:"Loading...",noEntriesText:`No entries yet.
Click the button below to add a new entry.`,noEntriesReadonlyText:"No entries",tabTitlePlaceholder:"New Panel",more:"More",tagboxDoneButtonCaption:"OK",selectToRankEmptyRankedAreaText:"All choices are selected for ranking",selectToRankEmptyUnrankedAreaText:"Drag choices here to rank them",ok:"OK",cancel:"Cancel",createCustomItem:'Create "{0}" item...',toc:"Table of contents",progressbar:"Progress bar"},oe={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},localeNamesInEnglish:{},localeDirections:{},supportedLocales:[],useEnglishNames:!1,get showNamesInEnglish(){return this.useEnglishNames},set showNamesInEnglish(r){this.useEnglishNames=r},setupLocale:function(r){var t=r.localeCode;this.locales[t]=r.strings,this.localeNames[t]=r.nativeName,this.localeNamesInEnglish[t]=r.englishName,r.rtl!==void 0&&(this.localeDirections[t]=r.rtl?"rtl":"ltr")},get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(r){this.currentLocaleValue=this.getCorrectLocaleName(r)},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(r){this.defaultLocaleValue=this.getCorrectLocaleName(r)},getCorrectLocaleName:function(r){return r==="cz"&&(r="cs"),r==="gr"&&(r="el"),r==="rs"&&(r="sr"),r==="ua"&&(r="uk"),r},getLocaleStrings:function(r){return this.locales[r]},getString:function(r,t){var e=this;t===void 0&&(t=null);var i=new Array,n=function(l){var u=e.locales[l];u&&i.push(u)},o=function(l){if(l){n(l);var u=l.indexOf("-");u<1||(l=l.substring(0,u),n(l))}};o(t),o(this.currentLocale),o(this.defaultLocale),this.defaultLocale!=="en"&&n("en");for(var s=0;s<i.length;s++){var a=i[s][r];if(a!==void 0)return a}return this.onGetExternalString(r,t)},getLocaleName:function(r,t){if(!r)return"";t===void 0&&(t=this.showNamesInEnglish);var e=t?this.localeNamesInEnglish:this.localeNames,i=t?this.localeNames:this.localeNamesInEnglish;return e[r]||i[r]||r},getLocales:function(r){var t=this;r===void 0&&(r=!1);var e=[];e.push("");var i=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){i={};for(var n=0;n<this.supportedLocales.length;n++)i[this.supportedLocales[n]]=!0}for(var o in i)r&&o==this.defaultLocale||e.push(o);var s=function(a){return t.getLocaleName(a).toLowerCase()};return e.sort(function(a,l){var u=s(a),f=s(l);return u===f?0:u<f?-1:1}),e},onGetExternalString:function(r,t){}};function te(r,t){return t===void 0&&(t=null),oe.getString(r,t)}function sa(r){return oe.getLocaleStrings(r)}function aa(r){oe.setupLocale(r)}var la=hi;oe.locales.en=hi,oe.localeNames.en="english";var fi=function(r,t){return fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])},fi(r,t)};function P(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fi(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var $e=function(){return $e=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},$e.apply(this,arguments)};function c(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}function z(r,t,e){if(e||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return r.concat(o||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;function Un(r){return"loc"+r.charAt(0).toUpperCase()+r.slice(1)}function p(r){return r===void 0&&(r={}),function(t,e){var i=function(l,u){if(u&&typeof u=="object"&&u.type===$.ComputedUpdaterType){U.startCollectDependencies(function(){return l[e]=u.updater()},l,e);var f=u.updater(),y=U.finishCollectDependencies();return u.setDependencies(y),l.dependencies[e]&&l.dependencies[e].dispose(),l.dependencies[e]=u,f}return u};if(!r||!r.localizable)Object.defineProperty(t,e,{get:function(){var l=this,u=null,f=void 0,y=void 0;r&&(f=r.returnValue,r.calcFunc&&(y=function(){return r.calcFunc(l)}),typeof r.getDefaultValue=="function"&&(u=r.getDefaultValue(this)),r.defaultValue!==void 0&&(u=r.defaultValue));var b=this.getPropertyValue(e,u,y);return f!==void 0&&b===void 0?f:b},set:function(l){var u=i(this,l),f=this.getPropertyValue(e);if(r){if(r.isLowerCase){if(!u||typeof u!="string")return;u=u.toLowerCase()}r.onSetting&&(u=r.onSetting(u,this,f))}u!==f&&(this.setPropertyValue(e,u),r&&r.onSet&&r.onSet(u,this,f))}});else{var n=typeof r.localizable=="object"?r.localizable:null,o=n&&n.name?n.name:Un(e),s=n&&n.defaultStr?n.defaultStr:!1,a=n&&n.markdown===!0;Object.defineProperty(t,e,{get:function(){return this.getLocStringText(this[o])},set:function(l){l=i(this,l),this.setLocStringText(this[o],l),r&&r.onSet&&r.onSet(l,this)}}),Object.defineProperty(t,o,{get:function(){var l=this;return this.getOrCreateLocStr(e,a,s,function(u){n&&typeof n.onCreate=="function"&&n.onCreate(l,u)})}})}}}function Wn(r,t,e){r.ensureArray(e,function(i,n){var o=t?t.onPush:null;o&&o(i,n,r)},function(i,n){var o=t?t.onRemove:null;o&&o(i,n,r)})}function re(r){return function(t,e){Object.defineProperty(t,e,{get:function(){return Wn(this,r,e),this.getPropertyValue(e)},set:function(i){Wn(this,r,e);var n=this.getPropertyValue(e);i!==n&&(n?n.splice.apply(n,z([0,n.length],i||[],!1)):this.setPropertyValue(e,i),r&&r.onSet&&r.onSet(i,this))}})}}var lt=(function(){function r(t,e,i){i===void 0&&(i=!1),this.name=e,this.isRequiredValue=!1,this.isUniqueValue=!1,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.maxLength=-1,this.isArray=!1,this.classInfoValue=t,this.isRequiredValue=i,this.idValue=r.Index++}return Object.defineProperty(r.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classInfo",{get:function(){return this.classInfoValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(t){t==="itemvalues"&&(t="itemvalue[]"),t==="textitems"&&(t="textitem[]"),this.typeValue=t,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substring(0,this.typeValue.length-2))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isExpression",{get:function(){return this.type==="expression"||this.type==="condition"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"locationInTable",{get:function(){var t=this.locationInTableValue;return t||"column"},set:function(t){this.locationInTableValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showMode",{get:function(){var t=this.locationInTableValue;return t==="detail"?"form":t==="column"?"list":""},set:function(t){this.locationInTable=t==="form"?"detail":t==="list"?"column":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(t){t!==this.isRequired&&(this.isRequiredValue=t,this.classInfo&&this.classInfo.resetAllProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isUnique",{get:function(){return this.isUniqueValue},set:function(t){this.isUniqueValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniquePropertyName",{get:function(){return this.uniquePropertyValue},set:function(t){this.uniquePropertyValue=t},enumerable:!1,configurable:!0}),r.prototype.isPropertySerializable=function(t){return this.isSerializableFunc?this.isSerializableFunc(t):this.isSerializable},r.prototype.getDefaultValue=function(t){var e=this.defaultValueFunc?this.defaultValueFunc(t):this.defaultValueValue;return r.getItemValuesDefaultValue&&V.isDescendantOf(this.className,"itemvalue")&&(e=r.getItemValuesDefaultValue(this.defaultValueValue||[],this.className)),e},Object.defineProperty(r.prototype,"defaultValue",{get:function(){return this.getDefaultValue(void 0)},set:function(t){this.defaultValueValue=t,t!==void 0&&(this.defaultValueFunc=void 0)},enumerable:!1,configurable:!0}),r.prototype.isDefaultValue=function(t){return this.isDefaultValueByObj(void 0,t)},r.prototype.isDefaultValueByObj=function(t,e){if(this.isLocalizable)return e==null;var i=this.getDefaultValue(t);return i!==void 0?typeof i!="object"?i===e:w.isTwoValueEquals(e,i,!1,!0,!1):e===!1&&this.isBooleanType&&!this.defaultValueFunc||e===""||w.isValueEmpty(e)},r.prototype.getSerializableValue=function(t,e,i){if(this.onSerializeValue)return this.onSerializeValue(t);if(!(!e&&this.isSerializable&&t.getIsSerializablePropertyEmpty&&t.getIsSerializablePropertyEmpty(this))){var n=this.getValue(t,i);if(n!=null&&!(!e&&this.isDefaultValueByObj(t,n)))return n}},r.prototype.getValue=function(t,e){if(this.onGetValue)return t=this.getOriginalObj(t),this.onGetValue(t);var i=this.serializationProperty;if(i){var n=t[i];if(n)return n.getJson(e)}return t[this.name]},r.prototype.getPropertyValue=function(t){return this.isLocalizable?t[this.serializationProperty]?t[this.serializationProperty].text:null:this.getValue(t)},Object.defineProperty(r.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue||this.serializationProperty},enumerable:!1,configurable:!0}),r.prototype.settingValue=function(t,e){return!this.onSettingValue||t.isLoadingFromJson?e:this.onSettingValue(t,e)},r.prototype.setValue=function(t,e,i){if(this.onSetValue)t=this.getOriginalObj(t),this.onSetValue(t,e,i);else if(this.serializationProperty&&t[this.serializationProperty])t[this.serializationProperty].setJson(e,!0);else{if(e&&typeof e=="string"&&(this.type=="number"&&(e=parseInt(e)),this.isBooleanType)){var n=e.toLowerCase();(n==="false"||n==="true")&&(e=n==="true")}t[this.name]=e}},Object.defineProperty(r.prototype,"isBooleanType",{get:function(){return this.type==="boolean"||this.type==="switch"},enumerable:!1,configurable:!0}),r.prototype.validateValue=function(t,e){var i=this.getChoices(t,function(a){});if(!Array.isArray(i)||i.length===0||typeof e=="object"&&typeof i[0]=="object")return!0;var n=this.acceptedValues;if(Array.isArray(n)&&n.indexOf(e)>-1)return!0;for(var o=0;o<i.length;o++){var s=i[o];if(s==e||typeof s=="object"&&s.value==e)return!0}return!1},r.prototype.getObjType=function(t){return this.classNamePart?t.replace(this.classNamePart,""):t},Object.defineProperty(r.prototype,"choices",{get:function(){return this.getChoices(null)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasChoices",{get:function(){return!!this.choicesValue||!!this.choicesfunc},enumerable:!1,configurable:!0}),r.prototype.getChoices=function(t,e){return e===void 0&&(e=null),this.choicesValue!=null?this.choicesValue:this.choicesfunc!=null?this.choicesfunc(t,e):null},r.prototype.setChoices=function(t,e){e===void 0&&(e=null),this.choicesValue=t,this.choicesfunc=e},r.prototype.getBaseValue=function(){return this.baseValue?typeof this.baseValue=="function"?this.baseValue():this.baseValue:""},r.prototype.setBaseValue=function(t){this.baseValue=t},Object.defineProperty(r.prototype,"readOnly",{get:function(){return this.readOnlyValue!=null?this.readOnlyValue:!1},set:function(t){this.readOnlyValue=t},enumerable:!1,configurable:!0}),r.prototype.isEnable=function(t){return this.readOnly?!1:!t||!this.enableIf?!0:this.enableIf(this.getOriginalObj(t))},r.prototype.isVisible=function(t,e){e===void 0&&(e=null);var i=!this.layout||!t||this.layout===t;return!this.visible||!i?!1:this.visibleIf&&e?this.visibleIf(this.getOriginalObj(e)):!0},r.prototype.getOriginalObj=function(t){return t&&t.getOriginalByProperty?t.getOriginalByProperty(this.name):t},Object.defineProperty(r.prototype,"visible",{get:function(){return this.visibleValue!=null?this.visibleValue:!0},set:function(t){this.visibleValue=t},enumerable:!1,configurable:!0}),r.prototype.isAvailableInVersion=function(t){return this.alternativeName||this.oldName?!0:this.isAvailableInVersionCore(t)},r.prototype.getSerializedName=function(t){return this.alternativeName?this.isAvailableInVersionCore(t)?this.name:this.alternativeName||this.oldName:this.name},r.prototype.getSerializedProperty=function(t,e){return!this.oldName||this.isAvailableInVersionCore(e)?this:!t||!t.getType?null:V.findProperty(t.getType(),this.oldName)},r.prototype.isAvailableInVersionCore=function(t){return!t||!this.version?!0:w.compareVerions(this.version,t)<=0},Object.defineProperty(r.prototype,"isLocalizable",{get:function(){return this.isLocalizableValue!=null?this.isLocalizableValue:!1},set:function(t){this.isLocalizableValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMultipleText",{get:function(){return this.type==="string[]"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataList",{get:function(){return Array.isArray(this.dataListValue)?this.dataListValue:[]},set:function(t){this.dataListValue=t},enumerable:!1,configurable:!0}),r.prototype.mergeWith=function(t){var e=this;Object.keys(t).forEach(function(i){e.mergeValue(t,i)}),this.isArray=t.isArray},r.prototype.addDependedProperty=function(t){this.dependedProperties||(this.dependedProperties=[]),this.dependedProperties.indexOf(t)<0&&this.dependedProperties.push(t)},r.prototype.getDependedProperties=function(){return this.dependedProperties?this.dependedProperties:[]},r.prototype.schemaType=function(){if(this.className!=="choicesByUrl"){if(this.className==="string")return this.className;if(this.className&&this.isArray||this.baseClassName)return"array";if(!this.className)return this.type=="switch"?"boolean":this.type=="boolean"||this.type=="number"?this.type:"string"}},r.prototype.schemaRef=function(){if(this.className)return this.className},r.prototype.mergeValue=function(t,e){this[e]==null&&t[e]!=null&&(this[e]=t[e])},r.Index=1,r})(),Ie=(function(){function r(){}return r.addProperty=function(t,e){t=t.toLowerCase();var i=r.properties;i[t]||(i[t]=[]),i[t].push(e)},r.removeProperty=function(t,e){t=t.toLowerCase();var i=r.properties;if(i[t]){for(var n=i[t],o=0;o<n.length;o++)if(n[o].name==e){i[t].splice(o,1);break}}},r.removeAllProperties=function(t){t=t.toLowerCase(),delete r.properties[t]},r.addClass=function(t,e){t=t.toLowerCase(),e&&(e=e.toLowerCase()),r.parentClasses[t]=e},r.getProperties=function(t){t=t.toLowerCase();for(var e=[],i=r.properties;t;){var n=i[t];if(n)for(var o=0;o<n.length;o++)e.push(n[o]);t=r.parentClasses[t]}return e},r.createProperties=function(t){!t||!t.getType||r.createPropertiesCore(t,t.getType())},r.createPropertiesCore=function(t,e){var i=r.properties;i[e]&&r.createPropertiesInObj(t,i[e]);var n=r.parentClasses[e];n&&r.createPropertiesCore(t,n)},r.createPropertiesInObj=function(t,e){for(var i=0;i<e.length;i++)r.createPropertyInObj(t,e[i])},r.createPropertyInObj=function(t,e){if(!r.checkIsPropertyExists(t,e.name)&&!(e.serializationProperty&&r.checkIsPropertyExists(t,e.serializationProperty))){if(e.isLocalizable&&e.serializationProperty&&t.createCustomLocalizableObj){var i=t.createCustomLocalizableObj(e.name);i.defaultValue=e.getDefaultValue(t);var n={get:function(){return t.getLocalizableString(e.name)}};Object.defineProperty(t,e.serializationProperty,n);var o={get:function(){return t.getLocalizableStringText(e.name)},set:function(l){t.setLocalizableStringText(e.name,l)}};Object.defineProperty(t,e.name,o)}else{var s=e.isArray||e.type==="multiplevalues";if(typeof t.createNewArray=="function"&&(V.isDescendantOf(e.className,"itemvalue")?(t.createNewArray(e.name,function(l){l.locOwner=t,l.ownerPropertyName=e.name}),s=!0):s&&t.createNewArray(e.name),s)){var a=e.getDefaultValue(t);Array.isArray(a)&&t.setPropertyValue(e.name,a)}if(t.getPropertyValue&&t.setPropertyValue){var o={get:function(){return e.onGetValue?e.onGetValue(t):t.getPropertyValue(e.name,void 0)},set:function(u){e.onSetValue?e.onSetValue(t,u,null):t.setPropertyValue(e.name,u)}};Object.defineProperty(t,e.name,o)}}(e.type==="condition"||e.type==="expression")&&e.onExecuteExpression&&t.addExpressionProperty(e.name,e.onExecuteExpression)}},r.checkIsPropertyExists=function(t,e){return t.hasOwnProperty(e)||t[e]},r.properties={},r.parentClasses={},r})(),Gn=(function(){function r(t,e,i,n){i===void 0&&(i=null),n===void 0&&(n=null),this.name=t,this.creator=i,this.parentName=n,t=t.toLowerCase(),this.isCustomValue=!i&&t!=="survey",this.parentName&&(this.parentName=this.parentName.toLowerCase(),Ie.addClass(t,this.parentName),i&&this.makeParentRegularClass()),this.properties=new Array;for(var o=0;o<e.length;o++)this.createProperty(e[o],this.isCustom)}return r.prototype.find=function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].name==t)return this.properties[e];return null},r.prototype.findProperty=function(t){return this.fillAllProperties(),this.hashProperties[t]},r.prototype.getAllProperties=function(){return this.fillAllProperties(),this.allProperties},r.prototype.getRequiredProperties=function(){if(this.requiredProperties)return this.requiredProperties;this.requiredProperties=[];for(var t=this.getAllProperties(),e=0;e<t.length;e++)t[e].isRequired&&this.requiredProperties.push(t[e]);return this.requiredProperties},r.prototype.resetAllProperties=function(){this.allProperties=void 0,this.requiredProperties=void 0,this.hashProperties=void 0;for(var t=V.getChildrenClasses(this.name),e=0;e<t.length;e++)t[e].resetAllProperties()},Object.defineProperty(r.prototype,"isCustom",{get:function(){return this.isCustomValue},enumerable:!1,configurable:!0}),r.prototype.fillAllProperties=function(){var t=this;if(!this.allProperties){this.allProperties=[],this.hashProperties={};var e={};this.properties.forEach(function(o){return e[o.name]=o});var i=this.parentName?V.findClass(this.parentName):null;if(i){var n=i.getAllProperties();n.forEach(function(o){var s=e[o.name];s?(s.mergeWith(o),t.addPropCore(s)):t.addPropCore(o)})}this.properties.forEach(function(o){t.hashProperties[o.name]||t.addPropCore(o)})}},r.prototype.addPropCore=function(t){this.allProperties.push(t),this.hashProperties[t.name]=t,t.alternativeName&&(this.hashProperties[t.alternativeName]=t)},r.prototype.isOverridedProp=function(t){return!!this.parentName&&!!V.findProperty(this.parentName,t)},r.prototype.hasRegularChildClass=function(){if(this.isCustom){this.isCustomValue=!1;for(var t=0;t<this.properties.length;t++)this.properties[t].isCustom=!1;Ie.removeAllProperties(this.name),this.makeParentRegularClass()}},r.prototype.makeParentRegularClass=function(){if(this.parentName){var t=V.findClass(this.parentName);t&&t.hasRegularChildClass()}},r.prototype.createProperty=function(t,e){e===void 0&&(e=!1);var i=typeof t=="string"?t:t.name;if(i){var n=null,o=i.indexOf(r.typeSymbol);o>-1&&(n=i.substring(o+1),i=i.substring(0,o));var s=this.getIsPropertyNameRequired(i)||!!t.isRequired;i=this.getPropertyName(i);var a=new lt(this,i,s);if(n&&(a.type=n),typeof t=="object"){if(t.type&&(a.type=t.type),t.default!==void 0&&(a.defaultValue=t.default),t.defaultFunc!==void 0&&(a.defaultValueFunc=t.defaultFunc),w.isValueEmpty(t.isSerializable)||(a.isSerializable=t.isSerializable),w.isValueEmpty(t.isSerializableFunc)||(a.isSerializableFunc=t.isSerializableFunc),w.isValueEmpty(t.isLightSerializable)||(a.isLightSerializable=t.isLightSerializable),w.isValueEmpty(t.maxLength)||(a.maxLength=t.maxLength),t.displayName!==void 0&&(a.displayName=t.displayName),w.isValueEmpty(t.category)||(a.category=t.category),w.isValueEmpty(t.categoryIndex)||(a.categoryIndex=t.categoryIndex),w.isValueEmpty(t.nextToProperty)||(a.nextToProperty=t.nextToProperty),w.isValueEmpty(t.overridingProperty)||(a.overridingProperty=t.overridingProperty),w.isValueEmpty(t.visibleIndex)||(a.visibleIndex=t.visibleIndex),w.isValueEmpty(t.showMode)||(a.showMode=t.showMode),w.isValueEmpty(t.locationInTable)||(a.locationInTable=t.locationInTable),w.isValueEmpty(t.maxValue)||(a.maxValue=t.maxValue),w.isValueEmpty(t.minValue)||(a.minValue=t.minValue),w.isValueEmpty(t.dataList)||(a.dataList=t.dataList),w.isValueEmpty(t.isDynamicChoices)||(a.isDynamicChoices=t.isDynamicChoices),w.isValueEmpty(t.isBindable)||(a.isBindable=t.isBindable),w.isValueEmpty(t.isUnique)||(a.isUnique=t.isUnique),w.isValueEmpty(t.uniqueProperty)||(a.uniquePropertyName=t.uniqueProperty),w.isValueEmpty(t.isArray)||(a.isArray=t.isArray),Array.isArray(t.acceptedValues)&&(a.acceptedValues=t.acceptedValues),(t.visible===!0||t.visible===!1)&&(a.visible=t.visible),t.visibleIf&&(a.visibleIf=t.visibleIf),t.enableIf&&(a.enableIf=t.enableIf),t.onExecuteExpression&&(a.onExecuteExpression=t.onExecuteExpression),t.onPropertyEditorUpdate&&(a.onPropertyEditorUpdate=t.onPropertyEditorUpdate),t.readOnly===!0&&(a.readOnly=!0),t.availableInMatrixColumn===!0&&(a.availableInMatrixColumn=!0),t.choices){var l=typeof t.choices=="function"?t.choices:null,u=typeof t.choices!="function"?t.choices:null;a.setChoices(u,l)}t.baseValue&&a.setBaseValue(t.baseValue),t.onSerializeValue&&(a.onSerializeValue=t.onSerializeValue),t.onGetValue&&(a.onGetValue=t.onGetValue),t.onSetValue&&(a.onSetValue=t.onSetValue),t.onSettingValue&&(a.onSettingValue=t.onSettingValue),t.isLocalizable&&!t.serializationProperty&&(t.serializationProperty=Un(a.name)),t.serializationProperty&&(a.serializationProperty=t.serializationProperty,a.serializationProperty&&a.serializationProperty.indexOf("loc")==0&&(a.isLocalizable=!0)),t.isLocalizable&&(a.isLocalizable=t.isLocalizable),t.className&&(a.className=t.className),t.baseClassName&&(a.baseClassName=t.baseClassName,a.isArray=!0),a.isArray===!0&&(a.isArray=!0),t.classNamePart&&(a.classNamePart=t.classNamePart),t.alternativeName&&(a.alternativeName=t.alternativeName),t.oldName&&(a.oldName=t.oldName),t.layout&&(a.layout=t.layout),t.version&&(a.version=t.version),t.dependsOn&&this.addDependsOnProperties(a,t.dependsOn)}return this.properties.push(a),e&&!this.isOverridedProp(a.name)&&(a.isCustom=!0,Ie.addProperty(this.name,a)),a}},r.prototype.addDependsOnProperties=function(t,e){var i=Array.isArray(e)?e:[e];t.dependsOn=i;for(var n=0;n<i.length;n++)this.addDependsOnProperty(t,i[n])},r.prototype.addDependsOnProperty=function(t,e){var i=this.find(e);i||(i=V.findProperty(this.parentName,e)),i&&i.addDependedProperty(t.name)},r.prototype.getIsPropertyNameRequired=function(t){return t.length>0&&t[0]==r.requiredSymbol},r.prototype.getPropertyName=function(t){return this.getIsPropertyNameRequired(t)&&(t=t.slice(1)),t},r.requiredSymbol="!",r.typeSymbol=":",r})(),Jn=(function(){function r(){this.classes={},this.alternativeNames={},this.childrenClasses={},this.dynamicPropsCache={}}return r.prototype.getObjPropertyValue=function(t,e){t=t.getOriginalByProperty&&this.isNeedUseObjWrapper(t,e)?t.getOriginalByProperty(e):t;var i=V.findProperty(t.getType(),e);return i?this.getObjPropertyValueCore(t,i):t[e]},r.prototype.setObjPropertyValue=function(t,e,i){if(t[e]!==i)if(t[e]&&t[e].setJson)t[e].setJson(i,!0);else{if(Array.isArray(i)){for(var n=[],o=0;o<i.length;o++)n.push(i[o]);i=n}t[e]=i}},r.prototype.getObjPropertyValueCore=function(t,e){if(!e.isPropertySerializable(t)||e.isArray)return t[e.name];if(e.isLocalizable){var i=t.getLocalizableString(e.name);if(i)return i.isDefautlLocale?i.text:i.getValue(i.locale);if(e.serializationProperty)return t[e.serializationProperty].text}return t.getPropertyValue(e.name)},r.prototype.isNeedUseObjWrapper=function(t,e){if(!t.getDynamicProperties)return!0;var i=t.getDynamicProperties();if(!Array.isArray(i))return!1;for(var n=0;n<i.length;n++)if(i[n].name===e)return!0;return!1},r.prototype.addClass=function(t,e,i,n){i===void 0&&(i=null),n===void 0&&(n=null),t=t.toLowerCase();var o=new Gn(t,e,i,n);if(this.classes[t]=o,n){n=n.toLowerCase();var s=this.childrenClasses[n];s||(this.childrenClasses[n]=[]),this.childrenClasses[n].push(o)}return o},r.prototype.removeClass=function(t){var e=this.findClass(t);if(e&&(delete this.classes[e.name],e.parentName)){var i=this.childrenClasses[e.parentName].indexOf(e);i>-1&&this.childrenClasses[e.parentName].splice(i,1)}},r.prototype.overrideClassCreatore=function(t,e){this.overrideClassCreator(t,e)},r.prototype.overrideClassCreator=function(t,e){t=t.toLowerCase();var i=this.findClass(t);i&&(i.creator=e)},r.prototype.getProperties=function(t){var e=this.findClass(t);return e?e.getAllProperties():[]},r.prototype.getPropertiesByObj=function(t){var e=t&&t.getType?t.getType():void 0;if(!e)return[];for(var i=this.getProperties(e),n=this.getDynamicPropertiesByObj(t),o=n.length-1;o>=0;o--)this.findProperty(e,n[o].name)&&n.splice(o,1);return n.length===0?i:[].concat(i).concat(n)},r.prototype.addDynamicPropertiesIntoObj=function(t,e,i){var n=this;i.forEach(function(o){n.addDynamicPropertyIntoObj(t,e,o.name,!1),o.serializationProperty&&n.addDynamicPropertyIntoObj(t,e,o.serializationProperty,!0),o.alternativeName&&n.addDynamicPropertyIntoObj(t,e,o.alternativeName,!1)})},r.prototype.addDynamicPropertyIntoObj=function(t,e,i,n){var o={configurable:!0,get:function(){return e[i]}};n||(o.set=function(s){e[i]=s}),Object.defineProperty(t,i,o)},r.prototype.getDynamicPropertiesByObj=function(t,e){if(e===void 0&&(e=null),!t||!t.getType)return[];if(t.getDynamicProperties)return t.getDynamicProperties();if(!t.getDynamicType&&!e)return[];var i=e||t.getDynamicType();return this.getDynamicPropertiesByTypes(t.getType(),i)},r.prototype.getDynamicPropertiesByTypes=function(t,e,i){if(!e)return[];var n=e+"-"+t;if(this.dynamicPropsCache[n])return this.dynamicPropsCache[n];var o=this.getProperties(e);if(!o||o.length==0)return[];for(var s={},a=this.getProperties(t),l=0;l<a.length;l++)s[a[l].name]=a[l];var u=[];i||(i=[]);for(var f=0;f<o.length;f++){var y=o[f];if(this.canAddDynamicProp(y,s[y.name])){if(i.indexOf(y.name)>-1){var b=new lt(y.classInfo,y.name,y.isRequired);b.mergeWith(y),y=b,y.visible=!1,y.isSerializable=!1}u.push(y)}}return this.dynamicPropsCache[n]=u,u},r.prototype.canAddDynamicProp=function(t,e){if(!e)return!0;if(t===e)return!1;for(var i=t.classInfo;i&&i.parentName;){if(t=this.findProperty(i.parentName,t.name),t&&t===e)return!0;i=t?t.classInfo:void 0}return!1},r.prototype.hasOriginalProperty=function(t,e){return!!this.getOriginalProperty(t,e)},r.prototype.getOriginalProperty=function(t,e){var i=this.findProperty(t.getType(),e);if(i)return i;var n=t.getOriginalByProperty(e);return n!==t?this.findProperty(n.getType(),e):null},r.prototype.getProperty=function(t,e){var i=this.findProperty(t,e);if(!i)return i;var n=this.findClass(t);if(i.classInfo===n)return i;var o=new lt(n,i.name,i.isRequired);return o.mergeWith(i),n.properties.push(o),n.resetAllProperties(),o},r.prototype.findProperty=function(t,e){var i=this.findClass(t);return i?i.findProperty(e):null},r.prototype.findProperties=function(t,e){var i=new Array,n=this.findClass(t);if(!n)return i;for(var o=0;o<e.length;o++){var s=n.findProperty(e[o]);s&&i.push(s)}return i},r.prototype.getAllPropertiesByName=function(t){for(var e=new Array,i=this.getAllClasses(),n=0;n<i.length;n++)for(var o=this.findClass(i[n]),s=0;s<o.properties.length;s++)if(o.properties[s].name==t){e.push(o.properties[s]);break}return e},r.prototype.getAllClasses=function(){var t=new Array;for(var e in this.classes)t.push(e);return t},r.prototype.createClass=function(t,e){e===void 0&&(e=void 0),t=t.toLowerCase();var i=this.findClass(t);if(!i)return null;if(i.creator)return i.creator(e);for(var n=i.parentName;n;){if(i=this.findClass(n),!i)return null;if(n=i.parentName,i.creator)return this.createCustomType(t,i.creator,e)}return null},r.prototype.createCustomType=function(t,e,i){i===void 0&&(i=void 0),t=t.toLowerCase();var n=e(i),o=t,s=n.getTemplate?n.getTemplate():n.getType();return n.getType=function(){return o},n.getTemplate=function(){return s},Ie.createProperties(n),n},r.prototype.getChildrenClasses=function(t,e){e===void 0&&(e=!1),t=t.toLowerCase();var i=[];return this.fillChildrenClasses(t,e,i),i},r.prototype.getRequiredProperties=function(t){var e=this.findClass(t);if(!e)return[];for(var i=e.getRequiredProperties(),n=[],o=0;o<i.length;o++)n.push(i[o].name);return n},r.prototype.addProperties=function(t,e){t=t.toLowerCase();for(var i=this.findClass(t),n=0;n<e.length;n++)this.addCustomPropertyCore(i,e[n])},r.prototype.addProperty=function(t,e){return this.addCustomPropertyCore(this.findClass(t),e)},r.prototype.addCustomPropertyCore=function(t,e){if(!t)return null;var i=t.createProperty(e,!0);return i&&(this.clearDynamicPropsCache(t),t.resetAllProperties()),i},r.prototype.removeProperty=function(t,e){var i=this.findClass(t);if(!i)return!1;var n=i.find(e);n&&(this.clearDynamicPropsCache(i),this.removePropertyFromClass(i,n),i.resetAllProperties(),Ie.removeProperty(i.name,e))},r.prototype.clearDynamicPropsCache=function(t){this.dynamicPropsCache={}},r.prototype.removePropertyFromClass=function(t,e){var i=t.properties.indexOf(e);i<0||t.properties.splice(i,1)},r.prototype.fillChildrenClasses=function(t,e,i){var n=this.childrenClasses[t];if(n)for(var o=0;o<n.length;o++)(!e||n[o].creator)&&i.push(n[o]),this.fillChildrenClasses(n[o].name,e,i)},r.prototype.findClass=function(t){t=t.toLowerCase();var e=this.classes[t];if(!e){var i=this.alternativeNames[t];if(i&&i!=t)return this.findClass(i)}return e},r.prototype.isDescendantOf=function(t,e){if(!t||!e)return!1;t=t.toLowerCase(),e=e.toLowerCase();var i=this.findClass(t);if(!i)return!1;var n=i;do{if(n.name===e)return!0;n=this.classes[n.parentName]}while(n);return!1},r.prototype.addAlterNativeClassName=function(t,e){this.alternativeNames[e.toLowerCase()]=t.toLowerCase()},r.prototype.generateSchema=function(t){t===void 0&&(t=void 0),t||(t="survey");var e=this.findClass(t);if(!e)return null;var i={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{locstring:this.generateLocStrClass()}};return this.generateSchemaProperties(e,i,i.definitions,!0),i},r.prototype.generateLocStrClass=function(){var t={},e=V.findProperty("survey","locale");if(e){var i=e.getChoices(null);Array.isArray(i)&&(i.indexOf("en")<0&&i.splice(0,0,"en"),i.splice(0,0,"default"),i.forEach(function(n){n&&(t[n]={type:"string"})}))}return{$id:"locstring",type:"object",properties:t}},r.prototype.generateSchemaProperties=function(t,e,i,n){if(t){var o=e.properties,s=[];t.name==="question"&&(o.type={type:"string"},s.push("type"));for(var a=0;a<t.properties.length;a++){var l=t.properties[a];l.isSerializable!==!1&&(t.parentName&&V.findProperty(t.parentName,l.name)||(o[l.name]=this.generateSchemaProperty(l,i,n),l.isRequired&&s.push(l.name)))}s.length>0&&(e.required=s)}},r.prototype.generateSchemaProperty=function(t,e,i){var n;if(t.isLocalizable)return{oneOf:[{type:"string"},{$ref:this.getChemeRefName("locstring",i)}]};var o=t.schemaType(),s=t.schemaRef(),a={};if(o&&(a.type=o),t.hasChoices&&t.name!=="locale"){var l=t.getChoices(null);Array.isArray(l)&&l.length>0&&(a.enum=this.getChoicesValues(l))}if(s){if(o==="array")if(t.className==="string")a.items={type:t.className};else{var u={$ref:this.getChemeRefName(t.className,i)};!C.serialization.itemValueSerializeAsObject&&this.isDescendantOf(t.className,"itemvalue")?a.items={anyOf:[u,{type:"string"},{type:"number"}]}:a.items=u}else{var f=this.getChildrenClasses(t.className,!0);if(f.length>0)for(a.oneOf=[{$ref:this.getChemeRefName(t.className,i)}],n=0;n<f.length;n++)a.oneOf.push({$ref:this.getChemeRefName(f[n].name,i)}),this.generateChemaClass(f[n].name,e,!1);else a.$ref=this.getChemeRefName(s,i)}this.generateChemaClass(t.className,e,!1)}if(t.baseClassName){var y=this.getChildrenClasses(t.baseClassName,!0);for(t.baseClassName=="question"&&y.push(this.findClass("panel")),a.items={anyOf:[]},n=0;n<y.length;n++){var b=y[n].name;a.items.anyOf.push({$ref:this.getChemeRefName(b,i)}),this.generateChemaClass(b,e,!1)}}return a},r.prototype.getChemeRefName=function(t,e){return e?"#/definitions/"+t:t},r.prototype.generateChemaClass=function(t,e,i){if(!e[t]){var n=this.findClass(t);if(n){var o=!!n.parentName&&n.parentName!="base";o&&this.generateChemaClass(n.parentName,e,i);var s={type:"object",$id:t};e[t]=s;var a={properties:{}};this.generateSchemaProperties(n,a,e,i),o?s.allOf=[{$ref:this.getChemeRefName(n.parentName,i)},{properties:a.properties}]:s.properties=a.properties,Array.isArray(a.required)&&(s.required=a.required)}}},r.prototype.getChoicesValues=function(t){var e=new Array;return t.forEach(function(i){typeof i=="object"&&i.value!==void 0?e.push(i.value):e.push(i)}),e},r})(),Ke=(function(){function r(t,e){this.type=t,this.message=e,this.description="",this.at=-1,this.end=-1}return r.prototype.getFullDescription=function(){return this.message+(this.description?`
`+this.description:"")},r})(),$n=(function(r){P(t,r);function t(e,i){var n=r.call(this,"unknownproperty","Unknown property in class '"+i+"': '"+e+"'.")||this;return n.propertyName=e,n.className=i,n}return t})(Ke),di=(function(r){P(t,r);function t(e,i,n){var o=r.call(this,i,n)||this;return o.baseClassName=e,o.type=i,o.message=n,o}return t})(Ke),Kn=(function(r){P(t,r);function t(e,i){var n=r.call(this,i,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+e+"'.")||this;return n.propertyName=e,n.baseClassName=i,n}return t})(di),Yn=(function(r){P(t,r);function t(e,i){var n=r.call(this,i,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+e+"'.")||this;return n.propertyName=e,n.baseClassName=i,n}return t})(di),Xn=(function(r){P(t,r);function t(e,i){var n=r.call(this,"requiredproperty","The property '"+e+"' is required in class '"+i+"'.")||this;return n.propertyName=e,n.className=i,n}return t})(Ke),ua=(function(r){P(t,r);function t(e,i){var n=r.call(this,"arrayproperty","The property '"+e+"' should be an array in '"+i+"'.")||this;return n.propertyName=e,n.className=i,n}return t})(Ke),ca=(function(r){P(t,r);function t(e,i){var n=r.call(this,"incorrectvalue","The property value: '"+i+"' is incorrect for property '"+e.name+"'.")||this;return n.property=e,n.value=i,n}return t})(Ke),le=(function(){function r(){this.errors=new Array,this.lightSerializing=!1}return Object.defineProperty(r,"metaData",{get:function(){return r.metaDataValue},enumerable:!1,configurable:!0}),r.prototype.toJsonObject=function(t,e){return this.toJsonObjectCore(t,null,e)},r.prototype.toObject=function(t,e,i){this.toObjectCore(t,e,i);var n=this.getRequiredError(e,t);n&&this.addNewError(n,t,e)},r.prototype.toObjectCore=function(t,e,i){if(t){var n=null,o=void 0,s=!0;if(e.getType&&(o=e.getType(),n=V.getProperties(o),s=!!o&&!V.isDescendantOf(o,"itemvalue")),!!n){e.startLoadingFromJson&&e.startLoadingFromJson(t),n=this.addDynamicProperties(e,t,n),this.options=i;var a={};a[r.typePropertyName]=!0;var l={};for(var u in t)this.setPropertyValueToObj(t,e,u,n,a,l,o,s,i);this.options=void 0,e.endLoadingFromJson&&e.endLoadingFromJson()}}},r.prototype.setPropertyValueToObj=function(t,e,i,n,o,s,a,l,u){var f=this;if(!o[i]){if(i===r.positionPropertyName){e[i]=t[i];return}var y=this.findProperty(n,i);if(!y&&l&&this.addNewError(new $n(i.toString(),a),t,e),y){var b=y.dependsOn;Array.isArray(b)&&(s[i]=!0,b.forEach(function(E){s[E]||f.setPropertyValueToObj(t,e,E,n,o,s,a,!1,u)})),this.valueToObj(t[i],e,y,t,u),o[i]=!0}}},r.prototype.toJsonObjectCore=function(t,e,i){if(!t||!t.getType)return t;if(!t.isSurvey&&typeof t.getData=="function")return t.getData(i);var n={};e!=null&&!e.className&&(n[r.typePropertyName]=e.getObjType(t.getType()));var o=i===!0;return(!i||i===!0)&&(i={}),o&&(i.storeDefaults=o),i.storeLocaleStrings===!1&&(i.locales=void 0),this.propertiesToJson(t,V.getProperties(t.getType()),n,i),this.propertiesToJson(t,this.getDynamicProperties(t),n,i),n},r.prototype.getDynamicProperties=function(t){return V.getDynamicPropertiesByObj(t)},r.prototype.addDynamicProperties=function(t,e,i){if(!t.getDynamicPropertyName&&!t.getDynamicProperties)return i;if(t.getDynamicPropertyName){var n=t.getDynamicPropertyName();if(!n)return i;n&&e[n]&&(t[n]=e[n])}var o=this.getDynamicProperties(t);return o.length===0?i:[].concat(i).concat(o)},r.prototype.propertiesToJson=function(t,e,i,n){for(var o=0;o<e.length;o++)this.valueToJson(t,i,e[o],n)},r.prototype.valueToJson=function(t,e,i,n){n||(n={}),this.isProretyCanBeStoredByOptions(i,n)&&(!i.isPropertySerializable(t)||i.isLightSerializable===!1&&this.lightSerializing||n.version&&!i.isAvailableInVersion(n.version)||this.valueToJsonCore(t,e,i,n))},r.prototype.isProretyCanBeStoredByOptions=function(t,e){var i=e.storeLocaleStrings;return t.isArray||t.isUnique||t.name==="name"?!0:i===!1?!t.isLocalizable:i==="stringsOnly"?t.isLocalizable||!!t.serializationProperty:!0},r.prototype.valueToJsonCore=function(t,e,i,n){var o=i.getSerializedProperty(t,n.version);if(o&&o!==i){this.valueToJsonCore(t,e,o,n);return}var s=i.getSerializableValue(t,n.storeDefaults,n);if(s!==void 0){if(this.isValueArray(s)){for(var a=[],l=0;l<s.length;l++)a.push(this.toJsonObjectCore(s[l],i,n));n.storeLocaleStrings==="stringsOnly"&&this.reduceLocaleArray(a),s=a.length>0?a:null}else s=this.toJsonObjectCore(s,i,n);if(s!=null){var u=i.getSerializedName(n.version);(!V.onSerializingProperty||!V.onSerializingProperty(t,i,s,e))&&(e[u]=this.removePosOnValueToJson(i,s))}}},r.prototype.reduceLocaleArray=function(t){for(var e=t.length-1,i=function(){var o=t[e];if(o&&typeof o=="object"){var s=Object.keys(o).length;if(["type","name","value"].forEach(function(a){o[a]!==void 0&&s--}),s>0)return"break"}e--};e>=0;){var n=i();if(n==="break")break}t.splice(e+1)},r.prototype.valueToObj=function(t,e,i,n,o){if(t!=null){if(this.removePos(i,t),i!=null&&i.hasToUseSetValue){i.setValue(e,t,this);return}if(i.isArray&&!Array.isArray(t)&&t){t=[t];var s=n&&i.alternativeName&&n[i.alternativeName]?i.alternativeName:i.name;this.addNewError(new ua(s,e.getType()),n||t,e)}if(this.isValueArray(t)){this.valueToArray(t,e,i.name,i,o);return}var a=this.createNewObj(t,i);a.newObj&&(this.toObjectCore(t,a.newObj,o),t=a.newObj),a.error||(i!=null?(i.setValue(e,t,this),o&&o.validatePropertyValues&&(i.validateValue(e,t)||this.addNewError(new ca(i,t),n,e))):e[i.name]=t)}},r.prototype.removePosOnValueToJson=function(t,e){return!t.isCustom||!e||this.removePosFromObj(e),e},r.prototype.removePos=function(t,e){!t||!t.type||t.type.indexOf("value")<0||this.removePosFromObj(e)},r.prototype.removePosFromObj=function(t){if(!(!t||typeof t.getType=="function")){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.removePosFromObj(t[e]);if(typeof t=="object"){t[r.positionPropertyName]&&delete t[r.positionPropertyName];for(var i in t)this.removePosFromObj(t[i])}}},r.prototype.isValueArray=function(t){return t&&Array.isArray(t)},r.prototype.createNewObj=function(t,e){var i={newObj:null,error:null},n=this.getClassNameForNewObj(t,e);return i.newObj=n?V.createClass(n,t):null,i.error=this.checkNewObjectOnErrors(i.newObj,t,e,n),i},r.prototype.getClassNameForNewObj=function(t,e){var i=e!=null&&e.className?e.className:void 0;if(i||(i=t[r.typePropertyName]),!i)return i;i=i.toLowerCase();var n=e.classNamePart;return n&&i.indexOf(n)<0&&(i+=n),i},r.prototype.checkNewObjectOnErrors=function(t,e,i,n){var o=null;return t?o=this.getRequiredError(t,e):i.baseClassName&&(n?o=new Yn(i.name,i.baseClassName):o=new Kn(i.name,i.baseClassName)),o&&this.addNewError(o,e,t),o},r.prototype.getRequiredError=function(t,e){if(!t.getType)return null;var i=t.getType();if(V.isDescendantOf(i,"itemvalue"))return null;var n=V.findClass(i);if(!n)return null;var o=n.getRequiredProperties();if(!Array.isArray(o))return null;for(var s=0;s<o.length;s++){var a=o[s];if(w.isValueEmpty(a.defaultValue)&&!e[a.name])return new Xn(a.name,t.getType())}return null},r.prototype.addNewError=function(t,e,i){if(t.jsonObj=e,t.element=i,this.errors.push(t),!!e){var n=e[r.positionPropertyName];n&&(t.at=n.start,t.end=n.end)}},r.prototype.valueToArray=function(t,e,i,n,o){if(!(e[i]&&!this.isValueArray(e[i]))){e[i]&&t.length>0&&e[i].splice(0,e[i].length);var s=e[i]?e[i]:[];this.addValuesIntoArray(t,s,n,o),e[i]||(e[i]=s)}},r.prototype.addValuesIntoArray=function(t,e,i,n){for(var o=0;o<t.length;o++){var s=this.createNewObj(t[o],i);s.newObj?(t[o].name&&(s.newObj.name=t[o].name),t[o].valueName&&(s.newObj.valueName=t[o].valueName.toString()),e.push(s.newObj),this.toObjectCore(t[o],s.newObj,n)):s.error||e.push(t[o])}},r.prototype.findProperty=function(t,e){if(!t)return null;for(var i=0;i<t.length;i++){var n=t[i];if(n.name==e||n.alternativeName==e)return n}return null},r.typePropertyName="type",r.positionPropertyName="pos",r.metaDataValue=new Jn,r})(),V=le.metaData,Re=(function(){function r(){}return r.prototype.getValueInfo=function(t){var e=this.getValueInfoCore(t);return!e.isFound&&e.value===void 0&&t.name.endsWith(".length")&&(e.isFound=!0,e.value=0),e},r.prototype.getValueInfoCore=function(t){var e=t.name,i=t.context,n=this.run(t.name,i,t.createObjects);if((!n||!n.isFound)&&i&&i.getRootObj){var o=i.getRootObj();if(o)return t.context=o.getValueGetterContext(),this.getValueInfo(t)}var s={isFound:!1,value:void 0};return!n||!n.isFound||(s.isFound=!0,s.value=n.value,s.strictCompare=n.requireStrictCompare,s.propObj=n.propObj,s.propName=n.propName,n.context&&(t.isText&&n.context.getTextValue&&(s.value=n.context.getTextValue(e,s.value,t.isDisplayValue)),n.context.getQuestion&&(s.question=n.context.getQuestion()))),s},r.prototype.getValue=function(t,e,i,n){var o=this.getValueInfo({name:t,context:e,isText:i,isDisplayValue:n});return o.isFound?o.value:void 0},r.prototype.getDisplayValue=function(t,e,i){return i===void 0&&(i=!0),this.getValue(t,e,!0,i)},r.prototype.isAnyKeyChanged=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(n){var o=n.toLowerCase();if(t.hasOwnProperty(n)||n!==o&&t.hasOwnProperty(o))return!0;var s=this.getFirstNameByKeys(t,n);if(s){if(n===s)return!0;var a=t[s];if(a!=null){if(!a.hasOwnProperty("oldValue")||!a.hasOwnProperty("newValue"))return!0;var l={};l[s]=a.oldValue;var u=this.getValueFromObject(l,n);l[s]=a.newValue;var f=this.getValueFromObject(l,n);if(!w.isTwoValueEquals(u,f,!1,!1,!1))return!0}}}}return!1},r.prototype.getFirstNameByKeys=function(t,e){for(var i=this.getPath(e),n="",o=0;o<i.length;o++)if(n+=(o>0?".":"")+i[o].name,t.hasOwnProperty(n))return n;return""},r.prototype.getValueFromObject=function(t,e){var i=this.getValueInfo({name:e,context:new fe(t)});return i.isFound?i.value:void 0},r.prototype.run=function(t,e,i){if(e){var n=this.getPath(t),o=n.length>0&&n[0].name[0]==="$";o&&(n[0].name=n[0].name.substring(1));var s=e.getValue({path:n,isRoot:!0,index:-1,createObjects:i,isProperty:o});return s?.isFound?s:void 0}},r.prototype.getPath=function(t){for(var e=[],i=t.split("."),n=0;n<i.length;n++)e.push(this.getValueItem(i[n]));return e},r.prototype.getValueItem=function(t){var e=void 0;if(t.lastIndexOf("]")===t.length-1){var i=t.lastIndexOf("[");if(i>-1){var n=t.substring(i+1,t.length-1);e=w.getNumber(n),isNaN(e)&&(e=void 0),e!==void 0&&(t=t.substring(0,i))}}var o={name:t};return e!==void 0&&(o.index=e),o},r})(),Ne=(function(){function r(){}return r.prototype.getValue=function(t){for(var e=0,i=t.path,n={isFound:!1,value:this.getInitialvalue(),context:this};e<i.length;){if(e=this.checkValueByPath(i,e,n),!n.isFound)return;if(t.isProperty){if(n.obj)return new Oe(n.obj).getValue({path:i.slice(1),isRoot:!1,index:-1,isProperty:!0});if(!n.context)return}var o=i[e];if(e++,n.context!==this&&n.context)return n.context.getValue({path:i.slice(e),isRoot:!1,index:o.index,createObjects:t.createObjects,isProperty:t.isProperty});if(o.index!==void 0&&(this.updateItemByIndex(o.index,n),!n.isFound))return}return n},r.prototype.isSearchNameRevert=function(){return!1},r.prototype.checkValueByPath=function(t,e,i){var n=this.isSearchNameRevert(),o=e,s=this.getMaxIndexByPath(t,e);for(i.isFound=!1,n&&(e=s);!i.isFound&&e<=s&&e>=o;){var a=this.getNameByPath(t,o,e+1);if(this.updateValueByItem(a,i),i.isFound)break;e+=n?-1:1}return e},r.prototype.getNameByPath=function(t,e,i){for(var n="",o=e;o<i;o++)o>e&&(n+="."),n+=t[o].name;return n},r.prototype.getMaxIndexByPath=function(t,e){for(var i=e;i<t.length&&t[i].index===void 0;)i++;return i<t.length?i:t.length-1},r.prototype.getTextValue=function(t,e,i){return i?e==null?"":e.toString():e},r.prototype.getInitialvalue=function(){},r.prototype.updateValueByItem=function(t,e){},r.prototype.updateItemByIndex=function(t,e){},r})(),fe=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.variables=e,i}return t.prototype.getInitialvalue=function(){return this.variables},t.prototype.isSearchNameRevert=function(){return!0},t.prototype.updateValueByItem=function(e,i){var n=this.getValueByItemCore(i.value,e);i.isFound=n!==void 0,i.isFound&&(i.value=n)},t.prototype.updateItemByIndex=function(e,i){var n=i.value;i.isFound=!1,Array.isArray(n)&&(e<0&&(e=n.length+e),e>-1&&e<n.length&&(i.value=n[e],i.isFound=!0))},t.prototype.getValueByItemCore=function(e,i){if(!(!e||!i)){var n=i.toLowerCase();if(i==="length"&&(Array.isArray(e)||typeof e=="string"))return e.length;if(typeof e=="object"){var o=n[0],s=i[0].toLocaleUpperCase();for(var a in e){var l=a[0];if(l===o||l===s){var u=a.toLowerCase();if(u==n)return e[a]}}}}},t})(Ne),Oe=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.obj=e,i}return t.prototype.getValue=function(e){this.lastObj=void 0,this.lastName=void 0;var i=r.prototype.getValue.call(this,e);return i?.isFound&&(i.propObj=this.lastObj,i.propName=this.lastName),i},t.prototype.getValueByItemCore=function(e,i){if(!(!e||!i))return this.lastObj=e,this.lastName=i,e[i]},t})(fe),gi=(function(r){P(t,r);function t(e,i){var n=r.call(this,e)||this;return n.second=i,n}return t.prototype.getValue=function(e){var i=r.prototype.getValue.call(this,e);return!this.second||i?.isFound?i:this.second.getValue(e)},t})(fe),yi=(function(){function r(t){this.properties=null,this.asyncValues={},this.contextValue=t}return Object.defineProperty(r.prototype,"context",{get:function(){return this.contextValue},enumerable:!1,configurable:!0}),r.prototype.hasValue=function(t){return this.context?this.getValueInfoByContext(t).isFound:!1},r.prototype.getValue=function(t){if(this.context)return this.getValueInfoByContext(t).value},r.prototype.getValueInfoByContext=function(t){return new Re().getValueInfo({name:t,context:this.context,isText:!1})},r.prototype.getValueInfo=function(t){if(this.context){var e=this.getValueInfoByContext(t.name);if(e.isFound){var i=this.context.getObj?this.context.getObj():null;i&&e.propObj&&e.propObj instanceof U&&i.addPropertyDependency(e.propObj,e.propName)}t.value=e.value,t.hasValue=e.isFound,t.strictCompare=e.strictCompare;return}return{hasValue:!1}},r})(),Ee=(function(){function r(){}return r.disposedObjectChangedProperty=function(t,e){r.warn('An attempt to set a property "'+t+'" of a disposed object "'+e+'"')},r.inCorrectQuestionValue=function(t,e){var i=JSON.stringify(e,null,3);r.warn("An attempt to assign an incorrect value"+i+' to the following question: "'+t+'"')},r.warn=function(t){console.warn(t)},r.error=function(t){console.error(t)},r})(),W=(function(){function r(){this.functionHash={},this.functionCache={}}return r.prototype.register=function(t,e,i,n){this.clearCache(t),this.functionHash[t]={name:t,func:e,isAsync:!!i,useCache:!!n}},r.prototype.unregister=function(t){delete this.functionHash[t]},r.prototype.hasFunction=function(t){return!!this.functionHash[t]},r.prototype.isAsyncFunction=function(t){var e=this.functionHash[t];return!!e&&e.isAsync},r.prototype.clear=function(){this.functionHash={},this.clearCache()},r.prototype.clearCache=function(t){t?delete this.functionCache[t]:this.functionCache={}},r.prototype.getAll=function(){var t=[];for(var e in this.functionHash)t.push(e);return t.sort()},r.prototype.run=function(t,e,i,n){i||(i={});var o=this.functionHash[t];if(!o)return Ee.warn(this.getUnknownFunctionErrorText(t,i)),null;var s=this.getCachedValue(o,e,i.survey);if(s){var a=s.result;return i.returnResult&&i.returnResult(a),a}var l={func:o.func},u=function(){if(y==="returnResult"&&o.useCache){var E=f;l[y]=function(S){E.addToCache(o,e,i,S),i.returnResult(S)}}else l[y]=i[y]},f=this;for(var y in i)u();this.surveyCachedValues=o.useCache?[]:void 0,this.objsCachedValues=o.useCache?[]:void 0;var b=l.func(e,n);return i.surveyCachedValues=this.surveyCachedValues,i.objsCachedValues=this.objsCachedValues,this.surveyCachedValues=void 0,this.objsCachedValues=void 0,o.isAsync||this.addToCache(o,e,i,b),b},r.prototype.addSurveyCachedValue=function(t,e,i){this.surveyCachedValues&&this.surveyCachedValues.push({name:t,value:e,isVariable:!!i})},r.prototype.addObjectCachedValue=function(t,e,i){this.objsCachedValues&&(this.isSurveyObjectValue(i)||this.objsCachedValues.push({obj:t,name:e,value:i}))},r.prototype.isSurveyObjectValue=function(t){var e=Array.isArray(t)&&t.length>0?t[0]:t;return!!e&&typeof e=="object"&&typeof e.getType=="function"},r.prototype.addToCache=function(t,e,i,n){if(t.useCache){var o=i.surveyCachedValues,s=i.objsCachedValues;if(!(e.length===0&&o.length===0&&s.length===0)){var a=this.functionCache[t.name];Array.isArray(a)||(a=[],this.functionCache[t.name]=a),a.push({parameters:e,result:n,surveyValues:o,objectValues:s})}}},r.prototype.getCachedValue=function(t,e,i){if(!(t&&!t.useCache)){var n=this.functionCache[t.name];if(Array.isArray(n))for(var o=n.length-1;o>=0;o--){var s=n[o];if(this.hasDisposedObj(s.objectValues)){n.splice(o,1);continue}if(this.isCachedItemValid(s,e,i))return{result:s.result}}}},r.prototype.isCachedItemValid=function(t,e,i){if(!w.isTwoValueEquals(t.parameters,e))return!1;var n=t.surveyValues;if(Array.isArray(n)&&n.length>0){if(!i)return!1;for(var o=0;o<n.length;o++){var s=n[o],a=s.name,l=s.value,u=s.isVariable?i.getVariable(a):i.getValue(a);if(!w.isTwoValueEquals(u,l))return!1}}var f=t.objectValues;if(Array.isArray(f)&&f.length>0)for(var o=0;o<f.length;o++){var y=f[o],b=y.obj,E=y.name,u=b.getPropertyValueWithoutDefault(E);if(!w.isTwoValueEquals(u,y.value)&&(y.value!==void 0||u!==b.getDefaultPropertyValue(E)))return!1}return!0},r.prototype.hasDisposedObj=function(t){if(!Array.isArray(t))return!1;for(var e=0;e<t.length;e++){var i=t[e].obj;if(i.isDisposed===!0)return!0}return!1},r.prototype.getUnknownFunctionErrorText=function(t,e){return"Unknown function name: '"+t+"'."+Ci.getQuestionErrorText(e)},r.Instance=new r,r})();function pa(r){W.Instance.register(r.name,r.func,r.isAsync,r.useCache)}function ke(r,t){if(r!=null)if(Array.isArray(r))for(var e=0;e<r.length;e++)ke(r[e],t);else w.isNumber(r)&&(r=w.getNumber(r)),t.push(r)}function Zn(r){var t=[];ke(r,t);for(var e=0,i=0;i<t.length;i++)e=w.correctAfterPlusMinis(e,t[i],e+t[i]);return e}W.Instance.register("sum",Zn);function er(r,t){var e=[];ke(r,e);for(var i=void 0,n=0;n<e.length;n++)i===void 0&&(i=e[n]),t?i>e[n]&&(i=e[n]):i<e[n]&&(i=e[n]);return i}function ha(r){return er(r,!0)}W.Instance.register("min",ha);function fa(r){return er(r,!1)}W.Instance.register("max",fa);function da(r){var t=[];return ke(r,t),t.length}W.Instance.register("count",da);function ga(r){var t=[];ke(r,t);var e=Zn(r);return t.length>0?e/t.length:0}W.Instance.register("avg",ga);function ya(r){var t=[];if(ke(r,t),t.length>0){var e=t[0],i=t[1]||0;if(w.isNumber(e)&&w.isNumber(i)){var n=Math.pow(10,i),o=e*n*(1+Number.EPSILON);return Math.round(o)/n}}return NaN}W.Instance.register("round",ya);function ma(r){var t=[];if(ke(r,t),t.length>0){var e=t[0],i=t[1]||-1;if(w.isNumber(e)&&w.isNumber(i)){var n=new RegExp("^-?\\d+(?:.\\d{0,"+i+"})?");return Number(e.toString().match(n)[0])}}return NaN}W.Instance.register("trunc",ma);function va(r,t){if(r.length<2||r.length>3)return null;var e=r[0];if(!e||!Array.isArray(e)&&!Array.isArray(Object.keys(e)))return null;var i=r[1];if(typeof i!="string"&&!(i instanceof String))return null;var n=r.length>2?r[2]:void 0;if(typeof n!="string"&&!(n instanceof String)&&(n=void 0),!n){var o=Array.isArray(t)&&t.length>2?t[2]:void 0;o&&o.toString()&&(n=o.toString())}return{data:e,name:i,expression:n}}function ba(r){return typeof r=="string"?w.isNumber(r)?w.getNumber(r):void 0:r}function tr(r,t,e,i,n,o,s){if(!r||w.isValueEmpty(r[t])||o&&!o.runValues(r,s))return e;var a=n?ba(r[t]):1;return i(e,a)}function Ot(r,t,e,i,n){n===void 0&&(n=!0);var o=va(t,e);if(o){var s=o.expression?new ge(o.expression):void 0;s&&s.isAsync&&(s=void 0);var a=void 0;if(Array.isArray(o.data))for(var l=0;l<o.data.length;l++)a=tr(o.data[l],o.name,a,i,n,s,r);else for(var u in o.data)a=tr(o.data[u],o.name,a,i,n,s,r);return a}}function ut(r){var t;return{survey:r.survey,question:r.question,context:(t=r.survey)===null||t===void 0?void 0:t.getValueGetterContext()}}function Ca(r,t){var e=Ot(ut(this),r,t,function(i,n){return i==null&&(i=0),n==null||n==null?i:w.correctAfterPlusMinis(i,n,i+n)});return e!==void 0?e:0}W.Instance.register("sumInArray",Ca);function wa(r,t){return Ot(ut(this),r,t,function(e,i){return e==null?i:i==null||i==null||e<i?e:i})}W.Instance.register("minInArray",wa);function Pa(r,t){return Ot(ut(this),r,t,function(e,i){return e==null?i:i==null||i==null||e>i?e:i})}W.Instance.register("maxInArray",Pa);function Va(r,t){var e=Ot(ut(this),r,t,function(i,n){return i==null&&(i=0),n==null||n==null?i:i+1},!1);return e!==void 0?e:0}W.Instance.register("countInArray",Va);function Sa(r,t){var e=ut(this),i=function(o){return W.Instance.run(o,r,e,t)},n=i("countInArray");return n==0?0:i("sumInArray")/n}W.Instance.register("avgInArray",Sa);function xa(r){if(!Array.isArray(r)||r.length<2)return null;var t=r.length>2?r[2]:void 0;return r[0]?r[1]:t}W.Instance.register("iif",xa);function Ia(r){return!Array.isArray(r)||r.length<1||!r[0]?null:ne("function-getDate",r[0])}W.Instance.register("getDate",Ia);function ir(r,t,e){if(e==="days")return or([r,t]);var i=ne("function-dateDiffMonths",r),n=ne("function-dateDiffMonths",t),o=n.getFullYear()-i.getFullYear();e=e||"years";var s=o*12+n.getMonth()-i.getMonth();return n.getDate()<i.getDate()&&(s-=1),e==="months"?s:~~(s/12)}function Ea(r){return!Array.isArray(r)||r.length<1||!r[0]?null:ir(r[0],void 0,(r.length>1?r[1]:"")||"years")}W.Instance.register("age",Ea);function Ta(r){if(!Array.isArray(r)||r.length<2||!r[0]||!r[1])return null;var t=(r.length>2?r[2]:"")||"days",e=t==="hours"||t==="minutes"||t==="seconds",i=e?"days":t,n=ir(r[0],r[1],i);if(e){var o=ne("function-dateDiffMonths",r[0]),s=ne("function-dateDiffMonths",r[1]);(s.getHours()>o.getHours()||t!=="hours"&&s.getHours()===o.getHours()&&s.getMinutes()>o.getMinutes())&&(n-=1);var a=n*24+s.getHours()-o.getHours();if(t==="hours")return a;s.getMinutes()<o.getMinutes()&&(a-=1);var l=a*60+s.getMinutes()-o.getMinutes();return t==="minutes"?l:l*60+s.getSeconds()-o.getSeconds()}return n}W.Instance.register("dateDiff",Ta);function Ra(r){if(!Array.isArray(r)||r.length<2||!r[0]||!r[1])return null;var t=ne("function-dateAdd",r[0]),e=r[1],i=r[2]||"days";return i==="days"&&t.setDate(t.getDate()+e),i==="months"&&t.setMonth(t.getMonth()+e),i==="years"&&t.setFullYear(t.getFullYear()+e),i==="hours"&&t.setHours(t.getHours()+e),i==="minutes"&&t.setMinutes(t.getMinutes()+e),i==="seconds"&&t.setSeconds(t.getSeconds()+e),t}W.Instance.register("dateAdd",Ra);function nr(r){if(!r)return!1;for(var t=r.questions,e=0;e<t.length;e++)if(!t[e].validate(!1))return!1;return!0}function Oa(r){if(!r&&r.length<1||!r[0]||!this.survey)return!1;var t=r[0],e=this.survey.getPageByName(t);if(e||(e=this.survey.getPanelByName(t)),!e){var i=this.survey.getQuestionByName(t);if(!i||!Array.isArray(i.panels))return!1;if(r.length>1)r[1]<i.panels.length&&(e=i.panels[r[1]]);else{for(var n=0;n<i.panels.length;n++)if(!nr(i.panels[n]))return!1;return!0}}return nr(e)}W.Instance.register("isContainerReady",Oa);function Aa(){return this.survey&&this.survey.isDisplayMode}W.Instance.register("isDisplayMode",Aa);function Da(){return ne("function-currentDate")}W.Instance.register("currentDate",Da);function rr(r){var t=ne("function-today");return C.storeUtcDates?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0),Array.isArray(r)&&r.length==1&&t.setDate(t.getDate()+r[0]),t}W.Instance.register("today",rr);function La(r){if(!(r.length!==1||!r[0]))return ne("function-getYear",r[0]).getFullYear()}W.Instance.register("getYear",La);function Ma(){return ne("function-currentYear").getFullYear()}W.Instance.register("currentYear",Ma);function or(r){if(!Array.isArray(r)||r.length!==2||!r[0]||!r[1])return 0;var t=ne("function-diffDays",r[0]),e=ne("function-diffDays",r[1]),i=Math.abs(e-t);return Math.ceil(i/(1e3*60*60*24))}W.Instance.register("diffDays",or);function At(r,t){var e=rr(void 0);return t&&t[0]&&(e=ne("function-"+r,t[0])),e}function Fa(r){var t=At("year",r);return t.getFullYear()}W.Instance.register("year",Fa);function Na(r){var t=At("month",r);return t.getMonth()+1}W.Instance.register("month",Na);function ka(r){var t=At("day",r);return t.getDate()}W.Instance.register("day",ka);function Ba(r){var t=At("weekday",r);return t.getDay()}W.Instance.register("weekday",Ba);function sr(r,t){if(!(!r||!t)){for(var e=r.question;e&&e.parent;){var i=e.parent.getQuestionByName(t);if(i)return i;e=e.parentQuestion}for(var n=["row","panel","survey"],o=0;o<n.length;o++){var s=r[n[o]];if(s&&s.getQuestionByName){var i=s.getQuestionByName(t);if(i)return i}}return null}}function ar(r,t){return t.length>1&&!w.isValueEmpty(t[1])?r.getDisplayValue(!0,t[1]):r.displayValue}function _a(r){var t=this,e=sr(this,r[0]);if(!e){this.returnResult(void 0);return}if(e.isReady)this.returnResult(ar(e,r));else{var i=function(n,o){n.isReady&&(n.onReadyChanged.remove(i),t.returnResult(ar(n,r)))};e.onReadyChanged.add(i)}}W.Instance.register("displayValue",_a,!0);function Qa(r){if(!(r.length!==2||!r[0]||!r[1])){var t=sr(this,r[0]);return t?t[r[1]]:void 0}}W.Instance.register("propertyValue",Qa);function ja(r){if(r.length<2)return"";var t=r[0];if(!t||typeof t!="string")return"";var e=r[1];if(!w.isNumber(e))return"";var i=r.length>2?r[2]:void 0;return w.isNumber(i)?t.substring(e,i):t.substring(e)}W.Instance.register("substring",ja);function qa(r){if(!(r.length<1||!r[0]||!this.survey)){var t=this.survey.getQuestionByName(r[0]);if(!t)return"";var e=r.length>1?r[1]:void 0;if(e!=null){var i=t.getItemByValue(e);return i?t.getCommentValue(i):void 0}return t.getCommentValue(t.otherItem)||t.comment}}W.Instance.register("getComment",qa);var Ye=(function(){function r(){this._id=r.counter++}return Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.toString=function(t){return""},r.prototype.hasFunction=function(){return!1},r.prototype.hasAsyncFunction=function(){return!1},r.prototype.addToAsyncList=function(t){},r.prototype.addOperandsToList=function(t){t.push(this),this.addChildrenToList(t)},r.prototype.isEqual=function(t){return!!t&&t.getType()===this.getType()&&this.isContentEqual(t)},r.prototype.areOperatorsEquals=function(t,e){return!t&&!e||!!t&&t.isEqual(e)},r.prototype.addChildrenToList=function(t){},r.counter=1,r})(),lr=(function(r){P(t,r);function t(e,i,n,o){i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=!1);var s=r.call(this)||this;return s.operatorName=e,s.left=i,s.right=n,s.isArithmeticValue=o,o?s.consumer=de.binaryFunctions.arithmeticOp(e):s.consumer=de.binaryFunctions[e],s.consumer==null&&de.throwInvalidOperatorError(e),s}return Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return this.getIsOperandRequireStrict(this.left)||this.getIsOperandRequireStrict(this.right)},enumerable:!1,configurable:!0}),t.prototype.getIsOperandRequireStrict=function(e){return!!e&&e.requireStrictCompare},t.prototype.getType=function(){return"binary"},Object.defineProperty(t.prototype,"isArithmetic",{get:function(){return this.isArithmeticValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConjunction",{get:function(){return this.operatorName=="or"||this.operatorName=="and"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conjunction",{get:function(){return this.isConjunction?this.operatorName:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftOperand",{get:function(){return this.left},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightOperand",{get:function(){return this.right},enumerable:!1,configurable:!0}),t.prototype.isContentEqual=function(e){var i=e;return i.operator===this.operator&&this.areOperatorsEquals(this.left,i.left)&&this.areOperatorsEquals(this.right,i.right)},t.prototype.evaluateParam=function(e,i){return e==null?null:e.evaluate(i)},t.prototype.evaluate=function(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e),this.requireStrictCompare)},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var i=e(this);if(i)return i}return"("+de.safeToString(this.left,e)+" "+de.operatorToString(this.operatorName)+" "+de.safeToString(this.right,e)+")"},t.prototype.setVariables=function(e){this.left!=null&&this.left.setVariables(e),this.right!=null&&this.right.setVariables(e)},t.prototype.hasFunction=function(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()},t.prototype.addChildrenToList=function(e){this.left&&this.left.addOperandsToList(e),this.right&&this.right.addOperandsToList(e)},t.prototype.hasAsyncFunction=function(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)},t})(Ye),mi=(function(r){P(t,r);function t(e,i){var n=r.call(this)||this;return n.expressionValue=e,n.operatorName=i,n.consumer=de.unaryFunctions[i],n.consumer==null&&de.throwInvalidOperatorError(i),n}return Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"unary"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var i=e(this);if(i)return i}var n=de.operatorToString(this.operator),o=this.expression.toString(e);return this.isRigtOperator?o+" "+n:n+" "+o},Object.defineProperty(t.prototype,"isRigtOperator",{get:function(){var e=this.operatorName.toLowerCase();return e==="notempty"||e==="empty"},enumerable:!1,configurable:!0}),t.prototype.isContentEqual=function(e){var i=e;return i.operator==this.operator&&this.areOperatorsEquals(this.expression,i.expression)},t.prototype.hasFunction=function(){return this.expression.hasFunction()},t.prototype.addChildrenToList=function(e){this.expression.addOperandsToList(e)},t.prototype.hasAsyncFunction=function(){return this.expression.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.expression.addToAsyncList(e)},t.prototype.evaluate=function(e){var i=this.expression.evaluate(e);return this.consumer.call(this,i)},t.prototype.setVariables=function(e){this.expression.setVariables(e)},t})(Ye),Dt=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.values=e,i}return t.prototype.getType=function(){return"array"},t.prototype.toString=function(e,i){if(e===void 0&&(e=void 0),e){var n=e(this);if(n)return n}var o=this.values.map(function(s){return s.toString(e)}).join(", ");return i?o:"["+o+"]"},t.prototype.evaluate=function(e){return this.values.map(function(i){return i.evaluate(e)})},t.prototype.setVariables=function(e){this.values.forEach(function(i){i.setVariables(e)})},t.prototype.hasFunction=function(){return this.values.some(function(e){return e.hasFunction()})},t.prototype.addChildrenToList=function(e){this.values.forEach(function(i){i.addOperandsToList(e)})},t.prototype.hasAsyncFunction=function(){return this.values.some(function(e){return e.hasAsyncFunction()})},t.prototype.addToAsyncList=function(e){this.values.forEach(function(i){return i.addToAsyncList(e)})},t.prototype.isContentEqual=function(e){var i=e;if(i.values.length!==this.values.length)return!1;for(var n=0;n<this.values.length;n++)if(!i.values[n].isEqual(this.values[n]))return!1;return!0},t})(Ye),vi=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.value=e,i}return t.prototype.getType=function(){return"const"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var i=e(this);if(i)return i}return this.value===""?"''":this.value.toString()},Object.defineProperty(t.prototype,"correctValue",{get:function(){return this.getCorrectValue(this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(){return this.getCorrectValue(this.value)},t.prototype.setVariables=function(e){},t.prototype.getCorrectValue=function(e){if(!e||typeof e!="string")return e;if(de.isBooleanValue(e))return e.toLowerCase()==="true";if(e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1]))return e.substring(1,e.length-1);if(w.isNumber(e)){if(e[0]==="0"&&e.indexOf("0x")!=0){var i=e.length,n=i>1&&(e[1]==="."||e[1]===",");if(!n&&i>1||n&&i<2)return e}return w.getNumber(e)}return e},t.prototype.isBoolean=function(){return!this.value||typeof this.value!="string"?this.value===!0||this.value===!1:de.isBooleanValue(this.value)},t.prototype.isContentEqual=function(e){var i=e;return i.value==this.value},t.prototype.isQuote=function(e){return e=="'"||e=='"'},t})(Ye),ur=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.variableName=e,i.valueInfo={},i.useValueAsItIs=!1,i.variableName&&i.variableName.length>1&&i.variableName[0]===t.DisableConversionChar&&(i.variableName=i.variableName.substring(1),i.useValueAsItIs=!0),i}return Object.defineProperty(t,"DisableConversionChar",{get:function(){return C.expressionDisableConversionChar},set:function(e){C.expressionDisableConversionChar=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return this.valueInfo.strictCompare===!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"variable"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var i=e(this);if(i)return i}var n=this.useValueAsItIs?t.DisableConversionChar:"";return"{"+n+this.variableName+"}"},Object.defineProperty(t.prototype,"variable",{get:function(){return this.variableName},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(e){if(this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),!this.valueInfo.hasValue)return this.returnJSONObject(this.variableName);var i=this.valueInfo.value;return this.valueInfo.onProcessValue&&(i=this.valueInfo.onProcessValue(i)),this.getCorrectValue(i)},t.prototype.setVariables=function(e){e.push(this.variableName)},t.prototype.getCorrectValue=function(e){return this.useValueAsItIs?e:r.prototype.getCorrectValue.call(this,e)},t.prototype.isContentEqual=function(e){var i=e;return i.variable==this.variable},t.prototype.returnJSONObject=function(e){if(!e||e.length<2||e.indexOf(":")<1)return null;try{return JSON.parse("{"+e+"}")}catch{return null}},t})(vi),cr=(function(r){P(t,r);function t(e,i){var n=r.call(this)||this;return n.originalValue=e,n.parameters=i,Array.isArray(i)&&i.length===0&&(n.parameters=new Dt([])),n}return t.prototype.getType=function(){return"function"},Object.defineProperty(t.prototype,"functionName",{get:function(){return this.originalValue},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(e){var i=this.getAsynValue(e);return i?i.value:this.evaluateCore(e)},t.prototype.evaluateCore=function(e){var i=e.properties,n=this.parameters.evaluate(e);if(this.isAsyncFunction()){var o=this.id,s=e.asyncValues,a=e.onCompleteAsyncFunc;if(s&&a){var l=this;i=w.createCopy(e.properties),i.returnResult=function(f){s[o]={value:f},a(l)}}}var u=W.Instance.run(this.functionName,n,i,this.parameters.values);if(u instanceof Promise){u.then(function(f){i.returnResult(f)});return}return u},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var i=e(this);if(i)return i}return this.originalValue+"("+this.parameters.toString(e,!0)+")"},t.prototype.setVariables=function(e){this.parameters.setVariables(e)},t.prototype.isReady=function(e){return!!this.getAsynValue(e)},t.prototype.addChildrenToList=function(e){this.parameters.addOperandsToList(e)},t.prototype.getAsynValue=function(e){return e.asyncValues[this.id]},t.prototype.hasFunction=function(){return!0},t.prototype.hasAsyncFunction=function(){return this.isAsyncFunction()||this.parameters.hasAsyncFunction()},t.prototype.isAsyncFunction=function(){return W.Instance.isAsyncFunction(this.originalValue)},t.prototype.addToAsyncList=function(e){var i=void 0;if(this.isAsyncFunction()&&(i={operand:this}),this.parameters.hasAsyncFunction()){var n=new Array;this.parameters.addToAsyncList(n),n.forEach(function(o){return o.parent=i}),i||(i={}),i.children=n}i&&e.push(i)},t.prototype.isContentEqual=function(e){var i=e;return i.originalValue==this.originalValue&&this.areOperatorsEquals(i.parameters,this.parameters)},t})(Ye),de=(function(){function r(){}return r.throwInvalidOperatorError=function(t){throw new Error("Invalid operator: '"+t+"'")},r.safeToString=function(t,e){return t==null?"":t.toString(e)},r.toOperandString=function(t){return t&&!w.isNumber(t)&&!r.isBooleanValue(t)&&(t="'"+t+"'"),t},r.isBooleanValue=function(t){return!!t&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")},r.countDecimals=function(t){if(w.isNumber(t)&&Math.floor(t)!==t){var e=t.toString().split(".");return e.length>1&&e[1].length||0}return 0},r.plusMinus=function(t,e,i){var n=r.countDecimals(t),o=r.countDecimals(e);if(n>0||o>0){var s=Math.max(n,o);i=parseFloat(i.toFixed(s))}return i},r.isTwoValueEquals=function(t,e,i){return i===void 0&&(i=!0),t==="undefined"&&(t=void 0),e==="undefined"&&(e=void 0),w.isTwoValueEquals(t,e,i)},r.operatorToString=function(t){var e=r.signs[t];return e??t},r.convertValForDateCompare=function(t,e){if(e instanceof Date&&typeof t=="string"){var i=ne("expression-operand",t);return e.setMilliseconds(0),e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0||i.setHours(0,0,0),i}return typeof e=="string"&&t instanceof Date&&(e.length<17&&t.setSeconds(0,0),e.length<14&&t.setMinutes(0,0),e.length<11&&t.setHours(0,0)),t},r.unaryFunctions={empty:function(t){return w.isValueEmpty(t)},notempty:function(t){return!r.unaryFunctions.empty(t)},negate:function(t){return!t}},r.binaryFunctions={arithmeticOp:function(t){var e=function(i,n){return w.isValueEmpty(i)?typeof n=="number"?0:typeof i=="string"?i:typeof n=="string"?"":Array.isArray(n)?[]:0:i};return function(i,n){i=e(i,n),n=e(n,i);var o=r.binaryFunctions[t];return o==null?null:o.call(this,i,n)}},and:function(t,e){return t&&e},or:function(t,e){return t||e},plus:function(t,e){return w.sumAnyValues(t,e)},minus:function(t,e){return w.correctAfterPlusMinis(t,e,t-e)},mul:function(t,e){return w.correctAfterMultiple(t,e,t*e)},div:function(t,e){return e?t/e:null},mod:function(t,e){return e?t%e:null},power:function(t,e){return Math.pow(t,e)},greater:function(t,e){return t==null||e==null?!1:(t=r.convertValForDateCompare(t,e),e=r.convertValForDateCompare(e,t),t>e)},less:function(t,e){return t==null||e==null?!1:(t=r.convertValForDateCompare(t,e),e=r.convertValForDateCompare(e,t),t<e)},greaterorequal:function(t,e){return r.binaryFunctions.equal(t,e)?!0:r.binaryFunctions.greater(t,e)},lessorequal:function(t,e){return r.binaryFunctions.equal(t,e)?!0:r.binaryFunctions.less(t,e)},equal:function(t,e,i){return t=r.convertValForDateCompare(t,e),e=r.convertValForDateCompare(e,t),r.isTwoValueEquals(t,e,i!==!0)},notequal:function(t,e,i){return!r.binaryFunctions.equal(t,e,i)},contains:function(t,e){return r.binaryFunctions.containsCore(t,e,!0)},notcontains:function(t,e){return!t&&!w.isValueEmpty(e)?!0:r.binaryFunctions.containsCore(t,e,!1)},anyof:function(t,e){if(w.isValueEmpty(t)&&w.isValueEmpty(e))return!0;if(w.isValueEmpty(t)||!Array.isArray(t)&&t.length===0)return!1;if(w.isValueEmpty(e))return!0;if(!Array.isArray(t))return r.binaryFunctions.contains(e,t);if(!Array.isArray(e))return r.binaryFunctions.contains(t,e);for(var i=0;i<e.length;i++)if(r.binaryFunctions.contains(t,e[i]))return!0;return!1},noneof:function(t,e){return!r.binaryFunctions.anyof(t,e)},allof:function(t,e){if(!t&&!w.isValueEmpty(e))return!1;if(!Array.isArray(e))return r.binaryFunctions.contains(t,e);for(var i=0;i<e.length;i++)if(!r.binaryFunctions.contains(t,e[i]))return!1;return!0},containsCore:function(t,e,i){if(Array.isArray(t)&&!t.length)return!i;if(!t&&t!==0&&t!==!1)return!1;if(t.length||(t=t.toString()),typeof t=="string"||t instanceof String){if(!e)return!1;e=e.toString(),C.comparator.caseSensitive||(t=t.toLowerCase(),e=e.toLowerCase());var n=t.indexOf(e)>-1;return i?n:!n}for(var o=Array.isArray(e)?e:[e],s=0;s<o.length;s++){var a=0;for(e=o[s];a<t.length&&!r.isTwoValueEquals(t[a],e);a++);if(a==t.length)return!i}return i}},r.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"},r})(),bi=(function(){var r=(function(e){P(i,e);function i(n,o,s,a){var l=e.call(this,n)||this;return l.expected=o,l.found=s,l.location=a,l.name="SyntaxError",l}return i.prototype.format=function(n){var o=this,s="Error: "+this.message;if(this.location){var a=null,l=n.find(function(A){return A.source===o.location.source});l&&(a=l.text.split(/\r\n|\n|\r/g));var u=this.location.start,f=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(u):u,y=this.location.source+":"+f.line+":"+f.column;if(a){var b=this.location.end,E="".padEnd(f.line.toString().length," "),S=a[u.line-1],O=u.line===b.line?b.column:S.length+1,R=O-u.column||1;s+=`
 --> `+y+`
`+E+` |
`+f.line+" | "+S+`
`+E+" | "+"".padEnd(u.column-1," ")+"".padEnd(R,"^")}else s+=`
 at `+y}return s},i.buildMessage=function(n,o){function s(O){return O.codePointAt(0).toString(16).toUpperCase()}var a=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function l(O){return a?O.replace(a,function(R){return"\\u{"+s(R)+"}"}):O}function u(O){return l(O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+s(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+s(R)}))}function f(O){return l(O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+s(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+s(R)}))}var y={literal:function(O){return'"'+u(O.text)+'"'},class:function(O){var R=O.parts.map(function(A){return Array.isArray(A)?f(A[0])+"-"+f(A[1]):f(A)});return"["+(O.inverted?"^":"")+R.join("")+"]"+(O.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(O){return O.description}};function b(O){return y[O.type](O)}function E(O){var R=O.map(b);if(R.sort(),R.length>0){for(var A=1,Q=1;Q<R.length;Q++)R[Q-1]!==R[Q]&&(R[A]=R[Q],A++);R.length=A}switch(R.length){case 1:return R[0];case 2:return R[0]+" or "+R[1];default:return R.slice(0,-1).join(", ")+", or "+R[R.length-1]}}function S(O){return O?'"'+u(O)+'"':"end of input"}return"Expected "+E(n)+" but "+S(o)+" found."},i})(SyntaxError);function t(e,i){i=i!==void 0?i:{};var n={},o=i.grammarSource,s={Expression:st},a=st,l="||",u="or",f="&&",y="and",b="<=",E="lessorequal",S=">=",O="greaterorequal",R="==",A="equal",Q="=",ee="!=",X="notequal",we="<",ve="less",nt=">",kn="greater",Au="+",Du="-",Lu="*",Mu="/",Fu="%",Nu="^",ku="power",ms="*=",Bu="contains",_u="contain",Qu="notcontains",ju="notcontain",qu="anyof",Hu="allof",zu="noneof",vs="(",Uu="!",Wu="negate",Gu="empty",Ju="notempty",bs="undefined",Cs="null",$u="{",Ku="}",ws="''",Ps='""',Vs="'",Ss='"',Yu="[",Xu="]",xs=",",Zu="true",ec="false",Is="0x",tc=".",ic="0",Es="\\'",Ts='\\"',nc=/^[\-]/,rc=/^[^"']/,oc=/^[^{}]/,Rs=/^[0-9]/,Os=/^[1-9]/,As=/^[a-zA-Z_]/,Ds=/^[ \t\n\r]/,sc=j("||",!1),ac=j("or",!0),lc=j("&&",!1),uc=j("and",!0),cc=j("<=",!1),pc=j("lessorequal",!0),hc=j(">=",!1),fc=j("greaterorequal",!0),dc=j("==",!1),Ls=j("equal",!0),gc=j("=",!1),yc=j("!=",!1),mc=j("notequal",!0),vc=j("<",!1),bc=j("less",!0),Cc=j(">",!1),wc=j("greater",!0),Pc=j("+",!1),Vc=j("-",!1),Sc=j("*",!1),xc=j("/",!1),Ic=j("%",!1),Ec=j("^",!1),Tc=j("power",!0),Rc=j("*=",!1),Oc=j("contains",!0),Ac=j("contain",!0),Dc=j("notcontains",!0),Lc=j("notcontain",!0),Mc=j("anyof",!0),Fc=j("allof",!0),Nc=j("noneof",!0),Ms=j("(",!1),Fs=j(")",!1),kc=j("!",!1),Bc=j("negate",!0),_c=j("empty",!0),Qc=j("notempty",!0),jc=j("undefined",!1),qc=j("null",!1),Hc=j("{",!1),zc=j("}",!1),Uc=j("''",!1),Wc=j('""',!1),Ns=j("'",!1),ks=j('"',!1),Gc=j("[",!1),Jc=j("]",!1),Bs=j(",",!1),$c=j("true",!0),Kc=j("false",!0),Yc=j("0x",!1),Xc=Ge(["-"],!1,!1,!1),Zc=j(".",!1),ep=j("0",!1),tp=j("\\'",!1),ip=j('\\"',!1),np=Ge(['"',"'"],!0,!1,!1),rp=Ge(["{","}"],!0,!1,!1),_s=Ge([["0","9"]],!1,!1,!1),Qs=Ge([["1","9"]],!1,!1,!1),js=Ge([["a","z"],["A","Z"],"_"],!1,!1,!1),qs=Ge([" ","	",`
`,"\r"],!1,!1,!1);function op(h,d){return Je(h,d,!0)}function sp(){return"or"}function ap(h,d){return Je(h,d,!0)}function lp(){return"and"}function up(h,d){return Je(h,d)}function cp(){return"lessorequal"}function pp(){return"greaterorequal"}function hp(){return"equal"}function fp(){return"equal"}function dp(){return"notequal"}function gp(){return"less"}function yp(){return"greater"}function mp(h,d){return Je(h,d,!0)}function vp(){return"plus"}function bp(){return"minus"}function Cp(h,d){return Je(h,d,!0)}function wp(){return"mul"}function Pp(){return"div"}function Vp(){return"mod"}function Sp(h,d){return Je(h,d,!0)}function xp(){return"power"}function Ip(h,d){return Je(h,d)}function Ep(){return"contains"}function Tp(){return"notcontains"}function Rp(){return"anyof"}function Op(){return"allof"}function Ap(){return"noneof"}function bh(h){return h}function Dp(h,d){return new cr(h,d)}function Lp(h){return new mi(h,"negate")}function Mp(h,d){return new mi(h,d)}function Fp(){return"empty"}function Np(){return"notempty"}function kp(){return null}function Bp(h){return new vi(h)}function _p(h){return new ur(h)}function Ch(h){return h}function wh(h){return h}function Ph(h){return h}function Qp(){return""}function jp(){return""}function qp(h){return"'"+h+"'"}function Hp(h){return"'"+h+"'"}function Vh(h){return h}function zp(h,d){if(h==null)return new Dt([]);var x=[h];if(Array.isArray(d))for(var v=vh(d),T=3;T<v.length;T+=4)x.push(v[T]);return new Dt(x)}function Up(){return!0}function Wp(){return!1}function Gp(){return parseInt(ot(),16)}function Jp(h,d){return h==null?d:-d}function $p(){return parseFloat(ot())}function Kp(){return parseInt(ot(),10)}function Yp(){return 0}function Xp(h){return h.join("")}function Zp(h){return h.join("")}function eh(){return"'"}function th(){return'"'}function ih(){return ot()}function nh(){return ot()}function rh(){return ot()}var g=i.peg$currPos|0,B=g,rt=[{line:1,column:1}],Pe=g,ci=i.peg$maxFailExpected||[],M=i.peg$silentFails|0,N={},Tt;if(i.startRule){if(!(i.startRule in s))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');a=s[i.startRule]}function ot(){return e.substring(B,g)}function oh(h){h===void 0&&(h=g);var d=e.codePointAt(h);return d===void 0?"":String.fromCodePoint(d)}function j(h,d){return{type:"literal",text:h,ignoreCase:d}}function Ge(h,d,x,v){return{type:"class",parts:h,inverted:d,ignoreCase:x,unicode:v}}function sh(){return{type:"end"}}function Hs(h){var d=rt[h],x;if(d)return d;if(h>=rt.length)x=rt.length-1;else for(x=h;!rt[--x];);for(d=rt[x],d={line:d.line,column:d.column};x<h;)e.charCodeAt(x)===10?(d.line++,d.column=1):d.column++,x++;return rt[h]=d,d}function zs(h,d,x){var v=Hs(h),T=Hs(d),L={source:o,start:{offset:h,line:v.line,column:v.column},end:{offset:d,line:T.line,column:T.column}};return L}function F(h){g<Pe||(g>Pe&&(Pe=g,ci=[]),ci.push(h))}function ah(h,d,x){return new r(r.buildMessage(h,d),h,d,x)}function st(){var h,d,x,v,T,L,H,_,Z=g*34+0,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,J(),d=Bn(),d!==n){for(x=[],v=g,T=J(),L=Us(),L!==n?(H=J(),_=Bn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Us(),L!==n?(H=J(),_=Bn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v=J(),B=h,h=op(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Us(){var h,d,x=g*34+1,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.substr(g,2)===l?(d=l,g+=2):(d=n,M===0&&F(sc)),d===n&&(d=e.substr(g,2),d.toLowerCase()===u?g+=2:(d=n,M===0&&F(ac))),d!==n&&(B=h,d=sp()),h=d,N[x]={nextPos:g,result:h},h)}function Bn(){var h,d,x,v,T,L,H,_,Z=g*34+2,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=_n(),d!==n){for(x=[],v=g,T=J(),L=Ws(),L!==n?(H=J(),_=_n(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Ws(),L!==n?(H=J(),_=_n(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);B=h,h=ap(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Ws(){var h,d,x=g*34+3,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.substr(g,2)===f?(d=f,g+=2):(d=n,M===0&&F(lc)),d===n&&(d=e.substr(g,3),d.toLowerCase()===y?g+=3:(d=n,M===0&&F(uc))),d!==n&&(B=h,d=lp()),h=d,N[x]={nextPos:g,result:h},h)}function _n(){var h,d,x,v,T,L,H,_,Z=g*34+4,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=Qn(),d!==n){for(x=[],v=g,T=J(),L=Gs(),L!==n?(H=J(),_=Qn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Gs(),L!==n?(H=J(),_=Qn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);B=h,h=up(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Gs(){var h,d,x=g*34+5,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.substr(g,2)===b?(d=b,g+=2):(d=n,M===0&&F(cc)),d===n&&(d=e.substr(g,11),d.toLowerCase()===E?g+=11:(d=n,M===0&&F(pc))),d!==n&&(B=h,d=cp()),h=d,h===n&&(h=g,e.substr(g,2)===S?(d=S,g+=2):(d=n,M===0&&F(hc)),d===n&&(d=e.substr(g,14),d.toLowerCase()===O?g+=14:(d=n,M===0&&F(fc))),d!==n&&(B=h,d=pp()),h=d,h===n&&(h=g,e.substr(g,2)===R?(d=R,g+=2):(d=n,M===0&&F(dc)),d===n&&(d=e.substr(g,5),d.toLowerCase()===A?g+=5:(d=n,M===0&&F(Ls))),d!==n&&(B=h,d=hp()),h=d,h===n&&(h=g,e.charCodeAt(g)===61?(d=Q,g++):(d=n,M===0&&F(gc)),d===n&&(d=e.substr(g,5),d.toLowerCase()===A?g+=5:(d=n,M===0&&F(Ls))),d!==n&&(B=h,d=fp()),h=d,h===n&&(h=g,e.substr(g,2)===ee?(d=ee,g+=2):(d=n,M===0&&F(yc)),d===n&&(d=e.substr(g,8),d.toLowerCase()===X?g+=8:(d=n,M===0&&F(mc))),d!==n&&(B=h,d=dp()),h=d,h===n&&(h=g,e.charCodeAt(g)===60?(d=we,g++):(d=n,M===0&&F(vc)),d===n&&(d=e.substr(g,4),d.toLowerCase()===ve?g+=4:(d=n,M===0&&F(bc))),d!==n&&(B=h,d=gp()),h=d,h===n&&(h=g,e.charCodeAt(g)===62?(d=nt,g++):(d=n,M===0&&F(Cc)),d===n&&(d=e.substr(g,7),d.toLowerCase()===kn?g+=7:(d=n,M===0&&F(wc))),d!==n&&(B=h,d=yp()),h=d)))))),N[x]={nextPos:g,result:h},h)}function Qn(){var h,d,x,v,T,L,H,_,Z=g*34+6,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=jn(),d!==n){for(x=[],v=g,T=J(),L=Js(),L!==n?(H=J(),_=jn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Js(),L!==n?(H=J(),_=jn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);B=h,h=mp(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Js(){var h,d,x=g*34+7,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.charCodeAt(g)===43?(d=Au,g++):(d=n,M===0&&F(Pc)),d!==n&&(B=h,d=vp()),h=d,h===n&&(h=g,e.charCodeAt(g)===45?(d=Du,g++):(d=n,M===0&&F(Vc)),d!==n&&(B=h,d=bp()),h=d),N[x]={nextPos:g,result:h},h)}function jn(){var h,d,x,v,T,L,H,_,Z=g*34+8,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=qn(),d!==n){for(x=[],v=g,T=J(),L=$s(),L!==n?(H=J(),_=qn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=$s(),L!==n?(H=J(),_=qn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);B=h,h=Cp(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function $s(){var h,d,x=g*34+9,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.charCodeAt(g)===42?(d=Lu,g++):(d=n,M===0&&F(Sc)),d!==n&&(B=h,d=wp()),h=d,h===n&&(h=g,e.charCodeAt(g)===47?(d=Mu,g++):(d=n,M===0&&F(xc)),d!==n&&(B=h,d=Pp()),h=d,h===n&&(h=g,e.charCodeAt(g)===37?(d=Fu,g++):(d=n,M===0&&F(Ic)),d!==n&&(B=h,d=Vp()),h=d)),N[x]={nextPos:g,result:h},h)}function qn(){var h,d,x,v,T,L,H,_,Z=g*34+10,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=Hn(),d!==n){for(x=[],v=g,T=J(),L=Ks(),L!==n?(H=J(),_=Hn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Ks(),L!==n?(H=J(),_=Hn(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);B=h,h=Sp(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Ks(){var h,d,x=g*34+11,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.charCodeAt(g)===94?(d=Nu,g++):(d=n,M===0&&F(Ec)),d===n&&(d=e.substr(g,5),d.toLowerCase()===ku?g+=5:(d=n,M===0&&F(Tc))),d!==n&&(B=h,d=xp()),h=d,N[x]={nextPos:g,result:h},h)}function Hn(){var h,d,x,v,T,L,H,_,Z=g*34+12,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;if(h=g,d=pi(),d!==n){for(x=[],v=g,T=J(),L=Ys(),L!==n?(H=J(),_=pi(),_===n&&(_=null),T=[T,L,H,_],v=T):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),L=Ys(),L!==n?(H=J(),_=pi(),_===n&&(_=null),T=[T,L,H,_],v=T):(g=v,v=n);B=h,h=Ip(d,x)}else g=h,h=n;return N[Z]={nextPos:g,result:h},h}function Ys(){var h,d,x=g*34+13,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.substr(g,2)===ms?(d=ms,g+=2):(d=n,M===0&&F(Rc)),d===n&&(d=e.substr(g,8),d.toLowerCase()===Bu?g+=8:(d=n,M===0&&F(Oc)),d===n&&(d=e.substr(g,7),d.toLowerCase()===_u?g+=7:(d=n,M===0&&F(Ac)))),d!==n&&(B=h,d=Ep()),h=d,h===n&&(h=g,d=e.substr(g,11),d.toLowerCase()===Qu?g+=11:(d=n,M===0&&F(Dc)),d===n&&(d=e.substr(g,10),d.toLowerCase()===ju?g+=10:(d=n,M===0&&F(Lc))),d!==n&&(B=h,d=Tp()),h=d,h===n&&(h=g,d=e.substr(g,5),d.toLowerCase()===qu?g+=5:(d=n,M===0&&F(Mc)),d!==n&&(B=h,d=Rp()),h=d,h===n&&(h=g,d=e.substr(g,5),d.toLowerCase()===Hu?g+=5:(d=n,M===0&&F(Fc)),d!==n&&(B=h,d=Op()),h=d,h===n&&(h=g,d=e.substr(g,6),d.toLowerCase()===zu?g+=6:(d=n,M===0&&F(Nc)),d!==n&&(B=h,d=Ap()),h=d)))),N[x]={nextPos:g,result:h},h)}function pi(){var h,d,x,v=g*34+14,T=N[v];return T?(g=T.nextPos,T.result):(h=g,e.charCodeAt(g)===40?(d=vs,g++):(d=n,M===0&&F(Ms)),d!==n?(J(),x=st(),x!==n?(J(),e.charCodeAt(g)===41?g++:M===0&&F(Fs),B=h,h=x):(g=h,h=n)):(g=h,h=n),h===n&&(h=lh(),h===n&&(h=uh(),h===n&&(h=Xs(),h===n&&(h=hh())))),N[v]={nextPos:g,result:h},h)}function lh(){var h,d,x,v,T=g*34+15,L=N[T];return L?(g=L.nextPos,L.result):(h=g,d=na(),d!==n?(e.charCodeAt(g)===40?(x=vs,g++):(x=n,M===0&&F(Ms)),x!==n?(v=Zs(),e.charCodeAt(g)===41?g++:M===0&&F(Fs),B=h,h=Dp(d,v)):(g=h,h=n)):(g=h,h=n),N[T]={nextPos:g,result:h},h)}function uh(){var h,d,x,v=g*34+16,T=N[v];return T?(g=T.nextPos,T.result):(h=g,e.charCodeAt(g)===33?(d=Uu,g++):(d=n,M===0&&F(kc)),d===n&&(d=e.substr(g,6),d.toLowerCase()===Wu?g+=6:(d=n,M===0&&F(Bc))),d!==n?(J(),x=pi(),x!==n?(B=h,h=Lp(x)):(g=h,h=n)):(g=h,h=n),h===n&&(h=g,d=Xs(),d!==n?(J(),x=ch(),x!==n?(B=h,h=Mp(d,x)):(g=h,h=n)):(g=h,h=n)),N[v]={nextPos:g,result:h},h)}function ch(){var h,d,x=g*34+17,v=N[x];return v?(g=v.nextPos,v.result):(h=g,d=e.substr(g,5),d.toLowerCase()===Gu?g+=5:(d=n,M===0&&F(_c)),d!==n&&(B=h,d=Fp()),h=d,h===n&&(h=g,d=e.substr(g,8),d.toLowerCase()===Ju?g+=8:(d=n,M===0&&F(Qc)),d!==n&&(B=h,d=Np()),h=d),N[x]={nextPos:g,result:h},h)}function Xs(){var h,d,x,v,T=g*34+18,L=N[T];return L?(g=L.nextPos,L.result):(h=g,J(),e.substr(g,9)===bs?(d=bs,g+=9):(d=n,M===0&&F(jc)),d===n&&(e.substr(g,4)===Cs?(d=Cs,g+=4):(d=n,M===0&&F(qc))),d!==n?(B=h,h=kp()):(g=h,h=n),h===n&&(h=g,J(),d=ph(),d!==n?(B=h,h=Bp(d)):(g=h,h=n),h===n&&(h=g,J(),e.charCodeAt(g)===123?(d=$u,g++):(d=n,M===0&&F(Hc)),d!==n?(x=yh(),x!==n?(e.charCodeAt(g)===125?(v=Ku,g++):(v=n,M===0&&F(zc)),v!==n?(B=h,h=_p(x)):(g=h,h=n)):(g=h,h=n)):(g=h,h=n))),N[T]={nextPos:g,result:h},h)}function ph(){var h,d,x,v,T=g*34+19,L=N[T];return L?(g=L.nextPos,L.result):(h=g,d=fh(),d!==n&&(B=h,d=d),h=d,h===n&&(h=g,d=dh(),d!==n&&(B=h,d=d),h=d,h===n&&(h=g,d=na(),d!==n&&(B=h,d=d),h=d,h===n&&(h=g,e.substr(g,2)===ws?(d=ws,g+=2):(d=n,M===0&&F(Uc)),d!==n&&(B=h,d=Qp()),h=d,h===n&&(h=g,e.substr(g,2)===Ps?(d=Ps,g+=2):(d=n,M===0&&F(Wc)),d!==n&&(B=h,d=jp()),h=d,h===n&&(h=g,e.charCodeAt(g)===39?(d=Vs,g++):(d=n,M===0&&F(Ns)),d!==n?(x=ea(),x!==n?(e.charCodeAt(g)===39?(v=Vs,g++):(v=n,M===0&&F(Ns)),v!==n?(B=h,h=qp(x)):(g=h,h=n)):(g=h,h=n)):(g=h,h=n),h===n&&(h=g,e.charCodeAt(g)===34?(d=Ss,g++):(d=n,M===0&&F(ks)),d!==n?(x=ea(),x!==n?(e.charCodeAt(g)===34?(v=Ss,g++):(v=n,M===0&&F(ks)),v!==n?(B=h,h=Hp(x)):(g=h,h=n)):(g=h,h=n)):(g=h,h=n))))))),N[T]={nextPos:g,result:h},h)}function hh(){var h,d,x,v,T=g*34+20,L=N[T];return L?(g=L.nextPos,L.result):(h=g,e.charCodeAt(g)===91?(d=Yu,g++):(d=n,M===0&&F(Gc)),d!==n?(x=Zs(),e.charCodeAt(g)===93?(v=Xu,g++):(v=n,M===0&&F(Jc)),v!==n?(B=h,h=x):(g=h,h=n)):(g=h,h=n),N[T]={nextPos:g,result:h},h)}function Zs(){var h,d,x,v,T,L,H,_,Z=g*34+21,Y=N[Z];if(Y)return g=Y.nextPos,Y.result;for(h=g,d=st(),d===n&&(d=null),x=[],v=g,T=J(),e.charCodeAt(g)===44?(L=xs,g++):(L=n,M===0&&F(Bs)),L!==n?(H=J(),_=st(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);v!==n;)x.push(v),v=g,T=J(),e.charCodeAt(g)===44?(L=xs,g++):(L=n,M===0&&F(Bs)),L!==n?(H=J(),_=st(),_!==n?(T=[T,L,H,_],v=T):(g=v,v=n)):(g=v,v=n);return B=h,h=zp(d,x),N[Z]={nextPos:g,result:h},h}function fh(){var h,d,x=g*34+22,v=N[x];return v?(g=v.nextPos,v.result):(h=g,d=e.substr(g,4),d.toLowerCase()===Zu?g+=4:(d=n,M===0&&F($c)),d!==n&&(B=h,d=Up()),h=d,h===n&&(h=g,d=e.substr(g,5),d.toLowerCase()===ec?g+=5:(d=n,M===0&&F(Kc)),d!==n&&(B=h,d=Wp()),h=d),N[x]={nextPos:g,result:h},h)}function dh(){var h,d,x,v=g*34+23,T=N[v];return T?(g=T.nextPos,T.result):(h=g,e.substr(g,2)===Is?(d=Is,g+=2):(d=n,M===0&&F(Yc)),d!==n?(x=at(),x!==n?(B=h,h=Gp()):(g=h,h=n)):(g=h,h=n),h===n&&(h=g,d=e.charAt(g),nc.test(d)?g++:(d=n,M===0&&F(Xc)),d===n&&(d=null),x=gh(),x!==n?(B=h,h=Jp(d,x)):(g=h,h=n)),N[v]={nextPos:g,result:h},h)}function gh(){var h,d,x,v,T=g*34+24,L=N[T];return L?(g=L.nextPos,L.result):(h=g,d=at(),d!==n?(e.charCodeAt(g)===46?(x=tc,g++):(x=n,M===0&&F(Zc)),x!==n?(v=at(),v!==n?(B=h,h=$p()):(g=h,h=n)):(g=h,h=n)):(g=h,h=n),h===n&&(h=g,d=mh(),d!==n?(x=at(),x===n&&(x=null),B=h,h=Kp()):(g=h,h=n),h===n&&(h=g,e.charCodeAt(g)===48?(d=ic,g++):(d=n,M===0&&F(ep)),d!==n&&(B=h,d=Yp()),h=d)),N[T]={nextPos:g,result:h},h)}function yh(){var h,d,x,v=g*34+25,T=N[v];if(T)return g=T.nextPos,T.result;if(h=g,d=[],x=ia(),x!==n)for(;x!==n;)d.push(x),x=ia();else d=n;return d!==n&&(B=h,d=Xp(d)),h=d,N[v]={nextPos:g,result:h},h}function ea(){var h,d,x,v=g*34+26,T=N[v];if(T)return g=T.nextPos,T.result;if(h=g,d=[],x=ta(),x!==n)for(;x!==n;)d.push(x),x=ta();else d=n;return d!==n&&(B=h,d=Zp(d)),h=d,N[v]={nextPos:g,result:h},h}function ta(){var h,d,x=g*34+27,v=N[x];return v?(g=v.nextPos,v.result):(h=g,e.substr(g,2)===Es?(d=Es,g+=2):(d=n,M===0&&F(tp)),d!==n&&(B=h,d=eh()),h=d,h===n&&(h=g,e.substr(g,2)===Ts?(d=Ts,g+=2):(d=n,M===0&&F(ip)),d!==n&&(B=h,d=th()),h=d,h===n&&(h=g,d=e.charAt(g),rc.test(d)?g++:(d=n,M===0&&F(np)),d!==n&&(B=h,d=ih()),h=d)),N[x]={nextPos:g,result:h},h)}function ia(){var h,d,x=g*34+28,v=N[x];return v?(g=v.nextPos,v.result):(h=g,d=e.charAt(g),oc.test(d)?g++:(d=n,M===0&&F(rp)),d!==n&&(B=h,d=nh()),h=d,N[x]={nextPos:g,result:h},h)}function na(){var h,d,x,v,T,L,H,_=g*34+29,Z=N[_];if(Z)return g=Z.nextPos,Z.result;if(h=g,d=Rt(),d!==n){if(x=[],v=g,T=at(),T!==n){for(L=[],H=Rt();H!==n;)L.push(H),H=Rt();T=[T,L],v=T}else g=v,v=n;for(;v!==n;)if(x.push(v),v=g,T=at(),T!==n){for(L=[],H=Rt();H!==n;)L.push(H),H=Rt();T=[T,L],v=T}else g=v,v=n;B=h,h=rh()}else g=h,h=n;return N[_]={nextPos:g,result:h},h}function at(){var h,d,x=g*34+30,v=N[x];if(v)return g=v.nextPos,v.result;if(h=[],d=e.charAt(g),Rs.test(d)?g++:(d=n,M===0&&F(_s)),d!==n)for(;d!==n;)h.push(d),d=e.charAt(g),Rs.test(d)?g++:(d=n,M===0&&F(_s));else h=n;return N[x]={nextPos:g,result:h},h}function mh(){var h,d,x=g*34+31,v=N[x];if(v)return g=v.nextPos,v.result;if(h=[],d=e.charAt(g),Os.test(d)?g++:(d=n,M===0&&F(Qs)),d!==n)for(;d!==n;)h.push(d),d=e.charAt(g),Os.test(d)?g++:(d=n,M===0&&F(Qs));else h=n;return N[x]={nextPos:g,result:h},h}function Rt(){var h,d,x=g*34+32,v=N[x];if(v)return g=v.nextPos,v.result;if(h=[],d=e.charAt(g),As.test(d)?g++:(d=n,M===0&&F(js)),d!==n)for(;d!==n;)h.push(d),d=e.charAt(g),As.test(d)?g++:(d=n,M===0&&F(js));else h=n;return N[x]={nextPos:g,result:h},h}function J(){var h,d,x=g*34+33,v=N[x];if(v)return g=v.nextPos,v.result;for(M++,h=[],d=e.charAt(g),Ds.test(d)?g++:(d=n,M===0&&F(qs));d!==n;)h.push(d),d=e.charAt(g),Ds.test(d)?g++:(d=n,M===0&&F(qs));return M--,N[x]={nextPos:g,result:h},h}function Je(h,d,x){return x===void 0&&(x=!1),d.reduce(function(v,T){return new lr(T[1],v,T[3],x)},h)}function vh(h){return[].concat.apply([],h)}Tt=a();var zn=Tt!==n&&g===e.length;function ra(){throw Tt!==n&&g<e.length&&F(sh()),ah(ci,Pe<e.length?oh(Pe):null,Pe<e.length?zs(Pe,Pe+1):zs(Pe,Pe))}if(i.peg$library)return{peg$result:Tt,peg$currPos:g,peg$FAILED:n,peg$maxFailExpected:ci,peg$maxFailPos:Pe,peg$success:zn,peg$throw:zn?void 0:ra};if(zn)return Tt;ra()}return{StartRules:["Expression"],SyntaxError:r,parse:t}})();bi.SyntaxError.prototype.name="PeggySyntaxError";var Ha=bi.parse,za=bi.SyntaxError,Ua=(function(){function r(t,e){this.at=t,this.code=e}return r})(),pr=(function(){function r(){}return r.prototype.patchExpression=function(t){return t.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")},r.prototype.createCondition=function(t){return this.parseExpression(t)},r.prototype.parseExpression=function(t){try{return Ha(this.patchExpression(t))}catch(e){e instanceof za&&(this.conditionError=new Ua(e.location.start.offset,e.message))}},Object.defineProperty(r.prototype,"error",{get:function(){return this.conditionError},enumerable:!1,configurable:!0}),r})();m.ExpressionErrorType=void 0,(function(r){r[r.SyntaxError=0]="SyntaxError",r[r.UnknownFunction=1]="UnknownFunction",r[r.UnknownVariable=2]="UnknownVariable",r[r.SemanticError=3]="SemanticError"})(m.ExpressionErrorType||(m.ExpressionErrorType={}));var Wa=(function(){function r(t,e,i,n,o){this.operand=t,this.id=e,this.onComplete=i,this.processValue=new yi(o),this.processValue.properties=n}return r.prototype.run=function(t){var e=this;if(!t)return this.runValues();this.processValue.onCompleteAsyncFunc=function(n){var o=e.getAsyncItemByOperand(n,e.asyncFuncList);o&&e.doAsyncFunctionReady(o)},this.asyncFuncList=new Array,this.operand.addToAsyncList(this.asyncFuncList);for(var i=0;i<this.asyncFuncList.length;i++)this.runAsyncItem(this.asyncFuncList[i]);return!1},r.prototype.getAsyncItemByOperand=function(t,e){if(!Array.isArray(e))return null;for(var i=0;i<e.length;i++){if(e[i].operand===t)return e[i];var n=this.getAsyncItemByOperand(t,e[i].children);if(n)return n}return null},r.prototype.runAsyncItem=function(t){var e=this;t.children?t.children.forEach(function(i){return e.runAsyncItem(i)}):this.runAsyncItemCore(t)},r.prototype.runAsyncItemCore=function(t){t.operand?t.operand.evaluate(this.processValue):this.doAsyncFunctionReady(t)},r.prototype.doAsyncFunctionReady=function(t){if(t.parent&&this.isAsyncChildrenReady(t)){this.runAsyncItemCore(t.parent);return}for(var e=0;e<this.asyncFuncList.length;e++)if(!this.isAsyncFuncReady(this.asyncFuncList[e]))return;this.runValues()},r.prototype.isAsyncFuncReady=function(t){return t.operand&&!t.operand.isReady(this.processValue)?!1:this.isAsyncChildrenReady(t)},r.prototype.isAsyncChildrenReady=function(t){if(t.children){for(var e=0;e<t.children.length;e++)if(!this.isAsyncFuncReady(t.children[e]))return!1}return!0},r.prototype.runValues=function(){var t=this.operand.evaluate(this.processValue);return this.onComplete&&this.onComplete(t,this.id),t},r})(),Ci=(function(){function r(t){this.parser=new pr,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.setExpression(t)}return r.getQuestionErrorText=function(t){if(t){var e=t.question;if(e&&e.name)return" It is used in the question: '"+e.name+"'."}return""},Object.defineProperty(r.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),r.prototype.setExpression=function(t){this.expression!==t&&(this.expressionValue=t,this.operand=this.parser.parseExpression(t),this.hasFunctionValue=this.canRun()?this.operand.hasFunction():!1,this.isAsyncValue=this.hasFunction()?this.operand.hasAsyncFunction():!1)},r.prototype.getVariables=function(){if(!this.operand)return[];var t=[];return this.operand.setVariables(t),t},r.prototype.hasFunction=function(){return this.hasFunctionValue},Object.defineProperty(r.prototype,"isAsync",{get:function(){return this.isAsyncValue},enumerable:!1,configurable:!0}),r.prototype.canRun=function(){return!!this.operand},r.prototype.run=function(t,e,i){return this.runContext(new gi(t,e?.context),e,i)},r.prototype.runContext=function(t,e,i){if(e===void 0&&(e=null),!this.operand)return this.expression&&Ee.warn("Invalid expression: '"+this.expression+"'."+r.getQuestionErrorText(e)),null;var n=new Wa(this.operand,i,this.onComplete,e,t);return n.run(this.isAsync)},r.prototype.validate=function(t,e,i){var n=[];if(!this.operand)return n.push({errorType:m.ExpressionErrorType.SyntaxError}),n;var o=new Array;if(this.operand.addOperandsToList(o),i.semantics&&e&&o.length==1&&o[0].getType()==="const"&&!o[0].isBoolean())return n.push({errorType:m.ExpressionErrorType.SemanticError}),n;var s=o.reduce(function(b,E){var S=E.getType();return b[S]||(b[S]=[]),b[S].push(E),b},{});if(i.functions)for(var a=0,l=s.function||[];a<l.length;a++){var u=l[a];W.Instance.hasFunction(u.functionName)||n.push({errorType:m.ExpressionErrorType.UnknownFunction,functionName:u.functionName})}if(i.variables)for(var f=0,y=s.variable||[];f<y.length;f++){var u=y[f];new yi(t).hasValue(u.variable)||n.push({errorType:m.ExpressionErrorType.UnknownVariable,variableName:u.variable})}return n},r.createExpressionExecutor=function(t){return new r(t)},r})(),hr=(function(){function r(t){this.expression=t}return Object.defineProperty(r.prototype,"expression",{get:function(){return this.expressionExecutor?this.expressionExecutor.expression:""},set:function(t){var e=this;this.expressionExecutor&&t===this.expression||(this.expressionExecutor=Ci.createExpressionExecutor(t),this.expressionExecutor.onComplete=function(i,n){e.doOnComplete(i,n)},this.variables=void 0,this.containsFunc=void 0)},enumerable:!1,configurable:!0}),r.prototype.getVariables=function(){return this.variables===void 0&&(this.variables=this.expressionExecutor.getVariables()),this.variables},r.prototype.hasFunction=function(){return this.containsFunc===void 0&&(this.containsFunc=this.expressionExecutor.hasFunction()),this.containsFunc},Object.defineProperty(r.prototype,"isAsync",{get:function(){return this.expressionExecutor.isAsync},enumerable:!1,configurable:!0}),r.prototype.canRun=function(){return this.expressionExecutor.canRun()},r.prototype.runContextCore=function(t,e){var i=r.IdRunnerCounter++;return this.onBeforeAsyncRun&&this.isAsync&&this.onBeforeAsyncRun(i),this.expressionExecutor.runContext(t,e,i)},r.prototype.validate=function(t,e,i){return this.expressionExecutor.validate(t,i,e)},r.prototype.doOnComplete=function(t,e){this.onAfterAsyncRun&&this.isAsync&&this.onAfterAsyncRun(e)},r.IdRunnerCounter=1,r})(),ge=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.runValues=function(e,i){return this.runContext(new gi(e,i?.context),i)},t.prototype.runContext=function(e,i){return this.runContextCore(e,i)==!0},t.prototype.doOnComplete=function(e,i){this.onRunComplete&&this.onRunComplete(e==!0),r.prototype.doOnComplete.call(this,e,i)},t})(hr),fr=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.runValues=function(e,i){return this.runContext(new gi(e,i?.context),i)},t.prototype.runContext=function(e,i){return this.runContextCore(e,i)},t.prototype.doOnComplete=function(e,i){this.onRunComplete&&this.onRunComplete(e),r.prototype.doOnComplete.call(this,e,i)},t})(hr);function dr(r,t,e){W.Instance.addSurveyCachedValue(r,t,e)}function Ga(r,t,e){W.Instance.addObjectCachedValue(r,t,e)}var Ja=(function(){function r(t){this.obj=t,this.properties=null,this.values=null}return r.prototype.getType=function(){return"bindings"},Object.defineProperty(r.prototype,"isSurveyObj",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.getNames=function(){var t=[];this.fillProperties();for(var e=0;e<this.properties.length;e++)this.properties[e].isVisible("",this.obj)&&t.push(this.properties[e].name);return t},r.prototype.getProperties=function(){var t=[];this.fillProperties();for(var e=0;e<this.properties.length;e++)t.push(this.properties[e]);return t},r.prototype.setBinding=function(t,e){this.values||(this.values={});var i=this.getJson();i!==e&&(e?this.values[t]=e:(delete this.values[t],Object.keys(this.values).length==0&&(this.values=null)),this.onChangedJSON(i))},r.prototype.clearBinding=function(t){this.setBinding(t,"")},r.prototype.isEmpty=function(){if(!this.values)return!0;for(var t in this.values)return!1;return!0},r.prototype.getValueNameByPropertyName=function(t){if(this.values)return this.values[t]},r.prototype.getPropertiesByValueName=function(t){if(!this.values)return[];var e=[];for(var i in this.values)this.values[i]==t&&e.push(i);return e},r.prototype.getJson=function(){var t=this;if(!this.isEmpty()){var e={};return this.getNames().forEach(function(i){t.values[i]!==void 0&&(e[i]=t.values[i])}),e}},r.prototype.setJson=function(t,e){var i=this,n=this.getJson();this.values=null,t&&this.getNames().forEach(function(o){t[o]!==void 0&&(i.values||(i.values={}),i.values[o]=t[o])}),!e&&!w.isTwoValueEquals(n,this.values)&&this.onChangedJSON(n)},r.prototype.fillProperties=function(){if(this.properties===null){this.properties=[];for(var t=V.getPropertiesByObj(this.obj),e=0;e<t.length;e++)t[e].isBindable&&this.properties.push(t[e])}},r.prototype.onChangedJSON=function(t){this.obj&&this.obj.onBindingChanged(t,this.getJson())},r})(),$a=(function(){function r(t,e,i){this.currentDependency=t,this.target=e,this.property=i,this.dependencies=[],this.id=""+ ++r.DependenciesCount}return r.prototype.addDependency=function(t,e){this.target===t&&this.property===e||this.dependencies.some(function(i){return i.obj===t&&i.prop===e})||(this.dependencies.push({obj:t,prop:e,id:this.id}),t.registerPropertyChangedHandlers([e],this.currentDependency,this.id))},r.prototype.dispose=function(){this.dependencies.forEach(function(t){t.obj.unregisterPropertyChangedHandlers([t.prop],t.id)})},r.DependenciesCount=0,r})(),$=(function(){function r(t){this._updater=t,this.dependencies=void 0,this.type=r.ComputedUpdaterType}return Object.defineProperty(r.prototype,"updater",{get:function(){return this._updater},enumerable:!1,configurable:!0}),r.prototype.setDependencies=function(t){this.clearDependencies(),this.dependencies=t},r.prototype.getDependencies=function(){return this.dependencies},r.prototype.clearDependencies=function(){this.dependencies&&(this.dependencies.dispose(),this.dependencies=void 0)},r.prototype.dispose=function(){this.clearDependencies(),this._updater=void 0},r.ComputedUpdaterType="__dependency_computed",r})(),U=(function(){function r(){this.uniqueIdValue=r.UniqueId++,this.dependencies={},this.expressionDependencies={},this.propertyHash=r.createPropertiesHash(),this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onNestedPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.animationAllowedLock=0,this.supportOnElementRerenderedEvent=!0,this.onElementRerenderedEventEnabled=!1,this._onElementRerendered=new se,Ie.createProperties(this),this.onBaseCreating(),this.isCreating=!1}return r.finishCollectDependencies=function(){var t=r.currentDependencis;return r.currentDependencis=void 0,t},r.startCollectDependencies=function(t,e,i){if(r.currentDependencis!==void 0)throw new Error("Attempt to collect nested dependencies. Nested dependencies are not supported.");r.currentDependencis=new $a(t,e,i)},r.collectDependency=function(t,e){r.currentDependencis!==void 0&&r.currentDependencis.addDependency(t,e)},Object.defineProperty(r,"commentSuffix",{get:function(){return C.commentSuffix},set:function(t){C.commentSuffix=t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"commentPrefix",{get:function(){return r.commentSuffix},set:function(t){r.commentSuffix=t},enumerable:!1,configurable:!0}),r.prototype.isValueEmpty=function(t,e){return e===void 0&&(e=!0),e&&(t=this.trimValue(t)),w.isValueEmpty(t)},r.prototype.equals=function(t){return!t||this.isDisposed||t.isDisposed||this.getType()!=t.getType()?!1:this.equalsCore(t)},r.prototype.equalsCore=function(t){return this.name!==t.name?!1:w.isTwoValueEquals(this.toJSON(),t.toJSON(),!1,!0,!1)},r.prototype.trimValue=function(t){return t&&(typeof t=="string"||t instanceof String)?t.trim():t},r.createPropertiesHash=function(){return{}},r.prototype.dispose=function(){for(var t=this,e=0;e<this.eventList.length;e++)this.eventList[e].clear();this.onPropertyValueChangedCallback=void 0,this.isDisposedValue=!0,Object.keys(this.dependencies).forEach(function(i){return t.dependencies[i].dispose()}),Object.keys(this.expressionDependencies).forEach(function(i){var n=t.expressionDependencies[i];n.obj.isDisposed||n.obj.unRegisterFunctionOnPropertyValueChanged(n.propertyName,i)}),this.expressionDependencies={},Object.keys(this.propertyHash).forEach(function(i){var n=t.getPropertyValueCore(t.propertyHash,i);n&&n.type==$.ComputedUpdaterType&&n.dispose()})},Object.defineProperty(r.prototype,"isDisposed",{get:function(){return this.isDisposedValue===!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniqueId",{get:function(){return this.uniqueIdValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSurveyObj",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.addEvent=function(t){var e=new se;return this.eventList.push(e),e.onCallbacksChanged=t,e},r.prototype.addAsyncEvent=function(){var t=new Ka;return this.eventList.push(t),t},r.prototype.onBaseCreating=function(){},r.prototype.getType=function(){return"base"},r.prototype.getOwner=function(){},Object.defineProperty(r.prototype,"isPage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSurvey",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.isDescendantOf=function(t){return V.isDescendantOf(this.getType(),t)},r.prototype.getSurvey=function(t){return null},r.prototype.getValueGetterContext=function(){var t=this.getSurvey();return t?t.getValueGetterContext():new fe({})},Object.defineProperty(r.prototype,"isDesignMode",{get:function(){var t=this.getSurvey();return!!t&&t.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"inSurvey",{get:function(){return!!this.getSurvey(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bindings",{get:function(){return this.bindingsValue||(this.bindingsValue=new Ja(this)),this.bindingsValue},enumerable:!1,configurable:!0}),r.prototype.isBindingEmpty=function(){return!this.bindingsValue||this.bindingsValue.isEmpty()},r.prototype.checkBindings=function(t,e){},r.prototype.canUpdateBindings=function(){return!0},r.prototype.updateBindings=function(t,e){if(!(!this.bindingsValue||!this.canUpdateBindings())){var i=this.bindings.getValueNameByPropertyName(t);i&&this.updateBindingValue(i,e)}},r.prototype.updateBindingValue=function(t,e){},r.prototype.getTemplate=function(){return this.getType()},Object.defineProperty(r.prototype,"isLoadingFromJson",{get:function(){return this.isLoadingFromJsonValue||this.getIsLoadingFromJson()},enumerable:!1,configurable:!0}),r.prototype.getIsLoadingFromJson=function(){return this.loadingOwner&&this.loadingOwner.isLoadingFromJson?!0:this.isLoadingFromJsonValue},r.prototype.startLoadingFromJson=function(t){this.isLoadingFromJsonValue=!0,this.jsonObj=t},r.prototype.endLoadingFromJson=function(){this.isLoadingFromJsonValue=!1},r.prototype.mergeLocalizationObj=function(t,e){this.mergeLocalizationInObjectCore(t,e),this.mergeLocalizationInArrays(t,e);var i=t.getOriginalObj(),n=this.getOriginalObj();i!==t&&n!==this&&n.mergeLocalizationObj(i,e)},r.prototype.mergeLocalizationInObjectCore=function(t,e){if(this.canMergeObj(t)){var i=t.localizableStrings;if(i)for(var n in i){var o=this.getPropertyByName(n);if(o){var s=o.serializationProperty||o.name,a=this[s];a&&a.mergeWith(i[n],e)}}}},r.prototype.canMergeObj=function(t){if(!t||typeof t.mergeLocalizationObj!="function")return!1;var e=this;return!(t.name&&e.name!==t.name)},r.prototype.mergeLocalizationInArrays=function(t,e){var i=t.arraysInfo;if(i)for(var n in i){var o=this.getPropertyByName(n);if(o&&o.isArray){var s=t[n],a=this[n];if(Array.isArray(s)&&Array.isArray(a))for(var l=0;l<Math.min(s.length,a.length);l++)a[l].mergeLocalizationObj(s[l],e)}}},r.prototype.toJSON=function(t){return new le().toJsonObject(this,t)},r.prototype.getLocalizationJSON=function(t){return this.toJSON({storeLocaleStrings:"stringsOnly",locales:t})},r.prototype.fromJSON=function(t,e){new le().toObject(t,this,e),this.onSurveyLoad()},r.prototype.onSurveyLoad=function(){},r.prototype.clone=function(){var t=V.createClass(this.getType());return t.fromJSON(this.toJSON()),t},r.prototype.getPropertyByName=function(t){var e=this.getType();return(!this.classMetaData||this.classMetaData.name!==e)&&(this.classMetaData=V.findClass(e)),this.classMetaData?this.classMetaData.findProperty(t):null},r.prototype.isPropertyVisible=function(t){var e=this.getPropertyByName(t);return e?e.isVisible("",this):!1},r.createProgressInfo=function(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}},r.prototype.getProgressInfo=function(){return r.createProgressInfo()},r.prototype.localeChanged=function(){},r.prototype.locStrsChanged=function(){if(this.arraysInfo)for(var t in this.arraysInfo){var e=this.arraysInfo[t];if(e&&e.isItemValues){var i=this.getPropertyValue(t);i&&r.itemValueLocStrChanged&&r.itemValueLocStrChanged(i)}}if(this.localizableStrings)for(var t in this.localizableStrings){var e=this.getLocalizableString(t);e&&e.strChanged()}},r.prototype.getValueAsString=function(t){return t==null?"":typeof t=="object"?JSON.stringify(t):t.toString()},r.prototype.getPropertyValue=function(t,e,i){var n=this.getPropertyValueWithoutDefault(t);if(i&&this.isDisposedValue&&(i=void 0),i&&Array.isArray(n)&&n.length===0&&n.isReset===!0)return delete n.isReset,this.setArrayPropertyDirectly(t,i(),!1),n;if(this.isValueUndefined(n)){var o=this.localizableStrings?this.localizableStrings[t]:void 0;if(o)return o.text;if(!this.isValueUndefined(e))return e;if(i){var s=i();if(s!==void 0)if(Array.isArray(s)){var a=this.createNewArray(t);return a.splice.apply(a,z([0,0],s,!1)),a}else return this.setPropertyValueDirectly(t,s,!0),s}var l=this.getDefaultPropertyValue(t);if(l!==void 0)return l}return n},r.prototype.isValueUndefined=function(t){return w.isValueUndefined(t)},r.prototype.getDefaultPropertyValue=function(t){var e=this.getPropertyByName(t);if(!(!e||e.isCustom&&this.isCreating)){if(e.defaultValueFunc)return e.defaultValueFunc(this);var i=e.getDefaultValue(this);if(!this.isValueUndefined(i)&&!Array.isArray(i))return i;var n=this.localizableStrings?this.localizableStrings[t]:void 0;if(n&&n.localizationName)return this.getLocalizationString(n.localizationName);if(e.type=="boolean"||e.type=="switch")return!1;if(e.isCustom&&e.onGetValue)return e.onGetValue(this)}},r.prototype.hasDefaultPropertyValue=function(t){return this.getDefaultPropertyValue(t)!==void 0},r.prototype.resetPropertyValue=function(t){var e=this.localizableStrings?this.localizableStrings[t]:void 0;e?(this.setLocalizableStringText(t,void 0),e.clear()):this.setPropertyValue(t,void 0)},r.prototype.doNotSerializeEmptyProperty=function(t){return this.isPropertyStoredInHash(t.name)},r.prototype.isPropertyStoredInHash=function(t){return!1},r.prototype.getIsSerializablePropertyEmpty=function(t){var e=this.getOriginalByProperty(t.name);return t.isLocalizable&&!t.isMultipleText?!e.getLocalizableString(t.name):e===this&&this.doNotSerializeEmptyProperty(t)?this.getPropertyValueWithoutDefault(t.name)==null:!1},r.prototype.getOriginalObj=function(){return this},r.prototype.getOriginalByProperty=function(t){var e=this.getOriginalObj();return e===this?this:e.getPropertyByName(t)?e:this},r.prototype.getPropertyValueWithoutDefault=function(t){var e=this.getPropertyValueCore(this.propertyHash,t);return Ga(this,t,e),e},r.prototype.getPropertyValueCore=function(t,e){return this.isLoadingFromJson||r.collectDependency(this,e),this.getPropertyValueCoreHandler?this.getPropertyValueCoreHandler(t,e):t[e]},r.prototype.geValueFromHash=function(){return this.propertyHash.value},r.prototype.setPropertyValueCore=function(t,e,i,n){var o=!1;this.setPropertyValueCoreHandler?(o=this.isDisposedValue,o||this.setPropertyValueCoreHandler(t,e,i)):t[e]!==i&&(t[e]=i,!n&&this.onPropertyValueCoreChanged&&(o=this.isDisposedValue,o||this.onPropertyValueCoreChanged.fire(this,{name:e,newValue:i}))),o&&Ee.disposedObjectChangedProperty(e,this.getType())},r.prototype.getItemValuesPropertyValue=function(t){var e=this.getPropertyValue(t);return Array.isArray(e)||(e=this.createItemValues(t),this.setPropertyValueDirectly(t,e)),e},r.prototype.getArrayPropertyValue=function(t,e,i){var n=this.getPropertyValue(t);return Array.isArray(n)||(n=this.createNewArray(t,e,i),this.setPropertyValueDirectly(t,n)),n},r.prototype.setArrayPropertyValue=function(t,e){var i=this[t],n=this.arraysInfo[t];!n||this.isTwoValueEquals(i,e)||this.setArray(t,i,e,n.isItemValues,n.onPush)},Object.defineProperty(r.prototype,"isEditingSurveyElement",{get:function(){var t=this.getSurvey();return!!t&&t.isEditingSurveyElement},enumerable:!1,configurable:!0}),r.prototype.iteratePropertiesHash=function(t){var e=this,i=[];for(var n in this.propertyHash)i.push(n);i.forEach(function(o){return t(e.propertyHash,o)})},r.prototype.setPropertyValue=function(t,e){if(!this.isDisposedValue){if(!this.isLoadingFromJson){var i=this.getPropertyByName(t);i&&(e=i.settingValue(this,e))}var n=this.getPropertyValue(t);n&&Array.isArray(n)&&this.arraysInfo&&(!e||Array.isArray(e))?this.isTwoValueEquals(n,e)?e===void 0&&Array.isArray(n)&&(n.isReset=!0):this.setArrayPropertyDirectly(t,e):e!==n&&(this.setPropertyValueDirectly(t,e),this.isTwoValueEquals(n,e)||this.propertyValueChanged(t,n,e))}},r.prototype.setArrayPropertyDirectly=function(t,e,i){i===void 0&&(i=!0);var n=this.arraysInfo[t];this.setArray(t,this.getPropertyValue(t),e,n?n.isItemValues:!1,n?i&&n.onPush:null)},r.prototype.setPropertyValueDirectly=function(t,e,i){this.setPropertyValueCore(this.propertyHash,t,e,i)},r.prototype.clearPropertyValue=function(t){this.setPropertyValueCore(this.propertyHash,t,null),delete this.propertyHash[t]},r.prototype.onPropertyValueChangedCallback=function(t,e,i,n,o){},r.prototype.itemValuePropertyChanged=function(t,e,i,n){this.onItemValuePropertyChanged.fire(this,{obj:t,name:e,oldValue:i,newValue:n,propertyName:t.ownerPropertyName})},r.prototype.executeOnSyncPropertiesChanged=function(t){this.isFuncExecuting||(this.isFuncExecuting=!0,t(),this.isFuncExecuting=!1)},r.prototype.onPropertyValueChanged=function(t,e,i){},r.prototype.propertyValueChanged=function(t,e,i,n,o){if(!this.isLoadingFromJson&&(this.updateBindings(t,i),this.onPropertyValueChanged(t,e,i),this.onPropertyChanged.fire(this,{name:t,oldValue:e,newValue:i,arrayChanges:n,target:o}),this.doPropertyValueChangedCallback(t,e,i,n,this),this.checkConditionPropertyChanged(t),!!this.onPropChangeFunctions))for(var s=0;s<this.onPropChangeFunctions.length;s++)this.onPropChangeFunctions[s].name==t&&this.onPropChangeFunctions[s].func(i,n)},r.prototype.onBindingChanged=function(t,e){this.isLoadingFromJson||this.doPropertyValueChangedCallback("bindings",t,e)},Object.defineProperty(r.prototype,"isInternal",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.doPropertyValueChangedCallback=function(t,e,i,n,o){var s=function(l){l&&l.onPropertyValueChangedCallback&&l.onPropertyValueChangedCallback(t,e,i,o,n)};if(this.isInternal){s(this);return}o||(o=this);var a=this.getSurvey();a||(a=this),s(a),a!==this&&s(this)},r.prototype.addExpressionProperty=function(t,e,i){this.expressionInfo||(this.expressionInfo={}),this.expressionInfo[t]={onExecute:e,canRun:i}},r.prototype.validateExpression=function(t,e,i){if(e){var n=this.getPropertyByName(t),o=!!n&&n.type=="condition",s=this.createExpressionRunner(e),a=s.validate(this.getValueGetterContext(),i,o);return a.length?{obj:this,propertyName:t,errors:a}:void 0}},r.prototype.validateExpressions=function(t){var e=this;t===void 0&&(t={functions:!0,variables:!0,semantics:!0});var i=[];V.getPropertiesByObj(this).forEach(function(l){if(l.isExpression){var u=e.validateExpression(l.name,e[l.name],t);u&&i.push(u)}});for(var n=0,o=this.getAllChildren();n<o.length;n++){var s=o[n],a=s.validateExpressions(t);a&&a.length>0&&i.push.apply(i,a)}return i},r.prototype.getAllChildren=function(){return[]},r.prototype.getDataFilteredProperties=function(){return{}},r.prototype.runConditionCore=function(t){if(this.expressionInfo)for(var e in this.expressionInfo)this.runConditionItemCore(e,t)},r.prototype.canRunConditions=function(){return!this.isDesignMode},r.prototype.checkConditionPropertyChanged=function(t){!this.expressionInfo||!this.expressionInfo[t]||this.canRunConditions()&&this.runConditionItemCore(t,this.getDataFilteredProperties())},r.prototype.runConditionItemCore=function(t,e){var i=this,n=this.expressionInfo[t],o=this.getPropertyValue(t);o&&(n.canRun&&!n.canRun(this)||this.runExpressionByProperty(t,e,function(s){n.onExecute(i,s)}))},r.prototype.doBeforeAsynRun=function(t){this.asynExpressionHash||(this.asynExpressionHash={});var e=!this.isAsyncExpressionRunning;this.asynExpressionHash[t]=!0,e&&this.onAsyncRunningChanged()},r.prototype.doAfterAsynRun=function(t){this.asynExpressionHash&&(delete this.asynExpressionHash[t],this.isAsyncExpressionRunning||this.onAsyncRunningChanged())},r.prototype.onAsyncRunningChanged=function(){},Object.defineProperty(r.prototype,"isAsyncExpressionRunning",{get:function(){return!!this.asynExpressionHash&&Object.keys(this.asynExpressionHash).length>0},enumerable:!1,configurable:!0}),r.prototype.createExpressionRunner=function(t){var e=this,i=new fr(t);return i.onBeforeAsyncRun=function(n){e.doBeforeAsynRun(n)},i.onAfterAsyncRun=function(n){e.doAfterAsynRun(n)},i},r.prototype.getExpressionFromSurvey=function(t){var e=this[t];if(!e)return"";var i=this.getSurvey();return i?i.beforeExpressionRunning(this,t,e):e},r.prototype.runExpressionByProperty=function(t,e,i,n){if(!this[t])return!1;var o=this.getExpressionFromSurvey(t);if(o){var s=this.getExpressionInfoByProperty(t,o),a=s.runner;!s.isRunning&&(!n||n(a))&&(s.isRunning=!0,a.onRunComplete=function(l){i(l),s.isRunning=!1},a.runContext(this.getValueGetterContext(),this.getPropertiesCopy(e,t)))}return!0},r.prototype.getPropertiesCopy=function(t,e){var i={};for(var n in t)i[n]=t[n];return e&&(i.propertyName=e),i},r.prototype.getExpressionByProperty=function(t){var e=this.getExpressionFromSurvey(t);return e?this.getExpressionInfoByProperty(t,e).runner:null},r.prototype.getExpressionInfoByProperty=function(t,e){this.runExpressionHash||(this.runExpressionHash={});var i=this.runExpressionHash[t];return i?i.runner.expression=e:(i={runner:this.createExpressionRunner(e)},this.runExpressionHash[t]=i),i},r.prototype.registerPropertyChangedHandlers=function(t,e,i){i===void 0&&(i=null);for(var n=0;n<t.length;n++)this.registerFunctionOnPropertyValueChanged(t[n],e,i)},r.prototype.unregisterPropertyChangedHandlers=function(t,e){e===void 0&&(e=null);for(var i=0;i<t.length;i++)this.unRegisterFunctionOnPropertyValueChanged(t[i],e)},r.prototype.registerFunctionOnPropertyValueChanged=function(t,e,i){if(i===void 0&&(i=null),this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),i)for(var n=0;n<this.onPropChangeFunctions.length;n++){var o=this.onPropChangeFunctions[n];if(o.name==t&&o.key==i){o.func=e;return}}this.onPropChangeFunctions.push({name:t,func:e,key:i})},r.prototype.registerFunctionOnPropertiesValueChanged=function(t,e,i){i===void 0&&(i=null),this.registerPropertyChangedHandlers(t,e,i)},r.prototype.unRegisterFunctionOnPropertyValueChanged=function(t,e){if(e===void 0&&(e=null),!!this.onPropChangeFunctions)for(var i=0;i<this.onPropChangeFunctions.length;i++){var n=this.onPropChangeFunctions[i];if(n.name==t&&n.key==e)return this.onPropChangeFunctions.splice(i,1)}},r.prototype.unRegisterFunctionOnPropertiesValueChanged=function(t,e){e===void 0&&(e=null),this.unregisterPropertyChangedHandlers(t,e)},r.prototype.addPropertyDependency=function(t,e){var i=this;if(!(!t||!e)){var n=this.uniqueId+"_"+e;this.expressionDependencies[n]||(t.registerFunctionOnPropertyValueChanged(e,function(){i.onDependencyValueChanged(t,e)},n),this.expressionDependencies[n]={obj:t,propertyName:e})}},r.prototype.onDependencyValueChanged=function(t,e){this.runConditionCore(this.getDataFilteredProperties()),this.locStrsChanged()},r.prototype.createCustomLocalizableObj=function(t){var e=this.getLocalizableString(t);return e||this.createLocalizableString(t,this,!1,!0)},r.prototype.getLocale=function(){var t=this.getSurvey();return t?t.getLocale():""},r.prototype.getLocalizationString=function(t){return te(t,this.getLocale())},r.prototype.getLocalizationFormatString=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getLocalizationString(t);return!n||!n.format?"":n.format.apply(n,e)},r.prototype.createLocString=function(t){return t.hasTranslation&&!t.translationKey&&(t.translationKey=t.name),this.createLocalizableString(t.name,t.owner,t.supportsMarkdown,t.translationKey)},r.prototype.createLocalizableString=function(t,e,i,n){i===void 0&&(i=!1),n===void 0&&(n=!1),e||(e=this);var o=void 0;n&&(o=n===!0?t:n);var s=this.createLocalizableStringCore(e,t,i,o),a=this.getPropertyByName(t);return s.disableLocalization=a&&a.isLocalizable===!1,s},r.prototype.createLocalizableStringCore=function(t,e,i,n){var o=this,s=new me(t,i,e,n);return e&&(s.onStrChanged=function(a,l){o.propertyValueChanged(e,a,l)}),this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[e]=s,s},r.prototype.removeLocalizableString=function(t){this.localizableStrings&&delete this.localizableStrings[t]},r.prototype.getLocalizableString=function(t){var e=this.localizableStrings;return e?e[t]:null},r.prototype.getOrCreateLocStr=function(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);var o=this.getLocalizableString(t);return o||(o=this.createLocalizableString(t,void 0,e,i),n&&n(o)),o},r.prototype.locStrChanged=function(t){var e=this.getLocalizableString(t);e&&e.strChanged()},r.prototype.isLocStrEmpty=function(t){var e=this.getLocalizableString(t);return!e||e.isEmpty},r.prototype.getLocalizableStringText=function(t,e){return e===void 0&&(e=""),this.getLocStringText(this.getLocalizableString(t),e)},r.prototype.setLocalizableStringText=function(t,e){this.setLocStringText(this.getLocalizableString(t),e)},r.prototype.getLocStringText=function(t,e){return e===void 0&&(e=""),t?.name&&r.collectDependency(this,t.name),t?.text||e},r.prototype.setLocStringText=function(t,e){if(t){var i=t.text;i!=e&&(t.text=e)}},r.prototype.addUsedLocales=function(t){if(this.localizableStrings)for(var e in this.localizableStrings){var i=this.getLocalizableString(e);i&&this.addLocStringToUsedLocales(i,t)}if(this.arraysInfo)for(var e in this.arraysInfo){var n=this.getPropertyByName(e);if(!(!n||!n.isPropertySerializable(this))){var o=this.getPropertyValue(e);if(!(!o||!o.length))for(var s=0;s<o.length;s++){var i=o[s];i&&i.addUsedLocales&&i.addUsedLocales(t)}}}},r.prototype.searchText=function(t,e){var i=[];this.getSearchableLocalizedStrings(i);for(var n=0;n<i.length;n++)i[n].setFindText(t)&&e.push({element:this,str:i[n]})},r.prototype.getSearchableLocalizedStrings=function(t){if(this.localizableStrings){var e=[];this.getSearchableLocKeys(e);for(var i=0;i<e.length;i++){var n=this.getLocalizableString(e[i]);n&&t.push(n)}}if(this.arraysInfo){var o=[];this.getSearchableItemValueKeys(o);for(var i=0;i<o.length;i++){var s=this.getPropertyValue(o[i]);if(s)for(var a=0;a<s.length;a++)t.push(s[a].locText)}}},r.prototype.getSearchableLocKeys=function(t){},r.prototype.getSearchableItemValueKeys=function(t){},r.prototype.addLocStringToUsedLocales=function(t,e){for(var i=t.getLocales(),n=0;n<i.length;n++)e.indexOf(i[n])<0&&e.push(i[n])},r.prototype.createItemValues=function(t){var e=this,i=this.createNewArray(t,function(n){if(n.locOwner=e,n.ownerPropertyName=t,typeof n.getSurvey=="function"){var o=n.getSurvey();o&&typeof o.makeReactive=="function"&&o.makeReactive(n)}});return this.arraysInfo[t].isItemValues=!0,i},r.prototype.addOnArrayChangedCallback=function(t){this.onArrayChanged||(this.onArrayChanged=new se),this.onArrayChanged.add(t)},r.prototype.removeOnArrayChangedCallback=function(t){this.onArrayChanged&&(this.onArrayChanged.remove(t),this.onArrayChanged.isEmpty&&(this.onArrayChanged=void 0))},r.prototype.notifyArrayChanged=function(t,e,i){this.onArrayChanged&&this.onArrayChanged.fire(this,{arrayChanges:i,name:t,newValue:e,valueFromHash:this.propertyHash[t]})},r.prototype.addOnPropertyValueChangedCallback=function(t){this.onPropertyValueCoreChanged||(this.onPropertyValueCoreChanged=new se),this.onPropertyValueCoreChanged.add(t)},r.prototype.removeOnPropertyValueChangedCallback=function(t){this.onPropertyValueCoreChanged&&(this.onPropertyValueCoreChanged.remove(t),this.onPropertyValueCoreChanged.isEmpty&&(this.onPropertyValueCoreChanged=void 0))},Object.defineProperty(r.prototype,"hasActiveUISubscribers",{get:function(){return!!this.onPropertyValueCoreChanged},enumerable:!1,configurable:!0}),r.prototype.createNewArrayCore=function(t){var e=null;return this.createArrayCoreHandler&&(e=this.createArrayCoreHandler(this.propertyHash,t)),e||(e=new Array,this.setPropertyValueCore(this.propertyHash,t,e)),e},r.prototype.ensureArray=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),!(this.arraysInfo&&this.arraysInfo[t]))return this.createNewArray(t,e,i)},r.prototype.createNewArray=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=this.createNewArrayCore(t);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[t]={onPush:e,isItemValues:!1};var o=this;return n.push=function(s){var a=Object.getPrototypeOf(n).push.call(n,s);if(!o.isDisposedValue){e&&e(s,n.length-1);var l=new Be(n.length-1,0,[s],[]);o.propertyValueChanged(t,n,n,l),o.notifyArrayChanged(t,n,l)}return a},n.shift=function(){var s=Object.getPrototypeOf(n).shift.call(n);if(!o.isDisposedValue&&s){i&&i(s);var a=new Be(n.length-1,1,[],[]);o.propertyValueChanged(t,n,n,a),o.notifyArrayChanged(t,n,a)}return s},n.unshift=function(s){var a=Object.getPrototypeOf(n).unshift.call(n,s);if(!o.isDisposedValue){e&&e(s,n.length-1);var l=new Be(0,0,[s],[]);o.propertyValueChanged(t,n,n,l),o.notifyArrayChanged(t,n,l)}return a},n.pop=function(){var s=Object.getPrototypeOf(n).pop.call(n);if(!o.isDisposedValue){i&&i(s);var a=new Be(n.length-1,1,[],[]);o.propertyValueChanged(t,n,n,a),o.notifyArrayChanged(t,n,a)}return s},n.splice=function(s,a){for(var l,u=[],f=2;f<arguments.length;f++)u[f-2]=arguments[f];s||(s=0),a||(a=0);var y=(l=Object.getPrototypeOf(n).splice).call.apply(l,z([n,s,a],u,!1));if(u||(u=[]),!o.isDisposedValue){if(i&&y)for(var b=0;b<y.length;b++)i(y[b]);if(e)for(var b=0;b<u.length;b++)e(u[b],s+b);var E=new Be(s,a,u,y);o.propertyValueChanged(t,n,n,E),o.notifyArrayChanged(t,n,E)}return y},n},r.prototype.getItemValueType=function(){},r.prototype.setArray=function(t,e,i,n,o){var s=[].concat(e);if(Object.getPrototypeOf(e).splice.call(e,0,e.length),i){for(var a=0;a<i.length;a++){var l=i[a];n&&r.createItemValue&&(l=r.createItemValue(l,this.getItemValueType())),Object.getPrototypeOf(e).push.call(e,l),o&&o(e[a])}delete e.isReset}else e.isReset=!0;var u=new Be(0,s.length,e,s);this.propertyValueChanged(t,s,e,u),this.notifyArrayChanged(t,e,u)},r.prototype.isTwoValueEquals=function(t,e,i,n){return i===void 0&&(i=!1),n===void 0&&(n=!1),w.checkIfValuesEqual(t,e,{ignoreOrder:!1,caseSensitive:!i,trimStrings:n,doNotConvertNumbers:!0})},r.copyObject=function(t,e){for(var i in e){var n=e[i];typeof n=="object"&&(n={},this.copyObject(n,e[i])),t[i]=n}},r.prototype.copyCssClasses=function(t,e){e&&(typeof e=="string"||e instanceof String?t.root=e:r.copyObject(t,e))},r.prototype.getValueInLowCase=function(t){return t&&typeof t=="string"?t.toLowerCase():t},r.prototype.getElementsInDesign=function(t){return[]},Object.defineProperty(r.prototype,"animationAllowed",{get:function(){return this.getIsAnimationAllowed()},enumerable:!1,configurable:!0}),r.prototype.getIsAnimationAllowed=function(){return C.animationEnabled&&this.animationAllowedLock>=0&&!this.isLoadingFromJson&&!this.isDisposed&&(!!this.onElementRerendered||!this.supportOnElementRerenderedEvent)},r.prototype.blockAnimations=function(){this.animationAllowedLock--},r.prototype.releaseAnimations=function(){this.animationAllowedLock++},r.prototype.enableOnElementRerenderedEvent=function(){this.onElementRerenderedEventEnabled=!0},r.prototype.disableOnElementRerenderedEvent=function(){var t;(t=this.onElementRerendered)===null||t===void 0||t.fire(this,{isCancel:!0}),this.onElementRerenderedEventEnabled=!1},Object.defineProperty(r.prototype,"onElementRerendered",{get:function(){return this.supportOnElementRerenderedEvent&&this.onElementRerenderedEventEnabled?this._onElementRerendered:void 0},enumerable:!1,configurable:!0}),r.prototype.afterRerender=function(){var t;(t=this.onElementRerendered)===null||t===void 0||t.fire(this,{isCancel:!1})},r.UniqueId=0,r.currentDependencis=void 0,r})(),Be=(function(){function r(t,e,i,n){this.index=t,this.deleteCount=e,this.itemsToAdd=i,this.deletedItems=n}return r})(),wi=(function(){function r(){}return Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.callbacks?this.callbacks.length:0},enumerable:!1,configurable:!0}),r.prototype.fireByCreatingOptions=function(t,e){if(this.callbacks){for(var i=0;i<this.callbacks.length;i++)if(this.callbacks[i](t,e()),!this.callbacks)return}},r.prototype.fire=function(t,e){if(this.callbacks){for(var i=[].concat(this.callbacks),n=0;n<i.length;n++)if(i[n](t,e),!this.callbacks)return}},r.prototype.clear=function(){this.callbacks=void 0},r.prototype.add=function(t){this.hasFunc(t)||(this.callbacks||(this.callbacks=new Array),this.callbacks.push(t),this.fireCallbackChanged())},r.prototype.remove=function(t){if(this.hasFunc(t)){var e=this.callbacks.indexOf(t,0);this.callbacks.splice(e,1),this.fireCallbackChanged()}},r.prototype.hasFunc=function(t){return this.callbacks==null?!1:this.callbacks.indexOf(t,0)>-1},r.prototype.fireCallbackChanged=function(){this.onCallbacksChanged&&this.onCallbacksChanged()},r})(),se=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(wi),Ka=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.fire=function(e,i,n,o){if(n=n||(function(){}),!this.callbacks){n();return}for(var s=[],a=[].concat(this.callbacks),l=0;l<a.length;l++){var u=a[l](e,i);if(u&&u instanceof Promise&&s.push(u),!this.callbacks)return}s.length>0?(o&&o(),Promise.all(s).then(function(){n()})):n()},t})(se),Pi=(function(){function r(t,e,i){var n=this;this.container=t,this.model=e,this.afterInitializeCallback=i,this.resizeObserver=void 0,this.isInitialized=!1,this.isResizeObserverStarted=!1,this.getComputedStyle=function(o){return D.getComputedStyle(o)},this.isDisposed=!1,typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(function(o){k.requestAnimationFrame(function(){n.isResizeObserverStarted=!0,n.process()})}),this.resizeObserver.observe(this.container.parentElement))}return r.prototype.getDimensions=function(t){return{scroll:t.scrollWidth,offset:t.offsetWidth}},r.prototype.getAvailableSpace=function(){var t=this.getComputedStyle(this.container),e=this.container.offsetWidth;return t.boxSizing==="border-box"&&(e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)),e},r.prototype.getGap=function(){var t=this.getComputedStyle(this.container);if(t.display=="flex"){var e=parseFloat(t.rowGap);return isNaN(e)?0:e}return 0},r.prototype.calcItemSize=function(t){return t.offsetWidth||t.getBoundingClientRect().width},r.prototype.updateItemsDimensions=function(t){var e=this;if(this.container){var i=this.isInitialized?this.model.renderedActions.filter(function(s){return s.needUpdateMaxDimension||s.needUpdateMinDimension}):this.model.renderedActions,n=i.length;n==0&&t();var o=function(){--n<=0&&t()};i.forEach(function(s){var a=!e.isInitialized||s.needUpdateMaxDimension,l=!e.isInitialized||s.needUpdateMinDimension,u=l?a?void 0:"small":"large";s.updateDimensions(function(f){return e.calcItemSize(f)},function(){s.needUpdateMaxDimension=!1,s.needUpdateMinDimension=!1,o()},u)})}},Object.defineProperty(r.prototype,"isContainerVisible",{get:function(){return!!this.container&&Bi(this.container)},enumerable:!1,configurable:!0}),r.prototype.shouldProcessResponsiveness=function(){return this.isContainerVisible&&!this.model.isResponsivenessDisabled&&!this.isDisposed},r.prototype.process=function(){var t=this;this.shouldProcessResponsiveness()&&this.updateItemsDimensions(function(){t.shouldProcessResponsiveness()&&t.model.fit({availableSpace:t.getAvailableSpace(),gap:t.getGap()}),t.isInitialized||(t.isInitialized=!0,t.afterInitializeCallback&&t.afterInitializeCallback())})},r.prototype.update=function(t){this.isResizeObserverStarted&&(this.model.isResponsivenessDisabled||(t&&(this.isInitialized=!1),this.process()))},r.prototype.dispose=function(){this.isDisposed=!0,this.resizeObserver&&this.resizeObserver.disconnect(),this.isResizeObserverStarted=!1,this.resizeObserver=void 0,this.container=void 0},r})(),Ya=(function(r){P(t,r);function t(e,i){return r.call(this,e,i)||this}return t.prototype.getDimensions=function(){return{scroll:this.container.scrollHeight,offset:this.container.offsetHeight}},t.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),i=this.container.offsetHeight;return e.boxSizing==="border-box"&&(i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),i},t.prototype.calcItemSize=function(e){return e.offsetHeight},t})(Pi),I=(function(){function r(){this.classes=[]}return r.prototype.isEmpty=function(){return this.toString()===""},r.prototype.append=function(t,e){return e===void 0&&(e=!0),t&&e&&(typeof t=="string"&&(t=t.trim()),this.classes.push(t)),this},r.prototype.toString=function(){return this.classes.join(" ")},r})();(function(){function r(t,e){e===void 0&&(e=!1);var i=this;this.func=t,this.isMultiple=e,this._isCompleted=!1,this.execute=function(){i._isCompleted||(i.func(),i._isCompleted=!i.isMultiple)}}return r.prototype.discard=function(){this._isCompleted=!0},Object.defineProperty(r.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!1,configurable:!0}),r})();function gr(r){var t=this,e=!1,i=!1,n,o=function(){i=!0,n=void 0};return{run:(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];i=!1,n=s,e||(e=!0,queueMicrotask(function(){i||r.apply(t,n),n=void 0,i=!1,e=!1}))}),cancel:o,getLastArguments:function(){return n},flushSync:function(){!i&&e&&(r.apply(t,n),o())}}}var ye={root:"sv-action-bar",defaultSizeMode:"sv-action-bar--default-size-mode",smallSizeMode:"sv-action-bar--small-size-mode",item:"sv-action-bar-item",itemWithTitle:"",itemAsIcon:"sv-action-bar-item--icon",itemActive:"sv-action-bar-item--active",itemPressed:"sv-action-bar-item--pressed",itemIcon:"sv-action-bar-item__icon",itemTitle:"sv-action-bar-item__title",itemTitleWithIcon:"sv-action-bar-item__title--with-icon"},be=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.id=t.ContainerID++,e.visibleActions=[],e.sizeMode="default",e.raiseUpdateCallback=gr(function(i){e.update(i)}),e.onActionPropertyChangedCallback=e.onActionPropertyChanged.bind(e),e.createActionCallback=null,e}return t.prototype.getMarkdownHtml=function(e,i,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getRenderedActions=function(){return this.visibleActions},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.actions.forEach(function(e){e.locTitle&&e.locTitle.strChanged(),e.locStrsChanged()})},t.prototype.flushUpdates=function(){this.raiseUpdateCallback.flushSync()},t.prototype.raiseUpdate=function(e){var i,n=this.raiseUpdateCallback.getLastArguments(),o=(i=n&&n[0])!==null&&i!==void 0?i:{};this.raiseUpdateCallback.run(this.mergeUpdateOptions(e,o))},t.prototype.mergeUpdateOptions=function(e,i){var n=Object.assign({},e);return n.needUpdateActions=!!n.needUpdateActions||!!i.needUpdateActions,n.needUpdateIsEmpty=!!n.needUpdateIsEmpty||!!i.needUpdateIsEmpty,n},t.prototype.update=function(e){e?.needUpdateActions&&this.updateVisibleActions(),e?.needUpdateIsEmpty&&this.updateIsEmpty()},t.prototype.updateVisibleActions=function(){this.visibleActions=this.getVisibleActions()},t.prototype.updateIsEmpty=function(){this.isEmpty=this.getIsEmpty()},t.prototype.getIsEmpty=function(){return this.visibleActions.length<=0},t.prototype.getVisibleActions=function(){return this.actions.filter(function(e){return e.visible!==!1})},t.prototype.onSet=function(){var e=this;this.actions.forEach(function(i){e.patchAction(i)})},t.prototype.onPush=function(e){this.patchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.onRemove=function(e){this.unPatchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.onActionPropertyChanged=function(e,i){i.name=="_visible"&&this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.patchAction=function(e){this.setActionCssClasses(e),e.owner=this,e.onPropertyChanged.add(this.onActionPropertyChangedCallback)},t.prototype.unPatchAction=function(e){e.owner=null,e.onPropertyChanged.remove(this.onActionPropertyChangedCallback)},t.prototype.setActionCssClasses=function(e){e.cssClasses=this.cssClasses},Object.defineProperty(t.prototype,"hasActions",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVisibleActions",{get:function(){return!this.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedActions",{get:function(){return this.getRenderedActions()},enumerable:!1,configurable:!0}),t.prototype.getRootStyle=function(){},t.prototype.getRootCss=function(){var e=this.sizeMode==="small"?this.cssClasses.smallSizeMode:this.cssClasses.defaultSizeMode;return new I().append(this.cssClasses.root+(e?" "+e:"")+(this.containerCss?" "+this.containerCss:"")).append(this.cssClasses.root+"--empty",this.isEmpty).toString()},t.prototype.getDefaultCssClasses=function(){return ye},t.prototype.getAllActions=function(){return this.actions},t.prototype.setCssClasses=function(e,i){var n=this;i===void 0&&(i=!0),this.cssClassesValue={},i&&this.copyCssClasses(this.cssClassesValue,this.getDefaultCssClasses()),dt(e,this.cssClasses),this.getAllActions().forEach(function(o){n.setActionCssClasses(o)})},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||(this.cssClassesValue=this.getDefaultCssClasses()),this.cssClassesValue},set:function(e){this.setCssClasses(e)},enumerable:!1,configurable:!0}),t.prototype.createAction=function(e){return e instanceof Mt?e:this.createActionCore(this,e)},t.prototype.createActionCore=function(e,i){return this.createActionCallback?this.createActionCallback(i):new G(i)},t.prototype.addAction=function(e,i){i===void 0&&(i=!0);var n=this.createAction(e);if(i&&!this.isActionVisible(n))return n;var o=[].concat(this.actions,n);return this.sortItems(o),this.actions=o,n},t.prototype.removeActionById=function(e){var i=this.getActionIndexById(e);return i<0?!1:(this.actions.splice(i,1),!0)},t.prototype.setItems=function(e,i){var n=this;i===void 0&&(i=!0);var o=[];e.forEach(function(s){(!i||n.isActionVisible(s))&&o.push(n.createAction(s))}),i&&this.sortItems(o),this.actions=o},t.prototype.sortItems=function(e){this.hasSetVisibleIndex(e)&&e.sort(this.compareByVisibleIndex)},t.prototype.hasSetVisibleIndex=function(e){for(var i=0;i<e.length;i++){var n=e[i].visibleIndex;if(n!==void 0&&n>=0)return!0}return!1},t.prototype.compareByVisibleIndex=function(e,i){return e.visibleIndex-i.visibleIndex},t.prototype.isActionVisible=function(e){return e.visibleIndex>=0||e.visibleIndex===void 0},t.prototype.popupAfterShowCallback=function(e){},t.prototype.mouseOverHandler=function(e){e.isHovered=!0;var i=!1,n=!1;if(this.actions.forEach(function(s){s===e&&e.popupModel&&(i=!0),s.popupModel&&s.popupModel.isVisible&&(n=!0)}),i){var o=n?Math.max(this.subItemsShowDelay,this.subItemsHideDelay):this.subItemsShowDelay;e.showPopupDelayed(o),this.popupAfterShowCallback(e)}},t.prototype.initResponsivityManager=function(e,i){},t.prototype.resetResponsivityManager=function(){},t.prototype.getActionById=function(e){var i=this.getActionIndexById(e);return i>-1?this.actions[i]:null},t.prototype.getActionIndexById=function(e){for(var i=0;i<this.actions.length;i++)if(this.actions[i].id===e)return i;return-1},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.resetResponsivityManager(),this.actions.forEach(function(e){return e.dispose()}),this.actions.length=0},t.ContainerID=1,c([re({})],t.prototype,"visibleActions",void 0),c([re({onSet:function(e,i){i.onSet()},onPush:function(e,i,n){n.onPush(e)},onRemove:function(e,i,n){n.onRemove(e)}})],t.prototype,"actions",void 0),c([p({})],t.prototype,"containerCss",void 0),c([p({defaultValue:!0})],t.prototype,"isEmpty",void 0),c([p({defaultValue:300})],t.prototype,"subItemsShowDelay",void 0),c([p({defaultValue:300})],t.prototype,"subItemsHideDelay",void 0),t})(U),Xe=(function(){function r(){}return r.focusElement=function(t){t&&t.focus()},r.visibility=function(t){var e=D.getComputedStyle(t);return e.display==="none"||e.visibility==="hidden"?!1:t.parentElement?this.visibility(t.parentElement):!0},r.getNextElementPreorder=function(t){var e=t.nextElementSibling?t.nextElementSibling:t.parentElement.firstElementChild;return this.visibility(e)?e:this.getNextElementPreorder(e)},r.getNextElementPostorder=function(t){var e=t.previousElementSibling?t.previousElementSibling:t.parentElement.lastElementChild;return this.visibility(e)?e:this.getNextElementPostorder(e)},r.hasHorizontalScroller=function(t){return t?t.scrollWidth>t.offsetWidth:!1},r.hasVerticalScroller=function(t){return t?t.scrollHeight>t.offsetHeight:!1},r})(),Vi=!1,yr=null;typeof navigator<"u"&&navigator&&k.isAvailable()&&(yr=navigator.userAgent||navigator.vendor||k.hasOwn("opera")),(function(r){r&&(navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0||navigator.platform==="iPad"||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substring(0,4)))&&(Vi=!0)})(yr);var Xa=!1,Lt=Vi||Xa,mr={get isTouch(){return!this.hasMouse&&this.hasTouchEvent},get hasTouchEvent(){return k.isAvailable()&&(k.hasOwn("ontouchstart")||navigator.maxTouchPoints>0)},hasMouse:!0},Za=k.matchMedia;mr.hasMouse=nl(Za),m.IsTouch=mr.isTouch;function el(r){m.IsTouch=r}var Si=void 0;function tl(r){Si=r}function il(r,t,e){if(e===void 0&&(e=600),Si!==void 0)return Si;var i=r||k.getInnerWidth(),n=t||k.getInnerHeight(),o=Math.min(i,n),s=o>=e;return s}function nl(r){if(!r||Lt)return!1;var t=r("(pointer:fine)"),e=r("(any-hover:hover)");return!!t&&t.matches||!!e&&e.matches}var rl={root:"sv-list__container",item:"sv-list__item",searchClearButtonIcon:"sv-list__filter-clear-button",loadingIndicator:"sv-list__loading-indicator",itemSelected:"sv-list__item--selected",itemGroup:"sv-list__item--group",itemGroupSelected:"sv-list__item--group-selected",itemWithIcon:"sv-list__item--with-icon",itemDisabled:"sv-list__item--disabled",itemFocused:"sv-list__item--focused",itemHovered:"sv-list__item--hovered",itemTextWrap:"sv-list__item-text--wrap",itemIcon:"sv-list__item-icon",itemMarkerIcon:"sv-list-item__marker-icon",itemSeparator:"sv-list__item-separator",itemBody:"sv-list__item-body",itemsContainer:"sv-list",itemsContainerFiltering:"sv-list--filtering",filter:"sv-list__filter",filterIcon:"sv-list__filter-icon",filterInput:"sv-list__input",emptyContainer:"sv-list__empty-container",emptyText:"sv-list__empty-text"},ct=(function(r){P(t,r);function t(e,i,n,o,s){var a=r.call(this)||this;if(a.onSelectionChanged=i,a.allowSelection=n,a.elementId=s,a.onItemClick=function(u){if(!a.isItemDisabled(u)){a.isExpanded=!1,a.allowSelection&&(a.selectedItem=u),a.onSelectionChanged&&a.onSelectionChanged(u);var f=u.action;f&&f(u)}},a.onItemHover=function(u){a.mouseOverHandler(u)},a.isItemDisabled=function(u){return u.enabled!==void 0&&!u.enabled},a.getA11yItemAriaSelected=function(u){if(a.listItemRole=="option")return a.isItemSelected(u)?"true":"false"},a.getA11yItemAriaChecked=function(u){if(a.listItemRole=="menuitemradio")return a.isItemSelected(u)?"true":"false"},a.isItemSelected=function(u){return a.areSameItems(a.selectedItem,u)},a.isItemFocused=function(u){return a.areSameItems(a.focusedItem,u)},a.getListClass=function(){return new I().append(a.cssClasses.itemsContainer).append(a.cssClasses.itemsContainerFiltering,!!a.filterString&&a.visibleActions.length!==a.visibleItems.length).toString()},a.getItemClass=function(u){var f=a.isItemSelected(u);return new I().append(a.cssClasses.item).append(a.cssClasses.itemWithIcon,!!u.iconName).append(a.cssClasses.itemDisabled,a.isItemDisabled(u)).append(a.cssClasses.itemFocused,a.isItemFocused(u)).append(a.cssClasses.itemSelected,!u.hasSubItems&&f).append(a.cssClasses.itemGroup,u.hasSubItems).append(a.cssClasses.itemGroupSelected,u.hasSubItems&&f).append(a.cssClasses.itemHovered,u.isHovered).append(a.cssClasses.itemTextWrap,a.textWrapEnabled).append(u.css).toString()},a.getItemStyle=function(u){var f=u.level||0;return{"--sjs-list-item-level":f+1}},Object.keys(e).indexOf("items")!==-1){var l=e;Object.keys(l).forEach(function(u){switch(u){case"items":a.setItems(l.items);break;case"onFilterStringChangedCallback":a.setOnFilterStringChangedCallback(l.onFilterStringChangedCallback);break;case"onTextSearchCallback":a.setOnTextSearchCallback(l.onTextSearchCallback);break;default:a[u]=l[u]}}),a.updateActionsIds()}else a.setItems(e),a.selectedItem=o;return a}return t.prototype.hasText=function(e,i){if(!i)return!0;var n=e.title||"";if(this.onTextSearchCallback)return this.onTextSearchCallback(e,i);var o=n.toLocaleLowerCase();return o=C.comparator.normalizeTextCallback(o,"filter"),o.indexOf(i.toLocaleLowerCase())>-1},t.prototype.isItemVisible=function(e){return e.id===this.loadingIndicator.id||this.disableSearch?e.visible:e.visible&&this.hasText(e,this.filterString)},t.prototype.getRenderedActions=function(){var e=r.prototype.getRenderedActions.call(this);if(this.filterString){var i=[];return e.forEach(function(n){i.push(n),n.items&&n.items.forEach(function(o){var s=new G(o);s.iconName||(s.iconName=n.iconName),i.push(s)})}),i}return e},Object.defineProperty(t.prototype,"visibleItems",{get:function(){var e=this;return this.actions.filter(function(i){return e.isItemVisible(i)})},enumerable:!1,configurable:!0}),t.prototype.onFilterStringChanged=function(e){this.onFilterStringChangedCallback&&this.onFilterStringChangedCallback(e),this.raiseUpdate({needUpdateIsEmpty:!0})},t.prototype.getIsEmpty=function(){var e=this;return!this.renderedActions.some(function(i){return e.isItemVisible(i)})},t.prototype.scrollToItem=function(e,i){var n=this;i===void 0&&(i=0),setTimeout(function(){if(n.listContainerHtmlElement){var o=n.listContainerHtmlElement.querySelector(pe(e));o&&setTimeout(function(){o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},i)}},i)},t.prototype.setOnFilterStringChangedCallback=function(e){this.onFilterStringChangedCallback=e},t.prototype.setOnTextSearchCallback=function(e){this.onTextSearchCallback=e},t.prototype.setItems=function(e,i){i===void 0&&(i=!0),r.prototype.setItems.call(this,e,i),this.updateActionsIds(),!this.isAllDataLoaded&&this.actions.length&&this.actions.push(this.loadingIndicator)},t.prototype.updateActionsIds=function(){var e=this;this.elementId&&this.actions.forEach(function(i){i.elementId=e.elementId+i.id})},t.prototype.setSearchEnabled=function(e){this.searchEnabled=e,this.showSearchClearButton=e},t.prototype.onSet=function(){this.showFilter=this.searchEnabled&&(this.forceShowFilter||(this.actions||[]).length>t.MINELEMENTCOUNT),r.prototype.onSet.call(this)},t.prototype.getDefaultCssClasses=function(){return rl},t.prototype.popupAfterShowCallback=function(e){this.addScrollEventListener(function(){e.hidePopup()})},t.prototype.onItemLeave=function(e){e.hidePopupDelayed(this.subItemsHideDelay)},t.prototype.areSameItems=function(e,i){return this.areSameItemsCallback?this.areSameItemsCallback(e,i):!!e&&!!i&&e.id==i.id},Object.defineProperty(t.prototype,"a11ya11y_input_ariaLabel",{get:function(){return this.listAriaLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterStringPlaceholder",{get:function(){return this.getLocalizationString("filterStringPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyMessage",{get:function(){return this.isAllDataLoaded?this.getLocalizationString("emptyMessage"):this.getLocalizationString("loadingData")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollableContainer",{get:function(){return this.listContainerHtmlElement.querySelector(pe(this.cssClasses.itemsContainer))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingIndicator",{get:function(){if(!this.loadingIndicatorValue){var e=new G({id:"loadingIndicator",title:this.getLocalizationString("loadingPage"),action:function(){},css:this.cssClasses.loadingIndicator});e.initLoadingIndicatorVisibilityObserver(this.loadingIndicatorVisibilityObserver),this.loadingIndicatorValue=e}return this.loadingIndicatorValue},enumerable:!1,configurable:!0}),t.prototype.goToItems=function(e){if(e.key==="ArrowDown"||e.keyCode===40){var i=e.target.parentElement,n=i.parentElement.querySelector("ul"),o=ml(n);n&&o&&(Xe.focusElement(o),e.preventDefault())}},t.prototype.onMouseMove=function(e){this.resetFocusedItem()},t.prototype.onKeyDown=function(e){var i=e.target;e.key==="ArrowDown"||e.keyCode===40?(Xe.focusElement(Xe.getNextElementPreorder(i)),e.preventDefault()):(e.key==="ArrowUp"||e.keyCode===38)&&(Xe.focusElement(Xe.getNextElementPostorder(i)),e.preventDefault())},t.prototype.onPointerDown=function(e,i){},t.prototype.refresh=function(){this.filterString==""&&this.raiseUpdate({needUpdateIsEmpty:!0}),this.resetFocusedItem()},t.prototype.onClickSearchClearButton=function(e){e.currentTarget.parentElement.querySelector("input").focus(),this.refresh()},t.prototype.resetFocusedItem=function(){this.focusedItem=void 0},t.prototype.focusFirstVisibleItem=function(){m.IsTouch||(this.focusedItem=this.visibleItems[0])},t.prototype.focusLastVisibleItem=function(){this.focusedItem=this.visibleItems[this.visibleItems.length-1]},t.prototype.initFocusedItem=function(){var e=this;this.focusedItem=this.visibleItems.filter(function(i){return i.visible&&e.isItemSelected(i)})[0],this.focusedItem||this.focusFirstVisibleItem()},t.prototype.focusNextVisibleItem=function(){if(!this.focusedItem)this.initFocusedItem();else{var e=this.visibleItems,i=e.indexOf(this.focusedItem),n=e[i+1];n?this.focusedItem=n:this.focusFirstVisibleItem()}},t.prototype.focusPrevVisibleItem=function(){if(!this.focusedItem)this.initFocusedItem();else{var e=this.visibleItems,i=e.indexOf(this.focusedItem),n=e[i-1];n?this.focusedItem=n:this.focusLastVisibleItem()}},t.prototype.selectFocusedItem=function(){this.focusedItem&&this.onItemClick(this.focusedItem)},t.prototype.initListContainerHtmlElement=function(e){this.listContainerHtmlElement=e},t.prototype.onItemRended=function(e,i){this.isAllDataLoaded||(e===this.actions[this.actions.length-1]&&this.listContainerHtmlElement&&(this.hasVerticalScroller=Xe.hasVerticalScroller(this.scrollableContainer)),e.id===this.loadingIndicator.id&&i&&this.loadingIndicator.intersectionVisibilityObserver&&this.loadingIndicator.intersectionVisibilityObserver.observe(i))},t.prototype.scrollToFocusedItem=function(){this.scrollToItem(this.cssClasses.itemFocused)},t.prototype.scrollToSelectedItem=function(){this.selectedItem&&this.selectedItem.items&&this.selectedItem.items.length>0?this.scrollToItem(this.cssClasses.itemGroupSelected,110):this.scrollToItem(this.cssClasses.itemSelected,110)},t.prototype.setLoadingIndicatorVisibilityObserver=function(e){e&&(this.loadingIndicatorVisibilityObserver=e)},t.prototype.addScrollEventListener=function(e){e&&(this.removeScrollEventListener(),this.scrollHandler=e),this.scrollHandler&&this.scrollableContainer.addEventListener("scroll",this.scrollHandler)},t.prototype.removeScrollEventListener=function(){this.scrollHandler&&this.scrollableContainer.removeEventListener("scroll",this.scrollHandler)},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.loadingIndicatorValue&&this.loadingIndicatorValue.dispose(),this.listContainerHtmlElement=void 0},t.INDENT=16,t.MINELEMENTCOUNT=10,c([p({defaultValue:!0,onSet:function(e,i){i.onSet()}})],t.prototype,"searchEnabled",void 0),c([p({defaultValue:!1})],t.prototype,"showFilter",void 0),c([p({defaultValue:!1})],t.prototype,"forceShowFilter",void 0),c([p({defaultValue:!1})],t.prototype,"isExpanded",void 0),c([p({})],t.prototype,"selectedItem",void 0),c([p()],t.prototype,"focusedItem",void 0),c([p({onSet:function(e,i){i.onFilterStringChanged(i.filterString)}})],t.prototype,"filterString",void 0),c([p({defaultValue:!1})],t.prototype,"hasVerticalScroller",void 0),c([p({defaultValue:!0})],t.prototype,"isAllDataLoaded",void 0),c([p({defaultValue:!1})],t.prototype,"showSearchClearButton",void 0),c([p({defaultValue:!0})],t.prototype,"renderElements",void 0),c([p({defaultValue:!1})],t.prototype,"textWrapEnabled",void 0),c([p({defaultValue:"sv-list-item-content"})],t.prototype,"itemComponent",void 0),c([p({defaultValue:"listbox"})],t.prototype,"listRole",void 0),c([p({defaultValue:"option"})],t.prototype,"listItemRole",void 0),c([p()],t.prototype,"listAriaLabel",void 0),c([p({defaultValue:!1})],t.prototype,"disableSearch",void 0),t})(be),pt=(function(r){P(t,r);function t(e,i,n){var o=r.call(this)||this;if(o.focusFirstInputSelector="",o.onCancel=function(){},o.onApply=function(){return!0},o.onHide=function(){},o.onShow=function(){},o.onBlur=function(){},o.onDispose=function(){},o.onVisibilityChanged=o.addEvent(),o.onFooterActionsCreated=o.addEvent(),o.onRecalculatePosition=o.addEvent(),o.contentComponentName=e,o.contentComponentData=i,n)for(var s in n)o[s]=n[s];return o}return t.prototype.refreshInnerModel=function(){var e=this.contentComponentData.model;e&&e.refresh&&e.refresh()},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="isVisible"&&this.onVisibilityChanged.fire(this,{model:this,isVisible:n})},t.prototype.toggleVisibility=function(){this.isVisible=!this.isVisible},t.prototype.show=function(){this.isVisible||(this.isVisible=!0)},t.prototype.hide=function(){this.isVisible&&(this.isVisible=!1)},t.prototype.recalculatePosition=function(e){this.onRecalculatePosition.fire(this,{isResetHeight:e})},t.prototype.updateFooterActions=function(e){var i={actions:e};return this.onFooterActionsCreated.fire(this,i),i.actions},t.prototype.getDisplayMode=function(){if(this.isModal)return this.displayMode==="popup"?"modal-popup":"modal-overlay";if(this.displayMode==="popup")return"menu-popup";var e=void 0;switch(this.overlayDisplayMode){case"plain":{e="menu-popup";break}case"dropdown-overlay":{e="menu-overlay";break}case"tablet-dropdown-overlay":{e="menu-popup-overlay";break}case"auto":{m.IsTouch?e="menu-popup-overlay":e="menu-popup";break}}return e},t.prototype.updateDisplayMode=function(e){var i,n;switch(e){case"dropdown":{i="popup",n="auto";break}case"popup":{i="overlay",n="tablet-dropdown-overlay";break}case"overlay":{i="overlay",n="dropdown-overlay";break}}if(this.displayMode!==i){var o=e==="dropdown";this.setWidthByTarget=o,this.isFocusedContent=!o}return this.displayMode!==i||this.overlayDisplayMode!==n?(this.displayMode=i,this.overlayDisplayMode=n,!0):!1},t.prototype.onHiding=function(){this.refreshInnerModel(),this.onHide()},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.onDispose()},c([p()],t.prototype,"contentComponentName",void 0),c([p()],t.prototype,"contentComponentData",void 0),c([p({defaultValue:"bottom"})],t.prototype,"verticalPosition",void 0),c([p({defaultValue:"left"})],t.prototype,"horizontalPosition",void 0),c([p({defaultValue:!0})],t.prototype,"showPointer",void 0),c([p({defaultValue:!1})],t.prototype,"showCloseButton",void 0),c([p({defaultValue:!1})],t.prototype,"isModal",void 0),c([p({defaultValue:!0})],t.prototype,"canShrink",void 0),c([p({defaultValue:!0})],t.prototype,"isFocusedContent",void 0),c([p({defaultValue:!0})],t.prototype,"isFocusedContainer",void 0),c([p({defaultValue:""})],t.prototype,"cssClass",void 0),c([p({defaultValue:""})],t.prototype,"title",void 0),c([p({defaultValue:"auto"})],t.prototype,"overlayDisplayMode",void 0),c([p({defaultValue:"popup"})],t.prototype,"displayMode",void 0),c([p({defaultValue:"flex"})],t.prototype,"positionMode",void 0),c([p({defaultValue:!1})],t.prototype,"isVisible",void 0),t})(U);function ol(r,t,e){return t.locOwner=e,xi(r,t,t)}function xi(r,t,e){var i,n=t.onSelectionChanged;t.onSelectionChanged=function(l){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];a.hasTitle&&(a.title=l.title),n&&n(l,u)};var o=Ii(t,e);o.getTargetCallback=vr;var s=Object.assign({},r,{component:"sv-action-bar-item-dropdown",popupModel:o,action:function(l,u){r.action&&r.action(),o.isFocusedContent=o.isFocusedContent||!u,o.show()}}),a=new G(s);return a.data=(i=o.contentComponentData)===null||i===void 0?void 0:i.model,a}function Ii(r,t){r.listRole||(r.listRole="menu"),r.listItemRole||(r.listItemRole=r.allowSelection?"menuitemradio":"menuitem");var e=new ct(r);e.onSelectionChanged=function(o){r.onSelectionChanged&&r.onSelectionChanged(o),n.hide()};var i=t||{};i.onDispose=function(){e.dispose()};var n=new pt("sv-list",{model:e},i);return n.isFocusedContent=e.showFilter,n.onShow=function(){i.onShow&&i.onShow(),e.scrollToSelectedItem()},n.onHide=function(){i.onHide&&i.onHide(),e.filterString=""},n}function vr(r){return r?.previousElementSibling}var Mt=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.rendredIdValue=t.getNextRendredId(),e}return t.getNextRendredId=function(){return t.renderedId++},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getId()},set:function(e){this.setId(e)},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.idValue},t.prototype.setId=function(e){this.idValue=e},t.prototype.addVisibilityChangedCallback=function(e){},t.prototype.removeVisibilityChangedCallback=function(e){},Object.defineProperty(t.prototype,"renderedId",{get:function(){return this.rendredIdValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},set:function(e){e!==this.owner&&(this.ownerValue=e,this.locStrsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getVisible()},set:function(e){this.setVisible(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.getEnabled()},set:function(e){this.setEnabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.getComponent()},set:function(e){this.setComponent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocTitle()},set:function(e){this.setLocTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getTitle()},set:function(e){this.setTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this.locTitle.getJson()},set:function(e){this.locTitle.setJson(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||ye},set:function(e){this.cssClassesValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.visible&&this.mode!=="popup"&&this.mode!=="removed"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.enabled!==void 0&&!this.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShrink",{get:function(){return!this.disableShrink&&!!this.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return(this.mode!="small"&&(this.showTitle||this.showTitle===void 0)||!this.iconName)&&!!this.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSubItems",{get:function(){return!!this.items&&this.items.length>0},enumerable:!1,configurable:!0}),t.prototype.getActionBarItemTitleCss=function(){return new I().append(this.cssClasses.itemTitle).append(this.cssClasses.itemTitleWithIcon,!!this.iconName).toString()},t.prototype.getActionBarItemCss=function(){var e=this.hasTitle;return new I().append(this.cssClasses.item).append(this.cssClasses.itemWithTitle,e).append(this.cssClasses.itemAsIcon,!e).append(this.cssClasses.itemActive,!!this.active).append(this.cssClasses.itemPressed,!!this.pressed).append(this.innerCss).toString()},t.prototype.getActionRootCss=function(){return new I().append("sv-action").append(this.css).append("sv-action--space",this.needSpace).append("sv-action--hidden",!this.isVisible).toString()},t.prototype.getTooltip=function(){return this.tooltip||this.title},t.prototype.getIsTrusted=function(e){return e.originalEvent?e.originalEvent.isTrusted:e.isTrusted},t.prototype.showPopup=function(){this.popupModel&&this.popupModel.show()},t.prototype.hidePopup=function(){this.popupModel&&this.popupModel.hide()},t.prototype.clearPopupTimeouts=function(){this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.hidePopupTimeout&&clearTimeout(this.hidePopupTimeout)},t.prototype.showPopupDelayed=function(e){var i=this;this.clearPopupTimeouts(),this.showPopupTimeout=setTimeout(function(){i.clearPopupTimeouts(),i.showPopup()},e)},t.prototype.hidePopupDelayed=function(e){var i=this,n;!((n=this.popupModel)===null||n===void 0)&&n.isVisible?(this.clearPopupTimeouts(),this.hidePopupTimeout=setTimeout(function(){i.clearPopupTimeouts(),i.hidePopup(),i.isHovered=!1},e)):(this.clearPopupTimeouts(),this.isHovered=!1)},t.renderedId=1,c([p()],t.prototype,"tooltip",void 0),c([p()],t.prototype,"showTitle",void 0),c([p()],t.prototype,"innerCss",void 0),c([p()],t.prototype,"active",void 0),c([p()],t.prototype,"pressed",void 0),c([p()],t.prototype,"popupModel",void 0),c([p()],t.prototype,"needSeparator",void 0),c([p()],t.prototype,"template",void 0),c([p({defaultValue:"large"})],t.prototype,"mode",void 0),c([p()],t.prototype,"visibleIndex",void 0),c([p()],t.prototype,"disableTabStop",void 0),c([p()],t.prototype,"disableShrink",void 0),c([p()],t.prototype,"disableHide",void 0),c([p({defaultValue:!1})],t.prototype,"needSpace",void 0),c([p()],t.prototype,"ariaChecked",void 0),c([p()],t.prototype,"ariaExpanded",void 0),c([p()],t.prototype,"ariaLabelledBy",void 0),c([p({defaultValue:"button"})],t.prototype,"ariaRole",void 0),c([p()],t.prototype,"iconName",void 0),c([p({defaultValue:24})],t.prototype,"iconSize",void 0),c([p()],t.prototype,"markerIconName",void 0),c([p()],t.prototype,"css",void 0),c([p({defaultValue:!1})],t.prototype,"isPressed",void 0),c([p({defaultValue:!1})],t.prototype,"isHovered",void 0),t})(U),G=(function(r){P(t,r);function t(e){var i=r.call(this)||this;i.locTitleChanged=function(){var s=i.locTitle.renderedHtml;i.setPropertyValue("_title",s||void 0)},i.needUpdateMaxDimension=!1,i.needUpdateMinDimension=!1;var n=e instanceof t?e.innerItem:e;if(i.innerItem=n,i.locTitle=n?n.locTitle:null,n)for(var o in n)o==="locTitle"||o==="title"&&i.title||(i[o]=n[o]);return i.locTitleName&&i.locTitleChanged(),i.locStrChangedInPopupModel(),i}return t.prototype.createLocTitle=function(){return this.createLocalizableString("title",this,!0)},t.prototype.setSubItems=function(e){if(this.markerIconName="icon-next_16x16",this.items=z([],e.items,!0),!this.popupModel)this.createPopupForSubitems(e);else{var i=this.popupModel.contentComponentData.model;i.setItems(this.items)}this.component=this.getGroupComponentName()},t.prototype.createPopupForSubitems=function(e){var i=Object.assign({},e);i.searchEnabled=!1;var n=Ii(i,{horizontalPosition:"right",showPointer:!1,canShrink:!1});n.cssClass="sv-popup-inner",this.popupModel=n},t.prototype.getId=function(){return this.getPropertyValue("id")},t.prototype.setId=function(e){this.setPropertyValue("id",e)},t.prototype.getLocTitle=function(){return this.locTitleValue},t.prototype.setLocTitle=function(e){!e&&!this.locTitleValue&&(e=this.createLocTitle()),this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleValue=e,this.locTitleValue.onStringChanged.add(this.locTitleChanged),this.locTitleChanged()},t.prototype.getTitle=function(){return this._title},t.prototype.setTitle=function(e){this._title=e},Object.defineProperty(t.prototype,"locTitleName",{get:function(){return this.locTitle.localizationName},set:function(e){this.locTitle.localizationName=e},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.locTooltipChanged(),this.locStrChangedInPopupModel()},t.prototype.doAction=function(e){var i=e.originalEvent?e.originalEvent:e;return this.action(this,i.isTrusted),i.preventDefault(),i.stopPropagation(),!0},t.prototype.doMouseDown=function(e){this.isMouseDown=!0},t.prototype.doFocus=function(e){if(this.onFocus){var i=e.originalEvent?e.originalEvent:e;this.onFocus(this.isMouseDown,i)}this.isMouseDown=!1},t.prototype.locStrChangedInPopupModel=function(){if(!(!this.popupModel||!this.popupModel.contentComponentData||!this.popupModel.contentComponentData.model)){var e=this.popupModel.contentComponentData.model;if(Array.isArray(e.actions)){var i=e.actions;i.forEach(function(n){n.locStrsChanged&&n.locStrsChanged()})}}},t.prototype.locTooltipChanged=function(){this.locTooltipName&&(this.tooltip=te(this.locTooltipName,this.locTitle.locale))},t.prototype.getLocale=function(){return this.owner?this.owner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.owner?this.owner.getMarkdownHtml(e,i,n):void 0},t.prototype.getProcessedText=function(e){return this.owner?this.owner.getProcessedText(e):e},t.prototype.getRenderer=function(e){return this.owner?this.owner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.owner?this.owner.getRendererContext(e):e},t.prototype.setVisible=function(e){this.visible!==e&&(this._visible=e)},t.prototype.getVisible=function(){return this._visible},t.prototype.setEnabled=function(e){this._enabled=e},t.prototype.getEnabled=function(){return this.enabledIf?this.enabledIf():this._enabled},t.prototype.setComponent=function(e){this._component=e},t.prototype.getComponent=function(){return this._component},t.prototype.getGroupComponentName=function(){return"sv-list-item-group"},t.prototype.initLoadingIndicatorVisibilityObserver=function(e){typeof IntersectionObserver<"u"&&(this.intersectionVisibilityObserver=new IntersectionObserver(function(i){i.forEach(function(n){var o=n.isIntersecting;e(o)})},{trackVisibility:!0,delay:100}))},t.prototype.dispose=function(){this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleChanged=void 0,this.action=void 0,r.prototype.dispose.call(this),this.popupModel&&this.popupModel.dispose(),this.intersectionVisibilityObserver&&(this.intersectionVisibilityObserver.disconnect(),this.intersectionVisibilityObserver=void 0)},t.prototype.updateDimension=function(e,i,n){var o=e=="small"?"minDimension":"maxDimension";if(i){var s=i;s.classList.contains("sv-action--hidden")?(s.classList.remove("sv-action--hidden"),this[o]=n(i),s.classList.add("sv-action--hidden")):this[o]=n(i)}},t.prototype.afterRender=function(){this.afterRenderCallback&&this.afterRenderCallback()},t.prototype.updateMode=function(e,i){var n=this;this.updateModeCallback?this.updateModeCallback(e,i):this.afterRenderCallback=function(){n.updateModeCallback(e,i),n.afterRenderCallback=void 0}},t.prototype.updateDimensions=function(e,i,n){var o=this,s=!n||n=="large"&&this.mode!=="small"?this.mode:n;this.updateMode(s,function(a,l){o.updateDimension(a,l,e),n?i():o.updateMode(a!=="small"?"small":"large",function(u,f){o.updateDimension(u,f,e),i()})})},c([p({defaultValue:!0})],t.prototype,"_visible",void 0),c([p({onSet:function(e,i){i.locTooltipChanged()}})],t.prototype,"locTooltipName",void 0),c([p()],t.prototype,"_enabled",void 0),c([p()],t.prototype,"action",void 0),c([p()],t.prototype,"onFocus",void 0),c([p()],t.prototype,"_component",void 0),c([p()],t.prototype,"items",void 0),c([p({onSet:function(e,i){i.locTitleValue.text!==e&&(i.locTitleValue.text=e)}})],t.prototype,"_title",void 0),t})(Mt),sl=(function(){function r(t){this.item=t,this.funcKey="sv-dropdown-action",this.setupPopupCallbacks()}return r.prototype.setupPopupCallbacks=function(){var t=this,e=this.popupModel=this.item.popupModel;e&&e.registerPropertyChangedHandlers(["isVisible"],function(){e.isVisible?t.item.pressed=!0:t.item.pressed=!1},this.funcKey)},r.prototype.removePopupCallbacks=function(){this.popupModel&&this.popupModel.unregisterPropertyChangedHandlers(["isVisible"],this.funcKey)},r.prototype.dispose=function(){this.removePopupCallbacks()},r})();m.UpdateResponsivenessMode=void 0,(function(r){r[r.None=0]="None",r[r.Light=1]="Light",r[r.Hard=3]="Hard"})(m.UpdateResponsivenessMode||(m.UpdateResponsivenessMode={}));var Ft=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.minVisibleItemsCount=0,e.isResponsivenessDisabled=!1,e.isInitialized=!1,e.dotsItem=xi({id:"dotsItem-id"+e.id++,css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-more",visible:!1,tooltip:te("more")},{items:[],allowSelection:!1}),e.hiddenItemsListModel.createActionCallback=function(i){return e.createActionCore(e.hiddenItemsListModel,i)},e}return t.prototype.hideItemsGreaterN=function(e){var i=this.getActionsToHide();e=Math.max(e,this.minVisibleItemsCount-(this.visibleActions.length-i.length));var n=[];i.forEach(function(o){e<=0&&(o.mode="popup",n.push(o.innerItem)),e--}),this.hiddenItemsListModel.setItems(n)},t.prototype.getActionsToHide=function(){return this.visibleActions.filter(function(e){return!e.disableHide})},t.prototype.updateItemMode=function(e,i){for(var n=this.visibleActions,o=n.length-1;o>=0;o--)i>e&&!n[o].disableShrink?(i-=n[o].maxDimension-n[o].minDimension,n[o].mode="small"):n[o].mode="large"},Object.defineProperty(t.prototype,"hiddenItemsListModel",{get:function(){return this.dotsItem.data},enumerable:!1,configurable:!0}),t.prototype.onSet=function(){r.prototype.onSet.call(this),this.raiseUpdate({updateResponsivenessMode:m.UpdateResponsivenessMode.Hard})},t.prototype.onPush=function(e){r.prototype.onPush.call(this,e),this.raiseUpdate({updateResponsivenessMode:m.UpdateResponsivenessMode.Hard})},t.prototype.onRemove=function(e){r.prototype.onRemove.call(this,e),this.raiseUpdate({updateResponsivenessMode:m.UpdateResponsivenessMode.Hard})},t.prototype.onActionPropertyChanged=function(e,i){r.prototype.onActionPropertyChanged.call(this,e,i),(i.name=="_visible"||i.name=="_title")&&(e.needUpdateMaxDimension=e.visible,e.needUpdateMinDimension=e.visible,this.raiseUpdate({updateResponsivenessMode:m.UpdateResponsivenessMode.Light})),i.name=="disableHide"&&i.newValue&&e.mode=="popup"&&this.raiseUpdate({updateResponsivenessMode:m.UpdateResponsivenessMode.Light})},t.prototype.getRenderedActions=function(){var e=r.prototype.getRenderedActions.call(this);return e.length==0||e.length===1&&e[0].iconName?e:e.concat([this.dotsItem])},t.prototype.getAllActions=function(){return this.actions.concat(this.dotsItem)},t.prototype.getActionMinDimension=function(e){return e.disableShrink?e.maxDimension:e.minDimension},t.prototype.getVisibleItemsCount=function(e){var i=this,n=e.availableSpace,o=e.gap;n-=this.dotsItem.minDimension+o;var s=0;this.visibleActions[0].disableHide?n+=o:s-=o,this.visibleActions.filter(function(u){return u.disableHide}).forEach(function(u){return n-=i.getActionMinDimension(u)+o});var a=this.getActionsToHide();if(a.length===1&&a[0].iconName)return 1;for(var l=0;l<a.length;l++)if(s+=this.getActionMinDimension(a[l])+o,s>n)return l},t.prototype.fit=function(e){var i=this,n;if(!(e.availableSpace<=0)){e.gap=(n=e.gap)!==null&&n!==void 0?n:0;var o=e.availableSpace,s=e.gap;this.dotsItem.visible=!1;var a=this.visibleActions,l=-1*e.gap,u=-1*e.gap;a.forEach(function(f){l+=i.getActionMinDimension(f)+s,u+=f.maxDimension+s}),o>=u?this.setActionsMode("large"):o<l?(this.setActionsMode("small"),this.hideItemsGreaterN(this.getVisibleItemsCount(e)),this.dotsItem.visible=!!this.hiddenItemsListModel.actions.length):this.updateItemMode(e.availableSpace,u)}},t.prototype.createResponsivityManager=function(e){return new Pi(e,this)},t.prototype.mergeUpdateOptions=function(e,i){var n=r.prototype.mergeUpdateOptions.call(this,e,i);return n.updateResponsivenessMode=n.updateResponsivenessMode|i.updateResponsivenessMode,n},t.prototype.raiseUpdate=function(e){r.prototype.raiseUpdate.call(this,e)},t.prototype.update=function(e){var i;r.prototype.update.call(this,e),e.updateResponsivenessMode&&((i=this.responsivityManager)===null||i===void 0||i.update(e.updateResponsivenessMode==m.UpdateResponsivenessMode.Hard))},t.prototype.initResponsivityManager=function(e){var i=this;if(this.responsivityManager){if(this.responsivityManager.container==e)return;this.responsivityManager.dispose()}this.isInitialized=!1,this.responsivityManager=this.createResponsivityManager(e),this.responsivityManager.afterInitializeCallback=function(){i.isInitialized=!0}},t.prototype.resetResponsivityManager=function(){this.responsivityManager&&(this.responsivityManager.dispose(),this.responsivityManager=void 0)},t.prototype.getRootStyle=function(){if(!this.isInitialized&&!this.isResponsivenessDisabled)return{opacity:0}},t.prototype.setActionsMode=function(e){this.actions.forEach(function(i){e=="small"&&i.disableShrink?i.mode="large":i.mode=e})},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.dotsItem.data.dispose(),this.dotsItem.dispose(),this.resetResponsivityManager()},c([p()],t.prototype,"isInitialized",void 0),t})(be),Ei=(function(){function r(){this.cancelQueue=[]}return r.prototype.getMsFromRule=function(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3},r.prototype.reflow=function(t){return t.offsetHeight},r.prototype.getAnimationsCount=function(t){var e="";return getComputedStyle&&(e=getComputedStyle(t).animationName),e&&e!="none"?e.split(", ").length:0},r.prototype.getAnimationDuration=function(t){for(var e=getComputedStyle(t),i=e.animationDelay.split(", "),n=e.animationDuration.split(", "),o=0,s=0;s<Math.max(n.length,i.length);s++)o=Math.max(o,this.getMsFromRule(n[s%n.length])+this.getMsFromRule(i[s%i.length]));return o},r.prototype.addCancelCallback=function(t){this.cancelQueue.push(t)},r.prototype.removeCancelCallback=function(t){this.cancelQueue.indexOf(t)>=0&&this.cancelQueue.splice(this.cancelQueue.indexOf(t),1)},r.prototype.onAnimationEnd=function(t,e,i){var n=this,o,s=this.getAnimationsCount(t),a=function(u){u===void 0&&(u=!0),e(u),clearTimeout(o),n.removeCancelCallback(a),t.removeEventListener("animationend",l)},l=function(u){u.target==u.currentTarget&&--s<=0&&a(!1)};s>0?(t.addEventListener("animationend",l),this.addCancelCallback(a),o=setTimeout(function(){a(!1)},this.getAnimationDuration(t)+10)):e(!0)},r.prototype.afterAnimationRun=function(t,e){t&&e&&e.onAfterRunAnimation&&e.onAfterRunAnimation(t)},r.prototype.beforeAnimationRun=function(t,e){t&&e&&e.onBeforeRunAnimation&&e.onBeforeRunAnimation(t)},r.prototype.getCssClasses=function(t){return t.cssClass.replace(/\s+$/,"").split(/\s+/)},r.prototype.runAnimation=function(t,e,i){t&&e?.cssClass?(this.reflow(t),this.getCssClasses(e).forEach(function(n){t.classList.add(n)}),this.onAnimationEnd(t,i,e)):i(!0)},r.prototype.clearHtmlElement=function(t,e){t&&e.cssClass&&this.getCssClasses(e).forEach(function(i){t.classList.remove(i)}),this.afterAnimationRun(t,e)},r.prototype.onNextRender=function(t,e){var i=this;if(e===void 0&&(e=!1),!e&&k.isAvailable()){var n,o=function(){t(!0),cancelAnimationFrame(n)};n=k.requestAnimationFrame(function(){n=k.requestAnimationFrame(function(){t(!1),i.removeCancelCallback(o)})}),this.addCancelCallback(o)}else t(!0)},r.prototype.cancel=function(){var t=[].concat(this.cancelQueue);t.forEach(function(e){return e()}),this.cancelQueue=[]},r})(),br=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onEnter=function(e){var i=this,n=e.getAnimatedElement(),o=e.getEnterOptions?e.getEnterOptions():{};this.beforeAnimationRun(n,o),this.runAnimation(n,o,function(){i.clearHtmlElement(n,o)})},t.prototype.onLeave=function(e,i){var n=this,o=e.getAnimatedElement(),s=e.getLeaveOptions?e.getLeaveOptions():{};this.beforeAnimationRun(o,s),this.runAnimation(o,s,function(a){i(),n.onNextRender(function(){n.clearHtmlElement(o,s)},a)})},t})(Ei),Ti=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.runGroupAnimation=function(e,i,n,o,s){var a=this,l={isAddingRunning:i.length>0,isDeletingRunning:n.length>0,isReorderingRunning:o.length>0},u=i.map(function(A){return e.getAnimatedElement(A)}),f=i.map(function(A){return e.getEnterOptions?e.getEnterOptions(A,l):{}}),y=n.map(function(A){return e.getAnimatedElement(A)}),b=n.map(function(A){return e.getLeaveOptions?e.getLeaveOptions(A,l):{}}),E=o.map(function(A){return e.getAnimatedElement(A.item)}),S=o.map(function(A){return e.getReorderOptions?e.getReorderOptions(A.item,A.movedForward,l):{}});i.forEach(function(A,Q){a.beforeAnimationRun(u[Q],f[Q])}),n.forEach(function(A,Q){a.beforeAnimationRun(y[Q],b[Q])}),o.forEach(function(A,Q){a.beforeAnimationRun(E[Q],S[Q])});var O=i.length+n.length+E.length,R=function(A){--O<=0&&(s&&s(),a.onNextRender(function(){i.forEach(function(Q,ee){a.clearHtmlElement(u[ee],f[ee])}),n.forEach(function(Q,ee){a.clearHtmlElement(y[ee],b[ee])}),o.forEach(function(Q,ee){a.clearHtmlElement(E[ee],S[ee])})},A))};i.forEach(function(A,Q){a.runAnimation(u[Q],f[Q],R)}),n.forEach(function(A,Q){a.runAnimation(y[Q],b[Q],R)}),o.forEach(function(A,Q){a.runAnimation(E[Q],S[Q],R)})},t})(Ei),Nt=(function(){function r(t,e,i){var n=this;this.animationOptions=t,this.update=e,this.getCurrentValue=i,this._debouncedSync=gr(function(o){n.cancelAnimations();try{n._sync(o)}catch{n.update(o)}})}return r.prototype.onNextRender=function(t,e){var i=this,n=this.animationOptions.getRerenderEvent();if(n){var s=function(){n.remove(a),i.cancelCallback=void 0},a=function(l,u){u.isCancel?e&&e():t(),s()};this.cancelCallback=function(){e&&e(),s()},n.add(a)}else if(k.isAvailable()){var o=k.requestAnimationFrame(function(){t(),i.cancelCallback=void 0});this.cancelCallback=function(){e&&e(),cancelAnimationFrame(o),i.cancelCallback=void 0}}else throw new Error("Can't get next render")},r.prototype.sync=function(t){this.animationOptions.isAnimationEnabled()?this._debouncedSync.run(t):(this.cancel(),this.update(t))},r.prototype.cancel=function(){this._debouncedSync.cancel(),this.cancelAnimations()},r.prototype.cancelAnimations=function(){this.cancelCallback&&this.cancelCallback(),this.animation.cancel()},r})(),Ri=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.animation=new br,e}return t.prototype._sync=function(e){var i=this;e!==this.getCurrentValue()?e?(this.onNextRender(function(){i.animation.onEnter(i.animationOptions)}),this.update(e)):this.animation.onLeave(this.animationOptions,function(){i.update(e)}):this.update(e)},t})(Nt),Ae=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.animation=new Ti,e}return t.prototype._sync=function(e){var i=this,n,o;e=[].concat(e);var s=[].concat(this.getCurrentValue()),a=(n=this.animationOptions.allowSyncRemovalAddition)!==null&&n!==void 0?n:!0,l=Cl(s,e,(o=this.animationOptions.getKey)!==null&&o!==void 0?o:(function(S){return S}));!a&&(l.reorderedItems.length>0||l.addedItems.length>0)&&(l.deletedItems=[],l.mergedItems=e),this.animationOptions.onCompareArrays&&this.animationOptions.onCompareArrays(l);var u=l.addedItems,f=l.reorderedItems,y=l.deletedItems,b=l.mergedItems,E=function(){i.animation.runGroupAnimation(i.animationOptions,u,y,f,function(){y.length>0&&i.update(e)})};[u,y,f].some(function(S){return S.length>0})?y.length<=0||f.length>0||u.length>0?(this.onNextRender(E,function(){i.update(e)}),this.update(b)):E():this.update(e)},t})(Nt),Oi=(function(r){P(t,r);function t(e,i,n,o){var s=r.call(this,e,i,n)||this;return s.mergeValues=o,s.animation=new Ti,s}return t.prototype._sync=function(e){var i=this,n=[].concat(this.getCurrentValue());if(n[0]!==e[0]){var o=this.mergeValues?this.mergeValues(e,n):[].concat(n,e);this.onNextRender(function(){i.animation.runGroupAnimation(i.animationOptions,e,n,[],function(){i.update(e)})},function(){return i.update(e)}),this.update(o,!0)}else this.update(e)},t})(Nt),kt=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.createLocTitleProperty(),e}return t.prototype.createLocTitleProperty=function(){return this.createLocalizableString("title",this,!0)},Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title",this.getDefaultTitleValue())},set:function(e){this.setTitleValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedTitle",{get:function(){return this.locTitle},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){},t.prototype.setTitleValue=function(e){this.setLocalizableStringText("title",e)},Object.defineProperty(t.prototype,"hasDescription",{get:function(){var e=this;return this.getPropertyValue("hasDescription",void 0,function(){return e.calcDescriptionVisibility()})},set:function(e){this.setPropertyValue("hasDescription",e)},enumerable:!1,configurable:!0}),t.prototype.calcDescriptionVisibility=function(){var e=this.description,i=!1;if(this.isDesignMode){var n=V.findProperty(this.getType(),"description");i=!!n?.placeholder}return!!e||i&&this.isDesignMode},t.prototype.resetDescriptionVisibility=function(){this.resetPropertyValue("hasDescription")},Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTagName",{get:function(){var e=this.getDefaultTitleTagName(),i=this.getSurvey();return i?i.getElementTitleTagName(this,e):e},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleTagName=function(){return C.titleTags[this.getType()]},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.title.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return this.hasTitleActions},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return null},t.prototype.getTitleOwner=function(){},Object.defineProperty(t.prototype,"isTitleOwner",{get:function(){return!!this.getTitleOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTitleRenderedAsString",{get:function(){return this.getIsTitleRenderedAsString()},enumerable:!1,configurable:!0}),t.prototype.toggleState=function(){},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitle",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaLabel",{get:function(){return this.ariaLabel},enumerable:!1,configurable:!0}),t.prototype.getIsTitleRenderedAsString=function(){return!this.isTitleOwner},c([p({localizable:{markdown:!0},onSet:function(e,i){i.resetDescriptionVisibility()}})],t.prototype,"description",void 0),t})(U),ae=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.selectedElementInDesignValue=i,i.parentQuestionValue=null,i.isContentElement=!1,i.isEditableTemplateElement=!1,i.isInteractiveDesignElement=!0,i._renderedIsExpanded=!0,i._isAnimatingCollapseExpand=!1,i.animationCollapsed=new Ri(i.getExpandCollapseAnimationOptions(),function(n){i._renderedIsExpanded=n,i.animationAllowed&&(n?i.isAnimatingCollapseExpand=!0:i.updateElementCss(!1))},function(){return i.renderedIsExpanded}),i.onAfterRenderElement=i.addEvent(),i.setPropertyValueDirectly("name",i.getValidName(e)),i}return t.getProgressInfoByElements=function(e,i){for(var n=U.createProgressInfo(),o=0;o<e.length;o++)if(e[o].isVisible){var s=e[o].getProgressInfo();n.questionCount+=s.questionCount,n.answeredQuestionCount+=s.answeredQuestionCount,n.requiredQuestionCount+=s.requiredQuestionCount,n.requiredAnsweredQuestionCount+=s.requiredAnsweredQuestionCount}return i&&n.questionCount>0&&(n.requiredQuestionCount==0&&(n.requiredQuestionCount=1),n.answeredQuestionCount>0&&(n.requiredAnsweredQuestionCount=1)),n},t.IsNeedScrollIntoView=function(e,i,n){var o=n?-1:e.getBoundingClientRect().top,s=o<0,a=-1;if(!s&&i&&(a=e.getBoundingClientRect().left,s=a<0),!s&&k.isAvailable()){var l=k.getInnerHeight();if(s=l>0&&l<o,!s&&i){var u=k.getInnerWidth();s=u>0&&u<a}}return s},t.ScrollIntoView=function(e,i,n){if(e.scrollIntoView(i),typeof n=="function"){var o=null,s=0,a=function(){var l=e.getBoundingClientRect().top;if(l===o){if(s++>2){n();return}}else o=l,s=0;requestAnimationFrame(a)};k.requestAnimationFrame(a)}},t.ScrollElementToTop=function(e,i,n,o){return t.ScrollElementToViewCore(e,!1,i,n,o)},t.ScrollElementToViewCore=function(e,i,n,o,s){if(!e||!e.scrollIntoView)return s&&s(),!1;var a=t.IsNeedScrollIntoView(e,i,n);return a?t.ScrollIntoView(e,o,s):s&&s(),a},t.GetFirstNonTextElement=function(e,i){if(i===void 0&&(i=!1),!e||!e.length||e.length==0)return null;if(i){var n=e[0];n.nodeName==="#text"&&(n.data=""),n=e[e.length-1],n.nodeName==="#text"&&(n.data="")}for(var o=0;o<e.length;o++)if(e[o].nodeName!="#text"&&e[o].nodeName!="#comment")return e[o];return null},t.FocusElement=function(e,i,n){if(!e||!D.isAvailable())return!1;var o=i?!1:t.focusElementCore(e,n);return o||setTimeout(function(){t.focusElementCore(e,n)},i?100:10),o},t.focusElementCore=function(e,i){var n=C.environment.root;if(!n&&!i)return!1;var o=i?i.querySelector("#".concat(CSS.escape(e))):n.getElementById(e);return o&&!o.disabled&&o.style.display!=="none"&&o.offsetParent!==null?(t.ScrollElementToViewCore(o,!0,!1),o.focus(),!0):!1},Object.defineProperty(t.prototype,"effectiveColSpan",{get:function(){var e=this.getPropertyValueWithoutDefault("effectiveColSpan");return e!==void 0?e:(this.setRootStyle(),this.getPropertyValue("effectiveColSpan"))},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["minWidth","maxWidth","renderWidth","allowRootStyle","parent"];o.indexOf(e)>-1&&this.updateRootStyle(),e==="state"&&(this.updateElementCss(!1),this.notifyStateChanged(i),this.stateChangedCallback&&this.stateChangedCallback()),e==="isReadOnly"&&this.onReadOnlyChanged(),e==="errors"&&this.updateVisibleErrors(),e==="isSingleInRow"&&this.updateElementCss(!1),e==="effectiveColSpan"&&(this.colSpan=n)},t.prototype.isPropertyStoredInHash=function(e){return e!=="bindings"},t.prototype.getSkeletonComponentNameCore=function(){return this.survey?this.survey.getSkeletonComponentName(this):"sv-skeleton"},t.prototype.canUpdateValueOnVisibleChanged=function(){return!this.isLoadingFromJson&&!!this.survey&&!this.survey.isSettingData()},Object.defineProperty(t.prototype,"parentQuestion",{get:function(){return this.parentQuestionValue},enumerable:!1,configurable:!0}),t.prototype.setParentQuestion=function(e){this.parentQuestionValue=e,this.onParentQuestionChanged()},t.prototype.onParentQuestionChanged=function(){},t.prototype.getPanelInDesignMode=function(){return null},t.prototype.updateElementVisibility=function(){this.setPropertyValue("isVisible",this.isVisible)},Object.defineProperty(t.prototype,"skeletonComponentName",{get:function(){return this.getSkeletonComponentNameCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state")},set:function(e){this.setPropertyValue("state",e),this.renderedIsExpanded=!this.isCollapsed},enumerable:!1,configurable:!0}),t.prototype.notifyStateChanged=function(e){this.survey&&this.survey.elementContentVisibilityChanged(this)},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.state==="collapsed"&&!this.isDesignMode&&!this.isSingleInputMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSingleInputMode",{get:function(){var e;return(e=this.survey)===null||e===void 0?void 0:e.isSingleVisibleInput},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpanded",{get:function(){return this.state==="expanded"&&!this.isSingleInputMode},enumerable:!1,configurable:!0}),t.prototype.collapse=function(){this.isDesignMode||(this.state="collapsed")},t.prototype.expand=function(){this.state="expanded"},t.prototype.toggleState=function(){return this.isCollapsed?(this.expand(),!0):this.isExpanded?(this.collapse(),!1):!0},Object.defineProperty(t.prototype,"hasStateButton",{get:function(){return this.isExpanded||this.isCollapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiState",{get:function(){return this.getUIState()},set:function(e){this.setUIState(e)},enumerable:!1,configurable:!0}),t.prototype.getUIState=function(){if(this.state!=="default")return{collapsed:this.state==="collapsed"}},t.prototype.setUIState=function(e){e&&e.collapsed!==void 0&&(this.state=e.collapsed?"collapsed":"expanded")},Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.title||this.name},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return this.titleToolbarValue||(this.titleToolbarValue=this.createActionContainer(!0),this.titleToolbarValue.locOwner=this,this.titleToolbarValue.containerCss=(this.isPanel?this.cssClasses.panel.titleBar:this.cssClasses.titleBar)||"sv-action-title-bar",this.titleToolbarValue.setItems(this.getTitleActions()),this.titleToolbarValue.flushUpdates()),this.titleToolbarValue},t.prototype.createActionContainer=function(e){var i=e?new Ft:new be;return this.survey&&this.survey.getCss().actionBar&&(i.cssClasses=this.survey.getCss().actionBar),i},Object.defineProperty(t.prototype,"titleActions",{get:function(){return this.getArrayPropertyValue("titleActions")},enumerable:!1,configurable:!0}),t.prototype.getTitleActions=function(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions},t.prototype.getDefaultTitleActions=function(){return[]},t.prototype.updateTitleActions=function(){var e=this.getDefaultTitleActions();this.survey&&(e=this.survey.getUpdatedElementTitleActions(this,e)),this.setArrayPropertyValue("titleActions",e)},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.titleToolbarValue&&this.titleToolbarValue.locStrsChanged()},Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return this.getTitleActions().length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return this.state!==void 0&&this.state!=="default"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){return!this.isPage&&this.state!=="default"?0:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){if(!(this.isPage||this.state==="default"))return this.state==="expanded"?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){if(!(this.isPage||this.state==="default"))return"button"},enumerable:!1,configurable:!0}),t.prototype.setSurveyImpl=function(e,i){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.createTextProcessor(),this.onSetData()):(this.setSurveyCore(null),this.surveyDataValue=null,this.textProcessorValue=null),this.survey&&(this.resetDescriptionVisibility(),this.clearCssClasses()),this.blockAnimations(),this.renderedIsExpanded=!this.isCollapsed,this.releaseAnimations()},t.prototype.getValueGetterContext=function(){var e=this.data;return e?e.getValueGetterContext():r.prototype.getValueGetterContext.call(this)},t.prototype.createTextProcessor=function(){return this.surveyImplValue.getTextProcessor()},t.prototype.canRunConditions=function(){return r.prototype.canRunConditions.call(this)&&!!this.data},t.prototype.getDataFilteredProperties=function(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e},Object.defineProperty(t.prototype,"surveyImpl",{get:function(){return this.surveyImplValue},enumerable:!1,configurable:!0}),t.prototype.__setData=function(e){this.surveyDataValue=e},Object.defineProperty(t.prototype,"data",{get:function(){return this.surveyDataValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return this.surveyValue?this.surveyValue:(this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue)},t.prototype.setSurveyCore=function(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()},Object.defineProperty(t.prototype,"skeletonHeight",{get:function(){var e=void 0;return this.survey&&this.survey.skeletonHeight&&(e=this.survey.skeletonHeight+"px"),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){var e=this.parentQuestion;return e&&e.areInvisibleElementsShowing===!1?!1:!!this.survey&&this.survey.areInvisibleElementsShowing&&(!this.isDesignMode||!this.isContentElement)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly")},set:function(e){this.readOnly!=e&&(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClassesValue",{get:function(){var e=this;return this.getPropertyValue("cssClassesValue",void 0,function(){return e.createCssClassesValue()})},enumerable:!1,configurable:!0}),t.prototype.createCssClassesValue=function(){var e=this.isCalculatingCssClasses;this.isCalculatingCssClasses=!0;var i=this.calcCssClasses(this.css);return e||this.onCalcCssClasses(i),this.updateElementCssCore(i),this.isCalculatingCssClasses=!1,i},t.prototype.onCalcCssClasses=function(e){},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.survey?this.cssClassesValue:this.calcCssClasses(this.css)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){var e=this.cssClasses;return e.number?e.number:e.panel?e.panel.number:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){var e=this.cssClasses;return e.requiredMark||e.panel&&e.panel.requiredMark},enumerable:!1,configurable:!0}),t.prototype.getCssTitleExpandableSvg=function(){return this.state==="default"||this.isSingleInputMode?null:this.cssClasses.titleExpandableSvg},t.prototype.calcCssClasses=function(e){},t.prototype.updateElementCssCore=function(e){},Object.defineProperty(t.prototype,"cssError",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.clearCssClasses()},t.prototype.clearCssClasses=function(){this.resetPropertyValue("cssClassesValue")},t.prototype.getIsLoadingFromJson=function(){return r.prototype.getIsLoadingFromJson.call(this)?!0:this.surveyValue?this.surveyValue.isLoadingFromJson:!1},Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){var i=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&i&&this.onNameChanged(i)},enumerable:!1,configurable:!0}),t.prototype.getValidName=function(e){if(e){e=e.trim();var i=C.itemValueSeparator;i&&e.indexOf(i)>-1&&(e=e.replace(i,""))}return e},t.prototype.onNameChanged=function(e){},t.prototype.updateBindingValue=function(e,i){this.data&&!this.isTwoValueEquals(i,this.data.getValue(e))&&this.data.setValue(e,i,!1)},Object.defineProperty(t.prototype,"errors",{get:function(){return this.getArrayPropertyValue("errors")},set:function(e){this.setArrayPropertyValue("errors",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedErrors",{get:function(){return this.getArrayPropertyValue("renderedErrors")},set:function(e){this.setArrayPropertyValue("renderedErrors",e)},enumerable:!1,configurable:!0}),t.prototype.calcRenderedErrors=function(){var e=this.currentNotificationType;return this.errors.filter((function(i){return i.visible&&i.notificationType===e}))},Object.defineProperty(t.prototype,"currentNotificationType",{get:function(){var e=this;return this.getPropertyValue("currentNotificationType",void 0,function(){return e.calcCurrentNotificationType()})},enumerable:!1,configurable:!0}),t.prototype.calcCurrentNotificationType=function(){for(var e="",i=["info","warning","error"],n=0;n<this.errors.length;n++){var o=this.errors[n];if(o.visible){var s=o.notificationType;if(!e){e=s;continue}var a=i.indexOf(s),l=i.indexOf(e);a>l&&(e=s)}}return e},t.prototype.updateVisibleErrors=function(){this.resetPropertyValue("currentNotificationType");for(var e=0,i=0;i<this.errors.length;i++)this.errors[i].visible&&e++;this.hasVisibleErrors=e>0,this.renderedErrors=this.calcRenderedErrors()},Object.defineProperty(t.prototype,"containsErrors",{get:function(){return this.getPropertyValue("containsErrors",!1)},enumerable:!1,configurable:!0}),t.prototype.updateContainsErrors=function(){this.setPropertyValue("containsErrors",this.getContainsErrors())},t.prototype.getContainsErrors=function(){return this.errors.length>0},Object.defineProperty(t.prototype,"selectedElementInDesign",{get:function(){return this.selectedElementInDesignValue},set:function(e){this.selectedElementInDesignValue=e},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidgets=function(){},t.prototype.onSurveyLoad=function(){},Object.defineProperty(t.prototype,"wasRendered",{get:function(){return!!this.wasRenderedValue},enumerable:!1,configurable:!0}),t.prototype.resetWasRendered=function(){this.wasRenderedValue=!1},t.prototype.onFirstRendering=function(){!this.wasRendered&&!this.isLoadingFromJson&&(this.wasRenderedValue=!0,this.onFirstRenderingCore())},t.prototype.onFirstRenderingCore=function(){},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.survey||this.onSurveyLoad()},t.prototype.setVisibleIndex=function(e){return 0},t.prototype.getPageVisibleIndex=function(){return-1},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.getQuestionStartIndex(this.getPageVisibleIndex()):""},t.prototype.delete=function(e){},t.prototype.getLocale=function(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,i,n):this.locOwner?this.locOwner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e,i){return this.survey&&typeof this.survey.getRendererForString=="function"?this.survey.getRendererForString(this,e,i):this.locOwner&&typeof this.locOwner.getRenderer=="function"?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e,i){return this.survey&&typeof this.survey.getRendererContextForString=="function"?this.survey.getRendererContextForString(this,e,i):this.locOwner&&typeof this.locOwner.getRendererContext=="function"?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e,i){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processTextEx({text:e,returnDisplayValue:this.getUseDisplayValuesInDynamicTexts(),context:i||this,doEncoding:!1}).text:this.locOwner?this.locOwner.getProcessedText(e,i):e},t.prototype.getUseDisplayValuesInDynamicTexts=function(){return!0},t.prototype.removeSelfFromList=function(e){if(!(!e||!Array.isArray(e))){var i=e.indexOf(this);i>-1&&e.splice(i,1)}},Object.defineProperty(t.prototype,"textProcessor",{get:function(){return this.textProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getProcessedHtml=function(e){return!e||!this.textProcessor?e:this.textProcessor.processText(e,!0)},t.prototype.onSetData=function(){},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),t.prototype.getPage=function(e){for(;e&&e.parent;)e=e.parent;return e&&e.isPage?e:null},t.prototype.moveToBase=function(e,i,n){if(n===void 0&&(n=null),!i)return!1;e.removeElement(this);var o=-1;return w.isNumber(n)&&(o=parseInt(n)),o==-1&&n&&n.getType&&(o=i.indexOf(n)),i.addElement(this,o),!0},t.prototype.setPage=function(e,i){var n=this.getPage(e);if(this.prevSurvey=this.survey,typeof i=="string"){var o=this.getSurvey();o.pages.forEach(function(s){i===s.name&&(i=s)})}n!==i&&(e&&e.removeElement(this),i&&i.addElement(this,-1),this.prevSurvey=void 0)},t.prototype.getSearchableLocKeys=function(e){e.push("title"),e.push("description")},Object.defineProperty(t.prototype,"hasParent",{get:function(){return this.parent&&!this.parent.isPage||this.parent===void 0},enumerable:!1,configurable:!0}),t.prototype.shouldAddRunnerStyles=function(){return!this.isDesignMode},Object.defineProperty(t.prototype,"isCompact",{get:function(){return this.survey&&this.survey.isCompact},enumerable:!1,configurable:!0}),t.prototype.canHaveFrameStyles=function(){var e;return((e=this.survey)===null||e===void 0?void 0:e.currentSingleElement)===this?!0:this.isInternalNested===!0?!1:this.parent!==void 0&&(!this.hasParent||this.parent&&this.parent.showPanelAsPage)},t.prototype.getHasFrameV2=function(){return this.shouldAddRunnerStyles()&&this.canHaveFrameStyles()},t.prototype.getIsNested=function(){return this.shouldAddRunnerStyles()&&!this.canHaveFrameStyles()},t.prototype.getCssRoot=function(e){var i=!!this.isCollapsed||!!this.isExpanded;return new I().append(e.withFrame,this.getHasFrameV2()&&!this.isCompact).append(e.compact,this.isCompact&&this.getHasFrameV2()).append(e.collapsed,!!this.isCollapsed).append(e.expandableAnimating,i&&this.isAnimatingCollapseExpand).append(e.expanded,!!this.isExpanded&&this.renderedIsExpanded).append(e.expandable,i).append(e.nested,this.getIsNested()).toString()},t.prototype.getRootStyle=function(){var e={};return this.paddingLeft&&(e["--sv-element-add-padding-left"]=this.paddingLeft),this.paddingRight&&(e["--sv-element-add-padding-right"]=this.paddingRight),e},Object.defineProperty(t.prototype,"paddingLeft",{get:function(){var e=this;return this.getPropertyValue("paddingLeft",void 0,function(){return e.calcPaddingLeft()})},enumerable:!1,configurable:!0}),t.prototype.calcPaddingLeft=function(){return""},Object.defineProperty(t.prototype,"paddingRight",{get:function(){var e=this;return this.getPropertyValue("paddingRight",void 0,function(){return e.calcPaddingRight()})},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),t.prototype.calcPaddingRight=function(){return""},t.prototype.resetIndents=function(){this.resetPropertyValue("paddingLeft"),this.resetPropertyValue("paddingRight")},Object.defineProperty(t.prototype,"rootStyle",{get:function(){var e=this;return this.getPropertyValue("rootStyle",void 0,function(){return e.calcRootStyle()})},set:function(e){this.setPropertyValue("rootStyle",e)},enumerable:!1,configurable:!0}),t.prototype.updateRootStyle=function(){this.getPropertyValueWithoutDefault("rootStyle")?this.setRootStyle():this.resetPropertyValue("effectiveColSpan")},t.prototype.setRootStyle=function(){this.rootStyle=this.calcRootStyle()},t.prototype.calcRootStyle=function(){var e={},i;if(this.parent){var n=this.parent.getColumsForElement(this);i=n.reduce(function(a,l){return l.effectiveWidth+a},0),i&&i!==100&&(e.flexGrow=1,e.flexShrink=0,e.flexBasis=i+"%",e.minWidth=void 0,e.maxWidth=this.maxWidth)}if(Object.keys(e).length==0){var o=""+this.minWidth;if(o&&o!="auto"){if(o.indexOf("px")!=-1&&this.survey){o=o.replace("px","");var s=parseFloat(o);isNaN(s)||(o=s*this.survey.widthScale/100,o=""+o+"px")}o="min(100%, "+o+")"}this.allowRootStyle&&this.renderWidth&&(e.flexGrow=1,e.flexShrink=1,e.flexBasis=this.renderWidth,e.minWidth=o,e.maxWidth=this.maxWidth)}return e},t.prototype.isContainsSelection=function(e){var i=void 0,n=D.getDocument();if(D.isAvailable()&&n&&n.selection)i=n.selection.createRange().parentElement();else{var o=k.getSelection();if(o&&o.rangeCount>0){var s=o.getRangeAt(0);s.startOffset!==s.endOffset&&(i=s.startContainer.parentNode)}}return i==e},Object.defineProperty(t.prototype,"clickTitleFunction",{get:function(){var e=this;if(this.needClickTitleFunction())return function(i){if(!(i&&e.isContainsSelection(i.target)))return e.processTitleClick()}},enumerable:!1,configurable:!0}),t.prototype.needClickTitleFunction=function(){return this.state!=="default"},t.prototype.processTitleClick=function(){this.state!=="default"&&this.toggleState()},Object.defineProperty(t.prototype,"hasAdditionalTitleToolbar",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalTitleToolbar",{get:function(){return this.getAdditionalTitleToolbar()},enumerable:!1,configurable:!0}),t.prototype.getAdditionalTitleToolbar=function(){return null},t.prototype.getCssTitle=function(e){if(!e)return"";var i=this.state!=="default",n=4;return new I().append(e.title).append(e.titleNumInline,(this.no||"").length>n||i).append(e.titleExpandable,i).append(e.titleExpanded,this.isExpanded).append(e.titleCollapsed,this.isCollapsed).append(e.titleDisabled,this.isDisabledStyle).append(e.titleReadOnly,this.isReadOnly).append(e.titleOnError,this.containsErrors).toString()},Object.defineProperty(t.prototype,"isDisabledStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[0]},enumerable:!1,configurable:!0}),t.prototype.getIsDisableAndReadOnlyStyles=function(e){var i=this.isPreviewStyle,n=e||this.isReadOnly,o=n&&!i;return[o,!1]},Object.defineProperty(t.prototype,"isPreviewStyle",{get:function(){return!!this.survey&&this.survey.state==="preview"},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.resetDescriptionVisibility(),this.errors.length>0&&this.errors.forEach(function(e){e.updateText()})},t.prototype.setWrapperElement=function(e){this.wrapperElement=e},t.prototype.getWrapperElement=function(){return this.wrapperElement},Object.defineProperty(t.prototype,"isAnimatingCollapseExpand",{get:function(){return this._isAnimatingCollapseExpand||this._renderedIsExpanded!=this.isExpanded},set:function(e){e!==this._isAnimatingCollapseExpand&&(this._isAnimatingCollapseExpand=e,this.updateElementCss(!1))},enumerable:!1,configurable:!0}),t.prototype.onElementExpanded=function(e){},t.prototype.getExpandCollapseAnimationOptions=function(){var e=this,i=function(o){e.isAnimatingCollapseExpand=!0,Ve(o)},n=function(o){e.isAnimatingCollapseExpand=!1,he(o)};return{getRerenderEvent:function(){return e.onElementRerendered},getEnterOptions:function(){var o=e.isPanel?e.cssClasses.panel:e.cssClasses;return{cssClass:o.contentEnter,onBeforeRunAnimation:i,onAfterRunAnimation:function(s){n(s),e.onElementExpanded(!0)}}},getLeaveOptions:function(){var o=e.isPanel?e.cssClasses.panel:e.cssClasses;return{cssClass:o.contentLeave,onBeforeRunAnimation:i,onAfterRunAnimation:n}},getAnimatedElement:function(){var o,s=e.isPanel?e.cssClasses.panel:e.cssClasses;if(s.content){var a=pe(s.content);if(a)return(o=e.getWrapperElement())===null||o===void 0?void 0:o.querySelector(":scope ".concat(a))}},isAnimationEnabled:function(){return e.isExpandCollapseAnimationEnabled}}},Object.defineProperty(t.prototype,"isExpandCollapseAnimationEnabled",{get:function(){return this.animationAllowed&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedIsExpanded",{get:function(){return!!this._renderedIsExpanded},set:function(e){var i=this._renderedIsExpanded;this.animationCollapsed.sync(e),!this.isExpandCollapseAnimationEnabled&&!i&&this.renderedIsExpanded&&this.onElementExpanded(!1)},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){return r.prototype.getIsAnimationAllowed.call(this)&&!!this.survey&&!this.survey.isEndLoadingFromJson},t.prototype.afterRenderCore=function(e){this.onAfterRenderElement.fire(this,{htmlElement:e})},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.titleToolbarValue&&this.titleToolbarValue.dispose()},c([p({defaultValue:1})],t.prototype,"colSpan",void 0),c([p({defaultValue:!1})],t.prototype,"hasVisibleErrors",void 0),c([p({defaultValue:!0})],t.prototype,"isSingleInRow",void 0),c([p({defaultValue:""})],t.prototype,"width",void 0),c([p()],t.prototype,"minWidth",void 0),c([p()],t.prototype,"maxWidth",void 0),c([p({defaultValue:""})],t.prototype,"renderWidth",void 0),c([p()],t.prototype,"indent",void 0),c([p({defaultValue:0})],t.prototype,"rightIndent",void 0),c([p({defaultValue:!0})],t.prototype,"allowRootStyle",void 0),c([p()],t.prototype,"_renderedIsExpanded",void 0),t})(kt),al=(function(){function r(t,e,i){i===void 0&&(i=100);var n=this;this._elements=t,this._renderedHandler=e,this._elementsToRenderCount=0,this._elementsToRenderTimer=void 0,this._elementRenderedHandler=function(o,s){var a;(a=o.onAfterRenderElement)===null||a===void 0||a.remove(n._elementRenderedHandler),n._elementsToRenderCount--,n._elementsToRenderCount<=0&&n.visibleElementsRendered()},this._elements.forEach(function(o){o.onAfterRenderElement&&(o.onAfterRenderElement.add(n._elementRenderedHandler),n._elementsToRenderCount++)}),this._elementsToRenderCount>0?this._elementsToRenderTimer=setTimeout(function(){n._elementsToRenderCount>0&&n.visibleElementsRendered()},i):this.visibleElementsRendered()}return r.prototype.stopWaitingForElementsRendering=function(){var t=this;this._elementsToRenderTimer&&(clearTimeout(this._elementsToRenderTimer),this._elementsToRenderTimer=void 0),this._elements.forEach(function(e){var i;(i=e.onAfterRenderElement)===null||i===void 0||i.remove(t._elementRenderedHandler)}),this._elementsToRenderCount=0},r.prototype.visibleElementsRendered=function(){var t=this._renderedHandler;this.dispose(),typeof t=="function"&&t()},r.prototype.dispose=function(){this.stopWaitingForElementsRendering(),this._elements=void 0,this._renderedHandler=void 0},r})(),me=(function(){function r(t,e,i,n){e===void 0&&(e=!1),this.owner=t,this.useMarkdown=e,this.name=i,this.values={},this.htmlValues={},this.onStringChanged=new se,this._localizationName=n}return Object.defineProperty(r,"defaultLocale",{get:function(){return C.localization.defaultLocaleName},set:function(t){C.localization.defaultLocaleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localizationName",{get:function(){return this._localizationName},set:function(t){this._localizationName!=t&&(this._localizationName=t,this.strChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"allowLineBreaks",{get:function(){var t;return this._allowLineBreaks===void 0&&(this._allowLineBreaks=!1,this.name&&this.owner instanceof kt&&(this._allowLineBreaks=((t=V.findProperty(this.owner.getType(),this.name))===null||t===void 0?void 0:t.type)=="text")),this._allowLineBreaks},enumerable:!1,configurable:!0}),r.prototype.getIsMultiple=function(){return!1},r.prototype.getStringViewerClassName=function(t){return t!==void 0?t:"sv-string-viewer"+(this.allowLineBreaks?" sv-string-viewer--multiline":"")},Object.defineProperty(r.prototype,"locale",{get:function(){if(this.owner&&this.owner.getLocale){var t=this.owner.getLocale();if(t||!this.sharedData)return t}return this.sharedData?this.sharedData.locale:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isDefautlLocale",{get:function(){var t=this.locale;return!t||t===C.defaultLocaleName},enumerable:!1,configurable:!0}),r.prototype.strChanged=function(){this.isTextRequested&&(this.searchableText=void 0,!(this.renderedText===void 0&&this.isEmpty&&!this.onGetTextCallback&&!this.localizationName)&&(this.calculatedTextValue=this.calcText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.htmlValues={},this.onChanged(),this.onStringChanged.fire(this,{})))},Object.defineProperty(r.prototype,"text",{get:function(){return this.pureText},set:function(t){this.setLocaleText(this.locale,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"calculatedText",{get:function(){return this.renderedText=this.calculatedTextValue!==void 0?this.calculatedTextValue:this.calcText(),this.calculatedTextValue=void 0,this.renderedText},enumerable:!1,configurable:!0}),r.prototype.getPlaceholder=function(){var t="";if(!this.isDefautlLocale){var e=this.getRootDialect(this.locale);t=this.getLocaleText(e||C.defaultLocaleName)}return!t&&this.onGetTextCallback&&(t=this.onGetTextCallback("","")),t},r.prototype.calcText=function(){var t=this.pureText,e=t;return e&&this.owner&&this.owner.getProcessedText&&e.indexOf("{")>-1&&(e=this.owner.getProcessedText(e)),this.onGetTextCallback&&(e=this.onGetTextCallback(e,t)),e},Object.defineProperty(r.prototype,"pureText",{get:function(){this.isTextRequested=!0;var t=this.locale;t||(t=this.defaultLoc);var e=this.getValue(t);if(this.isValueEmpty(e)&&t===this.defaultLoc&&(e=this.getValue(oe.defaultLocale)),this.isValueEmpty(e)){var i=this.getRootDialect(t);i&&(e=this.getValue(i))}return this.isValueEmpty(e)&&t!==this.defaultLoc&&(e=this.getValue(this.defaultLoc)),this.isValueEmpty(e)&&this.getLocalizationName()&&(e=this.getLocalizationStr()),e||(e=this.defaultValue||""),e},enumerable:!1,configurable:!0}),r.prototype.getRootDialect=function(t){if(!t)return t;var e=t.indexOf("-");return e>-1?t.substring(0,e):""},r.prototype.getLocalizationName=function(){return this.sharedData?this.sharedData.localizationName:this.localizationName},r.prototype.getLocalizationStr=function(){var t=this.getLocalizationName();return t?te(t,this.locale):""},Object.defineProperty(r.prototype,"hasHtml",{get:function(){return this.hasHtmlValue()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"html",{get:function(){return this.hasHtml?this.getHtmlValue():""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this.getValuesKeys().length==0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textOrHtml",{get:function(){return this.hasHtml?this.getHtmlValue():this.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderedHtml",{get:function(){return this.textOrHtml},enumerable:!1,configurable:!0}),r.prototype.getLocaleText=function(t){var e=this.getLocaleTextCore(t);return e||""},r.prototype.getLocaleTextCore=function(t){return t||(t=this.defaultLoc),this.getValue(t)},r.prototype.isLocaleTextEqualsWithDefault=function(t,e){var i=this.getLocaleTextCore(t);return i===e?!0:this.isValueEmpty(i)&&this.isValueEmpty(e)},r.prototype.clear=function(){this.setJson(void 0)},r.prototype.clearLocale=function(t){this.setLocaleText(t,void 0)},r.prototype.setLocaleText=function(t,e){if(t=this.getValueLoc(t),this.lastChangedLoc=t,t&&e===void 0){var i=this.getValue(t);i!==void 0&&(this.deleteValue(t),this.fireStrChanged(t,i));return}if(!this.storeDefaultText&&this.isLocaleTextEqualsWithDefault(t,e)){if(!this.isValueEmpty(e)||t&&t!==this.defaultLoc)return;var n=oe.defaultLocale,o=this.getValue(n);n&&!this.isValueEmpty(o)&&(this.setValue(n,e),this.fireStrChanged(n,o));return}if(!(!C.localization.storeDuplicatedTranslations&&!this.isValueEmpty(e)&&t&&t!=this.defaultLoc&&!this.getValue(t)&&e==this.getLocaleText(this.defaultLoc))){var s=this.curLocale;t||(t=this.defaultLoc);var a=this.onStrChanged&&t===s?this.pureText:void 0;delete this.htmlValues[t],this.isValueEmpty(e)?this.deleteValue(t):typeof e=="string"&&(this.canRemoveLocValue(t,e)?this.setLocaleText(t,null):(this.setValue(t,e),t==this.defaultLoc&&this.deleteValuesEqualsToDefault(e))),this.fireStrChanged(t,a)}},r.prototype.isValueEmpty=function(t){return t==null?!0:this.localizationName?!1:t===""},Object.defineProperty(r.prototype,"curLocale",{get:function(){return this.locale?this.locale:this.defaultLoc},enumerable:!1,configurable:!0}),r.prototype.canRemoveLocValue=function(t,e){if(C.localization.storeDuplicatedTranslations||t===this.defaultLoc)return!1;var i=this.getRootDialect(t);if(i){var n=this.getLocaleText(i);return n?n==e:this.canRemoveLocValue(i,e)}else return e==this.getLocaleText(this.defaultLoc)},r.prototype.fireStrChanged=function(t,e){if(this.strChanged(),!!this.onStrChanged){var i=this.pureText;(t!==this.curLocale||e!==i)&&this.onStrChanged(e,i)}},r.prototype.hasNonDefaultText=function(){var t=this.getValuesKeys();return t.length==0?!1:t.length>1||t[0]!=this.defaultLoc},r.prototype.getLocales=function(){var t=this.getValuesKeys();return t.length==0?[]:t},r.prototype.getJson=function(t){if(this.sharedData)return this.sharedData.getJson(t);var e=this.getValuesKeys(),i=t?.locales||[],n=i.length>0;if(n)for(var o=e.length-1;o>=0;o--)i.indexOf(e[o])<0&&e.splice(o,1);if(e.length==0){if(!n&&this.serializeCallBackText){var s=this.calcText();if(s)return s}return null}if(e.length==1&&(n||e[0]==C.localization.defaultLocaleName)&&!C.serialization.localizableStringSerializeAsObject)return this.values[e[0]];for(var a={},o=0;o<e.length;o++){var l=e[o];a[l]=this.values[l]}return a},r.prototype.setJson=function(t,e){if(this.sharedData){this.sharedData.setJson(t,e);return}if(this.lastChangedLoc=void 0,this.values={},this.htmlValues={},t!=null)if(e)typeof t=="string"?this.values[C.defaultLocaleName]=t:(this.values=t,delete this.values.pos);else{if(typeof t=="string")this.setLocaleText(null,t);else for(var i in t)this.setLocaleText(i,t[i]);this.strChanged()}},r.prototype.mergeWith=function(t,e){if(this.sharedData){this.sharedData.mergeWith(t);return}var i=t.getLocales();if(Array.isArray(e)&&e.length===1&&i.length===1&&i[0]===this.defaultLoc)this.setLocaleText(e[0],t.getLocaleText(this.defaultLoc));else{e=e||i;for(var n=0;n<e.length;n++){var o=e[n],s=t.getLocaleText(o);this.setLocaleText(o,s)}}},Object.defineProperty(r.prototype,"renderAs",{get:function(){return!this.owner||typeof this.owner.getRenderer!="function"?r.defaultRenderer:this.owner.getRenderer(this.name)||r.defaultRenderer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderAsData",{get:function(){return!this.owner||typeof this.owner.getRendererContext!="function"?this:this.owner.getRendererContext(this)||this},enumerable:!1,configurable:!0}),r.prototype.equals=function(t){return this.sharedData?this.sharedData.equals(t):!t||!t.values?!1:w.isTwoValueEquals(this.values,t.values,!1,!0,!1)},r.prototype.setFindText=function(t){if(this.searchText!=t){if(this.searchText=t,!this.searchableText){var e=this.textOrHtml;this.searchableText=e?e.toLowerCase():""}var i=this.searchableText,n=i&&t?i.indexOf(t):void 0;return n<0&&(n=void 0),(n!=null||this.searchIndex!=n)&&(this.searchIndex=n,this.onSearchChanged&&this.onSearchChanged()),this.searchIndex!=null}},r.prototype.onChanged=function(){},r.prototype.hasHtmlValue=function(){if(!this.owner||!this.useMarkdown)return!1;var t=this.locale;if(t||(t=this.defaultLoc),this.htmlValues[t]!==void 0)return!!this.htmlValues[t];var e=this.calculatedText;if(!e)return this.setHtmlValue(t,""),!1;if(this.getLocalizationName()&&e===this.getLocalizationStr())return this.setHtmlValue(t,""),!1;var i=this.owner.getMarkdownHtml(e,this.name);return this.setHtmlValue(t,i),!!i},r.prototype.setHtmlValue=function(t,e){this.htmlValues[t]=e},r.prototype.getHtmlValue=function(){var t=this.locale;return t||(t=this.defaultLoc),this.htmlValues[t]},r.prototype.deleteValuesEqualsToDefault=function(t){if(!C.localization.storeDuplicatedTranslations)for(var e=this.getValuesKeys(),i=0;i<e.length;i++)e[i]!=this.defaultLoc&&this.getValue(e[i])==t&&this.deleteValue(e[i])},r.prototype.getValue=function(t){return this.sharedData?this.sharedData.getValue(t):this.values[this.getValueLoc(t)]},r.prototype.setValue=function(t,e){this.sharedData?this.sharedData.setValue(t,e):this.values[this.getValueLoc(t)]=e},r.prototype.deleteValue=function(t){this.sharedData?this.sharedData.deleteValue(t):delete this.values[this.getValueLoc(t)]},r.prototype.getValueLoc=function(t){return this.disableLocalization?C.localization.defaultLocaleName:t},r.prototype.getValuesKeys=function(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)},Object.defineProperty(r.prototype,"defaultLoc",{get:function(){return C.localization.defaultLocaleName},enumerable:!1,configurable:!0}),r.SerializeAsObject=!1,r.defaultRenderer="sv-string-viewer",r.editableRenderer="sv-string-editor",r})(),Cr=(function(){function r(t){this.owner=t,this.values={}}return r.prototype.getIsMultiple=function(){return!0},Object.defineProperty(r.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue("")},set:function(t){this.setValue("",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return Array.isArray(this.value)?this.value.join(`
`):""},set:function(t){this.value=t?t.split(`
`):[]},enumerable:!1,configurable:!0}),r.prototype.getLocaleText=function(t){var e=this.getValueCore(t,!t||t===this.locale);return!e||!Array.isArray(e)||e.length==0?"":e.join(`
`)},r.prototype.setLocaleText=function(t,e){var i=e?e.split(`
`):null;this.setValue(t,i)},r.prototype.getValue=function(t){return this.getValueCore(t)},r.prototype.getValueCore=function(t,e){if(e===void 0&&(e=!0),t=this.getLocale(t),this.values[t])return this.values[t];if(e){var i=C.localization.defaultLocaleName;if(t!==i&&this.values[i])return this.values[i]}return[]},r.prototype.setValue=function(t,e){t=this.getLocale(t);var i=w.createCopy(this.values);!e||e.length==0?delete this.values[t]:this.values[t]=e,this.onValueChanged&&this.onValueChanged(i,this.values)},r.prototype.hasValue=function(t){return t===void 0&&(t=""),!this.isEmpty&&this.getValue(t).length>0},Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this.getValuesKeys().length==0},enumerable:!1,configurable:!0}),r.prototype.getLocale=function(t){return t||(t=this.locale,t||C.localization.defaultLocaleName)},r.prototype.getLocales=function(){var t=this.getValuesKeys();return t.length==0?[]:t},r.prototype.getJson=function(){var t=this.getValuesKeys();return t.length==0?null:t.length==1&&t[0]==C.localization.defaultLocaleName&&!C.serialization.localizableStringSerializeAsObject?this.values[t[0]]:w.createCopy(this.values)},r.prototype.setJson=function(t){if(this.values={},!!t)if(Array.isArray(t))this.setValue(null,t);else for(var e in t)this.setValue(e,t[e])},r.prototype.getValuesKeys=function(){return Object.keys(this.values)},r})();function wr(r){return C&&C.confirmActionFunc?C.confirmActionFunc(r):confirm(r)}function ht(r){var t=function(e){e?r.funcOnYes():r.funcOnNo&&r.funcOnNo()};if(C&&C.confirmActionFunc){t(wr(r.message));return}C&&C.confirmActionAsync?C.confirmActionAsync(r.message,t,r):Er(r.message,t,r)}function ft(){if(typeof ft.isIEOrEdge>"u"){var r=navigator.userAgent,t=r.indexOf("MSIE "),e=r.indexOf("Trident/"),i=r.indexOf("Edge/");ft.isIEOrEdge=i>0||e>0||t>0}return ft.isIEOrEdge}function Pr(r,t){try{for(var e=atob(r.split(",")[1]),i=r.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);var a=new Blob([n],{type:i});navigator&&navigator.msSaveBlob&&navigator.msSaveOrOpenBlob(a,t)}catch{}}var Bt=function(r){return!!r&&!!("host"in r&&r.host)},Vr=function(r){var t=C.environment.root;return typeof r=="string"?t.getElementById(r):r};function ll(r,t){var e=Qe(r);if(!e||!r.offsetHeight)return!1;var i=Bt(e)?e.host.clientHeight:e.documentElement.clientHeight,n=r.getBoundingClientRect(),o=Math.max(i,k.getInnerHeight()),s=-t,a=o+t,l=n.top,u=n.bottom,f=Math.max(s,l),y=Math.min(a,u);return f<=y}function _t(r){if(!r)return D.isAvailable()?D.getDocument().documentElement:void 0;if(r.scrollHeight>r.clientHeight&&(getComputedStyle(r).overflowY==="scroll"||getComputedStyle(r).overflowY==="auto")||r.scrollWidth>r.clientWidth&&(getComputedStyle(r).overflowX==="scroll"||getComputedStyle(r).overflowX==="auto"))return r;if(!r.parentElement){var t=Qe(r);if(t)return Bt(t)?t.host:t.documentElement}return _t(r.parentElement)}function Qt(r){if(r){var t=_t(r);t&&setTimeout(function(){return t.dispatchEvent(new CustomEvent("scroll"))},10)}}function ul(r){var t=k.getLocation();!r||!t||(t.href=fl(r))}function Ai(r){return r?["url(",r,")"].join(""):""}function cl(r){return typeof r=="string"?/^data:((?:\w+\/(?:(?!;).)+)?)((?:;[^;]+?)*),(.+)$/.test(r):null}var Di={changecamera:"flip-24x24",clear:"clear-24x24",cancel:"cancel-24x24",closecamera:"close-24x24",defaultfile:"file-72x72",choosefile:"folder-24x24",file:"toolbox-file-24x24",left:"chevronleft-16x16",modernbooleancheckchecked:"plus-32x32",modernbooleancheckunchecked:"minus-32x32",more:"more-24x24",navmenu_24x24:"navmenu-24x24",removefile:"error-24x24",takepicture:"camera-32x32",takepicture_24x24:"camera-24x24",v2check:"check-16x16",checked:"check-16x16",v2check_24x24:"check-24x24","back-to-panel_16x16":"restoredown-16x16",clear_16x16:"clear-16x16",close_16x16:"close-16x16",collapsedetail:"collapsedetails-16x16",expanddetail:"expanddetails-16x16","full-screen_16x16":"maximize-16x16",loading:"loading-48x48",minimize_16x16:"minimize-16x16",next_16x16:"chevronright-16x16",previous_16x16:"chevronleft-16x16","no-image":"noimage-48x48","ranking-dash":"rankingundefined-16x16","drag-n-drop":"drag-24x24","ranking-arrows":"reorder-24x24",restore_16x16:"fullsize-16x16",reset:"restore-24x24",search:"search-24x24",average:"smiley-rate5-24x24",excellent:"smiley-rate9-24x24",good:"smiley-rate7-24x24",normal:"smiley-rate6-24x24","not-good":"smiley-rate4-24x24",perfect:"smiley-rate10-24x24",poor:"smiley-rate3-24x24",terrible:"smiley-rate1-24x24","very-good":"smiley-rate8-24x24","very-poor":"smiley-rate2-24x24",add_16x16:"add-16x16",add_24x24:"add-24x24",alert_24x24:"warning-24x24",apply:"apply-24x24","arrow-down":"arrowdown-24x24","arrow-left":"arrowleft-24x24","arrow-left_16x16":"arrowleft-16x16",arrowleft:"arrowleft-16x16","arrow-right":"arrowright-24x24","arrow-right_16x16":"arrowright-16x16",arrowright:"arrowright-16x16","arrow-up":"arrowup-24x24",boolean:"toolbox-boolean-24x24","change-question-type_16x16":"speechbubble-16x16",checkbox:"toolbox-checkbox-24x24","collapse-detail_16x16":"minusbox-16x16","collapse-panel":"collapse-pg-24x24",collapse_16x16:"collapse-16x16","color-picker":"dropper-16x16",comment:"toolbox-longtext-24x24",config:"wrench-24x24",copy:"copy-24x24",default:"toolbox-customquestion-24x24",delete_16x16:"delete-16x16",delete_24x24:"delete-24x24",delete:"delete-24x24","description-hide":"hidehint-16x16",description:"hint-16x16","device-desktop":"desktop-24x24","device-phone":"phone-24x24","device-rotate":"rotate-24x24","device-tablet":"tablet-24x24",download:"download-24x24","drag-area-indicator":"drag-24x24","drag-area-indicator_24x16":"draghorizontal-24x16",v2dragelement_16x16:"draghorizontal-24x16","drop-down-arrow":"chevrondown-24x24","drop-down-arrow_16x16":"chevrondown-16x16",chevron_16x16:"chevrondown-16x16",dropdown:"toolbox-dropdown-24x24",duplicate_16x16:"copy-16x16",edit:"edit-24x24",edit_16x16:"edit-16x16","editing-finish":"finishedit-24x24",error:"error-16x16","expand-detail_16x16":"plusbox-16x16","expand-panel":"expand-pg-24x24",expand_16x16:"expand-16x16",expression:"toolbox-expression-24x24","fast-entry":"textedit-24x24",fix:"fix-24x24",html:"toolbox-html-24x24",image:"toolbox-image-24x24",imagepicker:"toolbox-imagepicker-24x24",import:"import-24x24","invisible-items":"invisible-24x24",language:"language-24x24",load:"import-24x24","logic-collapse":"collapse-24x24","logic-expand":"expand-24x24",logo:"image-48x48",matrix:"toolbox-matrix-24x24",matrixdropdown:"toolbox-multimatrix-24x24",matrixdynamic:"toolbox-dynamicmatrix-24x24",multipletext:"toolbox-multipletext-24x24",panel:"toolbox-panel-24x24",paneldynamic:"toolbox-dynamicpanel-24x24",preview:"preview-24x24",radiogroup:"toolbox-radiogroup-24x24",ranking:"toolbox-ranking-24x24",rating:"toolbox-rating-24x24",slider:"toolbox-slider-24x24",redo:"redo-24x24",remove_16x16:"remove-16x16",required:"required-16x16",save:"save-24x24","select-page":"selectpage-24x24",settings:"settings-24x24",settings_16x16:"settings-16x16",signaturepad:"toolbox-signature-24x24","switch-active_16x16":"switchon-16x16","switch-inactive_16x16":"switchoff-16x16",tagbox:"toolbox-tagbox-24x24",text:"toolbox-singleline-24x24",theme:"theme-24x24",toolbox:"toolbox-24x24",undo:"undo-24x24",visible:"visible-24x24",wizard:"wand-24x24",searchclear:"clear-16x16","chevron-16x16":"chevrondown-16x16",chevron:"chevrondown-24x24",progressbuttonv2:"arrowleft-16x16",right:"chevronright-16x16","add-lg":"add-24x24",add:"add-24x24"};function Sr(r){var t=pl(r);return t||Li(r)}function Li(r){var t="icon-",e=r.replace(t,""),i=Di[e]||e;return t+i}function pl(r){var t=C.customIcons[r];return t?Li(t):(r=Li(r),t=C.customIcons[r],t||null)}function hl(r,t,e,i,n,o){if(n){r!=="auto"&&(n.style.width=(r||t||16)+"px",n.style.height=(r||e||16)+"px");var s=n.childNodes[0],a=Sr(i);s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+a);var l=n.getElementsByTagName("title")[0];if(o)l||(l=D.getDocument().createElementNS("http://www.w3.org/2000/svg","title"),n.appendChild(l));else{l&&n.removeChild(l);return}l.textContent=o}}function fl(r){return r&&(r.toLocaleLowerCase().indexOf("javascript:")>-1?encodeURIComponent(r):r)}function dl(r){return typeof r!="function"?r:r()}function _e(r){if(typeof r=="string")if(isNaN(Number(r))){if(r.includes("px"))return parseFloat(r)}else return Number(r);if(typeof r=="number")return r}function jt(r){if(_e(r)===void 0)return r}var Mi="sv-focused--by-key";function xr(r){var t=r.target;!t||!t.classList||t.classList.remove(Mi)}function Fi(r,t){if(!(r.target&&r.target.contentEditable==="true")){var e=r.target;if(e){var i=r.which||r.keyCode;if(i===9){e.classList&&!e.classList.contains(Mi)&&e.classList.add(Mi);return}if(t){if(!t.__keyDownReceived)return;t.__keyDownReceived=!1}i===13||i===32?e.click&&e.click():(!t||t.processEsc)&&i===27&&e.blur&&e.blur()}}}function gl(r,t){if(t===void 0&&(t={processEsc:!0}),t&&(t.__keyDownReceived=!0),!(r.target&&r.target.contentEditable==="true")){var e=r.which||r.keyCode,i=[13,32];t.processEsc&&i.push(27),i.indexOf(e)!==-1&&r.preventDefault()}}function Ni(r,t){if(r){t||(t=function(u){return D.getComputedStyle(u)});var e=parseFloat(r.getAttribute("rows")||"2"),i=t(r),n=i.overflowY,o=parseFloat(i.lineHeight);if(r.scrollHeight){var s=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),a=(r.scrollHeight-s)/o,l=function(u){r.style.height=u*o+s+"px"};for(l(a),r.style.overflowY="hidden";r.scrollHeight<=r.offsetHeight&&a>e;)a--,l(a);r.style.overflowY=n,r.scrollHeight>r.offsetHeight&&(a++,l(a))}else r.style.height="auto"}}function yl(r){return r.originalEvent||r}function Ir(r){r.preventDefault(),r.stopPropagation()}function pe(r){if(!r)return r;var t=/\s*?([\w-]+)\s*?/g;return r.replace(t,".$1")}function ki(r){return getComputedStyle?Number.parseFloat(getComputedStyle(r).width):r.offsetWidth}function Bi(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}function ml(r){for(var t,e=0;e<r.children.length;e++)!t&&getComputedStyle(r.children[e]).display!=="none"&&(t=r.children[e]);return t}function vl(r,t){if(t===void 0&&(t=!0),k.isAvailable()&&D.isAvailable()&&r.childNodes.length>0){var e=k.getSelection();if(e.rangeCount==0)return;var i=e.getRangeAt(0);i.setStart(i.endContainer,i.endOffset),i.setEndAfter(r.lastChild),e.removeAllRanges(),e.addRange(i);var n=e.toString(),o=r.innerText;n=n.replace(/\r/g,""),t&&(n=n.replace(/\n/g,""),o=o.replace(/\n/g,""));var s=n.length;for(r.innerText=o,i=D.getDocument().createRange(),i.setStart(r.firstChild,0),i.setEnd(r.firstChild,0),e.removeAllRanges(),e.addRange(i);e.toString().length<o.length-s;){var a=e.toString().length;if(e.modify("extend","forward","character"),e.toString().length==a)break}i=e.getRangeAt(0),i.setStart(i.endContainer,i.endOffset)}}function dt(r,t){if(!(!t||!r)&&typeof t=="object")for(var e in r){var i=r[e];!Array.isArray(i)&&i&&typeof i=="object"?((!t[e]||typeof t[e]!="object")&&(t[e]={}),dt(i,t[e])):t[e]=i}}function qt(r,t){var e={};dt(t.list,e),dt(r.list,e),r.list=e}(function(){function r(){this._result=""}return r.prototype.log=function(t){this._result+="->"+t},Object.defineProperty(r.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),r})();function Er(r,t,e){e===void 0&&(e={});var i=new me(void 0,!1);i.defaultValue=r||e.message;var n=C.showDialog({componentName:"sv-string-viewer",data:{locStr:i,locString:i,model:i},onApply:function(){return t(!0),!0},onCancel:function(){return t(!1),!1},displayMode:"popup",isFocusedContent:!1,cssClass:e.cssClass||"sv-popup--confirm"},e.rootElement),o=n.footerToolbar,s=o.getActionById("apply"),a=o.getActionById("cancel");return a.title=te("cancel",e.locale),s.title=e.applyTitle||te("ok",e.locale),s.innerCss="sd-btn--danger",bl(n),!0}function bl(r){r.width="min-content"}function Tr(r,t){k.isFileReaderAvailable()&&(r.value="",r.onchange=function(e){if(k.isFileReaderAvailable()&&!(!r||!r.files||r.files.length<1)){for(var i=[],n=0;n<r.files.length;n++)i.push(r.files[n]);t(i)}},r.click())}function Cl(r,t,e){var i=new Map,n=new Map,o=new Map,s=new Map;r.forEach(function(R){var A=e(R);if(!i.has(A))i.set(e(R),R);else throw new Error("keys must be unique")}),t.forEach(function(R){var A=e(R);if(!n.has(A))n.set(A,R);else throw new Error("keys must be unique")});var a=[],l=[];n.forEach(function(R,A){i.has(A)?o.set(A,o.size):a.push(R)}),i.forEach(function(R,A){n.has(A)?s.set(A,s.size):l.push(R)});var u=[];o.forEach(function(R,A){var Q=s.get(A),ee=n.get(A);Q!==R&&u.push({item:ee,movedForward:Q<R})});var f=new Array(r.length),y=0,b=Array.from(o.keys());r.forEach(function(R,A){o.has(e(R))?(f[A]=n.get(b[y]),y++):f[A]=R});var E=new Map,S=[];f.forEach(function(R){var A=e(R);n.has(A)?S.length>0&&(E.set(A,S),S=[]):S.push(R)});var O=new Array;return n.forEach(function(R,A){E.has(A)&&E.get(A).forEach(function(Q){O.push(Q)}),O.push(R)}),S.forEach(function(R){O.push(R)}),{reorderedItems:u,deletedItems:l,addedItems:a,mergedItems:O}}function wl(r){if(D.isAvailable()){var t=D.getComputedStyle(r),e=t.paddingTop,i=t.paddingBottom,n=t.borderTopWidth,o=t.borderBottomWidth,s=t.marginTop,a=t.marginBottom,l=t.boxSizing,u=r.offsetHeight+"px";if(l=="content-box"){var f=r.offsetHeight;[o,n,i,e].forEach(function(y){f-=parseFloat(y)}),u=f+"px"}return{paddingTop:e,paddingBottom:i,borderTopWidth:n,borderBottomWidth:o,marginTop:s,marginBottom:a,heightFrom:"0px",heightTo:u}}else return}function gt(r,t,e){var i;e===void 0&&(e="--animation-"),r.__sv_created_properties=(i=r.__sv_created_properties)!==null&&i!==void 0?i:[],Object.keys(t).forEach(function(n){var o="".concat(e).concat(n.split(/\.?(?=[A-Z])/).join("-").toLowerCase());r.style.setProperty(o,t[n]),r.__sv_created_properties.push(o)})}function Ve(r){gt(r,wl(r))}function he(r){Array.isArray(r.__sv_created_properties)&&(r.__sv_created_properties.forEach(function(t){r.style.removeProperty(t)}),delete r.__sv_created_properties)}function Pl(r){return Math.floor(r*100)/100}function Qe(r){var t=r?.getRootNode()||C.environment.root;return t instanceof Document||t instanceof ShadowRoot?t:null}function Rr(){var r=D.getDocument();if(!r)return null;var t=r.activeElement;return t&&t.shadowRoot&&t.shadowRoot.activeElement&&(t=t.shadowRoot.activeElement),t}var Ht=typeof globalThis<"u"?globalThis.document:this.document,Vl=Ht?{root:Ht,_rootElement:D.getBody(),get rootElement(){var r;return(r=this._rootElement)!==null&&r!==void 0?r:D.getBody()},set rootElement(r){this._rootElement=r},_popupMountContainer:D.getBody(),get popupMountContainer(){var r;return(r=this._popupMountContainer)!==null&&r!==void 0?r:D.getBody()},set popupMountContainer(r){this._popupMountContainer=r},svgMountContainer:Ht.head,stylesSheetsMountContainer:Ht.head}:void 0,Sl={file:{minWidth:"240px"},comment:{minWidth:"200px"}},C={version:"",designMode:{showEmptyDescriptions:!0,showEmptyTitles:!0},get allowShowEmptyDescriptionInDesignMode(){return this.designMode.showEmptyDescriptions},set allowShowEmptyDescriptionInDesignMode(r){this.designMode.showEmptyDescriptions=r},get allowShowEmptyTitleInDesignMode(){return this.designMode.showEmptyTitles},set allowShowEmptyTitleInDesignMode(r){this.designMode.showEmptyTitles=r},localization:{useLocalTimeZone:!0,storeDuplicatedTranslations:!1,defaultLocaleName:"default"},get useLocalTimeZone(){return this.localization.useLocalTimeZone},set useLocalTimeZone(r){this.localization.useLocalTimeZone=r},get storeDuplicatedTranslations(){return this.localization.storeDuplicatedTranslations},set storeDuplicatedTranslations(r){this.localization.storeDuplicatedTranslations=r},get defaultLocaleName(){return this.localization.defaultLocaleName},set defaultLocaleName(r){this.localization.defaultLocaleName=r},web:{onBeforeRequestChoices:function(r,t){},encodeUrlParams:!0,cacheLoadedChoices:!0,disableQuestionWhileLoadingChoices:!1},get webserviceEncodeParameters(){return this.web.encodeUrlParams},set webserviceEncodeParameters(r){this.web.encodeUrlParams=r},get useCachingForChoicesRestful(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestful(r){this.web.cacheLoadedChoices=r},get useCachingForChoicesRestfull(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestfull(r){this.web.cacheLoadedChoices=r},get disableOnGettingChoicesFromWeb(){return this.web.disableQuestionWhileLoadingChoices},set disableOnGettingChoicesFromWeb(r){this.web.disableQuestionWhileLoadingChoices=r},triggers:{changeNavigationButtonsOnComplete:!0,executeCompleteOnValueChanged:!1,executeSkipOnValueChanged:!0},get executeCompleteTriggerOnValueChanged(){return this.triggers.executeCompleteOnValueChanged},set executeCompleteTriggerOnValueChanged(r){this.triggers.executeCompleteOnValueChanged=r},get changeNavigationButtonsOnCompleteTrigger(){return this.triggers.changeNavigationButtonsOnComplete},set changeNavigationButtonsOnCompleteTrigger(r){this.triggers.changeNavigationButtonsOnComplete=r},get executeSkipTriggerOnValueChanged(){return this.triggers.executeSkipOnValueChanged},set executeSkipTriggerOnValueChanged(r){this.triggers.executeSkipOnValueChanged=r},serialization:{itemValueSerializeAsObject:!1,itemValueSerializeDisplayText:!1,localizableStringSerializeAsObject:!1,matrixDropdownColumnSerializeTitle:!1},get itemValueAlwaysSerializeAsObject(){return this.serialization.itemValueSerializeAsObject},set itemValueAlwaysSerializeAsObject(r){this.serialization.itemValueSerializeAsObject=r},get itemValueAlwaysSerializeText(){return this.serialization.itemValueSerializeDisplayText},set itemValueAlwaysSerializeText(r){this.serialization.itemValueSerializeDisplayText=r},get serializeLocalizableStringAsObject(){return this.serialization.localizableStringSerializeAsObject},set serializeLocalizableStringAsObject(r){this.serialization.localizableStringSerializeAsObject=r},lazyRender:{enabled:!1,firstBatchSize:3},get lazyRowsRendering(){return this.lazyRender.enabled},set lazyRowsRendering(r){this.lazyRender.enabled=r},get lazyRowsRenderingStartRow(){return this.lazyRender.firstBatchSize},set lazyRowsRenderingStartRow(r){this.lazyRender.firstBatchSize=r},matrix:{defaultCellType:"dropdown",defaultRowName:"default",totalsSuffix:"-total",maxRowCount:1e3,maxRowCountInCondition:1,renderRemoveAsIcon:!0,columnWidthsByType:Sl,rateSize:"small"},get matrixDefaultRowName(){return this.matrix.defaultRowName},set matrixDefaultRowName(r){this.matrix.defaultRowName=r},get matrixDefaultCellType(){return this.matrix.defaultCellType},set matrixDefaultCellType(r){this.matrix.defaultCellType=r},get matrixTotalValuePostFix(){return this.matrix.totalsSuffix},set matrixTotalValuePostFix(r){this.matrix.totalsSuffix=r},get matrixMaximumRowCount(){return this.matrix.maxRowCount},set matrixMaximumRowCount(r){this.matrix.maxRowCount=r},get matrixMaxRowCountInCondition(){return this.matrix.maxRowCountInCondition},set matrixMaxRowCountInCondition(r){this.matrix.maxRowCountInCondition=r},get matrixRenderRemoveAsIcon(){return this.matrix.renderRemoveAsIcon},set matrixRenderRemoveAsIcon(r){this.matrix.renderRemoveAsIcon=r},panel:{maxPanelCount:100,maxPanelCountInCondition:1},get panelDynamicMaxPanelCountInCondition(){return this.panel.maxPanelCountInCondition},set panelDynamicMaxPanelCountInCondition(r){this.panel.maxPanelCountInCondition=r},get panelMaximumPanelCount(){return this.panel.maxPanelCount},set panelMaximumPanelCount(r){this.panel.maxPanelCount=r},readOnly:{enableValidation:!1,commentRenderMode:"textarea",textRenderMode:"input"},get readOnlyCommentRenderMode(){return this.readOnly.commentRenderMode},set readOnlyCommentRenderMode(r){this.readOnly.commentRenderMode=r},get readOnlyTextRenderMode(){return this.readOnly.textRenderMode},set readOnlyTextRenderMode(r){this.readOnly.textRenderMode=r},numbering:{includeQuestionsWithHiddenNumber:!1,includeQuestionsWithHiddenTitle:!1},get setQuestionVisibleIndexForHiddenTitle(){return this.numbering.includeQuestionsWithHiddenTitle},set setQuestionVisibleIndexForHiddenTitle(r){this.numbering.includeQuestionsWithHiddenTitle=r},get setQuestionVisibleIndexForHiddenNumber(){return this.numbering.includeQuestionsWithHiddenNumber},set setQuestionVisibleIndexForHiddenNumber(r){this.numbering.includeQuestionsWithHiddenNumber=r},enterKeyAction:"default",comparator:{trimStrings:!0,caseSensitive:!1,normalizeTextCallback:function(r,t){return r}},expressionDisableConversionChar:"#",get commentPrefix(){return C.commentSuffix},set commentPrefix(r){C.commentSuffix=r},commentSuffix:"-Comment",itemValueSeparator:"|",ratingMaximumRateValueCount:20,tagboxCloseOnSelect:!1,dropdownSearchDelay:500,dropdownSaveOnOutsideClick:!1,confirmActionFunc:void 0,confirmActionAsync:function(r,t,e){Er(r,t,e)},minWidth:"300px",maxWidth:"100%",maxConditionRunCountOnValueChanged:10,notifications:{lifetime:2e3},autoAdvanceDelay:300,itemFlowDirection:"column",get showItemsInOrder(){return C.itemFlowDirection},set showItemsInOrder(r){C.itemFlowDirection=r},noneItemValue:"none",refuseItemValue:"refused",dontKnowItemValue:"dontknow",specialChoicesOrder:{selectAllItem:[-1],noneItem:[1],refuseItem:[2],dontKnowItem:[3],otherItem:[4]},choicesSeparator:", ",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"],imagepicker:["answercount"]},expressionVariables:{survey:"survey",self:"self",parent:"parent",matrix:"matrix",composite:"composite",item:"item",choice:"choice",column:"column",row:"row",prevRow:"prevRow",nextRow:"nextRow",totalRow:"totalRow",rowIndex:"rowIndex",visibleRowIndex:"visibleRowIndex",rowValue:"rowValue",rowName:"rowName",rowTitle:"rowTitle",panel:"panel",prevPanel:"prevPanel",nextPanel:"nextPanel",parentPanel:"parentPanel",panelIndex:"panelIndex",visiblePanelIndex:"visiblePanelIndex",unwrapPostfix:"-unwrapped"},minDate:"",maxDate:"2999-12-31",showDialog:void 0,showDefaultItemsInCreator:!0,customIcons:{},rankingDragHandleArea:"entireItem",environment:Vl,showMaxLengthIndicator:!0,animationEnabled:!0,titleTags:{survey:"div",page:"div",panel:"div",question:"div"},questions:{inputTypes:["color","date","datetime-local","email","month","number","password","range","tel","text","time","url","week"],dataList:["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]},legacyProgressBarView:!1,maskSettings:{patternPlaceholderChar:"_",patternEscapeChar:"\\",patternDefinitions:{9:/[0-9]/,a:/[a-zA-Z]/,"#":/[a-zA-Z0-9]/}},storeUtcDates:!1,onDateCreated:function(r,t,e){return r},parseNumber:function(r,t){return t},acceptedFileCategories:{image:[".png",".jpg",".jpeg",".gif",".bmp",".tiff",".svg"],video:[".mp4",".avi",".mov",".wmv",".flv",".mkv",".webm"],audio:[".mp3",".wav",".aac",".ogg",".wma",".flac"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".txt",".rtf",".odt"],archive:[".zip",".rar",".7z",".tar",".gz"]},customFileCategoryName:"custom"},ue=(function(){function r(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.text=t,this.errorOwner=e,this.visible=!0,this.onUpdateErrorTextCallback=void 0}return r.prototype.equals=function(t){return!t||!t.getErrorType||this.getErrorType()!==t.getErrorType()?!1:this.text===t.text&&this.visible===t.visible},Object.defineProperty(r.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=new me(this.errorOwner,!0),this.locTextValue.storeDefaultText=!0,this.locTextValue.text=this.getText()),this.locTextValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notificationType",{get:function(){return this.notificationTypeValue||"error"},set:function(t){this.notificationTypeValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isWarning",{get:function(){return this.notificationTypeValue==="warning"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInfo",{get:function(){return this.notificationTypeValue==="info"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isError",{get:function(){return!this.isInfo&&!this.isWarning},enumerable:!1,configurable:!0}),r.prototype.getCssIcon=function(t){var e=this.getCssError(t),i=this.isWarning?e.warningIcon:this.isInfo?e.infoIcon:e.icon;return i||e.icon||void 0},r.prototype.getCssError=function(t){return t=t||{},t.error||{}},r.prototype.getText=function(){var t=this.text;return t||(t=this.getDefaultText()),this.errorOwner&&(t=this.errorOwner.getErrorCustomText(t,this)),t},r.prototype.getErrorType=function(){return"base"},r.prototype.getDefaultText=function(){return""},r.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},r.prototype.getLocalizationString=function(t){return te(t,this.getLocale())},r.prototype.updateText=function(){this.onUpdateErrorTextCallback&&this.onUpdateErrorTextCallback(this),this.locText.text=this.getText()},r})(),Or=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"required"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredError")},t})(ue),Ar=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requireoneanswer"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredErrorInPanel")},t})(ue),Dr=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requirenumeric"},t.prototype.getDefaultText=function(){return this.getLocalizationString("numericError")},t})(ue),Lr=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,null,i)||this;return n.maxSize=e,n.locText.text=n.getText(),n}return t.prototype.getErrorType=function(){return"exceedsize"},t.prototype.getDefaultText=function(){return this.getLocalizationString("exceedMaxSize").format(this.getTextSize())},t.prototype.getTextSize=function(){var e=["Bytes","KB","MB","GB","TB"],i=[0,0,2,3,3];if(this.maxSize===0)return"0 Byte";var n=Math.floor(Math.log(this.maxSize)/Math.log(1024)),o=this.maxSize/Math.pow(1024,n);return o.toFixed(i[n])+" "+e[n]},t})(ue),Mr=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,null,i)||this;return n.maxFiles=e,n.locText.text=n.getText(),n}return t.prototype.getErrorType=function(){return"exceedfilescount"},t.prototype.getDefaultText=function(){return this.getLocalizationString("exceedMaxFiles").format(this.maxFiles)},t})(ue),Fr=(function(r){P(t,r);function t(e,i,n){n===void 0&&(n=null);var o=r.call(this,null,n)||this;return o.status=e,o.response=i,o}return t.prototype.getErrorType=function(){return"webrequest"},t.prototype.getDefaultText=function(){var e=this.getLocalizationString("urlRequestError");return e?e.format(this.status,this.response):""},t})(ue),xl=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"webrequestempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("urlGetChoicesError")},t})(ue),Il=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"otherempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("otherRequiredError")},t})(ue),zt=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"uploadingfile"},t.prototype.getDefaultText=function(){return this.getLocalizationString("uploadingFile")},t})(ue),El=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requiredinallrowserror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredInAllRowsError")},t})(ue),Tl=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"eachrowuniqueeerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("eachRowUniqueError")},t})(ue),Rl=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,null,i)||this;return n.minRowCount=e,n}return t.prototype.getErrorType=function(){return"minrowcounterror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("minRowCountError").format(this.minRowCount)},t})(ue),Nr=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"keyduplicationerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("keyDuplicationError")},t})(ue),ce=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this,e,i)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"custom"},t})(ue),kr=(function(){function r(t){this.onCompleted=t,this.asyncElements={},this.isRunningValue=!0}return r.prototype.addElement=function(t){this.asyncElements[t]=!0},r.prototype.removeElement=function(t){delete this.asyncElements[t],this.tryComplete()},r.prototype.finish=function(){this.isRunningValue=!1,this.tryComplete()},Object.defineProperty(r.prototype,"isRunning",{get:function(){return this.isRunningValue||Object.keys(this.asyncElements).length>0},enumerable:!1,configurable:!0}),r.prototype.doCompleted=function(){this.onCompleted&&this.onCompleted()},r.prototype.tryComplete=function(){this.isRunning||this.doCompleted()},r})(),Ce=(function(){function r(t,e){e===void 0&&(e=null),this.value=t,this.error=e}return r})(),je=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"errorOwner",{get:function(){return this.owner},set:function(e){this.owner=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"svd"+this.uniqueId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidator",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return this.owner&&this.owner.getSurvey?this.owner.getSurvey():null},t.prototype.getOwner=function(){return this.owner},Object.defineProperty(t.prototype,"text",{get:function(){return this.getLocStringText(this.locText)},set:function(e){this.setLocStringText(this.locText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.getOrCreateLocStr("text",!0)},enumerable:!1,configurable:!0}),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validateOnCallback=function(e,i,n,o){var s=this.validate(e,n,o);return i&&i(s),s},t.prototype.validate=function(e,i,n){return null},t.prototype.getLocale=function(){return this.owner?this.owner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.owner?this.owner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e){return this.owner?this.owner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.owner?this.owner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.owner?this.owner.getProcessedText(e):e},t.prototype.createCustomError=function(e){var i=this,n=new ce(this.getErrorText(e),this.owner);return n.onUpdateErrorTextCallback=(function(o){return o.text=i.getErrorText(e)}),n},t.prototype.toString=function(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e},c([p()],t.prototype,"notificationType",void 0),t})(U),Br=(function(){function r(){}return r.prototype.run=function(t){var e=this,i=t.getValidators(),n=new Array,o=new kr(function(){e.onAsyncCompleted&&e.onAsyncCompleted(n)});if(i.length>0){var s=t.getDataFilteredProperties(),a=t.validatedValue,l=t.getValidatorTitle();i.forEach(function(f){o.addElement(f.id),f.validateOnCallback(a,function(y){y&&y.error&&(y.error.notificationType=f.notificationType,n.push(y.error)),o.removeElement(f.id)},l,s)})}var u=[].concat.apply([],n);return n.length=0,o.finish(),u},r})(),_r=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;return n.minValue=e,n.maxValue=i,n}return t.prototype.getType=function(){return"numericvalidator"},t.prototype.validate=function(e,i,n){if(this.isValueEmpty(e))return null;if(!w.isNumber(e))return new Ce(null,new Dr(this.text,this.owner));var o=new Ce(w.getNumber(e));return this.minValue!==null&&this.minValue>o.value?(o.error=this.createCustomError(i),o):this.maxValue!==null&&this.maxValue<o.value?(o.error=this.createCustomError(i),o):typeof e=="number"?null:o},t.prototype.getDefaultErrorText=function(e){var i=e||this.getLocalizationString("value");return this.minValue!==null&&this.maxValue!==null?this.getLocalizationFormatString("numericMinMax",i,this.minValue,this.maxValue):this.minValue!==null?this.getLocalizationFormatString("numericMin",i,this.minValue):this.getLocalizationFormatString("numericMax",i,this.maxValue)},c([p()],t.prototype,"minValue",void 0),c([p()],t.prototype,"maxValue",void 0),t})(je),Qr=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.getType=function(){return"textvalidator"},t.prototype.validate=function(e,i,n){if(this.isValueEmpty(e))return null;if(!this.allowDigits){var o=/\d+$/;if(o.test(e))return new Ce(null,this.createCustomError("textNoDigitsAllow"))}return this.minLength>0&&e.length<this.minLength?new Ce(null,this.createCustomError(i)):this.maxLength>0&&e.length>this.maxLength?new Ce(null,this.createCustomError(i)):null},t.prototype.getDefaultErrorText=function(e){return e==="textNoDigitsAllow"?this.getLocalizationString(e):this.minLength>0&&this.maxLength>0?this.getLocalizationFormatString("textMinMaxLength",this.minLength,this.maxLength):this.minLength>0?this.getLocalizationFormatString("textMinLength",this.minLength):this.getLocalizationFormatString("textMaxLength",this.maxLength)},c([p()],t.prototype,"minLength",void 0),c([p()],t.prototype,"maxLength",void 0),c([p()],t.prototype,"allowDigits",void 0),t})(je),jr=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;return n.minCount=e,n.maxCount=i,n}return t.prototype.getType=function(){return"answercountvalidator"},t.prototype.validate=function(e,i,n){if(e==null||e.constructor!=Array)return null;var o=e.length;return o==0?null:this.minCount&&o<this.minCount?new Ce(null,this.createCustomError(this.getLocalizationFormatString("minSelectError",this.minCount))):this.maxCount&&o>this.maxCount?new Ce(null,this.createCustomError(this.getLocalizationFormatString("maxSelectError",this.maxCount))):null},t.prototype.getDefaultErrorText=function(e){return e},c([p()],t.prototype,"minCount",void 0),c([p()],t.prototype,"maxCount",void 0),t})(je),qr=(function(r){P(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i.regex=e,i}return t.prototype.getType=function(){return"regexvalidator"},t.prototype.validate=function(e,i,n){if(!this.regex||this.isValueEmpty(e))return null;var o=this.createRegExp();if(Array.isArray(e))for(var s=0;s<e.length;s++){var a=this.hasError(o,e[s],i);if(a)return a}return this.hasError(o,e,i)},t.prototype.hasError=function(e,i,n){return e.test(i)?null:new Ce(i,this.createCustomError(n))},Object.defineProperty(t.prototype,"insensitive",{get:function(){return this.caseInsensitive},set:function(e){this.caseInsensitive=e},enumerable:!1,configurable:!0}),t.prototype.createRegExp=function(){var e=this.caseInsensitive?"i":"";return(this.owner?this.owner.createRegexValidator(this,this.regex,e):null)||new RegExp(this.regex,e)},c([p()],t.prototype,"regex",void 0),c([p()],t.prototype,"caseInsensitive",void 0),t})(je),_i=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i,e}return t.prototype.getType=function(){return"emailvalidator"},t.prototype.validate=function(e,i,n){return!e||this.re.test(e)?null:new Ce(e,this.createCustomError(i))},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationString("invalidEmail")},t})(je),Hr=(function(r){P(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i.conditionRunner=null,i.expression=e,i}return t.prototype.getType=function(){return"expressionvalidator"},t.prototype.validateOnCallback=function(e,i,n,o){var s=this;this.conditionRunner&&(this.conditionRunner.onRunComplete=null);var a=null,l=function(f){a=s.generateError(f,e,n),i&&i(a)};if(!this.ensureConditionRunner())return l(!0),null;if(this.conditionRunner.onRunComplete=function(f){l(f)},!this.conditionRunner.canRun())return l(u),a;var u=this.conditionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(o,"expression"));return a||this.generateError(u,e,n)},t.prototype.generateError=function(e,i,n){return e?null:new Ce(i,this.createCustomError(n))},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationFormatString("invalidExpression",this.expression)},t.prototype.ensureConditionRunner=function(){var e=this.getExpressionFromSurvey("expression");return e?(this.conditionRunner=new ge(e),!0):!1},t.prototype.getValueGetterContext=function(){var e=this.owner;return e&&e.getValueGetterContext?e.getValueGetterContext():r.prototype.getValueGetterContext.call(this)},c([p()],t.prototype,"expression",void 0),t})(je);V.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText",visibleIndex:99},{name:"notificationType",choices:["error","warning","info"],default:"error",visibleIndex:100}]),V.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new _r},"surveyvalidator"),V.addClass("textvalidator",[{name:"minLength:number",default:0},{name:"maxLength:number",default:0},{name:"allowDigits:boolean",default:!0}],function(){return new Qr},"surveyvalidator"),V.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new jr},"surveyvalidator"),V.addClass("regexvalidator",["regex",{name:"caseInsensitive:boolean",alternativeName:"insensitive"}],function(){return new qr},"surveyvalidator"),V.addClass("emailvalidator",[],function(){return new _i},"surveyvalidator"),V.addClass("expressionvalidator",["expression:condition"],function(){return new Hr},"surveyvalidator");var zr=(function(){function r(t,e){this.name=t,this.widgetJson=e,this.htmlTemplate=e.htmlTemplate?e.htmlTemplate:""}return r.prototype.afterRender=function(t,e){var i=this;this.widgetJson.afterRender&&(t.localeChangedCallback=function(){i.widgetJson.willUnmount&&i.widgetJson.willUnmount(t,e),i.widgetJson.afterRender(t,e)},this.widgetJson.afterRender(t,e))},r.prototype.willUnmount=function(t,e){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(t,e)},r.prototype.getDisplayValue=function(t,e){return e===void 0&&(e=void 0),this.widgetJson.getDisplayValue?this.widgetJson.getDisplayValue(t,e):null},r.prototype.validate=function(t){if(this.widgetJson.validate)return this.widgetJson.validate(t)},r.prototype.isFit=function(t){return this.isLibraryLoaded()&&this.widgetJson.isFit?this.widgetJson.isFit(t):!1},Object.defineProperty(r.prototype,"canShowInToolbox",{get:function(){return this.widgetJson.showInToolbox===!1||Qi.Instance.getActivatedBy(this.name)!="customtype"?!1:!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showInToolbox",{get:function(){return this.widgetJson.showInToolbox!==!1},set:function(t){this.widgetJson.showInToolbox=t},enumerable:!1,configurable:!0}),r.prototype.init=function(){this.widgetJson.init&&this.widgetJson.init()},r.prototype.activatedByChanged=function(t){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(t)},r.prototype.isLibraryLoaded=function(){return this.widgetJson.widgetIsLoaded?this.widgetJson.widgetIsLoaded()==!0:!0},Object.defineProperty(r.prototype,"isDefaultRender",{get:function(){return this.widgetJson.isDefaultRender},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pdfQuestionType",{get:function(){return this.widgetJson.pdfQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pdfRender",{get:function(){return this.widgetJson.pdfRender},enumerable:!1,configurable:!0}),r})(),Qi=(function(){function r(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new wi}return Object.defineProperty(r.prototype,"widgets",{get:function(){return this.widgetsValues},enumerable:!1,configurable:!0}),r.prototype.add=function(t,e){e===void 0&&(e="property"),this.addCustomWidget(t,e)},r.prototype.addCustomWidget=function(t,e){e===void 0&&(e="property");var i=t.name;i||(i="widget_"+this.widgets.length+1);var n=new zr(i,t);return this.widgetsValues.push(n),n.init(),this.widgetsActivatedBy[i]=e,n.activatedByChanged(e),this.onCustomWidgetAdded.fire(n,null),n},r.prototype.getActivatedBy=function(t){var e=this.widgetsActivatedBy[t];return e||"property"},r.prototype.setActivatedBy=function(t,e){if(!(!t||!e)){var i=this.getCustomWidgetByName(t);i&&(this.widgetsActivatedBy[t]=e,i.activatedByChanged(e))}},r.prototype.clear=function(){this.widgetsValues=[]},r.prototype.getCustomWidgetByName=function(t){for(var e=0;e<this.widgets.length;e++)if(this.widgets[e].name==t)return this.widgets[e];return null},r.prototype.getCustomWidget=function(t){for(var e=0;e<this.widgetsValues.length;e++)if(this.widgetsValues[e].isFit(t))return this.widgetsValues[e];return null},r.Instance=new r,r})(),Ur=(function(){function r(){this.renderersHash={},this.defaultHash={}}return r.prototype.unregisterRenderer=function(t,e){delete this.renderersHash[t][e],this.defaultHash[t]===e&&delete this.defaultHash[t]},r.prototype.registerRenderer=function(t,e,i,n){n===void 0&&(n=!1),this.renderersHash[t]||(this.renderersHash[t]={}),this.renderersHash[t][e]=i,n&&(this.defaultHash[t]=e)},r.prototype.getRenderer=function(t,e){var i=this.renderersHash[t];if(i){if(e&&i[e])return i[e];var n=this.defaultHash[t];if(n&&i[n])return i[n]}return"default"},r.prototype.getRendererByQuestion=function(t){return this.getRenderer(t.getType(),t.renderAs)},r.prototype.clear=function(){this.renderersHash={}},r.Instance=new r,r})(),Ut=(function(){function r(t){var e=this;this.options=t,this.onPropertyChangedCallback=function(){e.element&&(e.element.value=e.getTextValue(),e.updateElement())},this.question.registerFunctionOnPropertiesValueChanged(this.options.propertyNames,this.onPropertyChangedCallback,"__textarea")}return r.prototype.updateElement=function(){var t=this;this.element&&this.autoGrow&&setTimeout(function(){return Ni(t.element)},1)},r.prototype.setElement=function(t){t&&(this.element=t,this.updateElement())},r.prototype.resetElement=function(){this.element=void 0},r.prototype.getTextValue=function(){return this.options.getTextValue&&this.options.getTextValue()||""},r.prototype.onTextAreaChange=function(t){this.options.onTextAreaChange&&this.options.onTextAreaChange(t)},r.prototype.onTextAreaInput=function(t){this.options.onTextAreaInput&&this.options.onTextAreaInput(t),this.element&&this.autoGrow&&Ni(this.element)},r.prototype.onTextAreaKeyDown=function(t){this.options.onTextAreaKeyDown&&this.options.onTextAreaKeyDown(t)},r.prototype.onTextAreaBlur=function(t){this.onTextAreaChange(t),this.options.onTextAreaBlur&&this.options.onTextAreaBlur(t)},r.prototype.onTextAreaFocus=function(t){var e;this.options.onTextAreaFocus&&this.options.onTextAreaFocus(t),this.isReadOnlyAttr&&((e=t?.target)===null||e===void 0||e.select())},Object.defineProperty(r.prototype,"question",{get:function(){return this.options.question},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this.options.id()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"placeholder",{get:function(){return this.options.placeholder()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){return this.options.className()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLength",{get:function(){if(this.options.maxLength)return this.options.maxLength()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoGrow",{get:function(){if(this.options.autoGrow)return this.options.autoGrow()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){if(this.options.rows)return this.options.rows()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cols",{get:function(){if(this.options.cols)return this.options.cols()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isDisabledAttr",{get:function(){return this.options.isDisabledAttr()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isReadOnlyAttr",{get:function(){if(this.options.isReadOnlyAttr)return this.options.isReadOnlyAttr()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaRequired",{get:function(){if(this.options.ariaRequired)return this.options.ariaRequired()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaLabel",{get:function(){if(this.options.ariaLabel)return this.options.ariaLabel()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaInvalid",{get:function(){if(this.options.ariaInvalid)return this.options.ariaInvalid()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaLabelledBy",{get:function(){if(this.options.ariaLabelledBy)return this.options.ariaLabelledBy()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaDescribedBy",{get:function(){if(this.options.ariaDescribedBy)return this.options.ariaDescribedBy()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ariaErrormessage",{get:function(){if(this.options.ariaErrormessage)return this.options.ariaErrormessage()},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.question&&this.question.unRegisterFunctionOnPropertiesValueChanged(this.options.propertyNames,"__textarea"),this.resetElement()},r})(),Wt=(function(){function r(t,e){this.question=t,this.isUnwrapped=e}return r.prototype.getObj=function(){return this.question},r.prototype.getValue=function(t){var e=t.path,i=t.index,n=C.expressionVariables;if(t.isProperty&&e.length>1){if(t.path=e.slice(1),t.isRoot=!1,e[0].name===n.self)return new Oe(this.question).getValue(t);if(e[0].name===n.parent&&this.question.parentQuestion)return new Oe(this.question.parentQuestion).getValue(t)}if(e.length===0||e.length===1&&e[0].name===n.self)return this.getQuestionValue(i);if(e.length>1&&e[0].name===n.panel){t.isRoot=!1;var o=this.question.parent;if(o&&o.isPanel)return e.shift(),t.isProperty?new Oe(o).getValue(t):new ji(o.questions).getValue(t)}if(!this.question.isEmpty()){var s=this.question.value;if(i>=0){if(!Array.isArray(s||i>=s.length))return;s=s[i]}return t.isProperty=!1,new fe(s).getValue(t)}},r.prototype.getTextValue=function(t,e,i){return i?this.question.getDisplayValue(!0,e):e},r.prototype.getRootObj=function(){return this.question.data},r.prototype.getQuestion=function(){return this.question},r.prototype.getSurveyValue=function(t,e){var i=this.question.getSurvey();if(i)return i.getValueGetterContext().getValue({path:t,isRoot:!1,index:e})},r.prototype.getQuestionValue=function(t){var e=this.question,i=e.getFilteredValue(this.isUnwrapped);return t>-1&&Array.isArray(i)&&(i=t<i.length?i[t]:void 0),{isFound:!0,context:this,value:i,requireStrictCompare:e.requireStrictCompare}},r})(),Wr=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getValueFromBindedQuestions=function(e,i){typeof i!="object"&&(i=void 0);for(var n=e.length===1?e[0].name:"",o=this.getQuestionsBySameValueNames(),s=0;s<o.length;s++){var a=o[s];if(n&&a.valuePropertyName===n&&i&&i.hasOwnProperty(n))return{isFound:!0,value:i[n],context:a.getValueGetterContext()};var l=a.getValueGetterContext().getValue({path:e,isRoot:!1,index:this.getIndex()});if(l&&l.isFound)return l}},t.prototype.getQuestionsBySameValueNames=function(){var e=new Array,i=this.getQuestionData();return!i||!i.isQuestion||(i.parent&&i.parent.isPanel&&this.fillQuestions(i.parent.getQuestionsByValueName(i.getValueName()),i,e),e.length===0&&i.survey&&this.fillQuestions(i.survey.getQuestionsByValueName(i.getValueName()),i,e)),e},t.prototype.fillQuestions=function(e,i,n){Array.isArray(e)&&e.forEach(function(o){o!==i&&n.push(o)})},t.prototype.getRootObj=function(){return this.getQuestionData()},t})(Ne),ji=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.questions=e,i}return t.prototype.isSearchNameRevert=function(){return!0},t.prototype.updateValueByItem=function(e,i){for(var n=e.toLocaleLowerCase(),o=C.expressionVariables.unwrapPostfix,s=0;s<this.questions.length;s++){var a=this.questions[s],l=a.getFilteredName().toLocaleLowerCase();if(l.toLocaleLowerCase()===n){i.isFound=!0,i.obj=a,i.context=a.getValueGetterContext(l.endsWith(o));break}}},t})(Ne),Ze=(function(r){P(t,r);function t(e){var i=r.call(this,function(){i.setCallbackResult()})||this;return i.res=!0,i.errorCountValue=0,e||(e={fireCallback:!0}),i.fireCallbackValue=e.fireCallback||!1,i.isOnValueChangedValue=e.isOnValueChanged||!1,i.focusOnFirstErrorValue=e.focusOnFirstError||!1,i.callbackResult=e.callbackResult||null,i.changeCurrentPage=e.changeCurrentPage||!1,i}return Object.defineProperty(t.prototype,"fireCallback",{get:function(){return this.fireCallbackValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOnValueChanged",{get:function(){return this.isOnValueChangedValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.focusOnFirstErrorValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this.res},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runningResult",{get:function(){return!this.res||!this.isRunning||!this.callbackResult?this.res:void 0},enumerable:!1,configurable:!0}),t.prototype.setErrorElement=function(e,i){Array.isArray(i)&&this.isWarningOnlyOrEmpty(i)||(this.errorCountValue++,this.res=!1,e&&(e.isQuestion?this.setQuestionError(e):e.isCollapsed&&e.expand()))},t.prototype.isWarningOnlyOrEmpty=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(n.isError&&n.visible)return!1}return!0},Object.defineProperty(t.prototype,"firstErrorQuestion",{get:function(){return this.firstErrorQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCount",{get:function(){return this.errorCountValue},enumerable:!1,configurable:!0}),t.prototype.setCallbackResult=function(){this.callbackResult&&!this.isCallbackFired&&(this.isCallbackFired=!0,this.callbackResult(this.res,this.firstErrorQuestion))},t.prototype.setQuestionError=function(e){if(e.expandAllParents(),!this.firstErrorQuestionValue){if(this.firstErrorQuestionValue=e,this.focusOnFirstError||this.changeCurrentPage)if(this.focusOnFirstError)e.focus(!0);else{var i=e.getSurvey();i&&e.page&&(i.currentPage=e.page)}this.setCallbackResult()}},t})(kr),ie=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.customWidgetData={isNeedRender:!0},i.hasCssErrorCallback=function(){return!1},i.triggersInfo=[],i.isReadyValue=!0,i.dependedQuestions=[],i.onReadyChanged=i.addEvent(),i.isValueChangedInSurvey=!1,i.allowNotifyValueChanged=!0,i.setPropertyValueDirectly("id","sq_"+i.uniqueId),i.onCreating(),i.addExpressionProperty("visibleIf",function(n,o){i.visible=o===!0}),i.addExpressionProperty("enableIf",function(n,o){i.readOnly=o===!1}),i.addExpressionProperty("requiredIf",function(n,o){i.isRequired=o===!0}),i.addTriggersInfo(),i}return t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&C.readOnly.commentRenderMode==="div"},t.prototype.allowMobileInDesignMode=function(){return!1},t.prototype.updateIsMobileFromSurvey=function(){this.setIsMobile(this.survey._isMobile)},t.prototype.setIsMobile=function(e){var i=e&&(this.allowMobileInDesignMode()||!this.isDesignMode);this.isMobile=i},t.prototype.getIsMobile=function(){return this._isMobile},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.getIsMobile()},set:function(e){this._isMobile=e},enumerable:!1,configurable:!0}),t.prototype.themeChanged=function(e){},Object.defineProperty(t.prototype,"ariaExpanded",{get:function(){return this.isNewA11yStructure?null:this.getPropertyValue("ariaExpanded")},set:function(e){this.setPropertyValue("ariaExpanded",e)},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){var o;r.prototype.onPropertyValueChanged.call(this,e,i,n);var s=["readOnly","hasVisibleErrors","containsErrors"];s.indexOf(e)>-1&&this.updateQuestionCss(),e==="showNumber"&&this.notifySurveyVisibilityChanged(),e==="no"&&this.resetCssTitle(),e==="width"&&(this.updateQuestionCss(),this.parent&&this.parent.elementWidthChanged(this)),e==="isRequired"&&(!this.isRequired&&this.errors.length>0&&this.validate(),this.locTitle.strChanged(),this.clearCssClasses()),(e==="indent"||e==="rightIndent")&&this.resetIndents(),(e==="showCommentArea"||e==="showOtherItem")&&this.initCommentFromSurvey(),e==="commentPlaceholder"&&this.resetRenderedCommentPlaceholder(),e==="_isMobile"&&this.onMobileChanged(),e==="colSpan"&&((o=this.parent)===null||o===void 0||o.updateColumns()),e==="descriptionLocation"&&this.updateQuestionCss()},t.prototype.getDefaultTitle=function(){return this.name},t.prototype.createLocTitleProperty=function(){var e=this,i=r.prototype.createLocTitleProperty.call(this);return i.storeDefaultText=!0,i.onGetTextCallback=function(n,o){return!n&&!o&&(n=e.getDefaultTitle()),e.survey?e.survey.getUpdatedQuestionTitle(e,n):n},this.locProcessedTitle=new me(this,!0),this.locProcessedTitle.sharedData=i,i},Object.defineProperty(t.prototype,"locRenderedTitle",{get:function(){return this.isSingleInputActive&&this.singleInputLocTitle?this.singleInputLocTitle:this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentTextAreaModel",{get:function(){return this.commentTextAreaModelValue||(this.commentTextAreaModelValue=new Ut(this.getCommentTextAreaOptions())),this.commentTextAreaModelValue},enumerable:!1,configurable:!0}),t.prototype.getCommentTextAreaOptions=function(){var e=this,i={question:this,id:function(){return e.commentId},propertyNames:["comment"],className:function(){return e.cssClasses.comment},placeholder:function(){return e.renderedCommentPlaceholder},isDisabledAttr:function(){return e.isInputReadOnly||!1},rows:function(){return e.commentAreaRows},autoGrow:function(){return e.autoGrowComment},maxLength:function(){return e.getOthersMaxLength()},ariaRequired:function(){return e.a11y_input_ariaRequired},ariaLabel:function(){return e.a11y_input_ariaLabel},getTextValue:function(){return e.comment},onTextAreaChange:function(n){e.onCommentChange(n)},onTextAreaInput:function(n){e.onCommentInput(n)}};return i},t.prototype.getSurvey=function(e){return e===void 0&&(e=!1),e?this.parent?this.parent.getSurvey(e):null:this.onGetSurvey?this.onGetSurvey():r.prototype.getSurvey.call(this)},t.prototype.getValueName=function(){return this.valueName?this.valueName.toString():this.name},Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){var i=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(i)},enumerable:!1,configurable:!0}),t.prototype.onValueNameChanged=function(e){this.survey&&(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())},t.prototype.onNameChanged=function(e){this.locTitle.strChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.validators,!0)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.onAsyncRunningChanged=function(){this.updateIsReady()},t.prototype.ensureQuestionIsReady=function(){this.displayValue},t.prototype.waitForQuestionIsReady=function(e){var i=this;return new Promise(function(n){if(i.ensureQuestionIsReady(),i.isReady)n(),e&&e();else{var o=function(s,a){a.isReady&&(i.onReadyChanged.remove(o),n(),e&&e())};i.onReadyChanged.add(o)}})},t.prototype.updateIsReady=function(){var e=this.getIsQuestionReady();if(e){for(var i=this.getIsReadyDependsOn(),n=0;n<i.length;n++)if(!i[n].getIsQuestionReady()){e=!1;break}}this.setIsReady(e)},t.prototype.getIsQuestionReady=function(){return!this.isAsyncExpressionRunning&&this.getAreNestedQuestionsReady()},t.prototype.getAreNestedQuestionsReady=function(){var e=this.getIsReadyNestedQuestions();if(!Array.isArray(e))return!0;for(var i=0;i<e.length;i++)if(!e[i].isReady)return!1;return!0},t.prototype.getIsReadyNestedQuestions=function(){return this.getNestedQuestions()},t.prototype.setIsReady=function(e){var i=this.isReadyValue;this.isReadyValue=e,i!=e&&(this.getIsReadyDependends().forEach(function(n){return n.updateIsReady()}),this.onReadyChanged.fire(this,{question:this,isReady:e,oldIsReady:i}))},t.prototype.getIsReadyDependsOn=function(){return this.getIsReadyDependendCore(!0)},t.prototype.getIsReadyDependends=function(){return this.getIsReadyDependendCore(!1)},t.prototype.getDependedQuestionsByValueName=function(e){return this.survey.questionsByValueName(this.getValueName())},t.prototype.getIsReadyDependendCore=function(e){var i=this;if(!this.survey)return[];var n=this.getDependedQuestionsByValueName(e),o=new Array;return n.forEach(function(s){s!==i&&o.push(s)}),e||(this.parentQuestion&&o.push(this.parentQuestion),this.dependedQuestions.length>0&&this.dependedQuestions.forEach(function(s){return o.push(s)})),o},t.prototype.choicesLoaded=function(){},Object.defineProperty(t.prototype,"page",{get:function(){return this.parentQuestion?this.parentQuestion.page:this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return null},t.prototype.getPageVisibleIndex=function(){var e;return((e=this.page)===null||e===void 0?void 0:e.visibleIndex)||-1},t.prototype.delete=function(e){e===void 0&&(e=!0),this.removeFromParent(),e?this.dispose():this.resetDependedQuestions()},t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.addDependedQuestion=function(e){!e||this.dependedQuestions.indexOf(e)>-1||this.dependedQuestions.push(e)},t.prototype.removeDependedQuestion=function(e){if(e){var i=this.dependedQuestions.indexOf(e);i>-1&&this.dependedQuestions.splice(i,1)}},t.prototype.updateDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].updateDependedQuestion()},t.prototype.updateDependedQuestion=function(){},t.prototype.resetDependedQuestion=function(){},Object.defineProperty(t.prototype,"isFlowLayout",{get:function(){return this.getLayoutType()==="flow"},enumerable:!1,configurable:!0}),t.prototype.getLayoutType=function(){return this.parent?this.parent.getChildrenLayoutType():"row"},t.prototype.isLayoutTypeSupported=function(e){return e!=="flow"},t.prototype.onVisibleChanged=function(){var e=this.getPropertyValue("isVisible");this.onVisibleChangedCore();var i=this.getPropertyValue("isVisible");e!==void 0&&e!==i&&this.notifySurveyVisibilityChanged()},t.prototype.onVisibleChangedCore=function(){this.updateIsVisibleProp(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])},t.prototype.notifyStateChanged=function(e){r.prototype.notifyStateChanged.call(this,e),this.isCollapsed&&this.onHidingContent()},t.prototype.updateElementVisibility=function(){this.updateIsVisibleProp()},t.prototype.updateIsVisibleProp=function(){var e=this.getPropertyValue("isVisible"),i=this.isVisible;e!==i&&(this.setPropertyValue("isVisible",i),i||this.onHidingContent()),i!==this.visible&&this.areInvisibleElementsShowing&&this.updateQuestionCss()},t.prototype.getUseDisplayValuesInDynamicTexts=function(){return this.useDisplayValuesInDynamicTexts},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty()?!1:this.areInvisibleElementsShowing?!0:this.isVisibleCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisibleInSurvey",{get:function(){return this.isVisible&&this.isParentVisible},enumerable:!1,configurable:!0}),t.prototype.isVisibleCore=function(){return this.visible},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){},Object.defineProperty(t.prototype,"hideNumber",{get:function(){return!this.showNumber},set:function(e){this.showNumber=!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"question"},Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getOwner=function(){return this.parentQuestion||this.parent},t.prototype.moveTo=function(e,i){return i===void 0&&(i=null),this.moveToBase(this.parent,e,i)},t.prototype.getProgressInfo=function(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:r.prototype.getProgressInfo.call(this)},t.prototype.runTriggerInfo=function(e,i,n){var o=this;this.runExpressionByProperty(e.name,n,function(s){e.doComplete(s,n)},function(s){return e.canRun()?!i||o.canExecuteTriggerByKeys(i,s,o.getExpressionByProperty(e.secondName)):!1})},t.prototype.canExecuteTriggerByKeys=function(e,i,n){!i&&n&&(i=n,n=void 0);var o=this.canExecuteTriggerByKeysCore(e,i);if(o==="var")return!0;if(!n)return o==="func"||o==="const";var s=this.canExecuteTriggerByKeysCore(e,n);return s!==""},t.prototype.canExecuteTriggerByKeysCore=function(e,i){if(!i.expression)return"";var n=i.getVariables();return!Array.isArray(n)||n.length===0?i.hasFunction()?"func":"const":new Re().isAnyKeyChanged(e,n)?"var":""},t.prototype.getValueGetterContext=function(e){return new Wt(this,e)},t.prototype.addTriggersInfo=function(){var e=this;this.addTriggerInfo({name:"resetValueIf",canRun:function(){return!e.isEmpty()},doComplete:function(i,n){i===!0&&(e.startSetValueOnExpression(),e.updateValueWithDefaultsOrClear(),e.finishSetValueOnExpression())}}),this.addTriggerInfo({name:"setValueIf",secondName:"setValueExpression",canRun:function(){return!0},doComplete:function(i,n){if(i)if(!e.setValueExpression)e.clearValue();else{var o={name:"setValueExpression",canRun:function(){return!0},doComplete:function(s,a){return e.runExpressionSetValue(s)}};e.runTriggerInfo(o,void 0,n)}}}),this.addTriggerInfo({name:"setValueExpression",canRun:function(){return!e.setValueIf},doComplete:function(i,n){return e.runExpressionSetValue(i)}})},t.prototype.addTriggerInfo=function(e){this.triggersInfo.push(e)},t.prototype.runTriggers=function(e,i,n){var o=this;if(!(this.isSettingQuestionValue||this.parentQuestion&&this.parentQuestion.getValueName()===e)){n||(n={},n[e]=i);var s=this.getDataFilteredProperties();this.triggersInfo.forEach(function(a){o.runTriggerInfo(a,n,s)})}},t.prototype.runConditions=function(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredProperties()),this.locStrsChanged())},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e),this.survey&&(this.survey.questionCreated(this),i!==!0&&this.runConditions(),this.visible||this.updateIsVisibleProp(),this.updateIsMobileFromSurvey())},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.parent!==e&&(this.removeFromParent(),this.setPropertyValue("parent",e),e&&this.updateQuestionCss(),this.onParentChanged())},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){},t.prototype.calculateSingleInputQuestion=function(){if(this.isSingleInputActive){var e=this.getSingleInputQuestions();if(Array.isArray(e)&&e.length>0){var i=e[0];return this.onBeforeSetSingleInputQuestion(i),i}}},Object.defineProperty(t.prototype,"singleInputQuestion",{get:function(){var e=this;if(this.isSingleInputMode)return this.getPropertyValue("singleInputQuestion",void 0,function(){return e.calculateSingleInputQuestion()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleInputQuestion",{get:function(){for(var e=this.singleInputQuestion;e&&e.singleInputQuestion&&e.singleInputQuestion!==e;)e=e.singleInputQuestion;return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleInputParentQuestion",{get:function(){var e=this.currentSingleInputQuestion;return e?e.singleInputQuestion===e?e:e.parentQuestion||this:this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputSummary",{get:function(){var e=this;return this.getPropertyValue("singleInputSummary",void 0,function(){if(e.supportNestedSingleInput()){var i=e.singleInputQuestion;if(!(!i||i!==e)){var n=e.createSingleInputSummary();return n&&(e.calcSingleInputActions(),e.resetPropertyValue("singleInputLocTitle")),n}}})},enumerable:!1,configurable:!0}),t.prototype.createSingleInputSummary=function(){},Object.defineProperty(t.prototype,"rootParentQuestion",{get:function(){for(var e=this;e.parentQuestion;)e=e.parentQuestion;return e},enumerable:!1,configurable:!0}),t.prototype.getParentQuestions=function(){for(var e=new Array,i=this;i.parentQuestion;)e.push(i.parentQuestion),i=i.parentQuestion;return e},t.prototype.resetSingleInput=function(){this.resetSingleInputCore()},t.prototype.resetSingleInputCore=function(){var e=this.getPropertyValue("singleInputQuestion");this.resetPropertyValue("singleInputQuestion"),e&&this.onSingleInputChanged()},t.prototype.onSingleInputChanged=function(e){var i,n;e===void 0&&(e=!0),e&&this.resetSingleInputSummary(),(i=this.singleInputLocTitle)===null||i===void 0||i.strChanged(),this.resetPropertyValue("singleInputLocTitle"),this.calcSingleInputActions(),(n=this.survey)===null||n===void 0||n.updateNavigationElements()},t.prototype.resetSingleInputSummary=function(){var e;(e=this.singleInputSummary)===null||e===void 0||e.dispose(),this.resetPropertyValue("singleInputSummary")},t.prototype.validateSingleInput=function(){var e=this.currentSingleInputQuestion;return e?e.validate(!0,!0):!0},t.prototype.getSingleInputElementPos=function(){if(this.singleInputQuestion===this)return 0;var e=this.currentSingleInputParentQuestion;if(e!==this){var i=e.getSingleInputElementPos();if(i===2)return 2}var n=this.singleInputQuestion,o=this.getSingleInputQuestions();if(o.length<2)return 0;var s=o.indexOf(n);return s===0?-1:s>=o.length-1?1:2},Object.defineProperty(t.prototype,"isSingleInputActive",{get:function(){if(!this.isSingleInputMode)return!1;var e=this.survey.currentSingleQuestion;return!!e&&e===this.rootParentQuestion},enumerable:!1,configurable:!0}),t.prototype.singleInputOnAddItem=function(e){this.isSingleInputActive&&(e&&this.singleInputSummary?this.resetSingleInputSummary():this.setSingleQuestionOnChange(Number.MAX_VALUE))},t.prototype.singleInputOnRemoveItem=function(e){this.isSingleInputActive&&(this.singleInputSummary?this.onSingleInputChanged():this.setSingleQuestionOnChange(e))},t.prototype.getSingleQuestionOnChange=function(e){return null},t.prototype.setSingleQuestionOnChange=function(e){var i=this.getSingleQuestionOnChange(e);i?this.setSingleInputQuestion(i):this.resetSingleInput()},t.prototype.onSetAsSingleInput=function(){this.isSingleInputSummaryShown=!1;var e=!this.wasRendered||this.singleInputSummary;this.onFirstRendering(),e&&(this.resetSingleInputSummary(),this.resetPropertyValue("singleInputQuestion"),this.resetPropertyValue("singleInputLocTitle"))},t.prototype.nextSingleInput=function(){return this.nextPrevSingleInput(1)},t.prototype.prevSingleInput=function(){return this.nextPrevSingleInput(-1)},t.prototype.getSingleInputAddText=function(){var e=this.currentSingleInputQuestion;if(e){if(e.singleInputSummary)return e.getSingleInputAddTextCore();var i=this.getSingleInputQuestions(),n=Array.isArray(i)?i.length:0;if(n>0&&i[n-1]===e)return this.getSingleInputAddTextCore()}},t.prototype.singleInputAddItem=function(e){(!e||this.validateSingleInput())&&this.currentSingleInputQuestion.singleInputAddItemCore()},Object.defineProperty(t.prototype,"singleInputLocTitle",{get:function(){var e=this;return this.getPropertyValue("singleInputLocTitle",void 0,function(){return e.getSingleQuestionLocTitle()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputActions",{get:function(){var e=this;return this.getPropertyValue("singleInputActions",void 0,function(){return e.createSingleInputActions()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputHasActions",{get:function(){var e=this;return this.getPropertyValue("singleInputHasActions",void 0,function(){return e.createSingleInputActions()})},set:function(e){this.setPropertyValue("singleInputHasActions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputHideHeader",{get:function(){var e,i=(e=this.singleInputQuestion)===null||e===void 0?void 0:e.singleInputQuestion;return!!i&&this.singleInputQuestion!==this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputParentQuestion",{get:function(){var e;return((e=this.singleInputQuestion)===null||e===void 0?void 0:e.parentQuestion)||this},enumerable:!1,configurable:!0}),t.prototype.createSingleInputActions=function(){var e;if(((e=this.survey)===null||e===void 0?void 0:e.currentSingleQuestion)===this){var i=new be;return i.actions=this.getSingleQuestionActions(),i}},t.prototype.calcSingleInputActions=function(){if(this.parentQuestion)this.parentQuestion.calcSingleInputActions();else{var e=this.getSingleQuestionActions();this.singleInputActions&&(this.singleInputActions.actions=e),this.singleInputHasActions=e.length>0?!0:void 0}},t.prototype.getSingleQuestionActions=function(){var e=new Array,i=this.currentSingleInputParentQuestion;if(!i||i===this)return e;var n=i.getSingleInputQuestions(),o=new Array,s=void 0;n.length>1&&n[0]===i&&(s=i,o.push(i));for(var a=i.parentQuestion;a;)o.push(a),a=a.parentQuestion;for(var l=function(y){var b=o[y];if(b!==s){var E=b.singleInputLocTitle,S=new G({id:"single-action"+b.id,locTitle:E,css:u.cssClasses.breadcrumbsItem,innerCss:u.cssClasses.breadcrumbsItemButton,action:function(){b.singleInputMoveToFirst()}});S.cssClasses={},e.push(S)}},u=this,f=o.length-1;f>=0;f--)l(f);return e},t.prototype.singleInputMoveToFirst=function(){var e=this.singleInputQuestion;e&&e!==this&&e.singleInputMoveToFirst(),this.singleInputMoveToFirstCore()},t.prototype.singleInputMoveToFirstCore=function(){},t.prototype.getSingleQuestionLocTitle=function(){return this.singleInputSummary?void 0:this.getSingleQuestionLocTitleCore()},t.prototype.getSingleQuestionLocTitleCore=function(){},t.prototype.supportNestedSingleInput=function(){var e;return(e=this.survey)===null||e===void 0?void 0:e.supportsNestedSingleInput(this)},t.prototype.getSingleInputQuestions=function(){var e=this;if(!this.supportNestedSingleInput())return[];var i=this.getPropertyValue("singleInputQuestion");if(i===this)return[this];var n=this.getSingleInputQuestionsCore(i,!i||!this.isSingleInputSummaryShown);return this.survey&&this.survey.updateNestedSingleQuestions(this,n),n.forEach(function(o){o!==e&&e.onSingleInputQuestionAdded(o)}),n},t.prototype.getSingleInputQuestionsCore=function(e,i){return this.getNestedQuestions(!0,!1)},t.prototype.onSingleInputQuestionAdded=function(e){},t.prototype.fillSingleInputQuestionsInContainer=function(e,i){},t.prototype.getSingleInputQuestionsForDynamic=function(e,i){var n=new Array;return e&&e!==this&&i.indexOf(e)<0&&this.fillSingleInputQuestionsInContainer(n,e),i.forEach(function(o){return n.push(o)}),this.isSingleInputSummaryShown&&n.length>0&&n.unshift(this),n.push(this),n},t.prototype.getSingleInputAddTextCore=function(){},t.prototype.singleInputAddItemCore=function(){},t.prototype.setSingleInputQuestionCore=function(e){this.onBeforeSetSingleInputQuestion(e),this.setPropertyValue("singleInputQuestion",e)},t.prototype.onBeforeSetSingleInputQuestion=function(e){e.onFirstRendering(),e===this&&(this.isSingleInputSummaryShown=!0)},t.prototype.setSingleInputQuestion=function(e,i){this.singleInputQuestion!==e&&(this.setSingleInputQuestionCore(e),this.onSingleInputChanged(!i||e!==this))},t.prototype.nextPrevSingleInput=function(e){for(var i=this.currentSingleInputParentQuestion;i&&i!==this;){var n=i.nextPrevSingleInput(e);if(n)return!0;i=i.parentQuestion}var o=this.singleInputQuestion;if(!o)return!1;var s=this.getSingleInputQuestions(),a=s.indexOf(o);if(a<0){if(s.length===0)return!1;a=0,e=0}return a+=e,a<0||a>=s.length?!1:(this.setSingleInputQuestion(s[a],e<0),!0)},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.getTitleLocation()!=="hidden"&&!this.singleInputHideHeader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLocation",{get:function(){return this.getPropertyValue("titleLocation")},set:function(e){var i=this.titleLocation=="hidden"||e=="hidden";this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),i&&this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTitle",{get:function(){return this.getTitleLocation()!=="hidden"},set:function(e){this.titleLocation=e?"default":"hidden"},enumerable:!1,configurable:!0}),t.prototype.getTitleOwner=function(){return this},t.prototype.getIsTitleRenderedAsString=function(){return this.titleLocation==="hidden"},t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return!1},t.prototype.notifySurveyVisibilityChanged=function(){if(this.canUpdateValueOnVisibleChanged()){this.survey.questionVisibilityChanged(this,this.isVisible,!this.parentQuestion||this.parentQuestion.notifySurveyOnChildrenVisibilityChanged());var e=this.isClearValueOnHidden;this.visible||this.clearValueOnHidding(e),e&&this.isVisibleInSurvey&&this.updateValueWithDefaults()}},t.prototype.clearValueOnHidding=function(e){e&&this.clearValueIfInvisible()},Object.defineProperty(t.prototype,"titleWidth",{get:function(){if(this.parent&&this.getTitleLocation()==="left"){var e=this.parent.getColumsForElement(this),i=e.length;if(i!==0&&e[0].questionTitleWidth)return e[0].questionTitleWidth;var n=this.getQuestionParentTitleWidth(),o=this.getPercentQuestionTitleWidth(n);if(!o&&this.parent){var s=n;return s&&!isNaN(s)&&(s=s+"px"),s}return o/(i||1)+"%"}},enumerable:!1,configurable:!0}),t.prototype.getQuestionParentTitleWidth=function(){if(this.parent){var e=this.parent.getQuestionTitleWidth();return!e&&this.parentQuestion?this.parentQuestion.getQuestionParentTitleWidth():e}},t.prototype.getPercentQuestionTitleWidth=function(e){if(e&&e[e.length-1]==="%")return parseInt(e)},t.prototype.getTitleLocation=function(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return e==="left"&&!this.isAllowTitleLeft&&(e="top"),e},t.prototype.getTitleLocationCore=function(){return this.titleLocation!=="default"?this.titleLocation:this.getParentTitleLocation()},t.prototype.getParentTitleLocation=function(){return this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},Object.defineProperty(t.prototype,"hasTitleOnLeft",{get:function(){return this.hasTitle&&this.getTitleLocation()==="left"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnTop",{get:function(){return this.hasTitle&&this.getTitleLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnBottom",{get:function(){return this.hasTitle&&this.getTitleLocation()==="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnLeftTop",{get:function(){if(!this.hasTitle)return!1;var e=this.getTitleLocation();return e==="left"||e==="top"},enumerable:!1,configurable:!0}),t.prototype.getErrorLocation=function(){return this.errorLocation!=="default"?this.errorLocation:this.parentQuestion?this.parentQuestion.getChildErrorLocation(this):this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},t.prototype.getChildErrorLocation=function(e){return this.getErrorLocation()},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return this.hasInput&&!this.isContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return this.id+"i"},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){return this.name},t.prototype.getDefaultTitleTagName=function(){return C.titleTags.question},Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return this.getDescriptionLocation()=="underTitle"&&this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderInput",{get:function(){return this.getDescriptionLocation()=="underInput"&&this.hasDescription},enumerable:!1,configurable:!0}),t.prototype.getDescriptionLocation=function(){return this.descriptionLocation!=="default"?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"},t.prototype.needClickTitleFunction=function(){return r.prototype.needClickTitleFunction.call(this)||this.hasInput},t.prototype.processTitleClick=function(){var e=this;if(r.prototype.processTitleClick.call(this),!this.isCollapsed)return setTimeout(function(){e.focus()},1),!0},Object.defineProperty(t.prototype,"commentPlaceHolder",{get:function(){return this.commentPlaceholder},set:function(e){this.commentPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCommentPlaceholder",{get:function(){var e;return(e=this.getPropertyValue("renderedCommentPlaceholder"))!==null&&e!==void 0?e:this.isReadOnly?void 0:this.commentPlaceholder},enumerable:!1,configurable:!0}),t.prototype.resetRenderedCommentPlaceholder=function(){this.resetPropertyValue("renderedCommentPlaceholder")},t.prototype.getAllErrors=function(){return this.errors.slice()},t.prototype.getErrorByType=function(e){for(var i=0;i<this.errors.length;i++)if(this.errors[i].getErrorType()===e)return this.errors[i];return null},Object.defineProperty(t.prototype,"customWidget",{get:function(){return!this.isCustomWidgetRequested&&!this.customWidgetValue&&(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidget=function(){this.customWidgetValue=Qi.Instance.getCustomWidget(this)},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.resetRenderedCommentPlaceholder(),this.localeChangedCallback&&this.localeChangedCallback()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCommentInput=function(e){this.isInputTextUpdate&&e.target&&(this.comment=e.target.value)},t.prototype.onCommentChange=function(e){this.comment=e.target.value,this.comment!==e.target.value&&(e.target.value=this.comment)},t.prototype.afterRenderQuestionElement=function(e){!this.survey||!this.hasSingleInput||this.survey.afterRenderQuestionInput(this,e)},t.prototype.afterRender=function(e){var i=this;this.afterRenderCore(e),this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e),(this.supportComment()||this.supportOther())&&(this.commentElements=[],this.getCommentElementsId().forEach(function(n){var o=e?.querySelector("#".concat(n));o&&i.commentElements.push(o)})),this.checkForResponsiveness(e))},t.prototype.afterRenderCore=function(e){r.prototype.afterRenderCore.call(this,e)},t.prototype.getCommentElementsId=function(){return[this.commentId]},t.prototype.beforeDestroyQuestionElement=function(e){this.commentElements=void 0},Object.defineProperty(t.prototype,"processedTitle",{get:function(){var e=this.locProcessedTitle.textOrHtml;return e||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&this.titlePattern=="requireNumTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&this.titlePattern=="numRequireTitle"&&this.requiredMark!==""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&this.titlePattern=="numTitleRequire"&&this.requiredMark!==""},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var i={error:{}};return this.copyCssClasses(i,e.question),this.copyCssClasses(i.error,e.error),this.updateCssClasses(i,e),i},t.prototype.onCalcCssClasses=function(e){r.prototype.onCalcCssClasses.call(this,e),this.survey&&this.survey.updateQuestionCssClasses(this,e),this.onUpdateCssClassesCallback&&this.onUpdateCssClassesCallback(e)},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),t.prototype.setCssRoot=function(e){this.setPropertyValue("cssRoot",e)},t.prototype.getCssRoot=function(e){var i=this.hasCssError(!0);return new I().append(r.prototype.getCssRoot.call(this,e)).append(this.isFlowLayout&&!this.isDesignMode?e.flowRoot:e.mainRoot).append(e.titleLeftRoot,!this.isFlowLayout&&this.hasTitleOnLeft).append(e.titleTopRoot,!this.isFlowLayout&&this.hasTitleOnTop).append(e.titleBottomRoot,!this.isFlowLayout&&this.hasTitleOnBottom).append(e.descriptionUnderInputRoot,!this.isFlowLayout&&this.hasDescriptionUnderInput).append(e.hasError,i).append(e.hasErrorTop,i&&this.getErrorLocation()=="top").append(e.hasErrorBottom,i&&this.getErrorLocation()=="bottom").append(e.small,!this.width).append(e.answered,this.isAnswered).append(e.noPointerEventsMode,this.isReadOnlyAttr).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")},enumerable:!1,configurable:!0}),t.prototype.setCssHeader=function(e){this.setPropertyValue("cssHeader",e)},t.prototype.getCssHeader=function(e){return new I().append(e.header).append(e.headerTop,this.hasTitleOnTop).append(e.headerLeft,this.hasTitleOnLeft).append(e.headerBottom,this.hasTitleOnBottom).toString()},t.prototype.supportContainerQueries=function(){return!1},Object.defineProperty(t.prototype,"cssContent",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")},enumerable:!1,configurable:!0}),t.prototype.setCssContent=function(e){this.setPropertyValue("cssContent",e)},t.prototype.getCssContent=function(e){return new I().append(e.content).append(e.contentSupportContainerQueries,this.supportContainerQueries()).append(e.contentLeft,this.hasTitleOnLeft).toString()},Object.defineProperty(t.prototype,"cssTitle",{get:function(){var e=this;return this.ensureElementCss(),this.getPropertyValue("cssTitle",void 0,function(){return e.getCssTitle(e.getCssClasses())})},enumerable:!1,configurable:!0}),t.prototype.resetCssTitle=function(){this.resetPropertyValue("cssTitle")},t.prototype.getCssTitle=function(e){return new I().append(r.prototype.getCssTitle.call(this,e)).append(e.singleInputTitle,!!this.singleInputQuestion).append(e.titleOnAnswer,!this.containsErrors&&this.isAnswered).append(e.titleEmpty,!this.title.trim()).toString()},Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssDescription","")},enumerable:!1,configurable:!0}),t.prototype.setCssDescription=function(e){this.setPropertyValue("cssDescription",e)},t.prototype.getCssDescription=function(e){return new I().append(e.description).append(e.descriptionUnderInput,this.getDescriptionLocation()=="underInput").toString()},Object.defineProperty(t.prototype,"showErrorsAboveQuestion",{get:function(){return this.getErrorLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsBelowQuestion",{get:function(){return this.getErrorLocation()==="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssError","")},enumerable:!1,configurable:!0}),t.prototype.setCssError=function(e){this.setPropertyValue("cssError",e)},t.prototype.getCssError=function(e){return new I().append(e.error.root).append(e.error.warningMode,this.currentNotificationType==="warning").append(e.error.infoMode,this.currentNotificationType==="info").append(e.errorsContainer).append(e.errorsContainerTop,this.showErrorsAboveQuestion).append(e.errorsContainerBottom,this.showErrorsBelowQuestion).toString()},t.prototype.hasCssError=function(e){for(var i=this.errors,n=0;n<i.length;n++){var o=i[n];if(o.visible&&(e||o.isError))return!0}return this.hasCssErrorCallback()},t.prototype.updateVisibleErrors=function(){r.prototype.updateVisibleErrors.call(this),this.updateQuestionCss()},Object.defineProperty(t.prototype,"isSingleInputQuestionMode",{get:function(){return!!this.parentQuestion&&this.isSingleInputMode},enumerable:!1,configurable:!0}),t.prototype.getIsNested=function(){return this.isSingleInputQuestionMode?!1:r.prototype.getIsNested.call(this)},t.prototype.getHasFrameV2=function(){return this.isSingleInputQuestionMode?!0:r.prototype.getHasFrameV2.call(this)},t.prototype.getRootCss=function(){return new I().append(this.cssRoot,!this.singleInputQuestion).append(this.cssClasses.mobile,this.isMobile).append(this.cssClasses.readOnly,this.isReadOnlyStyle).append(this.cssClasses.disabled,this.isDisabledStyle).append(this.cssClasses.preview,this.isPreviewStyle).append(this.cssClasses.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getQuestionRootCss=function(){return new I().append(this.cssClasses.root).append(this.cssClasses.rootMobile,this.isMobile).toString()},t.prototype.updateElementCss=function(e){this.wasRendered?(r.prototype.updateElementCss.call(this,e),e&&this.updateQuestionCss()):this.clearCssClasses(),this.resetIndents()},t.prototype.updateQuestionCss=function(){this.isLoadingFromJson||!this.survey||this.isDisposed||this.wasRendered&&this.updateElementCssCore(this.cssClasses)},t.prototype.ensureElementCss=function(){this.cssClassesValue||this.updateQuestionCss()},t.prototype.getCssClasses=function(){return this.cssClasses},t.prototype.updateElementCssCore=function(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.resetCssTitle(),this.setCssDescription(this.getCssDescription(e)),this.setCssError(this.getCssError(e))},t.prototype.updateCssClasses=function(e,i){if(i.question){var n=i[this.getCssType()],o=new I().append(e.title).append(i.question.titleRequired,this.isRequired);e.title=o.toString();var s=new I().append(e.root).append(n,this.isRequired&&!!i.question.required);if(n==null)e.root=s.toString();else if(typeof n=="string"||n instanceof String)e.root=s.append(n.toString()).toString();else{e.root=s.toString();for(var a in n)e[a]=n[a]}}},t.prototype.getCssType=function(){return this.getType()},Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return this.cssClasses.root||void 0},enumerable:!1,configurable:!0}),t.prototype.calcPaddingLeft=function(){return this.getIndentSize(this.indent)},t.prototype.calcPaddingRight=function(){return this.getIndentSize(this.rightIndent)},t.prototype.getIndentSize=function(e){return e<1||!this.getSurvey()||!this.cssClasses||!this.cssClasses.indent?"":e*this.cssClasses.indent+"px"},t.prototype.focus=function(e,i){var n=this;if(e===void 0&&(e=!1),!(this.isDesignMode||!this.isVisible||this.isReadOnly||!this.survey)){var o=this.page,s=!!o&&this.survey.activePage!==o,a=this.isSingleInputMode;if(s&&!a)this.survey.focusQuestionByInstance(this,e);else if(a){this.survey.currentSingleQuestion=this.rootParentQuestion;for(var l=this.getParentQuestions(),u=l.length-1;u>=1;u--)u===l.length-1&&l[u].setSingleInputQuestion(l[u-1]);l.length>0&&l[0].setSingleInputQuestion(this),this.focusInputElement(e)}else{this.expandAllParents();var f=this.survey.isSmoothScrollEnabled?{behavior:"smooth"}:void 0;this.survey.scrollElementToTop(this,this,null,this.id,i,f,void 0,function(){n.focusInputElement(e)})}}},t.prototype.focusInputElement=function(e){var i,n=e?this.getFirstErrorInputElementId():this.getFirstInputElementId(),o=(i=this.survey)===null||i===void 0?void 0:i.rootElement,s=ae.FocusElement(n,!1,o);(s||this.customWidget)&&this.fireCallback(this.focusCallback)},Object.defineProperty(t.prototype,"isValidateVisitedEmptyFields",{get:function(){return this.supportEmptyValidation()&&!!this.survey&&this.survey.getValidateVisitedEmptyFields()&&this.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return!1},t.prototype.onBlur=function(e){this.onBlurCore(e)},t.prototype.onFocus=function(e){this.onFocusCore(e)},t.prototype.onBlurCore=function(e){this.isFocusEmpty&&this.isEmpty()&&this.validate(!0)},t.prototype.onFocusCore=function(e){this.isFocusEmpty=this.isValidateVisitedEmptyFields},t.prototype.expandAllParents=function(){this.expandAllParentsCore(this)},t.prototype.expandAllParentsCore=function(e){e&&(e.isCollapsed&&e.expand(),this.expandAllParentsCore(e.parent),this.expandAllParentsCore(e.parentQuestion))},t.prototype.focusIn=function(){!this.survey||this.isDisposed||this.isContainer||this.survey.whenQuestionFocusIn(this)},t.prototype.fireCallback=function(e){e&&e()},t.prototype.getOthersMaxLength=function(){return this.survey&&this.survey.maxCommentLength>0?this.survey.maxCommentLength:null},t.prototype.onCreating=function(){},t.prototype.getFirstQuestionToFocus=function(e){return this.hasInput&&(!e||this.currentErrorCount>0)?this:null},t.prototype.getFirstInputElementId=function(){return this.inputId},t.prototype.getFirstErrorInputElementId=function(){return this.getFirstInputElementId()},t.prototype.supportComment=function(){var e=this.getPropertyByName("showCommentArea");return!e||e.visible},t.prototype.supportOther=function(){return!1},Object.defineProperty(t.prototype,"showCommentArea",{get:function(){return this.getPropertyValue("showCommentArea",!1)},set:function(e){this.supportComment()&&this.setPropertyValue("showCommentArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return this.showCommentArea},set:function(e){this.showCommentArea=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){return this.id+"_ariaDescription"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentId",{get:function(){return this.id+"_comment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.showCommentArea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,i=!!this.parentQuestion&&this.parentQuestion.isReadOnly,n=!!this.survey&&this.survey.isDisplayMode,o=!!this.readOnlyCallback&&this.readOnlyCallback();return this.readOnly||e||n||i||o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInputReadOnly",{get:function(){return this.forceIsInputReadOnly!==void 0?this.forceIsInputReadOnly:this.isReadOnly||this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputReadOnly",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputDisabled",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return this.isDesignMode||!!this.readOnlyCallback&&this.readOnlyCallback()},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),r.prototype.onReadOnlyChanged.call(this),this.isReadOnly&&this.clearErrors(),this.updateQuestionCss(),this.resetRenderedCommentPlaceholder()},t.prototype.surveyChoiceItemVisibilityChange=function(){},t.prototype.runCondition=function(e){this.isDesignMode||(e||(e={}),e.question=this,this.runConditionCore(e),!this.isValueChangedDirectly&&(!this.isClearValueOnHidden||this.isVisibleInSurvey)&&this.runDefaultValueExpression(e))},Object.defineProperty(t.prototype,"isInDesignMode",{get:function(){return!this.isContentElement&&this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"no",{get:function(){var e=this;return this.getPropertyValue("no",void 0,function(){return e.calcNo()})},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){var e="",i=this.getHasTitleOnCalcNo()&&this.showNumber&&this.visibleIndex>=0;return i&&(e=w.getNumberByIndex(this.visibleIndex,this.getStartIndex())),this.onGetNoCallback?this.onGetNoCallback(e):(i&&(this.parent&&(e=this.parent.addNoFromChild(e)),this.survey&&(e=this.survey.getUpdatedQuestionNo(this,e))),e)},t.prototype.getHasTitleOnCalcNo=function(){return this.hasTitle},t.prototype.onSurveyLoad=function(){this.isCustomWidgetRequested=!1,this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults(),this.isEmpty()&&this.initDataFromSurvey()},t.prototype.onSetData=function(){r.prototype.onSetData.call(this),!this.isDesignMode&&this.survey&&!this.isLoadingFromJson&&(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.updateIsAnswered())},t.prototype.initDataFromSurvey=function(){if(this.data){var e=this.data.getValue(this.getValueName());(!w.isValueEmpty(e)||!this.isLoadingFromJson)&&this.updateValueFromSurvey(e),this.initCommentFromSurvey()}},t.prototype.initCommentFromSurvey=function(){this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")},t.prototype.runExpression=function(e){if(!(!this.survey||!e))return this.survey.runExpression(e)},Object.defineProperty(t.prototype,"commentAreaRows",{get:function(){return this.survey&&this.survey.commentAreaRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoGrowComment",{get:function(){return this.survey&&this.survey.autoGrowComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizeComment",{get:function(){return this.survey&&this.survey.allowResizeComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionValue",{get:function(){return this.getPropertyValueWithoutDefault("value")},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionComment",{get:function(){return this.getPropertyValueWithoutDefault("comment")},set:function(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValueCore()},set:function(e){this.setNewValue(e)},enumerable:!1,configurable:!0}),t.prototype.getStructuredValue=function(e){return this.value},Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getFilteredValue=function(e){return this.value},t.prototype.getFilteredName=function(){return this.getValueName()},Object.defineProperty(t.prototype,"valueForSurvey",{get:function(){return this.valueForSurveyCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.valueForSurveyCore=function(e){return this.valueToDataCallback?this.valueToDataCallback(e):e},t.prototype.valueFromDataCore=function(e){return this.valueFromDataCallback?this.valueFromDataCallback(e):e},t.prototype.clearValue=function(e,i){this.value!==void 0&&(this.value=void 0),this.comment&&e!==!0&&(this.comment=void 0),this.setValueChangedDirectly(i===!0)},t.prototype.clearValueFromUI=function(){this.clearValue(!0,!0)},t.prototype.clearValueOnly=function(){this.clearValue(!0)},t.prototype.unbindValue=function(){this.clearValue()},t.prototype.createValueCopy=function(){return this.getUnbindValue(this.value)},t.prototype.initDataUI=function(){},t.prototype.getUnbindValue=function(e){return this.isValueSurveyElement(e)?e:w.getUnbindValue(e)},t.prototype.isValueSurveyElement=function(e){return e?Array.isArray(e)?e.length>0?this.isValueSurveyElement(e[0]):!1:e.isSurveyObj===!0:!1},t.prototype.canClearValueAsInvisible=function(e){return e==="onHiddenContainer"&&!this.isParentVisible?!0:this.isVisibleInSurvey||this.page&&this.page.isStartPage?!1:this.survey?!this.survey.hasVisibleQuestionByValueName(this):!0},Object.defineProperty(t.prototype,"isParentVisible",{get:function(){if(this.parentQuestion&&!this.parentQuestion.isVisible)return!1;for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0},enumerable:!1,configurable:!0}),t.prototype.clearValueIfInvisible=function(e){e===void 0&&(e="onHidden");var i=this.getClearIfInvisible();i!=="none"&&(e==="onHidden"&&i==="onComplete"||e==="onHiddenContainer"&&i!==e||this.clearValueIfInvisibleCore(e))},t.prototype.clearValueIfInvisibleCore=function(e){this.canClearValueAsInvisible(e)&&this.clearValue()},t.prototype.getClearIfInvisible=function(){var e=this.clearIfInvisible;return this.survey?this.survey.getQuestionClearIfInvisible(e):e!=="default"?e:"onComplete"},Object.defineProperty(t.prototype,"displayValue",{get:function(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValue=function(e,i){i===void 0&&(i=void 0);var n=this.calcDisplayValue(e,i);return this.survey&&(n=this.survey.getQuestionDisplayValue(this,n)),this.displayValueCallback?this.displayValueCallback(n):n},t.prototype.calcDisplayValue=function(e,i){if(i===void 0&&(i=void 0),this.customWidget){var n=this.customWidget.getDisplayValue(this,i);if(n)return n}return i=i??this.createValueCopy(),this.isValueEmpty(i)&&!this.locDefaultDisplayValue.isEmpty&&(i=this.defaultDisplayValue),this.isValueEmpty(i,!this.allowSpaceAsAnswer)?this.getDisplayValueEmpty():this.getDisplayValueCore(e,i)},t.prototype.getDisplayValueCore=function(e,i){return i},t.prototype.getDisplayValueEmpty=function(){return""},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){if(this.isValueExpression(e)){this.defaultValueExpression=e.substring(1);return}this.setPropertyValue("defaultValue",this.valueToData(e)),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.getPropertyValue("defaultValueExpression")},set:function(e){this.setPropertyValue("defaultValueExpression",e),this.defaultValueRunner=void 0,this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.allowResizeComment?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var i=this;if(e||(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var n={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:function(o){return i.getValueAsString(o)}};return e.includeQuestionTypes===!0&&(n.questionType=this.getType()),(e.calculations||[]).forEach(function(o){n[o.propertyName]=i.getPlainDataCalculatedValue(o.propertyName)}),this.showCommentArea&&(n.isNode=!0,n.data=[{name:0,isComment:!0,title:"Comment",value:C.commentSuffix,displayValue:this.comment,getString:function(o){return i.getValueAsString(o)},isNode:!1}]),n}},t.prototype.getPlainDataCalculatedValue=function(e){return this[e]},Object.defineProperty(t.prototype,"quizQuestionCount",{get:function(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"correctAnswerCount",{get:function(){return!this.isEmpty()&&!this.isValueEmpty(this.correctAnswer)?this.getCorrectAnswerCount():0},enumerable:!1,configurable:!0}),t.prototype.getQuizQuestionCount=function(){return 1},t.prototype.getCorrectAnswerCount=function(){return this.checkIfAnswerCorrect()?1:0},t.prototype.checkIfAnswerCorrect=function(){var e=w.isTwoValueEquals(this.value,this.correctAnswer,this.getAnswerCorrectIgnoreOrder(),C.comparator.caseSensitive,!0),i=e?1:0,n=this.quizQuestionCount-i,o={result:e,correctAnswers:i,correctAnswerCount:i,incorrectAnswers:n,incorrectAnswerCount:n};return this.survey&&this.survey.onCorrectQuestionAnswer(this,o),o.result},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.correctAnswerCount==this.quizQuestionCount},t.prototype.updateValueWithDefaults=function(){if(!(this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty())){var e=this.isEmpty();!this.isDesignMode&&!e||e&&this.isDefaultValueEmpty()||this.isClearValueOnHidden&&!this.isVisible||this.isDesignMode&&this.isContentElement&&this.isDefaultValueEmpty()||this.setDefaultValue()}},Object.defineProperty(t.prototype,"isValueDefault",{get:function(){return!this.isEmpty()&&(this.isTwoValueEquals(this.defaultValue,this.value)||!this.isValueChangedDirectly&&!!this.defaultValueExpression)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClearValueOnHidden",{get:function(){var e=this.getClearIfInvisible();return e==="none"||e==="onComplete"?!1:e==="onHidden"||e==="onHiddenContainer"},enumerable:!1,configurable:!0}),t.prototype.getQuestionFromArray=function(e,i){return null},t.prototype.getDefaultValue=function(){return this.defaultValue},t.prototype.isDefaultValueEmpty=function(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue,!this.allowSpaceAsAnswer)},t.prototype.setDefaultValue=function(){var e=this;this.setDefaultValueCore(function(i){i=e.convertToCorrectValue(i),e.isTwoValueEquals(e.value,i)||e.setDefaultIntoValue(i)})},t.prototype.setDefaultIntoValue=function(e){this.value=e},t.prototype.setDefaultValueCore=function(e){var i=this,n=function(o){i.runExpressionSetValueCore(o,e)};this.runDefaultValueExpression(void 0,n)||n(this.getUnbindValue(this.defaultValue))},t.prototype.updateValueWithDefaultsOrClear=function(){this.isDesignMode||this.isLoadingFromJson||(this.isDefaultValueEmpty()?this.clearValue():this.setDefaultValue())},t.prototype.isValueExpression=function(e){return!!e&&typeof e=="string"&&e.length>0&&e[0]=="="},t.prototype.convertFuncValuetoQuestionValue=function(e){return w.convertValToQuestionVal(e)},t.prototype.runExpressionSetValueCore=function(e,i){i(this.convertFuncValuetoQuestionValue(e))},t.prototype.runExpressionSetValue=function(e){var i=this;this.runExpressionSetValueCore(e,function(n){i.isTwoValueEquals(i.value,n)||(i.startSetValueOnExpression(),i.value=n,i.finishSetValueOnExpression())})},t.prototype.startSetValueOnExpression=function(){var e;(e=this.survey)===null||e===void 0||e.startSetValueOnExpression()},t.prototype.finishSetValueOnExpression=function(){var e;(e=this.survey)===null||e===void 0||e.finishSetValueOnExpression()},t.prototype.runDefaultValueExpression=function(e,i){var n=this;return e===void 0&&(e=null),this.data?(i||(i=function(o){n.runExpressionSetValue(o)}),e||(e=this.defaultValueExpression?this.data.getFilteredProperties():{},e.question=this),this.runExpressionByProperty("defaultValueExpression",e,function(o){o==null&&(o=n.defaultValue),n.isChangingViaDefaultValue=!0,i(o),n.isChangingViaDefaultValue=!1})):!1},Object.defineProperty(t.prototype,"comment",{get:function(){return this.getQuestionComment()},set:function(e){e=this.getTrimmedComment(e),this.comment!==e&&this.setNewComment(e)},enumerable:!1,configurable:!0}),t.prototype.getTrimmedComment=function(e){return typeof e=="string"&&!e.trim()?"":e},t.prototype.getCommentAreaCss=function(e){return e===void 0&&(e=!1),new I().append("form-group",e).append(this.cssClasses.formGroup,!e).append(this.cssClasses.commentArea).append(this.cssClasses.otherArea,e).toString()},t.prototype.getQuestionComment=function(){return this.questionComment},t.prototype.isEmpty=function(){return this.isValueEmpty(this.value,!this.allowSpaceAsAnswer)},t.prototype.updateIsAnswered=function(){var e=this.isAnswered;this.setPropertyValue("isAnswered",this.getIsAnswered()),e!==this.isAnswered&&this.updateQuestionCss()},t.prototype.getIsAnswered=function(){return!this.isEmpty()},Object.defineProperty(t.prototype,"validators",{get:function(){var e=this;return this.getArrayPropertyValue("validators",function(i){i.owner=e})},set:function(e){this.setArrayPropertyValue("validators",e)},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},t.prototype.getSupportedValidators=function(){for(var e=[],i=this.getType();i;){var n=C.supportedValidators[i];if(n)for(var o=n.length-1;o>=0;o--)e.splice(0,0,n[o]);var s=V.findClass(i);i=s.parentName}return e},t.prototype.addConditionObjectsByContext=function(e,i){e.push({name:this.getFilteredName(),text:this.processedTitle,question:this})},t.prototype.getNestedQuestions=function(e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!0),n===void 0&&(n=!1);var o=[];return this.collectNestedQuestions(o,e,i,n),!n&&o.length===1&&o[0]===this?[]:o},t.prototype.collectNestedQuestions=function(e,i,n,o){i===void 0&&(i=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!(i&&!this.isVisible)&&this.collectNestedQuestionsCore(e,i,n,o)},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){e.push(this)},t.prototype.addNestedQuestion=function(e,i,n,o){n?this.collectNestedQuestions(e,i,n,o):(!i||this.isVisible)&&e.push(this)},t.prototype.getConditionJson=function(e,i){var n=new le().toJsonObject(this);return n.type=this.getType(),n},t.prototype.hasErrors=function(e,i){return e===void 0&&(e=!0),i===void 0&&(i=!1),!this.validateCore(e,!1,i)},t.prototype.validate=function(e,i,n,o){return e===void 0&&(e=!0),i===void 0&&(i=!1),n===void 0&&(n=!1),this.validateCore(e,!0,i,n,o)},t.prototype.validateCore=function(e,i,n,o,s){n===void 0&&(n=!1),o===void 0&&(o=!1),i&&o&&this.parent&&this.parent.validateContainerOnly();var a=new Ze({isOnValueChanged:o,focusOnFirstError:n,fireCallback:e,callbackResult:s});return this.validateElement(a),a.finish(),a.runningResult},t.prototype.validateElement=function(e){return this.validateElementCore(e)},t.prototype.validateElementCore=function(e){var i=this.checkForErrors(e);return e.fireCallback&&(this.errors=i,this.errors!==i&&this.errors.forEach(function(n){return n.locText.strChanged()})),e.setErrorElement(this,i),this.updateContainsErrors(),this.isCollapsed&&e.fireCallback&&i.length>0&&this.expand(),i.length===0},Object.defineProperty(t.prototype,"currentErrorCount",{get:function(){return this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.survey!=null&&this.isRequired?this.survey.requiredMark:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},enumerable:!1,configurable:!0}),t.prototype.addError=function(e){if(e){var i=null;typeof e=="string"||e instanceof String?i=this.addCustomError(e):i=e,this.errors.push(i)}},t.prototype.addCustomError=function(e){return new ce(e,this.survey)},t.prototype.removeError=function(e){if(!e)return!1;var i=this.errors,n=i.indexOf(e);return n!==-1&&i.splice(n,1),n!==-1},t.prototype.checkForErrors=function(e){var i=new Array;if(this.isVisible&&this.canCollectErrors()&&this.collectErrors(i,e),this.survey){if(this.validateValueCallback&&i.length===0){var n=this.validateValueCallback();n&&i.push(n)}this.survey.validateQuestion(this,i,e.fireCallback)}return i},t.prototype.canCollectErrors=function(){return!this.isReadOnly||C.readOnly.enableValidation},t.prototype.collectErrors=function(e,i){if(this.onCheckForErrors(e,i.isOnValueChanged,i.fireCallback),!(e.length>0||!this.canRunValidators(i.isOnValueChanged))){var n=this.runValidators(i);if(n.length>0){e.length=0;for(var o=0;o<n.length;o++)e.push(n[o])}}},t.prototype.canRunValidators=function(e){return!0},t.prototype.onCheckForErrors=function(e,i,n){var o=this;if((!i||this.isOldAnswered)&&this.hasRequiredError()){var s=new Or(this.requiredErrorText,this);s.onUpdateErrorTextCallback=function(l){l.text=o.requiredErrorText},e.push(s)}if(!this.isEmpty()&&this.customWidget){var a=this.customWidget.validate(this);a&&e.push(this.addCustomError(a))}},t.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},Object.defineProperty(t.prototype,"isRunningValidators",{get:function(){return this.getIsRunningValidators()},enumerable:!1,configurable:!0}),t.prototype.getIsRunningValidators=function(){return!!this.validatorRunner},t.prototype.runValidators=function(e){var i=this;return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new Br,this.validatorRunner.onAsyncCompleted=function(n){i.doOnAsyncCompleted(e.fireCallback,n),e.setErrorElement(i,n),e.removeElement(i.id)},e.addElement(this.id),this.validatorRunner.run(this)},t.prototype.doOnAsyncCompleted=function(e,i){var n=this;e&&i.forEach(function(o){n.errors.indexOf(o)<0&&n.errors.push(o)}),this.validatorRunner=null},t.prototype.setNewValue=function(e){if(this.survey&&(e=this.survey.questionValueChanging(this,e)),!this.isNewValueEqualsToValue(e)&&this.checkIsValueCorrect(e)){var i=this.getUnbindValue(this.value);this.isOldAnswered=this.isAnswered,this.isSettingQuestionValue=!0,this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isSettingQuestionValue=!1,this.isAnswered!==this.isOldAnswered&&this.updateQuestionCss(),this.isOldAnswered=void 0,this.parent&&this.parent.onQuestionValueChanged(this),this.survey&&this.survey.questionValueChanged(this,i)}},t.prototype.getValueChangingOptions=function(e){},t.prototype.checkIsValueCorrect=function(e){var i=this.isValueEmpty(e,!this.allowSpaceAsAnswer)||this.isNewValueCorrect(e);return i||Ee.inCorrectQuestionValue(this.name,e),i},t.prototype.isNewValueCorrect=function(e){return!0},t.prototype.isNewValueEqualsToValue=function(e){var i=this.value;if(!this.isTwoValueEquals(e,i,!1,!1))return!1;var n=e===i&&!!i&&(Array.isArray(i)||typeof i=="object");return!n},t.prototype.isTextValue=function(){return!1},t.prototype.getIsInputTextUpdate=function(){return this.survey?this.survey.isUpdateValueTextOnTyping:!1},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getExpressionValue=function(e){return e},t.prototype.getDataLocNotification=function(){return this.isInputTextUpdate?"text":!1},Object.defineProperty(t.prototype,"isInputTextUpdate",{get:function(){return this.getIsInputTextUpdate()&&this.isTextValue()},enumerable:!1,configurable:!0}),t.prototype.setNewValueInData=function(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)},t.prototype.getValueCore=function(){return this.questionValue},t.prototype.setValueCore=function(e){this.setQuestionValue(e),this.data!=null&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged,this.name)),this.isMouseDown=!1},t.prototype.canSetValueToSurvey=function(){return!0},t.prototype.valueFromData=function(e){return e},t.prototype.valueToData=function(e){return e},t.prototype.convertToCorrectValue=function(e){return e},t.prototype.onValueChanged=function(){},t.prototype.onMouseDown=function(){this.isMouseDown=!0},t.prototype.setNewComment=function(e){this.questionComment!==e&&(this.questionComment=e,this.setCommentIntoData(e))},t.prototype.setCommentIntoData=function(e){this.data!=null&&this.data.setComment(this.getValueName(),e,this.getIsInputTextUpdate()?"text":!1)},t.prototype.getValidName=function(e){return qi(r.prototype.getValidName.call(this,e))},t.prototype.updateValueFromSurvey=function(e,i){var n=this;if(i===void 0&&(i=!1),e=this.getUnbindValue(e),e=this.valueFromDataCore(e),!!this.checkIsValueCorrect(e)){var o=this.isValueEmpty(e);this.isUpdateingValueFromSurvey=!0,!o&&this.defaultValueExpression?this.setDefaultValueCore(function(s){n.updateValueFromSurveyCore(e,n.isTwoValueEquals(e,s))}):(this.updateValueFromSurveyCore(e,this.data!==this.getSurvey()),i&&o&&(this.isValueChangedDirectly=!1),o&&this.updateBindingsOnClearFromSurveyCore()),this.isUpdateingValueFromSurvey=!1,this.updateDependedQuestions(),this.updateIsAnswered()}},t.prototype.canUpdateBindings=function(){return!this.isUpdateingValueFromSurvey},t.prototype.updateBindingsOnClearFromSurveyCore=function(){var e=this,i=this.data;i&&!this.isBindingEmpty()&&this.bindings.getNames().forEach(function(n){var o=e.bindings.getValueNameByPropertyName(n),s=i.getValue(o);e.isValueEmpty(s)||e.updateBindingProp(n,s)})},t.prototype.updateValueFromSurveyCore=function(e,i){this.isChangingViaDefaultValue=i,e=this.valueFromData(e);var n=this.isTwoValueEquals(this.questionValue,this.convertToCorrectValue(e));this.setQuestionValue(e),n||this.resetSingleInput(),this.isChangingViaDefaultValue=!1},t.prototype.updateCommentFromSurvey=function(e){this.questionComment=e},t.prototype.onChangeQuestionValue=function(e){},t.prototype.setValueChangedDirectly=function(e){this.isValueChangedDirectly=e,this.setValueChangedDirectlyCallback&&this.setValueChangedDirectlyCallback(e)},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),e=this.convertToCorrectValue(e);var n=this.isTwoValueEquals(this.questionValue,e);!n&&!this.isChangingViaDefaultValue&&!this.isParentChangingViaDefaultValue&&this.setValueChangedDirectly(!0),this.questionValue=e,n||this.onChangeQuestionValue(e),!n&&this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),i&&this.updateIsAnswered()},Object.defineProperty(t.prototype,"isParentChangingViaDefaultValue",{get:function(){var e;return((e=this.data)===null||e===void 0?void 0:e.isChangingViaDefaultValue)===!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){return this.isVisibleIndexNegative(e)&&(e=-1),this.setPropertyValue("visibleIndex",e),this.resetPropertyValue("no"),e<0?0:1},t.prototype.isVisibleIndexNegative=function(e){return e<0||!this.isVisible||!this.getHasTitleOnCalcNo()&&!C.numbering.includeQuestionsWithHiddenTitle||!this.showNumber&&!C.numbering.includeQuestionsWithHiddenNumber},t.prototype.removeElement=function(e){return!1},t.prototype.supportGoNextPageAutomatic=function(){return this.supportAutoAdvance()},t.prototype.supportAutoAdvance=function(){return!1},t.prototype.supportGoNextPageError=function(){return!0},t.prototype.clearIncorrectValues=function(){},t.prototype.clearOnDeletingContainer=function(){},t.prototype.clearErrors=function(){this.errors=[]},t.prototype.clearUnusedValues=function(){},t.prototype.onAnyValueChanged=function(e,i){},t.prototype.checkBindings=function(e,i){if(!(this.bindings.isEmpty()||!this.data))for(var n=this.bindings.getPropertiesByValueName(e),o=0;o<n.length;o++){var s=n[o];this.isValueEmpty(i)&&w.isNumber(this[s])&&(i=0),this.updateBindingProp(s,i)}},t.prototype.updateBindingProp=function(e,i){this[e]=i},t.prototype.getComponentName=function(){return Ur.Instance.getRendererByQuestion(this)},t.prototype.isDefaultRendering=function(){return!!this.customWidget||this.getComponentName()==="default"},t.prototype.getErrorCustomText=function(e,i){return this.survey?this.survey.getSurveyErrorCustomText(this,e,i):e},t.prototype.createRegexValidator=function(e,i,n){var o;return((o=this.survey)===null||o===void 0?void 0:o.createRegexValidator(this,e,i,n))||new RegExp(i,n)},t.prototype.getValidatorTitle=function(){return null},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.processPopupVisiblilityChanged=function(e,i){this.survey.processPopupVisiblityChanged(this,e,i)},t.prototype.processOpenDropdownMenu=function(e){this.survey.processOpenDropdownMenu(this,e)},t.prototype.onTextKeyDownHandler=function(e){e.keyCode===13&&this.survey.questionEditFinishCallback(this,e)},t.prototype.transformToMobileView=function(){},t.prototype.transformToDesktopView=function(){},t.prototype.needResponsiveWidth=function(){return!1},t.prototype.supportResponsiveness=function(){return!1},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&!this.isDesignMode},t.prototype.checkForResponsiveness=function(e){var i=this;if(this.needResponsiveness())if(this.isCollapsed){var n=function(){i.isExpanded&&(i.initResponsiveness(e),i.unregisterPropertyChangedHandlers(["state"],"for-responsiveness"))};this.registerPropertyChangedHandlers(["state"],n,"for-responsiveness")}else this.initResponsiveness(e)},t.prototype.getObservedElementSelector=function(){return".sd-scrollable-container"},t.prototype.onMobileChanged=function(){this.onMobileChangedCallback&&this.onMobileChangedCallback()},t.prototype.triggerResponsiveness=function(e){e===void 0&&(e=!0),this.triggerResponsivenessCallback&&this.triggerResponsivenessCallback(e)},t.prototype.initResponsiveness=function(e){var i=this;if(D.isAvailable()&&(this.destroyResizeObserver(),e&&this.isDefaultRendering())){var n=this.getObservedElementSelector();if(!n)return;var o=e.querySelector(n);if(!o)return;var s=!1,a=void 0;this.triggerResponsivenessCallback=function(l){l&&(a=void 0,i.renderAs="default",s=!1);var u=function(){var f=e.querySelector(n);if(i.isDefaultRendering()&&(a=f.scrollWidth),s||!Bi(f))s=!1;else{var y=ki(f);s=i.processResponsiveness(a,y)}};l?setTimeout(u,1):u()},this.resizeObserver=new ResizeObserver(function(l){k.requestAnimationFrame(function(){i.triggerResponsiveness(!1)})}),this.onMobileChangedCallback=function(){setTimeout(function(){var l=e.querySelector(n);i.processResponsiveness(a,ki(l))},0)},this.resizeObserver.observe(e)}},t.prototype.getCompactRenderAs=function(){return"default"},t.prototype.getDesktopRenderAs=function(){return"default"},t.prototype.onBeforeSetCompactRenderer=function(){},t.prototype.onBeforeSetDesktopRenderer=function(){},t.prototype.processResponsiveness=function(e,i){if(i=Math.round(i),Math.abs(e-i)>2){var n=this.renderAs;return e>i?(this.onBeforeSetCompactRenderer(),this.renderAs=this.getCompactRenderAs()):(this.onBeforeSetDesktopRenderer(),this.renderAs=this.getDesktopRenderAs()),n!==this.renderAs}return!1},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.onMobileChangedCallback=void 0,this.triggerResponsivenessCallback=void 0,this.renderAs=this.getDesktopRenderAs())},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.resetDependedQuestions(),this.destroyResizeObserver()},t.prototype.resetDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].resetDependedQuestion()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.isNewA11yStructure||this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return this.isNewA11yStructure?null:"textbox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return this.isNewA11yStructure?null:this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.isNewA11yStructure||!this.hasTitle||this.parentQuestion?null:this.ariaTitleId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescribedBy",{get:function(){return this.isNewA11yStructure?null:this.hasTitle&&this.hasDescription?this.ariaDescriptionId:null},enumerable:!1,configurable:!0}),t.prototype.getContentAriaHidden=function(){return null},Object.defineProperty(t.prototype,"contentAriaHidden",{get:function(){return this.getContentAriaHidden()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaErrormessage",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaInvalid",{get:function(){return this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return this.hasTitle&&!this.parentQuestion?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){var e=null;return this.hasCssError()?e=this.id+"_errors":this.hasTitle&&!this.parentQuestion&&this.hasDescription&&this.descriptionLocation!=="hidden"&&(e=this.ariaDescriptionId),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaErrormessage",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaExpanded",{get:function(){return this.getPropertyValue("ariaExpanded")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragDropMatrixAttribute",{get:function(){return null},enumerable:!1,configurable:!0}),c([p({defaultValue:!1})],t.prototype,"_isMobile",void 0),c([p()],t.prototype,"forceIsInputReadOnly",void 0),c([p({onSet:function(e,i){i.onVisibleChangedCore(),i.notifySurveyVisibilityChanged()}})],t.prototype,"visible",void 0),c([p()],t.prototype,"useDisplayValuesInDynamicTexts",void 0),c([p()],t.prototype,"visibleIf",void 0),c([p()],t.prototype,"showNumber",void 0),c([p()],t.prototype,"errorLocation",void 0),c([p()],t.prototype,"descriptionLocation",void 0),c([p({localizable:!0})],t.prototype,"requiredErrorText",void 0),c([p({localizable:{defaultStr:!0,markdown:!0}})],t.prototype,"commentText",void 0),c([p({localizable:!0})],t.prototype,"commentPlaceholder",void 0),c([p({localizable:!0})],t.prototype,"defaultDisplayValue",void 0),c([p()],t.prototype,"startWithNewLine",void 0),c([p()],t.prototype,"isRequired",void 0),c([p()],t.prototype,"requiredIf",void 0),c([p()],t.prototype,"id",void 0),c([p()],t.prototype,"enableIf",void 0),c([p()],t.prototype,"clearIfInvisible",void 0),c([p()],t.prototype,"resetValueIf",void 0),c([p()],t.prototype,"setValueIf",void 0),c([p()],t.prototype,"setValueExpression",void 0),c([p({onSetting:function(e,i){return i.valueToData(e)}})],t.prototype,"correctAnswer",void 0),c([p({returnValue:!1})],t.prototype,"isAnswered",void 0),c([p()],t.prototype,"renderAs",void 0),c([p({defaultValue:!1})],t.prototype,"inMatrixMode",void 0),t})(ae);function qi(r){if(!r)return r;for(r=r.trim().replace(/[\{\}]+/g,"");r&&r[0]===C.expressionDisableConversionChar;)r=r.substring(1);return r}V.addClass("question",[{name:"!name",onSettingValue:function(r,t){return qi(t)}},{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"useDisplayValuesInDynamicTexts:boolean",alternativeName:"useDisplayValuesInTitle",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",defaultFunc:function(){return C.minWidth}},{name:"maxWidth",defaultFunc:function(){return C.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(r){return r.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(r){return!!r&&!!r.survey&&r.survey.gridLayoutEnabled}},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(r){var t=r?r.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(r){var t=r?r.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row",dependsOn:"name",onPropertyEditorUpdate:function(r,t){r&&t&&(t.placeholder=r.locTitle.getPlaceholder())}},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"showTitle:boolean",isSerializable:!1,dependsOn:"titleLocation"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"showNumber:boolean",dependsOn:"titleLocation",default:!0,visibleIf:function(r){if(!r)return!0;if(r.titleLocation==="hidden")return!1;var t=r?r.parent:null,e=!t||t.showQuestionNumbers!=="off";if(!e)return!1;var i=r?r.survey:null;return!i||i.showQuestionNumbers!=="off"||!!t&&t.showQuestionNumbers==="onpanel"}},{name:"hideNumber:boolean",visible:!1,isSerializable:!1},{name:"valueName",onSettingValue:function(r,t){return qi(t)}},"enableIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression","defaultValue:value","defaultValueExpression:expression","correctAnswer:value",{name:"clearIfInvisible",default:"default",choices:["default","none","onComplete","onHidden","onHiddenContainer"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},"requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"errorLocation",default:"default",choices:["default","top","bottom"]},{name:"readOnly:switch",overridingProperty:"enableIf"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",isSerializableFunc:function(r){return!r.isBindingEmpty()},visibleIf:function(r){return r.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1},{name:"showCommentArea:switch",visible:!1,layout:"row",alternativeName:"hasComment"},{name:"commentText",dependsOn:"showCommentArea",visibleIf:function(r){return r.showCommentArea},serializationProperty:"locCommentText"},{name:"commentPlaceholder",alternativeName:"commentPlaceHolder",serializationProperty:"locCommentPlaceholder",dependsOn:"showCommentArea",visibleIf:function(r){return r.showCommentArea}},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}]),V.addAlterNativeClassName("question","questionbase");var Ol=(function(){function r(t){this.item=t}return r.prototype.getObj=function(){return this.item},r.prototype.getValue=function(t){var e=t.path,i=e.length>0?e[0].name.toLocaleLowerCase():"",n=C.expressionVariables,o=[n.item,n.choice,n.self].indexOf(i)>-1;if(e.length===1&&o)return{isFound:!0,value:this.item.value,context:this};if(t.isProperty&&e.length>1&&o)return t.path=e.slice(1),new Oe(this.item).getValue(t);var s=this.item.locOwner;if(s&&s.getValueGetterContext)return s.getValueGetterContext().getValue(t)},r.prototype.getRootObj=function(){var t=this.item.locOwner;return t&&t.getValueGetterContext?t:this.item.getSurvey()},r.prototype.getTextValue=function(t,e,i){return i&&e===this.item.value?this.item.textOrHtml:e!=null?e.toString():""},r})(),q=(function(r){P(t,r);function t(e,i,n){var o=r.call(this)||this;return o.typeName=n,o.ownerPropertyName="",i&&(o.locText.text=i),e&&typeof e=="object"?o.setData(e,!0):o.setValue(e,!0),o.getType()!=o.getBaseType()&&Ie.createProperties(o),o}return t.prototype.getMarkdownHtml=function(e,i,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,i,n||this):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e,this):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e,this):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e,this):e},Object.defineProperty(t,"Separator",{get:function(){return C.itemValueSeparator},set:function(e){C.itemValueSeparator=e},enumerable:!1,configurable:!0}),t.setData=function(e,i,n){e.length=0;for(var o=0;o<i.length;o++){var s=i[o],a=s&&typeof s.getType=="function"?s.getType():n??"itemvalue",l=V.createClass(a);l.setData(s),s.originalItem&&(l.originalItem=s.originalItem),s.data&&(l.data=s.data),e.push(l)}},t.getData=function(e){for(var i=[],n=0;n<e.length;n++)i.push(e[n].getData());return i},t.prototype.getOwner=function(){return this.locOwner||r.prototype.getOwner.call(this)},t.getItemByValue=function(e,i){if(!Array.isArray(e))return null;for(var n=w.isValueEmpty(i),o=0;o<e.length;o++)if(n&&w.isValueEmpty(e[o].value)||w.isTwoValueEquals(e[o].value,i,!1,!0,!1))return e[o];return null},t.getTextOrHtmlByValue=function(e,i){var n=t.getItemByValue(e,i);return n!==null?n.textOrHtml:""},t.locStrsChanged=function(e){for(var i=0;i<e.length;i++)e[i].locStrsChanged()},t.runConditionsForItems=function(e,i,n,o,s,a){return s===void 0&&(s=!0),t.runConditionsForItemsCore(e,i,n,o,!0,s,a)},t.runEnabledConditionsForItems=function(e,i,n,o){return t.runConditionsForItemsCore(e,null,i,n,!1,!0,o)},t.runConditionsForItemsCore=function(e,i,n,o,s,a,l){a===void 0&&(a=!0);for(var u=!1,f=0;f<e.length;f++){var y=e[f],b=a&&y.getConditionRunner?y.getConditionRunner(s):!1;b||(b=n);var E=!0;b&&(E=b.runContext(y.getValueGetterContext(),o)),l&&(E=l(y,E)),i&&E&&i.push(y);var S=s?y.isVisible:y.isEnabled;E!=S&&(u=!0,s?y.setIsVisible&&y.setIsVisible(E):y.setIsEnabled&&y.setIsEnabled(E))}return u},t.prototype.getType=function(){return this.typeName||this.getBaseType()},t.prototype.getBaseType=function(){return"itemvalue"},t.prototype.getSurvey=function(e){return this.locOwner&&this.locOwner.getSurvey?this.locOwner.getSurvey():null},t.prototype.getLocale=function(){return this.locOwner&&this.locOwner.getLocale?this.locOwner.getLocale():""},t.prototype.getLocalizableString=function(e){return e==="text"?this.locText:r.prototype.getLocalizableString.call(this,e)},t.prototype.getValueGetterContext=function(){return new Ol(this)},Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isGhost===!0},enumerable:!1,configurable:!0}),t.prototype.createLocText=function(){var e=this,i=this.createLocalizableStringCore(this,"text",!0,"text");return i.onGetTextCallback=function(n){return e.onGetText(n)},i},t.prototype.onGetText=function(e){return e||this.getValueText()},t.prototype.getValueText=function(){var e=this.value;return w.isValueEmpty(e)?null:e.toString()},Object.defineProperty(t.prototype,"locText",{get:function(){return this.getLocText()},enumerable:!1,configurable:!0}),t.prototype.getLocText=function(){return this.locTextValue||(this.locTextValue=this.createLocText()),this.locTextValue},t.prototype.setLocText=function(e){this.locTextValue=e},Object.defineProperty(t.prototype,"locOwner",{get:function(){return this._locOwner},set:function(e){this._locOwner=e,this.onLocOwnerChanged()},enumerable:!1,configurable:!0}),t.prototype.onLocOwnerChanged=function(){},t.prototype.onDependencyValueChanged=function(e,i){var n=this.locOwner;n&&n.onDependencyValueChanged?n.onDependencyValueChanged(e,i):r.prototype.onDependencyValueChanged.call(this,e,i)},Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){this.setValue(e,!1)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e,i){var n=void 0;e=this.getCorrectValue(e);var o=C.itemValueSeparator;if(o&&!w.isValueEmpty(e)){var s=e.toString(),a=s.indexOf(o);a>-1&&(e=s.slice(0,a),n=s.slice(a+1))}i?this.setPropertyValueDirectly("value",e):this.setPropertyValue("value",e),n&&(this.text=n),this.id=this.value},t.prototype.getCorrectValue=function(e){return e},Object.defineProperty(t.prototype,"hasText",{get:function(){return!!this.pureText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pureText",{get:function(){var e;return((e=this.locTextValue)===null||e===void 0?void 0:e.pureText)||""},set:function(e){this.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.calculatedText},set:function(e){this.locText.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textOrHtml",{get:function(){return this.locTextValue?this.locText.textOrHtml:this.getValueText()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedText",{get:function(){return this.locTextValue?this.locText.calculatedText:this.getValueText()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.text},enumerable:!1,configurable:!0}),t.prototype.canSerializeValue=function(){var e=this.value;return e==null?!1:!Array.isArray(e)&&typeof e!="object"},t.prototype.getData=function(e){var i=this.toJSON(e);if(i.value&&i.value.pos&&delete i.value.pos,w.isValueEmpty(i.value))return i;var n=this.canSerializeValue(),o=!n||!C.serialization.itemValueSerializeAsObject&&!C.serialization.itemValueSerializeDisplayText;return o&&Object.keys(i).length==1?this.value:(C.serialization.itemValueSerializeDisplayText&&i.text===void 0&&n&&(i.text=this.value.toString()),i)},t.prototype.toJSON=function(e){var i={},n=V.getProperties(this.getType());(!n||n.length==0)&&(n=V.getProperties(this.getBaseType()));for(var o=new le,s=0;s<n.length;s++){var a=n[s];this.canAddPpropertyToJSON(a)&&o.valueToJson(this,i,a,e)}return i},t.prototype.isPropertyStoredInHash=function(e){return e!=="text"},t.prototype.canAddPpropertyToJSON=function(e){return!(e.name==="text"&&(!this.locTextValue||!this.locTextValue.hasNonDefaultText()&&w.isTwoValueEquals(this.value,this.locTextValue.getLocaleText(""),!1,!0,!1)))},t.prototype.setData=function(e,i){var n;if(!w.isValueEmpty(e)){if(typeof e.value>"u"&&typeof e.text<"u"&&Object.keys(e).length===1&&(e.value=e.text),typeof e.value<"u"){var o=void 0;if(typeof e.toJSON=="function")o=e.toJSON();else if(Array.isArray(e.elements)){o={};for(var s in e)s!=="elements"&&(o[s]=e[s])}else o=e;new le().toObject(o,this)}else this.setValue(e,i);i||(n=this.locTextValue)===null||n===void 0||n.strChanged()}},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValueWithoutDefault("visibleIf")||""},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValueWithoutDefault("enableIf")||""},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.getPropertyValueWithoutDefault("isVisible");return e!==void 0?e:!0},enumerable:!1,configurable:!0}),t.prototype.setIsVisible=function(e){this.setPropertyValue("isVisible",e)},Object.defineProperty(t.prototype,"isEnabled",{get:function(){var e=this.getPropertyValueWithoutDefault("isEnabled");return e!==void 0?e:!0},enumerable:!1,configurable:!0}),t.prototype.setIsEnabled=function(e){this.setPropertyValue("isEnabled",e)},t.prototype.onPropertyValueChanged=function(e,i,n){var o;e==="value"&&!this.hasText&&((o=this.locTextValue)===null||o===void 0||o.strChanged());var s="itemValuePropertyChanged";!this.locOwner||!this.locOwner[s]||this.locOwner[s](this,e,i,n)},t.prototype.getConditionRunner=function(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()},t.prototype.getVisibleConditionRunner=function(){var e=this.getExpressionFromSurvey("visibleIf");return e?(this.visibleConditionRunner||(this.visibleConditionRunner=new ge(e)),this.visibleConditionRunner.expression=e,this.visibleConditionRunner):null},t.prototype.getEnableConditionRunner=function(){var e=this.getExpressionFromSurvey("enableIf");return e?(this.enableConditionRunner||(this.enableConditionRunner=new ge(e)),this.enableConditionRunner.expression=e,this.enableConditionRunner):null},Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,i=this._locOwner;return i instanceof ie&&i.isItemSelected&&this.selectedValue===void 0&&(this.selectedValue=new $(function(){return i.isItemSelected(e)})),this.selectedValue},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(){return this._locOwner instanceof ie?this.componentValue||this._locOwner.itemComponent:this.componentValue},t.prototype.setComponent=function(e){this.componentValue=e},t.prototype.setRootElement=function(e){this._htmlElement=e},t.prototype.getRootElement=function(){return this._htmlElement},t.prototype.getEnabled=function(){return this.isEnabled},t.prototype.setEnabled=function(e){this.setIsEnabled(e)},t.prototype.getVisible=function(){var e=this.isVisible===void 0?!0:this.isVisible,i=this._visible===void 0?!0:this._visible;return e&&i},t.prototype.setVisible=function(e){this.visible!==e&&(this._visible=e)},Object.defineProperty(t.prototype,"_visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e)},enumerable:!1,configurable:!0}),t.prototype.getLocTitle=function(){return this.locText},t.prototype.getTitle=function(){return this.text},t.prototype.setLocTitle=function(e){},t.prototype.setTitle=function(e){},c([p()],t.prototype,"selectedValue",void 0),c([p({defaultValue:""})],t.prototype,"icon",void 0),t})(Mt);U.createItemValue=function(r,t){var e=null;return t?e=le.metaData.createClass(t,{}):typeof r.getType=="function"?e=new q(null,void 0,r.getType()):e=new q(null),e.setData(r),e},U.itemValueLocStrChanged=function(r){q.locStrsChanged(r)},lt.getItemValuesDefaultValue=function(r,t){var e=new Array;return q.setData(e,Array.isArray(r)?r:[],t),e},V.addClass("itemvalue",[{name:"!value",isUnique:!0},{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",locationInTable:"detail"},{name:"enableIf:condition",locationInTable:"detail",visibleIf:function(r){return!r||r.ownerPropertyName!=="rateValues"}}],function(r){return new q(r)});var Gr=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;return n.expressionIsRunning=!1,n.isCalculated=!1,e&&(n.name=e),i&&(n.expression=i),n}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="expression"&&this.rerunExpression()},t.prototype.setOwner=function(e){this.data=e,this.rerunExpression()},t.prototype.getOwner=function(){return this.data},t.prototype.getType=function(){return"calculatedvalue"},t.prototype.getSurvey=function(e){return this.data&&this.data.getSurvey?this.data.getSurvey():null},Object.defineProperty(t.prototype,"owner",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.resetCalculation=function(){this.isCalculated=!1},t.prototype.doCalculation=function(e,i){this.isCalculated||(this.runExpressionCore(e,i),this.isCalculated=!0)},t.prototype.runExpression=function(e){this.runExpressionCore(null,e)},Object.defineProperty(t.prototype,"value",{get:function(){if(this.data)return this.data.getVariable(this.name)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e){this.data&&this.data.setVariable(this.name,e)},Object.defineProperty(t.prototype,"canRunExpression",{get:function(){return!!this.data&&!this.isLoadingFromJson&&!!this.expression&&!this.expressionIsRunning&&!!this.name},enumerable:!1,configurable:!0}),t.prototype.rerunExpression=function(){this.canRunExpression&&this.runExpression({survey:this.getSurvey()})},t.prototype.runExpressionCore=function(e,i){!this.canRunExpression||!this.ensureExpression()||(this.locCalculation(),e&&this.runDependentExpressions(e,i),this.expressionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(i,"expression")))},t.prototype.runDependentExpressions=function(e,i){var n=this.expressionRunner.getVariables();if(n)for(var o=0;o<e.length;o++){var s=e[o];s===this||n.indexOf(s.name)<0||s.doCalculation(e,i)}},t.prototype.ensureExpression=function(){var e=this,i=this.getExpressionFromSurvey("expression");return i?(this.expressionRunner?this.expressionRunner.expression=i:(this.expressionRunner=this.createExpressionRunner(i),this.expressionRunner.onRunComplete=function(n){w.isTwoValueEquals(n,e.value,!1,!0,!1)||e.setValue(n),e.unlocCalculation()}),!0):!1},c([p()],t.prototype,"name",void 0),c([p()],t.prototype,"includeIntoResult",void 0),c([p()],t.prototype,"expression",void 0),t})(U);V.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],function(){return new Gr},"base");var Hi=(function(r){P(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i.expression=e,i}return t.prototype.getType=function(){return"expressionitem"},t.prototype.getOwner=function(){return this.locOwner},t.prototype.runCondition=function(e){var i=!1;return this.runExpressionByProperty("expression",e,function(n){i=n===!0}),i},Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getSurvey=function(e){return this.locOwner},c([p({returnValue:""})],t.prototype,"expression",void 0),t})(U),Jr=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this,e)||this;return i&&(n.html=i),n}return t.prototype.getType=function(){return"htmlconditionitem"},c([p({localizable:{markdown:!0}})],t.prototype,"html",void 0),t})(Hi),$r=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this,e)||this;return i&&(n.url=i),n}return t.prototype.getType=function(){return"urlconditionitem"},c([p({localizable:!0})],t.prototype,"url",void 0),t})(Hi);V.addClass("expressionitem",["expression:condition"],function(){return new Hi},"base"),V.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new Jr},"expressionitem"),V.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],function(){return new $r},"expressionitem");var Al=(function(){function r(){this.parser=new DOMParser}return r.prototype.assignValue=function(t,e,i){Array.isArray(t[e])?t[e].push(i):t[e]!==void 0?t[e]=[t[e]].concat(i):typeof i=="object"&&Object.keys(i).length===1&&Object.keys(i)[0]===e?t[e]=i[e]:t[e]=i},r.prototype.xml2Json=function(t,e){if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i],o={};this.xml2Json(n,o),this.assignValue(e,n.nodeName,o)}else this.assignValue(e,t.nodeName,t.textContent)},r.prototype.parseXmlString=function(t){var e=this.parser.parseFromString(t,"text/xml"),i={};return this.xml2Json(e,i),i},r})(),qe=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.lastObjHash="",e.isRunningValue=!1,e.processedUrl="",e.processedPath="",e.isUsingCacheFromUrl=void 0,e.error=null,e.createItemValue=function(i){return new q(i)},e}return Object.defineProperty(t,"EncodeParameters",{get:function(){return C.web.encodeUrlParams},set:function(e){C.web.encodeUrlParams=e},enumerable:!1,configurable:!0}),t.clearCache=function(){t.itemsResult={},t.sendingSameRequests={}},t.addSameRequest=function(e){if(!e.isUsingCache)return!1;var i=e.objHash,n=t.sendingSameRequests[i];return n?(n.push(e),e.isRunningValue=!0,!0):(t.sendingSameRequests[e.objHash]=[],!1)},t.unregisterSameRequests=function(e,i){if(e.isUsingCache){var n=t.sendingSameRequests[e.objHash];if(delete t.sendingSameRequests[e.objHash],!!n)for(var o=0;o<n.length;o++)n[o].isRunningValue=!1,n[o].getResultCallback&&n[o].getResultCallback(i)}},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return C.web.onBeforeRequestChoices},set:function(e){C.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t.getCachedItemsResult=function(e){var i=e.objHash,n=t.itemsResult[i];return n?(e.getResultCallback&&e.getResultCallback(n),!0):!1},t.prototype.onPropertyValueChanged=function(e,i,n){if(r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="url"){if(this.owner&&this.owner.setPropertyValue("isUsingRestful",!!n),this.isUsingCacheFromUrl=void 0,!n)return;n.indexOf(t.cacheText)>-1?this.isUsingCacheFromUrl=!0:n.indexOf(t.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1)}},t.prototype.getSurvey=function(e){return this.owner?this.owner.survey:null},t.prototype.run=function(e){if(e===void 0&&(e=null),!(!this.url||!this.getResultCallback)){if(this.processedText(e),!this.processedUrl){this.doEmptyResultCallback({}),this.lastObjHash=this.objHash;return}this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,!this.useChangedItemsResults()&&(t.addSameRequest(this)||this.sendRequest()))}},Object.defineProperty(t.prototype,"isUsingCache",{get:function(){return this.isUsingCacheFromUrl===!0?!0:this.isUsingCacheFromUrl===!1?!1:C.web.cacheLoadedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getIsRunning()},enumerable:!1,configurable:!0}),t.prototype.getIsRunning=function(){return this.isRunningValue},Object.defineProperty(t.prototype,"isWaitingForParameters",{get:function(){return this.url&&!this.processedUrl},enumerable:!1,configurable:!0}),t.prototype.useChangedItemsResults=function(){return t.getCachedItemsResult(this)},t.prototype.doEmptyResultCallback=function(e){var i=[];this.updateResultCallback&&(i=this.updateResultCallback(i,e)),this.getResultCallback(i)},t.prototype.processedText=function(e){var i=this.url;if(i&&(i=i.replace(t.cacheText,"").replace(t.noCacheText,"")),e){var n=e.processTextEx({text:i,runAtDesign:!0}),o=e.processTextEx({text:this.path,runAtDesign:!0});!n.hasAllValuesOnLastRun||!o.hasAllValuesOnLastRun?(this.processedUrl="",this.processedPath=""):(this.processedUrl=n.text,this.processedPath=o.text)}else this.processedUrl=i,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)},t.prototype.parseResponse=function(e){var i;if(e&&typeof e.indexOf=="function"&&e.indexOf("<")===0){var n=new Al;i=n.parseXmlString(e)}else try{i=JSON.parse(e)}catch{i=(e||"").split(`
`).map(function(s){return s.trim(" ")}).filter(function(s){return!!s})}return i},t.prototype.sendRequest=function(){typeof XMLHttpRequest<"u"?this.sendXmlHttpRequest():typeof fetch<"u"?this.sendFetchRequest():(this.error=new Fr("The browser does not support XMLHttpRequest or fetch API","",this.owner),this.doEmptyResultCallback(""))},t.prototype.sendXmlHttpRequest=function(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var i=this,n=this.objHash;e.onload=function(){i.beforeLoadRequest(),e.status===200?i.onLoad(i.parseResponse(e.response),n):i.onError(e.statusText,e.responseText)};var o={url:this.processedUrl,request:e};C.web.onBeforeRequestChoices&&C.web.onBeforeRequestChoices(this,o),this.beforeSendRequest(),o.request.send()},t.prototype.sendFetchRequest=function(){var e=this,i=this.objHash,n=this.processedUrl,o={method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},s={url:n,fetchOptions:o};C.web.onBeforeRequestChoices&&C.web.onBeforeRequestChoices(this,s),this.beforeSendRequest(),fetch(s.url,s.fetchOptions).then(function(a){return e.beforeLoadRequest(),a.status===200?a.text().then(function(l){e.onLoad(e.parseResponse(l),i)}):a.text().then(function(l){e.onError(a.statusText,l)})}).catch(function(a){e.onError(a.message,"")})},t.prototype.getType=function(){return"choicesByUrl"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.url&&!this.path},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){r.prototype.dispose.call(this),this.getResultCallback=null,this.beforeSendRequestCallback=null,this.updateResultCallback=null,this.getItemValueCallback=null},t.prototype.getCustomPropertiesNames=function(){for(var e=this.getCustomProperties(),i=new Array,n=0;n<e.length;n++)i.push(this.getCustomPropertyName(e[n].name));return i},t.prototype.getCustomPropertyName=function(e){return e+"Name"},t.prototype.getCustomProperties=function(){for(var e=V.getProperties(this.itemValueType),i=[],n=0;n<e.length;n++)e[n].name==="value"||e[n].name==="text"||e[n].name==="visibleIf"||e[n].name==="enableIf"||i.push(e[n]);return i},t.prototype.getAllPropertiesNames=function(){var e=new Array;return V.getPropertiesByObj(this).forEach(function(i){return e.push(i.name)}),this.getCustomPropertiesNames().forEach(function(i){return e.push(i)}),e},t.prototype.setData=function(e){var i=this;e||(e={}),this.getAllPropertiesNames().forEach(function(o){i[o]=e[o]});var n=e.attachData||e.attachOriginalItems;n!==void 0&&(this.attachData=n)},t.prototype.getData=function(){var e=this,i={},n=!1;return this.getAllPropertiesNames().forEach(function(o){var s=e[o];!e.isValueEmpty(s)&&s!==e.getDefaultPropertyValue(o)&&(i[o]=s,n=!0)}),n?i:null},Object.defineProperty(t.prototype,"attachOriginalItems",{get:function(){return this.attachData},set:function(e){this.attachData=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemValueType",{get:function(){if(!this.owner)return"itemvalue";var e=V.findProperty(this.owner.getType(),"choices");return!e||e.type=="itemvalue[]"?"itemvalue":e.type},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.setData(void 0)},t.prototype.beforeSendRequest=function(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()},t.prototype.beforeLoadRequest=function(){this.isRunningValue=!1},t.prototype.onLoad=function(e,i){i===void 0&&(i=null),i||(i=this.objHash);var n=new Array,o=this.getResultAfterPath(e);if(o&&o.length)for(var s=0;s<o.length;s++){var a=o[s];if(a){var l=this.getItemValueCallback?this.getItemValueCallback(a):this.getValue(a),u=this.createItemValue(l);this.setTitle(u,a),this.setCustomProperties(u,a),this.attachData&&(u.originalItem=a,u.data=a);var f=this.getImageLink(a);f&&(u.imageLink=f),this.setItemValueProperties(u,a),n.push(u)}}else this.allowEmptyResponse||(this.error=new xl(null,this.owner));this.updateResultCallback&&(n=this.updateResultCallback(n,e)),this.isUsingCache&&(t.itemsResult[i]=n),this.callResultCallback(n,i),t.unregisterSameRequests(this,n)},t.prototype.setItemValueProperties=function(e,i){var n=["isExclusive","showCommentArea","isCommentRequired","visibleIf","enableIf"];n.forEach(function(o){i[o]!==void 0&&(e[o]=i[o])})},t.prototype.callResultCallback=function(e,i){i==this.objHash&&this.getResultCallback(e)},t.prototype.setCustomProperties=function(e,i){for(var n=this.getCustomProperties(),o=0;o<n.length;o++){var s=n[o],a=this.getValueCore(i,this.getPropertyBinding(s.name));this.isValueEmpty(a)||(e[s.name]=a)}},t.prototype.getPropertyBinding=function(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e},t.prototype.onError=function(e,i){this.error=new Fr(e,i,this.owner),this.doEmptyResultCallback(i),t.unregisterSameRequests(this,[])},t.prototype.getResultAfterPath=function(e){if(!e||!this.processedPath)return e;for(var i=this.getPathes(),n=0;n<i.length;n++)if(e=e[i[n]],!e)return null;return e},t.prototype.getPathes=function(){var e=[];return this.processedPath.indexOf(";")>-1?e=this.path.split(";"):this.processedPath.indexOf(",")>-1?e=this.processedPath.split(","):e=this.processedPath.split("."),e.length==0&&e.push(this.processedPath),e},t.prototype.getValue=function(e){if(!e)return null;if(this.valueName)return this.getValueCore(e,this.valueName);if(!(e instanceof Object))return e;var i=Object.keys(e).length;return i<1?null:e[Object.keys(e)[0]]},t.prototype.setTitle=function(e,i){var n=this.titleName?this.titleName:"title",o=this.getValueCore(i,n);o&&(typeof o=="string"?e.text=o:e.locText.setJson(o))},t.prototype.getImageLink=function(e){var i=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,i)},t.prototype.getValueCore=function(e,i){if(!e)return null;if(i.indexOf(".")<0)return e[i];for(var n=i.split("."),o=0;o<n.length;o++)if(e=e[n[o]],!e)return null;return e},Object.defineProperty(t.prototype,"objHash",{get:function(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName+";"+this.attachData},enumerable:!1,configurable:!0}),t.cacheText="{CACHE}",t.noCacheText="{NOCACHE}",t.itemsResult={},t.sendingSameRequests={},c([p({returnValue:""})],t.prototype,"url",void 0),c([p({returnValue:""})],t.prototype,"path",void 0),c([p({returnValue:""})],t.prototype,"valueName",void 0),c([p({returnValue:""})],t.prototype,"titleName",void 0),c([p({returnValue:""})],t.prototype,"imageLinkName",void 0),c([p()],t.prototype,"allowEmptyResponse",void 0),c([p()],t.prototype,"attachData",void 0),t})(U),Dl=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t,"EncodeParameters",{get:function(){return qe.EncodeParameters},set:function(e){qe.EncodeParameters=e},enumerable:!1,configurable:!0}),t.clearCache=function(){qe.clearCache()},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return C.web.onBeforeRequestChoices},set:function(e){C.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t})(qe);V.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(r){return!!r&&!!r.owner&&r.owner.getType()=="imagepicker"}},{name:"allowEmptyResponse:boolean"},{name:"attachData:boolean",alternativeName:"attachOriginalItems",visible:!1}],function(){return new qe});var zi=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.generatedVisibleRows=null,i.generatedTotalRow=null,i.columns=i.createColumnValues(),i.rows=i.createItemValues("rows"),i}return t.prototype.createColumnValues=function(){return this.createItemValues("columns")},t.prototype.getType=function(){return"matrixbase"},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="rowsVisibleIf"||e==="columnsVisibleIf")&&this.runCondition(this.getDataFilteredProperties())},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.updateVisibilityBasedOnRows()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){var e=this,i=[];return this.columns.forEach(function(n){e.isColumnVisible(n)&&i.push(n)}),i},enumerable:!1,configurable:!0}),t.prototype.isColumnVisible=function(e){return e.isVisible},t.prototype.getVisibleRows=function(){return[]},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.runItemsCondition(e)},t.prototype.onColumnsChanged=function(){},t.prototype.onRowsChanged=function(){this.updateVisibilityBasedOnRows(),this.fireCallback(this.visibleRowsChangedCallback)},t.prototype.updateVisibilityBasedOnRows=function(){this.hideIfRowsEmpty&&this.onVisibleChanged()},t.prototype.isVisibleCore=function(){var e,i=r.prototype.isVisibleCore.call(this);return!i||!this.hideIfRowsEmpty?i:((e=this.visibleRows)===null||e===void 0?void 0:e.length)>0},t.prototype.shouldRunColumnExpression=function(){return!this.survey||!this.survey.areInvisibleElementsShowing},t.prototype.runItemsCondition=function(e){var i=this.runConditionsForRows(e),n=this.runConditionsForColumns(e),o=n||i;o&&(this.isClearValueOnHidden&&n&&this.clearInvisibleColumnValues(),this.clearGeneratedRows(),n&&this.onColumnsChanged(),this.onRowsChanged())},t.prototype.clearGeneratedRows=function(){this.generatedVisibleRows=null},t.prototype.createRowsVisibleIfRunner=function(){return null},t.prototype.runConditionsForRows=function(e){var i=this.areInvisibleElementsShowing,n=i?null:this.createRowsVisibleIfRunner(),o=q.runConditionsForItems(this.rows,void 0,n,e,!i);return q.runEnabledConditionsForItems(this.rows,void 0,e),o},t.prototype.runConditionsForColumns=function(e){var i=!this.areInvisibleElementsShowing,n=this.getExpressionFromSurvey("columnsVisibleIf"),o=i&&n?new ge(n):null;return q.runConditionsForItems(this.columns,void 0,o,e,this.shouldRunColumnExpression())},t.prototype.clearInvisibleColumnValues=function(){},t.prototype.clearInvisibleValuesInRows=function(){},t.prototype.needResponsiveWidth=function(){return!0},Object.defineProperty(t.prototype,"columnsAutoWidth",{get:function(){return!this.isMobile&&!this.columns.some(function(e){return!!e.width})},enumerable:!1,configurable:!0}),t.prototype.getTableCss=function(){var e;return new I().append(this.cssClasses.root).append(this.cssClasses.columnsAutoWidth,this.columnsAutoWidth).append(this.cssClasses.noHeader,!this.showHeader).append(this.cssClasses.hasFooter,!!(!((e=this.renderedTable)===null||e===void 0)&&e.showAddRowOnBottom)).append(this.cssClasses.rootAlternateRows,this.alternateRows).append(this.cssClasses.rootVerticalAlignTop,this.verticalAlign==="top").append(this.cssClasses.rootVerticalAlignMiddle,this.verticalAlign==="middle").toString()},t.prototype.getTableWrapperCss=function(){return new I().append(this.cssClasses.tableWrapper).append(this.cssClasses.tableWrapperLeft,this.titleLocation=="left").toString()},t.prototype.getCellAriaLabel=function(e,i,n){var o=e.locText&&e.locText.renderedHtml?e.locText.renderedHtml:"";n&&(o=n);var s=i.locTitle&&i.locTitle.renderedHtml?i.locTitle.renderedHtml:"",a=(this.getLocalizationString("matrix_row")||"row").toLocaleLowerCase(),l=(this.getLocalizationString("matrix_column")||"column").toLocaleLowerCase();return"".concat(a," ").concat(o,", ").concat(l," ").concat(s)},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getIsMobile=function(){return this.displayMode=="auto"?r.prototype.getIsMobile.call(this):this.displayMode==="list"},c([p()],t.prototype,"showHeader",void 0),c([p()],t.prototype,"columns",void 0),c([p()],t.prototype,"rows",void 0),c([p()],t.prototype,"rowsVisibleIf",void 0),c([p()],t.prototype,"columnsVisibleIf",void 0),c([p()],t.prototype,"verticalAlign",void 0),c([p()],t.prototype,"alternateRows",void 0),c([p({returnValue:""})],t.prototype,"columnMinWidth",void 0),c([p({returnValue:""})],t.prototype,"rowTitleWidth",void 0),c([p()],t.prototype,"displayMode",void 0),t})(ie);V.addClass("matrixbase",[{name:"showCommentArea:switch",visible:!0},"columnsVisibleIf:condition","rowsVisibleIf:condition","columnMinWidth",{name:"showHeader:boolean",default:!0},{name:"verticalAlign",choices:["top","middle"],default:"middle"},{name:"alternateRows:boolean",default:!1},{name:"displayMode",default:"auto",choices:["auto","table","list"],visible:!1}],void 0,"question");var Ll=(function(){function r(){}return r})(),Kr=(function(){function r(t,e){this.name=t,this.returnDisplayValue=e,this.isExists=!1}return r})(),Yr=(function(){function r(){this._unObservableValues=[void 0]}return Object.defineProperty(r.prototype,"hasAllValuesOnLastRunValue",{get:function(){return this._unObservableValues[0]},set:function(t){this._unObservableValues[0]=t},enumerable:!1,configurable:!0}),r.prototype.process=function(t,e,i,n){if(this.hasAllValuesOnLastRunValue=!0,!t||!this.canProcess())return t;for(var o=this.getItems(t),s=o.length-1;s>=0;s--){var a=o[s],l=this.getName(t.substring(a.start+1,a.end));if(l){var u=new Kr(l,e===!0);if(this.onProcessValue(u),u.isExists||(this.hasAllValuesOnLastRunValue=!1),u.isExists||n){w.isValueEmpty(u.value)&&(this.hasAllValuesOnLastRunValue=!1);var f=w.isValueEmpty(u.value)?"":u.value;i&&(f=encodeURIComponent(f)),t=t.substring(0,a.start)+f+t.substring(a.end+1)}}}return t},r.prototype.canProcess=function(){return!!this.onProcess},r.prototype.onProcessValue=function(t){this.onProcess&&this.onProcess(t)},r.prototype.processValue=function(t,e){var i=new Kr(t,e);return this.onProcess&&this.onProcess(i),i},Object.defineProperty(r.prototype,"hasAllValuesOnLastRun",{get:function(){return!!this.hasAllValuesOnLastRunValue},enumerable:!1,configurable:!0}),r.prototype.processText=function(t,e){return this.process(t,e)},r.prototype.processTextEx=function(t){var e={hasAllValuesOnLastRun:!0,text:t.text};return e.text=this.process(t.text,t.returnDisplayValue,t.doEncoding,t.replaceUndefinedValues),e.hasAllValuesOnLastRun=this.hasAllValuesOnLastRun,e},r.prototype.getItems=function(t){for(var e=[],i=t.length,n=-1,o="",s=0;s<i;s++)if(o=t[s],o=="{"&&(n=s),o=="}"){if(n>-1){var a=new Ll;a.start=n,a.end=s,this.isValidItemName(t.substring(n+1,s))&&e.push(a)}n=-1}return e},r.prototype.isValidItemName=function(t){return!!t&&t.indexOf(":")<0},r.prototype.getName=function(t){if(t)return t.trim()},r})(),yt=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.obj=e,i}return t.prototype.canProcess=function(){return!0},t.prototype.onProcessValue=function(e){this.getProcessedTextValue(e),e.element=this.getContextObj(),r.prototype.onProcessValue.call(this,e)},t.prototype.processText=function(e,i){var n={text:e,returnDisplayValue:i};return this.processTextEx(n).text},t.prototype.processTextEx=function(e){var i;return!e.runAtDesign&&(!((i=this.survey)===null||i===void 0)&&i.isDesignMode)?{hasAllValuesOnLastRun:!0,text:e.text}:(this.context=e.context,r.prototype.processTextEx.call(this,e))},Object.defineProperty(t.prototype,"survey",{get:function(){var e=this.obj;return e.getSurvey?e.getSurvey():null},enumerable:!1,configurable:!0}),t.prototype.getContextObj=function(){return this.context||this.obj},t.prototype.getProcessedTextValue=function(e){var i=this.getContextObj(),n=new Re().getValueInfo({name:e.name,context:i.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});n.isFound&&(e.isExists=n.isFound,e.value=n.value)},t})(Yr),Xr=(function(){function r(t,e){this.name=t,this.json=e;var i=this;V.addClass(t,[],function(n){return Gt.Instance.createQuestion(n?n.name:"",i)},"question"),this.onInit()}return r.prototype.onInit=function(){this.json.onInit&&this.json.onInit()},r.prototype.onCreated=function(t){this.json.onCreated&&this.json.onCreated(t)},r.prototype.onLoaded=function(t){this.json.onLoaded&&this.json.onLoaded(t)},r.prototype.onAfterRender=function(t,e){this.json.onAfterRender&&this.json.onAfterRender(t,e)},r.prototype.onAfterRenderContentElement=function(t,e,i){this.json.onAfterRenderContentElement&&this.json.onAfterRenderContentElement(t,e,i)},r.prototype.onUpdateQuestionCssClasses=function(t,e,i){this.json.onUpdateQuestionCssClasses&&this.json.onUpdateQuestionCssClasses(t,e,i)},r.prototype.onSetQuestionValue=function(t,e){this.json.onSetQuestionValue&&this.json.onSetQuestionValue(t,e),this.json.onValueSet&&this.json.onValueSet(t,e)},r.prototype.onPropertyChanged=function(t,e,i){this.json.onPropertyChanged&&this.json.onPropertyChanged(t,e,i)},r.prototype.onValueChanged=function(t,e,i){this.json.onValueChanged&&this.json.onValueChanged(t,e,i)},r.prototype.onValueChanging=function(t,e,i){return this.json.onValueChanging?this.json.onValueChanging(t,e,i):i},r.prototype.onGetErrorText=function(t){if(this.json.getErrorText)return this.json.getErrorText(t)},r.prototype.onItemValuePropertyChanged=function(t,e,i,n,o){this.json.onItemValuePropertyChanged&&this.json.onItemValuePropertyChanged(t,{obj:e,propertyName:i,name:n,newValue:o})},r.prototype.getDisplayValue=function(t,e,i){return this.json.getDisplayValue?this.json.getDisplayValue(i):i.getDisplayValue(t,e)},Object.defineProperty(r.prototype,"defaultQuestionTitle",{get:function(){return this.json.defaultQuestionTitle},enumerable:!1,configurable:!0}),r.prototype.setValueToQuestion=function(t){var e=this.json.valueToQuestion||this.json.setValue;return e?e(t):t},r.prototype.getValueFromQuestion=function(t){var e=this.json.valueFromQuestion||this.json.getValue;return e?e(t):t},Object.defineProperty(r.prototype,"isComposite",{get:function(){return!!this.json.elementsJSON||!!this.json.createElements},enumerable:!1,configurable:!0}),r.prototype.getDynamicProperties=function(){return Array.isArray(this.dynamicProperties)||(this.dynamicProperties=this.calcDynamicProperties()),this.dynamicProperties},r.prototype.getNumberQuestionsWithHiddenTitle=function(t){var e=this.json.numberQuestionsWithHiddenTitle;return e===void 0?t:e},r.prototype.calcDynamicProperties=function(){var t=this.json.inheritBaseProps;if(!t||!this.json.questionJSON)return[];var e=this.json.questionJSON.type;if(!e)return[];if(Array.isArray(t)){var i=[];return t.forEach(function(s){var a=V.findProperty(e,s);a&&i.push(a)}),i}var n=[];for(var o in this.json.questionJSON)n.push(o);return V.getDynamicPropertiesByTypes(this.name,e,n)},r})(),Gt=(function(){function r(){this.customQuestionValues=[]}return r.prototype.add=function(t){if(t){var e=t.name;if(!e)throw"Attribute name is missed";if(e=e.toLowerCase(),this.getCustomQuestionByName(e))throw"There is already registered custom question with name '"+e+"'";if(V.findClass(e))throw"There is already class with name '"+e+"'";var i=new Xr(e,t);this.onAddingJson&&this.onAddingJson(e,i.isComposite),this.customQuestionValues.push(i)}},r.prototype.remove=function(t){if(!t)return!1;var e=this.getCustomQuestionIndex(t.toLowerCase());return e<0?!1:(this.removeByIndex(e),!0)},Object.defineProperty(r.prototype,"items",{get:function(){return this.customQuestionValues},enumerable:!1,configurable:!0}),r.prototype.getCustomQuestionByName=function(t){var e=this.getCustomQuestionIndex(t);return e>=0?this.customQuestionValues[e]:void 0},r.prototype.getCustomQuestionIndex=function(t){for(var e=0;e<this.customQuestionValues.length;e++)if(this.customQuestionValues[e].name===t)return e;return-1},r.prototype.removeByIndex=function(t){V.removeClass(this.customQuestionValues[t].name),this.customQuestionValues.splice(t,1)},r.prototype.clear=function(t){for(var e=this.customQuestionValues.length-1;e>=0;e--)(t||!this.customQuestionValues[e].json.internal)&&this.removeByIndex(e)},r.prototype.createQuestion=function(t,e){return e.isComposite?this.createCompositeModel(t,e):this.createCustomModel(t,e)},r.prototype.createCompositeModel=function(t,e){return this.onCreateComposite?this.onCreateComposite(t,e):new to(t,e)},r.prototype.createCustomModel=function(t,e){return this.onCreateCustom?this.onCreateCustom(t,e):new eo(t,e)},r.Instance=new r,r})(),Zr=(function(r){P(t,r);function t(e,i){var n=r.call(this,e)||this;return n.customQuestion=i,Ie.createProperties(n),n.locQuestionTitle=n.createLocalizableString("questionTitle"),n.locQuestionTitle.setJson(n.customQuestion.defaultQuestionTitle),n.createWrapper(),n.customQuestion&&n.customQuestion.onCreated(n),n}return t.prototype.getType=function(){return this.customQuestion?this.customQuestion.name:"custom"},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().locStrsChanged()},t.prototype.localeChanged=function(){r.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().localeChanged()},t.prototype.getDefaultTitle=function(){return this.locQuestionTitle.isEmpty?r.prototype.getDefaultTitle.call(this):this.getProcessedText(this.locQuestionTitle.textOrHtml)},t.prototype.addUsedLocales=function(e){r.prototype.addUsedLocales.call(this,e),this.getElement()&&this.getElement().addUsedLocales(e)},t.prototype.needResponsiveWidth=function(){var e=this.getElement();return e?e.needResponsiveWidth():!1},t.prototype.createWrapper=function(){},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,e,n)},t.prototype.itemValuePropertyChanged=function(e,i,n,o){r.prototype.itemValuePropertyChanged.call(this,e,i,n,o),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,e,e.ownerPropertyName,i,o)},t.prototype.onFirstRenderingCore=function(){r.prototype.onFirstRenderingCore.call(this);var e=this.getElement();e&&e.onFirstRendering()},t.prototype.onHidingContent=function(){r.prototype.onHidingContent.call(this);var e=this.getElement();e&&e.onHidingContent()},t.prototype.getProgressInfo=function(){var e=r.prototype.getProgressInfo.call(this);return this.getElement()&&(e=this.getElement().getProgressInfo()),this.isRequired&&e.requiredQuestionCount==0&&(e.requiredQuestionCount=1,this.isEmpty()||(e.answeredQuestionCount=1)),e},t.prototype.initElement=function(e){e&&e.setSurveyImpl(this)},t.prototype.setSurveyImpl=function(e,i){this.isSettingValOnLoading=!0,r.prototype.setSurveyImpl.call(this,e,i),this.initElement(this.getElement()),this.isSettingValOnLoading=!1},t.prototype.onCustomQuestionLoaded=function(){!this.isLoadedCalled&&this.customQuestion&&this.survey&&(this.customQuestion.onLoaded(this),this.isLoadedCalled=!0)},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.isLoadedCalled=!1,this.getElement()&&this.getElement().onSurveyLoad(),this.onCustomQuestionLoaded()},t.prototype.setSurveyCore=function(e){r.prototype.setSurveyCore.call(this,e),this.isLoadedCalled===!1&&e&&this.onCustomQuestionLoaded()},t.prototype.afterRenderQuestionElement=function(e){},t.prototype.afterRenderCore=function(e){r.prototype.afterRenderCore.call(this,e),this.customQuestion&&this.customQuestion.onAfterRender(this,e)},t.prototype.onUpdateQuestionCssClasses=function(e,i){this.customQuestion&&this.customQuestion.onUpdateQuestionCssClasses(this,e,i)},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),r.prototype.setQuestionValue.call(this,e,i),this.updateElementCss(),this.customQuestion&&this.customQuestion.onSetQuestionValue(this,e)},t.prototype.setNewValue=function(e){r.prototype.setNewValue.call(this,e),this.updateElementCss()},t.prototype.onCheckForErrors=function(e,i,n){if(r.prototype.onCheckForErrors.call(this,e,i,n),this.customQuestion){var o=this.customQuestion.onGetErrorText(this);o&&e.push(new ce(o,this))}},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getValue=function(e){return this.value},t.prototype.setValue=function(e,i,n,o){if(this.data){this.customQuestion&&this.customQuestion.onValueChanged(this,e,i);var s=this.convertDataName(e),a=this.convertDataValue(e,i);this.valueToDataCallback&&(a=this.valueToDataCallback(a)),this.data.setValue(s,a,n,o),this.updateIsAnswered(),this.updateElementCss()}},t.prototype.getQuestionByName=function(e){},t.prototype.isValueChanging=function(e,i){if(this.customQuestion){var n=i;if(i=this.customQuestion.onValueChanging(this,e,i),!w.isTwoValueEquals(i,n)){var o=this.getQuestionByName(e);if(o)return o.value=i,!0}}return!1},t.prototype.convertDataName=function(e){return this.getValueName()},t.prototype.convertDataValue=function(e,i){return i},t.prototype.getComment=function(e){return this.data?this.data.getComment(this.getValueName()):""},t.prototype.setComment=function(e,i,n){this.data&&this.data.setComment(this.getValueName(),i,n)},t.prototype.getFilteredProperties=function(){return this.data?this.data.getFilteredProperties():{}},t.prototype.findQuestionByName=function(e){return this.data?this.data.findQuestionByName(e):null},t.prototype.addElement=function(e,i){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getQuestionErrorLocation=function(){return this.getErrorLocation()},t.prototype.getContentAriaHidden=function(){return this.isDesignMode||r.prototype.getContentAriaHidden.call(this)},t.prototype.getContentDisplayValueCore=function(e,i,n){return n?this.customQuestion.getDisplayValue(e,i,n):r.prototype.getDisplayValueCore.call(this,e,i)},t})(ie),eo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getTemplate=function(){return"custom"},t.prototype.getDynamicProperties=function(){return this.customQuestion.getDynamicProperties()||[]},t.prototype.getDynamicType=function(){return this.questionWrapper?this.questionWrapper.getType():"question"},t.prototype.getOriginalObj=function(){return this.questionWrapper},t.prototype.getOriginalByProperty=function(e){var i,n,o=(n=(i=this.customQuestion)===null||i===void 0?void 0:i.json)===null||n===void 0?void 0:n.inheritBaseProps,s=o===!0||Array.isArray(o)&&o.indexOf(e)>-1;return!s&&V.findProperty("question",e)?this:r.prototype.getOriginalByProperty.call(this,e)},t.prototype.createWrapper=function(){var e=this;this.questionWrapper=this.createQuestion(),this.createDynamicProperties(this.questionWrapper),this.getDynamicProperties().length>0&&(this.questionWrapper.onPropertyValueChangedCallback=function(i,n,o,s,a){var l=e.getDynamicProperty(i);l&&e.propertyValueChanged(i,n,o,a)})},t.prototype.getDynamicProperty=function(e){for(var i=this.getDynamicProperties(),n=0;n<i.length;n++)if(i[n].name===e)return i[n];return null},t.prototype.getElement=function(){return this.contentQuestion},t.prototype.supportAutoAdvance=function(){return!!this.contentQuestion&&this.contentQuestion.supportAutoAdvance()},t.prototype.onAnyValueChanged=function(e,i){r.prototype.onAnyValueChanged.call(this,e,i),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(e,i)},t.prototype.getQuestionByName=function(e){return this.contentQuestion},t.prototype.getDefaultTitle=function(){return this.hasJSONTitle&&this.contentQuestion?this.getProcessedText(this.contentQuestion.title):r.prototype.getDefaultTitle.call(this)},t.prototype.setValue=function(e,i,n,o){this.isValueChanging(e,i)||r.prototype.setValue.call(this,e,i,n,o)},t.prototype.updateCommentFromSurvey=function(e){r.prototype.updateCommentFromSurvey.call(this,e);var i=this.contentQuestion;i&&i.updateCommentFromSurvey(e)},Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){var e;return(e=this.contentQuestion)===null||e===void 0?void 0:e.requireUpdateCommentValue},enumerable:!1,configurable:!0}),t.prototype.onSetData=function(){r.prototype.onSetData.call(this),this.survey&&!this.isEmpty()&&this.setValue(this.name,this.value,!1,this.allowNotifyValueChanged)},t.prototype.validateElementCore=function(e){if(!this.contentQuestion)return!0;var i=this.contentQuestion.validateElement(e);this.errors=[];for(var n=0;n<this.contentQuestion.errors.length;n++)this.errors.push(this.contentQuestion.errors[n]);return i=i&&r.prototype.validateElementCore.call(this,e),this.updateElementCss(),i},t.prototype.focus=function(e){e===void 0&&(e=!1),this.contentQuestion?this.contentQuestion.focus(e):r.prototype.focus.call(this,e)},t.prototype.afterRenderCore=function(e){r.prototype.afterRenderCore.call(this,e),this.contentQuestion&&this.contentQuestion.afterRender(e)},Object.defineProperty(t.prototype,"contentQuestion",{get:function(){return this.questionWrapper},enumerable:!1,configurable:!0}),t.prototype.createQuestion=function(){var e=this,i=this.customQuestion.json,n=null;if(i.questionJSON){this.hasJSONTitle=!!i.questionJSON.title;var o=i.questionJSON.type;if(!o||!V.findClass(o))throw"type attribute in questionJSON is empty or incorrect";n=V.createClass(o),n.fromJSON(i.questionJSON),n=this.checkCreatedQuestion(n)}else i.createQuestion&&(n=this.checkCreatedQuestion(i.createQuestion()));return this.initElement(n),n&&(n.isContentElement=!0,n.name||(n.name="question"),n.onUpdateCssClassesCallback=function(s){e.onUpdateQuestionCssClasses(n,s)},n.hasCssErrorCallback=function(){return e.errors.length>0},n.setValueChangedDirectlyCallback=function(s){e.setValueChangedDirectly(s)}),n},t.prototype.checkCreatedQuestion=function(e){return e&&(e.isQuestion||(Array.isArray(e.questions)&&e.questions.length>0?e=e.questions[0]:e=V.createClass("text"),Ee.error("Could not create component: '"+this.getType()+"'. questionJSON should be a question.")),e)},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.getContentQuestionValue())},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.contentQuestion&&this.contentQuestion.runCondition(e)},t.prototype.convertDataName=function(e){var i=this.contentQuestion;if(!i||e===this.getValueName())return r.prototype.convertDataName.call(this,e);var n=e.replace(i.getValueName(),this.getValueName());return n.indexOf(this.getValueName())==0?n:r.prototype.convertDataName.call(this,e)},t.prototype.convertDataValue=function(e,i){return this.convertDataName(e)==r.prototype.convertDataName.call(this,e)?this.getContentQuestionValue():i},t.prototype.getContentQuestionValue=function(){if(this.contentQuestion){var e=this.contentQuestion.value;return this.customQuestion&&(e=this.customQuestion.getValueFromQuestion(e)),e}},t.prototype.setContentQuestionValue=function(e){this.contentQuestion&&(this.customQuestion&&(e=this.customQuestion.setValueToQuestion(e)),this.contentQuestion.value=e)},t.prototype.canSetValueToSurvey=function(){return!1},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),r.prototype.setQuestionValue.call(this,e,i),!this.isLoadingFromJson&&this.contentQuestion&&!this.isTwoValueEquals(this.getContentQuestionValue(),e)&&this.setContentQuestionValue(this.getUnbindValue(e))},t.prototype.onSurveyValueChanged=function(e){r.prototype.onSurveyValueChanged.call(this,e),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(e)},t.prototype.getValueCore=function(){return this.contentQuestion?this.getContentQuestionValue():r.prototype.getValueCore.call(this)},t.prototype.setValueChangedDirectly=function(e){this.isSettingValueChanged||(this.isSettingValueChanged=!0,r.prototype.setValueChangedDirectly.call(this,e),this.contentQuestion&&this.contentQuestion.setValueChangedDirectly(e),this.isSettingValueChanged=!1)},t.prototype.createDynamicProperties=function(e){if(e){var i=this.getDynamicProperties();Array.isArray(i)&&V.addDynamicPropertiesIntoObj(this,e,i)}},t.prototype.initElement=function(e){var i=this;r.prototype.initElement.call(this,e),e&&(e.parent=this,e.afterRenderQuestionCallback=function(n,o){i.customQuestion&&i.customQuestion.onAfterRenderContentElement(i,n,o)},e.onGetNoCallback=function(n){return i.no})},t.prototype.updateElementCss=function(e){this.contentQuestion&&this.questionWrapper.updateElementCss(e),r.prototype.updateElementCss.call(this,e)},t.prototype.setIsMobile=function(e){r.prototype.setIsMobile.call(this,e),this.contentQuestion&&this.contentQuestion.setIsMobile(e)},t.prototype.updateElementCssCore=function(e){r.prototype.updateElementCssCore.call(this,this.getCssClasses())},t.prototype.getCssClasses=function(){return this.contentQuestion?this.contentQuestion.cssClasses:r.prototype.getCssClasses.call(this)},t.prototype.getDisplayValueCore=function(e,i){return r.prototype.getContentDisplayValueCore.call(this,e,i,this.contentQuestion)},t})(Zr),Ml=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.question=e,i}return t.prototype.getObj=function(){return this.question},t.prototype.getValue=function(e){var i=this.question,n=e.path;if(n.length>0&&(n.length>1||!e.isRoot)){var o=n[0].name===C.expressionVariables.composite;return o&&n.shift(),e.isRoot=!1,e.isProperty?new Oe(i.contentPanel).getValue(e):new ji(i.contentPanel.questions).getValue(e)}return{isFound:!1}},t})(Wt),to=(function(r){P(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.customQuestion=i,n.settingNewValue=!1,n.textProcessing=new yt(n),n}return t.prototype.createWrapper=function(){this.panelWrapper=this.createPanel()},t.prototype.getTemplate=function(){return"composite"},t.prototype.getElement=function(){return this.contentPanel},t.prototype.getCssRoot=function(e){return new I().append(r.prototype.getCssRoot.call(this,e)).append(e.composite).toString()},Object.defineProperty(t.prototype,"contentPanel",{get:function(){return this.panelWrapper},enumerable:!1,configurable:!0}),t.prototype.validateElementCore=function(e){var i=r.prototype.validateElementCore.call(this,e),n=this.contentPanel;return n?n.validateElement(e)&&i:i},t.prototype.updateElementCss=function(e){r.prototype.updateElementCss.call(this,e),this.contentPanel&&this.contentPanel.updateElementCss(e)},t.prototype.dispose=function(){this.unConnectEditingObj(),r.prototype.dispose.call(this)},t.prototype.updateEditingObj=function(){var e=this,i=this.survey;i&&typeof i.getEditingSurveyElement!="function"&&(i=null);var n=i?.getEditingSurveyElement();if(n){var o=n[this.getValueName()];return o&&!o.onPropertyChanged&&(o=void 0),o!==this.editingObjValue&&(this.unConnectEditingObj(),this.editingObjValue=o,o&&(this.onEditingObjPropertyChanged=function(s,a){e.setNewValueIntoQuestion(a.name,e.editingObjValue[a.name])},o.onPropertyChanged.add(this.onEditingObjPropertyChanged))),this.editingObjValue}},t.prototype.unConnectEditingObj=function(){this.editingObjValue&&!this.editingObjValue.isDisposed&&this.editingObjValue.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getTextProcessor=function(){return this.textProcessing},t.prototype.findQuestionByName=function(e){var i=this.getQuestionByName(e);return i||r.prototype.findQuestionByName.call(this,e)},t.prototype.clearValueIfInvisibleCore=function(e){r.prototype.clearValueIfInvisibleCore.call(this,e);for(var i=this.contentPanel.questions,n=0;n<i.length;n++)i[n].clearValueIfInvisible(e)},t.prototype.onAnyValueChanged=function(e,i){r.prototype.onAnyValueChanged.call(this,e,i);for(var n=this.contentPanel.questions,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,i)},Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.createPanel=function(){var e=this,i=V.createClass("panel");i.showQuestionNumbers="off",i.renderWidth="100%";var n=this.customQuestion.json;return n.elementsJSON&&i.fromJSON({elements:n.elementsJSON}),n.createElements&&n.createElements(i,this),this.initElement(i),this.setIsContentElement(i),i.readOnly=this.isReadOnly,i.onGetNoCallback=function(o){return e.no},i.questions.forEach(function(o){o.setParentQuestion(e),o.onUpdateCssClassesCallback=function(s){e.onUpdateQuestionCssClasses(o,s)}}),this.setAfterRenderCallbacks(i),i},t.prototype.getHasTitleOnCalcNo=function(){var e=r.prototype.getHasTitleOnCalcNo.call(this);return this.customQuestion?this.customQuestion.getNumberQuestionsWithHiddenTitle(e):e},t.prototype.onReadOnlyChanged=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),r.prototype.onReadOnlyChanged.call(this)},t.prototype.updateValueFromSurvey=function(e,i){i===void 0&&(i=!1),this.updateEditingObj(),r.prototype.updateValueFromSurvey.call(this,e,i)},t.prototype.onSurveyLoad=function(){if(this.isSettingValOnLoading=!0,this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),r.prototype.onSurveyLoad.call(this),this.contentPanel){var e=this.getContentPanelValue();w.isValueEmpty(e)||(this.value=e)}this.isSettingValOnLoading=!1},t.prototype.setIsContentElement=function(e){e.isContentElement=!0;for(var i=e.elements,n=0;n<i.length;n++){var o=i[n];o.isPanel?this.setIsContentElement(o):o.isContentElement=!0}},t.prototype.setVisibleIndex=function(e){if(this.isVisibleIndexNegative(e))return r.prototype.setVisibleIndex.call(this,-1);var i=r.prototype.setVisibleIndex.call(this,e);return this.isVisible&&this.contentPanel&&(i+=this.contentPanel.setVisibleIndex(e+1)),i},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.contentPanel&&this.contentPanel.runCondition(e)},t.prototype.onSurveyValueChanged=function(e){r.prototype.onSurveyValueChanged.call(this,e);var i=e||{};this.contentPanel&&this.contentPanel.questions.forEach(function(n){n.onSurveyValueChanged(i[n.getValueName()])})},t.prototype.getValue=function(e){var i=this.value;return i?i[e]:null},t.prototype.getQuestionByName=function(e){return this.contentPanel?this.contentPanel.getQuestionByName(e):void 0},t.prototype.setValue=function(e,i,n,o){if(this.settingNewValue){this.setNewValueIntoQuestion(e,i);return}if(!this.isValueChanging(e,i)){if(this.settingNewValue=!0,!this.isEditingSurveyElement&&this.contentPanel)for(var s=0,a=this.contentPanel.questions.length+1;s<a&&this.updateValueCoreWithPanelValue();)s++;this.setNewValueIntoQuestion(e,i),r.prototype.setValue.call(this,e,i,n,o),this.settingNewValue=!1,this.runPanelTriggers(C.expressionVariables.composite+"."+e,i),this.isEditingSurveyElement&&this.runCondition(this.getFilteredProperties())}},t.prototype.setComment=function(e,i){var n=this.getUnbindValue(this.value),o=this.getCommentName(e);if(!(!n&&!i||i&&n&&n[o]===i)){i?(n||(n={}),n[o]=i):delete n[o];var s=this.getQuestionByName(e);s&&s.comment!==i&&(s.comment=i),this.settingNewValue||(this.value=n)}},t.prototype.getComment=function(e){var i=this.getQuestionByName(e);if(i)return i.comment;var n=this.value;return!!n&&n[this.getCommentName(e)]||""},t.prototype.getCommentName=function(e){return e+C.commentSuffix},t.prototype.runPanelTriggers=function(e,i){this.contentPanel&&this.contentPanel.questions.forEach(function(n){n.runTriggers(e,i)})},t.prototype.updateValueCoreWithPanelValue=function(){var e=this.getContentPanelValue();return this.isTwoValueEquals(this.getValueCore(),e)?!1:(this.setValueCore(e),!0)},t.prototype.getContentPanelValue=function(e){return e||(e=this.contentPanel.getValue()),this.customQuestion.setValueToQuestion(e)},t.prototype.getValueForContentPanel=function(e){return this.customQuestion.getValueFromQuestion(e)},t.prototype.setNewValueIntoQuestion=function(e,i){var n=this.getQuestionByName(e);n&&!this.isTwoValueEquals(i,n.value)&&(n.value=i)},t.prototype.addConditionObjectsByContext=function(e,i){if(this.contentPanel)for(var n=this.contentPanel.questions,o=this.name,s=this.title,a=0;a<n.length;a++)e.push({name:o+"."+n[a].name,text:s+"."+n[a].title,question:n[a]})},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){this.contentPanel&&(o&&e.push(this),this.contentPanel.questions.forEach(function(s){return s.addNestedQuestion(e,i,n,o)}))},t.prototype.convertDataValue=function(e,i){var n=this.contentPanel&&!this.isEditingSurveyElement?this.contentPanel.getValue():this.getValueForContentPanel(this.value);return n||(n={}),n.getType||(n=w.getUnbindValue(n)),this.isValueEmpty(i)&&!this.isEditingSurveyElement?delete n[e]:n[e]=i,this.getContentPanelValue(n)},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),this.setValuesIntoQuestions(e),!this.isEditingSurveyElement&&this.contentPanel&&(e=this.getContentPanelValue()),r.prototype.setQuestionValue.call(this,e,i)},t.prototype.setValuesIntoQuestions=function(e){if(!(!this.contentPanel||this.settingNewValue)){e=this.getValueForContentPanel(e);var i=this.settingNewValue;this.settingNewValue=!0;for(var n=this.contentPanel.questions,o=0;o<n.length;o++){var s=n[o],a=s.getValueName(),l=this.getCommentName(a),u=e?e[a]:void 0,f=!!e&&e[l]||"";!this.isTwoValueEquals(s.value,u)&&(u!==void 0||!s.isEmpty())&&(s.value=u),s.comment!==f&&(s.comment=f)}this.settingNewValue=i}},t.prototype.getValueGetterContext=function(){return new Ml(this)},t.prototype.getDisplayValueCore=function(e,i){return r.prototype.getContentDisplayValueCore.call(this,e,i,this.contentPanel)},t.prototype.setAfterRenderCallbacks=function(e){var i=this;if(!(!e||!this.customQuestion))for(var n=e.questions,o=0;o<n.length;o++)n[o].afterRenderQuestionCallback=function(s,a){i.customQuestion.onAfterRenderContentElement(i,s,a)}},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(e){r.prototype.setIsMobile.call(this,e),this.contentPanel&&this.contentPanel.questions.forEach(function(i){i.setIsMobile(e)})},t})(Zr),K=(function(){function r(){}return Object.defineProperty(r,"DefaultChoices",{get:function(){var t=te("choices_Item");return[t+"1",t+"2",t+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"DefaultColums",{get:function(){var t=te("matrix_column")+" ";return[t+"1",t+"2",t+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"DefaultRows",{get:function(){var t=te("matrix_row")+" ";return[t+"1",t+"2"]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"DefaultMutlipleTextItems",{get:function(){var t=te("multipletext_itemname");return[t+"1",t+"2"]},enumerable:!1,configurable:!0}),r.prototype.registerQuestion=function(t,e,i){i===void 0&&(i=!0),De.Instance.registerElement(t,e,i)},r.prototype.registerCustomQuestion=function(t){De.Instance.registerCustomQuestion(t)},r.prototype.unregisterElement=function(t,e){e===void 0&&(e=!1),De.Instance.unregisterElement(t,e)},r.prototype.clear=function(){De.Instance.clear()},r.prototype.getAllTypes=function(){return De.Instance.getAllTypes()},r.prototype.createQuestion=function(t,e){return De.Instance.createElement(t,e)},r.Instance=new r,r})(),De=(function(){function r(){var t=this;this.creatorHash={},this.registerCustomQuestion=function(e,i){i===void 0&&(i=!0);var n=function(o){var s=V.createClass(e);return s&&(s.name=o),s};t.registerElement(e,n,i)}}return r.prototype.registerElement=function(t,e,i){i===void 0&&(i=!0),this.creatorHash[t]={showInToolbox:i,creator:e}},r.prototype.clear=function(){this.creatorHash={}},r.prototype.unregisterElement=function(t,e){e===void 0&&(e=!1),delete this.creatorHash[t],e&&V.removeClass(t)},r.prototype.getAllToolboxTypes=function(){return this.getAllTypesCore(!0)},r.prototype.getAllTypes=function(){return this.getAllTypesCore(!1)},r.prototype.createElement=function(t,e){var i=this.creatorHash[t];if(i&&i.creator)return i.creator(e);var n=Gt.Instance.getCustomQuestionByName(t);return n?Gt.Instance.createQuestion(e,n):null},r.prototype.getAllTypesCore=function(t){var e=new Array;for(var i in this.creatorHash)(!t||this.creatorHash[i].showInToolbox)&&e.push(i);return e.sort()},r.Instance=new r,r})(),Ui=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["format","currency","displayStyle"];o.indexOf(e)>-1&&this.updateFormatedValue()},t.prototype.getType=function(){return"expression"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.isExecutionLocked=!0},t.prototype.unlocCalculation=function(){this.isExecutionLocked=!1},t.prototype.runConditionCore=function(e){var i=this;r.prototype.runConditionCore.call(this,e),!(this.isExecutionLocked||!this.runIfReadOnly&&this.isReadOnly)&&this.runExpressionByProperty("expression",e,function(n){i.value=i.roundValue(n)})},t.prototype.canCollectErrors=function(){return!0},t.prototype.hasRequiredError=function(){return!1},Object.defineProperty(t.prototype,"runIfReadOnly",{get:function(){return this.runIfReadOnlyValue===!0},set:function(e){this.runIfReadOnlyValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatedValue",{get:function(){return this.getPropertyValue("formatedValue","")},enumerable:!1,configurable:!0}),t.prototype.updateFormatedValue=function(){this.setPropertyValue("formatedValue",this.getDisplayValueCore(!1,this.value))},t.prototype.onValueChanged=function(){this.updateFormatedValue()},t.prototype.updateValueFromSurvey=function(e,i){r.prototype.updateValueFromSurvey.call(this,e,i),this.updateFormatedValue()},t.prototype.getDisplayValueCore=function(e,i){var n=i??this.defaultValue,o="";if(!this.isValueEmpty(n)){var s=this.getValueAsStr(n);o=this.format?this.format.format(s):s}return this.survey&&(o=this.survey.getExpressionDisplayValue(this,n,o)),o},t.prototype.roundValue=function(e){if(e!==1/0)return this.precision<0||!w.isNumber(e)?e:parseFloat(e.toFixed(this.precision))},t.prototype.getValueAsStr=function(e){if(this.displayStyle=="date"){var i=ne("question-expression",e);if(i&&i.toLocaleDateString)return i.toLocaleDateString()}if(this.displayStyle!="none"&&w.isNumber(e)){var n=this.getLocale();n||(n="en");var o={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(o.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(o.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(n,o)}return e.toString()},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"presentation"},enumerable:!1,configurable:!0}),c([p({localizable:!0})],t.prototype,"format",void 0),c([p()],t.prototype,"expression",void 0),c([p({onSetting:function(e){return e<-1?-1:e>20?20:e}})],t.prototype,"maximumFractionDigits",void 0),c([p({onSetting:function(e){return e<-1?-1:e>20?20:e}})],t.prototype,"minimumFractionDigits",void 0),c([p()],t.prototype,"displayStyle",void 0),c([p({onSetting:function(e,i){return Jt().indexOf(e)<0?i.currency:e}})],t.prototype,"currency",void 0),c([p()],t.prototype,"useGrouping",void 0),c([p()],t.prototype,"precision",void 0),t})(ie);function Jt(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]}function io(r,t,e){var i=e?t:r;return r==-1||t==-1?i:r>t?e?r:t:i}V.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:function(){return Jt()},default:"USD",visibleIf:function(r){return r.displayStyle==="currency"}},{name:"maximumFractionDigits:number",onSettingValue:function(r,t){return io(r.minimumFractionDigits,t,!0)},default:-1},{name:"minimumFractionDigits:number",onSettingValue:function(r,t){return io(t,r.maximumFractionDigits,!1)},default:-1},{name:"useGrouping:boolean",default:!0},{name:"precision:number",default:-1},{name:"enableIf",visible:!1,isSerializable:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"readOnly",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1,isSerializable:!1},{name:"resetValueIf",visible:!1,isSerializable:!1},{name:"setValueIf",visible:!1,isSerializable:!1},{name:"setValueExpression",visible:!1,isSerializable:!1},{name:"defaultValueExpression",visible:!1,isSerializable:!1},{name:"defaultValue",visible:!1,isSerializable:!1},{name:"correctAnswer",visible:!1,isSerializable:!1},{name:"requiredIf",visible:!1,isSerializable:!1}],function(){return new Ui("")},"question"),K.Instance.registerQuestion("expression",function(r){return new Ui(r)});var Fl=(function(){function r(t){this.column=t}return r.prototype.getObj=function(){return this.column},r.prototype.getValue=function(t){var e=t.path,i=e.length>0?e[0].name.toLocaleLowerCase():"",n=C.expressionVariables,o=[n.self,n.column].indexOf(i)>-1;if(t.isProperty&&e.length>1&&o)return t.path=e.slice(1),new Oe(this.column).getValue(t);if(e.length===1&&["name","item"].indexOf(i)>-1)return{isFound:!0,value:this.column.name};if(this.column.isDesignMode){var s=this.column.getDesignRowContext();if(s)return s.getValue(t)}},r.prototype.getRootObj=function(){return this.column.colOwner},r})();function $t(r,t,e,i){r.storeOthersAsComment=e?e.storeOthersAsComment:!1,(!r.choices||r.choices.length==0)&&r.isChoicesUrlEmpty&&(r.choices=e.choices),r.isChoicesUrlEmpty||r.choicesByUrl.run(i.getTextProcessor())}function Nl(r,t,e,i){$t(r,t,e,i),r.locPlaceholder&&r.locPlaceholder.isEmpty&&!e.locPlaceholder.isEmpty&&(r.placeholder=e.placeholder)}var Wi={dropdown:{onCellQuestionUpdate:function(r,t,e,i){Nl(r,t,e,i)}},checkbox:{onCellQuestionUpdate:function(r,t,e,i){$t(r,t,e,i),r.colCount=t.colCount>-1?t.colCount:e.columnColCount}},radiogroup:{onCellQuestionUpdate:function(r,t,e,i){$t(r,t,e,i),r.colCount=t.colCount>-1?t.colCount:e.columnColCount}},tagbox:{onCellQuestionUpdate:function(r,t,e,i){$t(r,t,e,i)}},text:{},comment:{},boolean:{onCellQuestionUpdate:function(r,t,e,i){r.renderAs=t.renderAs}},expression:{},rating:{},slider:{}},mt=(function(r){P(t,r);function t(e,i,n){var o=r.call(this)||this;return o.indexValue=-1,o._hasVisibleCell=!0,o.isColumnsVisibleIf=!0,o.previousChoicesId=void 0,o.colOwnerValue=n,o.updateTemplateQuestion(void 0,e,i),o}return t.getColumnTypes=function(){var e=[];for(var i in Wi)e.push(i);return e},t.prototype.onPropertyValueChanged=function(e,i,n){if(r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="showInMultipleColumns"&&this.doShowInMultipleColumnsChanged(),e==="visible"&&this.doColumnVisibilityChanged(),e==="isRequired"&&this.updateIsRenderedRequired(n),!(!this.colOwner||this.isLoadingFromJson)){if(this.isShowInMultipleColumns){if(e==="choicesOrder")return;["visibleChoices","choices"].indexOf(e)>-1&&this.colOwner.onShowInMultipleColumnsChanged(this)}V.hasOriginalProperty(this,e)&&this.colOwner.onColumnPropertyChanged(this,e,n)}},t.prototype.getOriginalObj=function(){return this.templateQuestion},t.prototype.getClassNameProperty=function(){return"cellType"},t.prototype.getSurvey=function(e){return this.colOwner?this.colOwner.survey:null},t.prototype.getOwner=function(){return this.colOwner},t.prototype.endLoadingFromJson=function(){var e=this;r.prototype.endLoadingFromJson.call(this),this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns,this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=function(){return e.getSurvey()}},t.prototype.getDynamicPropertyName=function(){return"cellType"},t.prototype.getDynamicType=function(){return this.cellType==="default"?"question":this.calcCellQuestionType(null)},Object.defineProperty(t.prototype,"colOwner",{get:function(){return this.colOwnerValue},set:function(e){this.colOwnerValue=e,e&&(this.updateTemplateQuestion(),this.setParentQuestionToTemplate(this.templateQuestion))},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new Fl(this)},t.prototype.getDesignRowContext=function(){var e;return(e=this.colOwner)===null||e===void 0?void 0:e.getDesignRowContext()},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.locTitle.strChanged()},t.prototype.addUsedLocales=function(e){r.prototype.addUsedLocales.call(this,e),this.templateQuestion.addUsedLocales(e)},Object.defineProperty(t.prototype,"index",{get:function(){return this.indexValue},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e){this.indexValue=e},t.prototype.getType=function(){return"matrixdropdowncolumn"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.validators,!0)},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){e=e.toLocaleLowerCase(),this.updateTemplateQuestion(e),this.setPropertyValue("cellType",e),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestion",{get:function(){return this.templateQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.templateQuestion.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isColumnVisible",{get:function(){return this.areInvisibleElementsShowing?!0:this.visible&&this.hasVisibleCell},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){var e;return(e=this.getSurvey())===null||e===void 0?void 0:e.areInvisibleElementsShowing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.templateQuestion.visible},set:function(e){this.templateQuestion.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVisibleCell",{get:function(){return this._hasVisibleCell},set:function(e){this._hasVisibleCell=e},enumerable:!1,configurable:!0}),t.prototype.getVisibleMultipleChoices=function(){var e=this.templateQuestion.visibleChoices;if(!Array.isArray(e))return[];if(!Array.isArray(this._visiblechoices))return e;for(var i=new Array,n=0;n<e.length;n++){var o=e[n];this._visiblechoices.indexOf(o.value)>-1&&i.push(o)}return i},Object.defineProperty(t.prototype,"getVisibleChoicesInCell",{get:function(){if(Array.isArray(this._visiblechoices))return this._visiblechoices;var e=this.templateQuestion.visibleChoices;return Array.isArray(e)?e:[]},enumerable:!1,configurable:!0}),t.prototype.setVisibleChoicesInCell=function(e){this._visiblechoices=e},Object.defineProperty(t.prototype,"isFilteredMultipleColumns",{get:function(){if(!this.showInMultipleColumns)return!1;var e=this.templateQuestion.choices;if(!Array.isArray(e))return!1;for(var i=0;i<e.length;i++)if(e[i].visibleIf)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.templateQuestion.name},set:function(e){this.templateQuestion.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.templateQuestion.title},set:function(e){this.templateQuestion.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.templateQuestion.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultDisplayValue",{get:function(){return this.templateQuestion.defaultDisplayValue},set:function(e){this.templateQuestion.defaultDisplayValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDefaultDisplayValue",{get:function(){return this.templateQuestion.locDefaultDisplayValue},enumerable:!1,configurable:!0}),t.prototype.updateIsRenderedRequired=function(e){this.isRenderedRequired=e||this.isRequired},Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.isRenderedRequired&&this.getSurvey()?this.getSurvey().requiredMark:this.templateQuestion.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.templateQuestion.requiredErrorText},set:function(e){this.templateQuestion.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.templateQuestion.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.templateQuestion.readOnly},set:function(e){this.templateQuestion.readOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOtherItem",{get:function(){return this.templateQuestion.showOtherItem},set:function(e){this.templateQuestion.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.templateQuestion.visibleIf},set:function(e){this.templateQuestion.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.templateQuestion.enableIf},set:function(e){this.templateQuestion.enableIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.templateQuestion.requiredIf},set:function(e){this.templateQuestion.requiredIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetValueIf",{get:function(){return this.templateQuestion.resetValueIf},set:function(e){this.templateQuestion.resetValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.templateQuestion.defaultValueExpression},set:function(e){this.templateQuestion.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueIf",{get:function(){return this.templateQuestion.setValueIf},set:function(e){this.templateQuestion.setValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueExpression",{get:function(){return this.templateQuestion.setValueExpression},set:function(e){this.templateQuestion.setValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupportMultipleColumns",{get:function(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowInMultipleColumns",{get:function(){return this.showInMultipleColumns&&this.isSupportMultipleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.templateQuestion.validators},set:function(e){this.templateQuestion.validators=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTotal",{get:function(){return this.totalType!="none"||!!this.totalExpression},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.templateQuestion.width},set:function(e){this.templateQuestion.width=e},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.colOwner?this.colOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.colOwner?this.colOwner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e){return this.colOwner?this.colOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.colOwner?this.colOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.colOwner?this.colOwner.getProcessedText(e,this):e},t.prototype.createCellQuestion=function(e){var i=this.calcCellQuestionType(e),n=this.createNewQuestion(i);return this.callOnCellQuestionUpdate(n,e),n},t.prototype.startLoadingFromJson=function(e){r.prototype.startLoadingFromJson.call(this,e),e&&!e.cellType&&e.choices&&(e.cellType=this.colOwner.getCellType())},t.prototype.updateCellQuestion=function(e,i,n){n===void 0&&(n=null),this.setQuestionProperties(e,n)},t.prototype.callOnCellQuestionUpdate=function(e,i){var n=e.getType(),o=Wi[n];o&&o.onCellQuestionUpdate&&o.onCellQuestionUpdate(e,this,this.colOwner,i)},t.prototype.defaultCellTypeChanged=function(){this.updateTemplateQuestion()},t.prototype.calcCellQuestionType=function(e){var i=this.getDefaultCellQuestionType();return e&&this.colOwner&&(i=this.colOwner.getCustomCellType(this,e,i)),i},t.prototype.getDefaultCellQuestionType=function(e){return e||(e=this.cellType),e!=="default"?e:this.colOwner?this.colOwner.getCellType():C.matrix.defaultCellType},t.prototype.updateTemplateQuestion=function(e,i,n){var o=this,s=this.getDefaultCellQuestionType(e),a=this.templateQuestion?this.templateQuestion.getType():"";s!==a&&(this.templateQuestion&&this.removeProperties(a),this.templateQuestionValue=this.createNewQuestion(s),this.templateQuestion.locOwner=this,this.addProperties(s),i&&(this.name=i),n?this.title=n:this.templateQuestion.locTitle.strChanged(),C.serialization.matrixDropdownColumnSerializeTitle&&(this.templateQuestion.locTitle.serializeCallBackText=!0),this.templateQuestion.onPropertyChanged.add(function(l,u){o.propertyValueChanged(u.name,u.oldValue,u.newValue,u.arrayChanges,u.target)}),this.templateQuestion.onNestedPropertyChanged.add(function(l,u){o.colOwner&&!o.isLoadingFromJson&&o.colOwner.onColumnNestedPropertyChanged(o,u.name,u.nestedName,u.newValue)}),this.templateQuestion.onItemValuePropertyChanged.add(function(l,u){o.doItemValuePropertyChanged(u.propertyName,u.obj,u.name,u.newValue,u.oldValue)}),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=function(){return o.getSurvey()}),this.templateQuestion.locTitle.strChanged())},t.prototype.createNewQuestion=function(e){var i=V.createClass(e);return i||(i=V.createClass("text")),i.loadingOwner=this,i.isEditableTemplateElement=!0,i.autoOtherMode=this.isShowInMultipleColumns,this.setQuestionProperties(i),this.setParentQuestionToTemplate(i),i},t.prototype.setParentQuestionToTemplate=function(e){this.colOwner&&this.colOwner.isQuestion&&e.setParentQuestion(this.colOwner)},t.prototype.setQuestionProperties=function(e,i){var n=this;if(i===void 0&&(i=null),this.templateQuestion){var o=new le().toJsonObject(this.templateQuestion,!0);if(i&&i(o),o.type=e.getType(),this.cellType==="default"&&this.colOwner&&this.colOwner.hasChoices()&&delete o.choices,delete o.itemComponent,this.jsonObj&&o.type==="rating"&&this.isLoadingFromJson&&Object.keys(this.jsonObj).forEach(function(a){o[a]=n.jsonObj[a]}),o.choicesOrder==="random"){o.choicesOrder="none";var s=this.templateQuestion.visibleChoices;Array.isArray(s)&&(o.choices=s)}new le().toObject(o,e),e.isContentElement=this.templateQuestion.isContentElement,this.previousChoicesId=void 0,e.loadedChoicesFromServerCallback=function(){if(n.isShowInMultipleColumns&&!(n.previousChoicesId&&n.previousChoicesId!==e.id)){n.previousChoicesId=e.id;var a=e.visibleChoices;n.templateQuestion.choices=a,n.propertyValueChanged("choices",a,a)}}}},t.prototype.doItemValuePropertyChanged=function(e,i,n,o,s){V.hasOriginalProperty(i,n)&&this.colOwner!=null&&!this.isLoadingFromJson&&this.colOwner.onColumnItemValuePropertyChanged(this,e,i,n,o,s)},t.prototype.doShowInMultipleColumnsChanged=function(){this.colOwner!=null&&this.colOwner.onShowInMultipleColumnsChanged(this),this.templateQuestion&&(this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns)},t.prototype.doColumnVisibilityChanged=function(){this.colOwner!=null&&!this.isDesignMode&&this.colOwner.onColumnVisibilityChanged(this)},t.prototype.getProperties=function(e){return V.getDynamicPropertiesByObj(this,e)},t.prototype.removeProperties=function(e){for(var i=this.getProperties(e),n=0;n<i.length;n++){var o=i[n];delete this[o.name],o.serializationProperty&&delete this[o.serializationProperty]}},t.prototype.addProperties=function(e){var i=this.getProperties(e);V.addDynamicPropertiesIntoObj(this,this.templateQuestion,i)},c([p({onSet:function(e,i){return i.templateQuestion.isRequired=e}})],t.prototype,"isRequired",void 0),c([p({getDefaultValue:function(e){return e.isRequired}})],t.prototype,"isRenderedRequired",void 0),c([p()],t.prototype,"isUnique",void 0),c([p()],t.prototype,"showInMultipleColumns",void 0),c([p()],t.prototype,"totalType",void 0),c([p()],t.prototype,"totalExpression",void 0),c([p({localizable:!0})],t.prototype,"totalFormat",void 0),c([p({localizable:!0})],t.prototype,"cellHint",void 0),c([p({onSet:function(e,i){return i.templateQuestion.renderAs=e}})],t.prototype,"renderAs",void 0),c([p({onSetting:function(e){return e<-1?-1:e>20?20:e}})],t.prototype,"totalMaximumFractionDigits",void 0),c([p({onSetting:function(e){return e<-1?-1:e>20?20:e}})],t.prototype,"totalMinimumFractionDigits",void 0),c([p()],t.prototype,"totalDisplayStyle",void 0),c([p()],t.prototype,"totalAlignment",void 0),c([p({onSetting:function(e,i){return Jt().indexOf(e)<0?i.totalCurrency:e}})],t.prototype,"totalCurrency",void 0),c([p({defaultValue:""})],t.prototype,"minWidth",void 0),c([p({onSetting:function(e){return e<-1||e>4?-1:e}})],t.prototype,"colCount",void 0),t})(U);V.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle",dependsOn:"name",onPropertyEditorUpdate:function(r,t){r&&t&&(t.placeholder=r.locTitle.getPlaceholder())}},{name:"cellHint",serializationProperty:"locCellHint",visible:!1},{name:"cellType",default:"default",choices:function(){var r=mt.getColumnTypes();return r.splice(0,0,"default"),r}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},{name:"isRequired:boolean",defaultFunc:function(r){var t=r?.templateQuestion;return t&&V.findProperty(t.getType(),"isRequired").getDefaultValue(t)||!1}},"isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean",{name:"minWidth",onPropertyEditorUpdate:function(r,t){r&&t&&(t.value=r.minWidth)}},"width",{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression",{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:function(r){return r.isSupportMultipleColumns}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",visibleIf:function(r){return!r.isShowInMultipleColumns},default:"none",choices:["none","sum","count","min","max","avg"]},{name:"totalExpression:expression",visibleIf:function(r){return!r.isShowInMultipleColumns}},{name:"totalFormat",serializationProperty:"locTotalFormat",visibleIf:function(r){return r.hasTotal}},{name:"totalDisplayStyle",visibleIf:function(r){return r.hasTotal},default:"none",choices:["none","decimal","currency","percent"]},{name:"totalAlignment",visibleIf:function(r){return r.hasTotal},default:"auto",choices:["auto","left","center","right"]},{name:"totalCurrency",visibleIf:function(r){return r.hasTotal},choices:function(){return Jt()},default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1,visibleIf:function(r){return r.hasTotal}},{name:"totalMinimumFractionDigits:number",default:-1,visibleIf:function(r){return r.hasTotal}},{name:"renderAs",default:"default",visible:!1},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}],function(){return new mt("")});function no(r,t,e){return r+(t?"-error":"")+(e?"-detail":"")}var Se=(function(){function r(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.isErrorsCell=!1,this.isDragHandlerCell=!1,this.isDetailRowCell=!1,this.classNameValue="",this.idValue=r.counter++}return Object.defineProperty(r.prototype,"requiredMark",{get:function(){return this.column&&this.column.isRenderedRequired?this.column.requiredMark:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasQuestion",{get:function(){return!!this.question&&!this.isErrorsCell},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasTitle",{get:function(){return!!this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasPanel",{get:function(){return!!this.panel},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){var t=this.question?this.question.id:this.idValue.toString();return this.isChoice&&(t+="-"+(Number.isInteger(this.choiceIndex)?"index"+this.choiceIndex.toString():this.item.id)),no(t,this.isErrorsCell,this.isDetailRowCell)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"item",{get:function(){return this.itemValue},set:function(t){this.itemValue=t,t&&(t.hideCaption=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isChoice",{get:function(){return!!this.item},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isItemChoice",{get:function(){return this.isChoice&&!this.isOtherChoice},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"choiceValue",{get:function(){return this.isChoice?this.item.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCheckbox",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("checkbox")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRadio",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("radiogroup")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isFirstChoice",{get:function(){return this.choiceIndex===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){var t=new I().append(this.classNameValue);return this.hasQuestion&&t.append(this.question.cssClasses.hasError,this.question.errors.length>0).append(this.question.cssClasses.answered,this.question.isAnswered),t.toString()},set:function(t){this.classNameValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cellQuestionWrapperClassName",{get:function(){return this.cell.getQuestionWrapperClassName(this.matrix.cssClasses.cellQuestionWrapper)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isVisible",{get:function(){var t;return!this.hasQuestion&&!this.isErrorsCell||!(!((t=this.matrix)===null||t===void 0)&&t.isMobile)||this.question.isVisible},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showResponsiveTitle",{get:function(){var t;return this.hasQuestion&&((t=this.matrix)===null||t===void 0?void 0:t.isMobile)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"responsiveTitleCss",{get:function(){return new I().append(this.matrix.cssClasses.cellResponsiveTitle).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"responsiveLocTitle",{get:function(){return this.cell.column.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headers",{get:function(){if(this.cell&&this.cell.column){if(this.matrix.IsMultiplyColumn(this.cell.column))return this.item?this.item.locText.renderedHtml:"";var t=this.cell.column.cellHint;return t?t.trim()===""?"":this.cell.column.locCellHint.renderedHtml:this.hasQuestion&&this.question.isVisible&&this.question.title?this.question.title:this.cell.column.title}return this.hasQuestion&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""},enumerable:!1,configurable:!0}),r.prototype.getTitle=function(){return this.matrix&&this.matrix.showHeader?this.headers:""},r.prototype.calculateFinalClassName=function(t){var e=this.cell.question.cssClasses,i=new I().append(e.itemValue,!!e).append(e.asCell,!!e);return i.append(t.cell,i.isEmpty()&&!!t).append(t.choiceCell,this.isChoice).toString()},r.prototype.focusIn=function(){this.question&&this.question.focusIn()},r.counter=1,r})(),Kt=(function(r){P(t,r);function t(e,i){i===void 0&&(i=!1);var n=r.call(this)||this;return n.cssClasses=e,n.isDetailRow=i,n.hasEndActions=!1,n.isErrorsRow=!1,n.cells=[],n}return Object.defineProperty(t.prototype,"id",{get:function(){var e;return no(((e=this.row)===null||e===void 0?void 0:e.id)||this.uniqueId.toString(),this.isErrorsRow,this.isDetailRow)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropTargetId",{get:function(){var e;return(e=this.row)===null||e===void 0?void 0:e.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.row?{"data-sv-drop-target-matrix-row":this.row.id}:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){var e,i;return new I().append(this.cssClasses.row).append(this.cssClasses.detailRow,this.isDetailRow).append(this.cssClasses.rowHasPanel,(e=this.row)===null||e===void 0?void 0:e.hasPanel).append(this.cssClasses.expandedRow,((i=this.row)===null||i===void 0?void 0:i.isDetailPanelShowing)&&!this.isDetailRow).append(this.cssClasses.rowHasEndActions,this.hasEndActions).append(this.cssClasses.ghostRow,this.isGhostRow).append(this.cssClasses.rowAdditional,this.isAdditionalClasses).toString()},enumerable:!1,configurable:!0}),t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},t.prototype.focusCell=function(e){if(this.rootElement){var i=":scope td:nth-of-type(".concat(e+1,") input, :scope td:nth-of-type(").concat(e+1,") button"),n=this.rootElement.querySelectorAll(i)[0];n&&n.focus()}},c([p({defaultValue:!1})],t.prototype,"isGhostRow",void 0),c([p({defaultValue:!1})],t.prototype,"isAdditionalClasses",void 0),c([p({defaultValue:!0})],t.prototype,"visible",void 0),t})(U),ro=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isErrorsRow=!0,i}return Object.defineProperty(t.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return new I().append(this.cssClasses.row).append(this.cssClasses.errorRow).toString()},enumerable:!1,configurable:!0}),t.prototype.onAfterCreated=function(){var e=this,i=function(){e.visible=e.cells.some(function(n){return n.question&&n.question.hasVisibleErrors})};this.cells.forEach(function(n){n.question&&n.question.registerFunctionOnPropertyValueChanged("hasVisibleErrors",i)}),i()},t})(Kt),kl=(function(r){P(t,r);function t(e,i){var n=r.call(this,e)||this;return n.customId=i,n.isErrorsRow=!1,n}return Object.defineProperty(t.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropTargetId",{get:function(){return this.customId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return new I().append(this.cssClasses.row).append(this.cssClasses.rowEmpty).toString()},enumerable:!1,configurable:!0}),t})(Kt),Gi=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.matrix=e,i._renderedRows=[],i.renderedRowsAnimation=new Ae(i.getRenderedRowsAnimationOptions(),function(n){i._renderedRows=n},function(){return i._renderedRows}),i.hasActionCellInRowsValues={},i.build(),i}return t.prototype.getIsAnimationAllowed=function(){return r.prototype.getIsAnimationAllowed.call(this)&&this.matrix.animationAllowed},t.prototype.getRenderedRowsAnimationOptions=function(){var e=this,i=function(o){o.querySelectorAll(":scope > td > *").forEach(function(s){Ve(s)})},n=function(o){o.querySelectorAll(":scope > td > *").forEach(function(s){he(s)})};return{isAnimationEnabled:function(){return e.animationAllowed},getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(o){return o.getRootElement()},getLeaveOptions:function(){return{cssClass:e.cssClasses.rowLeave,onBeforeRunAnimation:i,onAfterRunAnimation:n}},getEnterOptions:function(o,s){return{cssClass:e.cssClasses.rowEnter,onBeforeRunAnimation:i,onAfterRunAnimation:n}},getKey:function(o){return o.id}}},t.prototype.updateRenderedRows=function(){this.renderedRows=this.rows},Object.defineProperty(t.prototype,"renderedRows",{get:function(){return this._renderedRows},set:function(e){this.renderedRowsAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapperDropTargetId",{get:function(){var e;return(e=this.renderedRows[this.renderedRows.length-1])===null||e===void 0?void 0:e.dropTargetId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTable",{get:function(){return this.getPropertyValue("showTable",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRow",{get:function(){return this.getPropertyValue("showAddRow",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnTop",{get:function(){return this.getPropertyValue("showAddRowOnTop",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnBottom",{get:function(){return this.getPropertyValue("showAddRowOnBottom",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFooter",{get:function(){return!!this.footerRow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRemoveRows",{get:function(){return this.hasRemoveRowsValue},enumerable:!1,configurable:!0}),t.prototype.isRequireReset=function(){return this.isRequireResetValue||this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal},t.prototype.requireReset=function(){this.isRequireResetValue=!0},Object.defineProperty(t.prototype,"headerRow",{get:function(){return this.headerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerRow",{get:function(){return this.footerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.matrix.isRowsDragAndDrop&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsTop",{get:function(){return this.matrix.getErrorLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsBottom",{get:function(){return this.matrix.getErrorLocation()==="bottom"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()},t.prototype.updateShowTableAndAddRow=function(){var e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);var i=this.matrix.isDesignMode,n=!i&&this.matrix.canAddRow&&e,o=n,s=n;o&&(this.matrix.getAddRowLocation()==="default"?o=!this.matrix.isColumnLayoutHorizontal:o=this.matrix.getAddRowLocation()!=="bottom"),s&&this.matrix.getAddRowLocation()!=="topBottom"&&(s=!o),this.setPropertyValue("showAddRow",!i&&this.matrix.canAddRow),this.setPropertyValue("showAddRowOnTop",o),this.setPropertyValue("showAddRowOnBottom",s)},t.prototype.onAddedRow=function(e,i){if(!(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)){var n=this.getRenderedRowIndexByIndex(i);this.rowsActions.splice(i,0,this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,n),this.updateShowTableAndAddRow()}},t.prototype.getRenderedRowIndexByIndex=function(e){for(var i=0,n=0,o=0;o<this.rows.length;o++){if(n===e){(this.rows[o].isErrorsRow||this.rows[o].isDetailRow)&&(i++,o+1<this.rows.length&&this.rows[o+1].isDetailRow&&i++);break}i++,!this.rows[o].isErrorsRow&&!this.rows[o].isDetailRow&&n++}return n<e?this.rows.length:i},t.prototype.getRenderedDataRowCount=function(){for(var e=0,i=0;i<this.rows.length;i++)!this.rows[i].isErrorsRow&&!this.rows[i].isDetailRow&&e++;return e},t.prototype.onRemovedRow=function(e){var i=this.getRenderedRowIndex(e);if(!(i<0)){this.rowsActions.splice(i,1);var n=1;i<this.rows.length-1&&this.showCellErrorsBottom&&this.rows[i+1].isErrorsRow&&n++,i<this.rows.length-1&&(this.rows[i+1].isDetailRow||this.showCellErrorsBottom&&i+1<this.rows.length-1&&this.rows[i+2].isDetailRow)&&n++,i>0&&this.showCellErrorsTop&&this.rows[i-1].isErrorsRow&&(i--,n++),this.rows.splice(i,n),this.updateShowTableAndAddRow()}},t.prototype.onDetailPanelChangeVisibility=function(e,i){var n=this.getRenderedRowIndex(e);if(!(n<0)){var o=n;this.showCellErrorsBottom&&o++;var s=o<this.rows.length-1&&this.rows[o+1].isDetailRow?o+1:-1;if(!(i&&s>-1||!i&&s<0))if(i){var a=this.createDetailPanelRow(e,this.rows[n]);this.rows.splice(o+1,0,a)}else this.rows.splice(s,1)}},t.prototype.focusActionCell=function(e,i){var n=this.rows[this.rows.length-1];if(this.matrix.isColumnLayoutHorizontal){var o=this.getRenderedRowIndex(e);n=this.rows[o]}n?.focusCell(i)},t.prototype.getRenderedRowIndex=function(e){for(var i=0;i<this.rows.length;i++)if(this.rows[i].row==e)return i;return-1},t.prototype.buildRowsActions=function(){this.rowsActions=[];for(var e=this.matrix.visibleRows,i=0;i<e.length;i++)this.rowsActions.push(this.buildRowActions(e[i]))},t.prototype.createRenderedRow=function(e,i){return i===void 0&&(i=!1),new Kt(e,i)},t.prototype.createErrorRenderedRow=function(e){return new ro(e)},t.prototype.createEmptyRenderedRow=function(e){return new kl(e,this.matrix.id)},t.prototype.buildHeader=function(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader,i=e||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",i),!!i){if(this.headerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.headerRow.cells.push(this.createHeaderCell(null,"action",this.cssClasses.actionsCellDrag)),this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var n=0;n<this.matrix.columns.length;n++){var o=this.matrix.columns[n];o.isColumnVisible&&(this.matrix.IsMultiplyColumn(o)?this.createMutlipleColumnsHeader(o):this.headerRow.cells.push(this.createHeaderCell(o)))}else{for(var s=this.matrix.visibleRows,n=0;n<s.length;n++){var a=this.createTextCell(s[n].locText);this.setHeaderCellCssClasses(a),a.row=s[n],this.headerRow.cells.push(a)}if(this.matrix.hasFooter){var a=this.createTextCell(this.matrix.getFooterText());this.setHeaderCellCssClasses(a),this.headerRow.cells.push(a)}}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildFooter=function(){if(this.showFooter){if(this.footerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.footerRow.cells.push(this.createHeaderCell(null)),this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText){var e=this.createTextCell(this.matrix.getFooterText());e.className=new I().append(e.className).append(this.cssClasses.footerTotalCell).toString(),this.footerRow.cells.push(e)}for(var i=this.matrix.visibleTotalRow.cells,n=0;n<i.length;n++){var o=i[n];if(o.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(o.column))this.createMutlipleColumnsFooter(this.footerRow,o);else{var s=this.createEditCell(o);o.column&&this.setCellWidth(o.column,s),s.className=new I().append(s.className).append(this.cssClasses.footerCell).toString(),this.footerRow.cells.push(s)}}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildRows=function(){this.blockAnimations();var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.rows=e,this.releaseAnimations()},t.prototype.hasActionCellInRows=function(e){return this.hasActionCellInRowsValues[e]===void 0&&(this.hasActionCellInRowsValues[e]=this.hasActionsCellInLocaltion(e)),this.hasActionCellInRowsValues[e]},t.prototype.hasActionsCellInLocaltion=function(e){var i=this;return e=="end"&&this.hasRemoveRows?!0:this.matrix.visibleRows.some(function(n,o){return!i.isValueEmpty(i.getRowActions(o,e))})},t.prototype.canRemoveRow=function(e){return this.matrix.canRemoveRow(e)},t.prototype.buildHorizontalRows=function(){var e=this.matrix.visibleRows,i=[];if(e.length==0&&this.matrix.allowRowReorder&&this.matrix.allowRowDragIn){var n=this.createEmptyRow(),o=this.createTextCell(this.matrix.locNoRowsText);o.colSpans=this.headerRow&&this.headerRow.cells.length||1,n.cells.push(o),i.push(n)}for(var s=0;s<e.length;s++)this.addHorizontalRow(i,e[s]);return i},t.prototype.addHorizontalRow=function(e,i,n){n===void 0&&(n=-1);var o=this.createHorizontalRow(i),s=this.createErrorRow(o);if(o.row=i,n<0&&(n=e.length),this.matrix.isMobile){for(var a=[],l=0;l<o.cells.length;l++)this.showCellErrorsTop&&!s.cells[l].isEmpty&&a.push(s.cells[l]),a.push(o.cells[l]),this.showCellErrorsBottom&&!s.cells[l].isEmpty&&a.push(s.cells[l]);o.cells=a,e.splice(n,0,o)}else e.splice.apply(e,z([n,0],this.showCellErrorsTop?[s,o]:[o,s],!1)),n++;i.isDetailPanelShowing&&e.splice(n+1,0,this.createDetailPanelRow(i,o))},t.prototype.getRowDragCell=function(e){var i=new Se,n=this.matrix.lockedRowCount;return i.isDragHandlerCell=n<1||e>=n,i.isEmpty=!i.isDragHandlerCell,i.className=this.getActionsCellClassName(i),i.row=this.matrix.visibleRows[e],i},t.prototype.getActionsCellClassName=function(e){var i=this;e===void 0&&(e=null);var n=new I().append(this.cssClasses.actionsCell).append(this.cssClasses.actionsCellDrag,e?.isDragHandlerCell).append(this.cssClasses.detailRowCell,e?.isDetailRowCell).append(this.cssClasses.verticalCell,!this.matrix.isColumnLayoutHorizontal);if(e.isActionsCell){var o=e.item.value.actions;this.cssClasses.actionsCellPrefix&&o.forEach(function(s){n.append(i.cssClasses.actionsCellPrefix+"--"+s.id)})}return n.toString()},t.prototype.getRowActionsCell=function(e,i,n){n===void 0&&(n=!1);var o=this.getRowActions(e,i);if(!this.isValueEmpty(o)){var s=new Se,a=this.matrix.allowAdaptiveActions?new Ft:new be;this.matrix.survey&&this.matrix.survey.getCss().actionBar&&(a.cssClasses=this.matrix.survey.getCss().actionBar),a.setItems(o);var l=new q(a);return s.item=l,s.isActionsCell=!0,s.isDragHandlerCell=!1,s.isDetailRowCell=n,s.className=this.getActionsCellClassName(s),s.row=this.matrix.visibleRows[e],s}return null},t.prototype.getRowActions=function(e,i){var n=this.rowsActions[e];return Array.isArray(n)?n.filter(function(o){return o.location||(o.location="start"),o.location===i}):[]},t.prototype.buildRowActions=function(e){var i=[];return this.setDefaultRowActions(e,i),this.matrix.survey&&(i=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,i)),i},Object.defineProperty(t.prototype,"showRemoveButtonAsIcon",{get:function(){return C.matrix.renderRemoveAsIcon&&this.matrix.survey&&this.matrix.survey.css.root==="sd-root-modern"},enumerable:!1,configurable:!0}),t.prototype.setDefaultRowActions=function(e,i){var n=this,o=this.matrix;this.hasRemoveRows&&this.canRemoveRow(e)&&(this.showRemoveButtonAsIcon?i.push(new G({id:"remove-row",css:"sv-action--remove-row",iconName:"icon-delete-24x24",iconSize:"auto",component:"sv-action-bar-item",innerCss:new I().append(this.matrix.cssClasses.button).append(this.matrix.cssClasses.buttonRemove).toString(),location:"end",showTitle:!1,title:o.removeRowText,enabled:!o.isInputReadOnly,data:{row:e,question:o},action:function(){o.removeRowUI(e)}})):i.push(new G({id:"remove-row",css:"sv-action--remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}}))),e.hasPanel&&(this.matrix.isMobile?i.unshift(new G({id:"show-detail-mobile",css:"sv-action--show-detail-mobile",title:new $(function(){return e.isDetailPanelShowing?n.matrix.getLocalizationString("hideDetails"):n.matrix.getLocalizationString("showDetails")}),showTitle:!0,location:"end",action:function(s){e.showHideDetailPanelClick()}})):i.push(new G({id:"show-detail",title:new $(function(){return e.isDetailPanelShowing?n.matrix.getLocalizationString("hideDetails"):n.matrix.getLocalizationString("showDetails")}),showTitle:!1,location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}})))},t.prototype.createErrorRow=function(e){for(var i=this.createErrorRenderedRow(this.cssClasses),n=0;n<e.cells.length;n++){var o=e.cells[n];o.hasQuestion?this.matrix.IsMultiplyColumn(o.cell.column)?o.isFirstChoice?i.cells.push(this.createErrorCell(o.cell)):i.cells.push(this.createEmptyCell(!0)):i.cells.push(this.createErrorCell(o.cell)):i.cells.push(this.createEmptyCell(!0))}return i.onAfterCreated(),i},t.prototype.createEmptyRow=function(){var e=this.createEmptyRenderedRow(this.cssClasses);return e},t.prototype.createHorizontalRow=function(e){var i=this.createRenderedRow(this.cssClasses);if(this.isRowsDragAndDrop){var n=this.matrix.visibleRows.indexOf(e);i.cells.push(this.getRowDragCell(n))}if(this.addRowActionsCell(e,i,"start"),this.matrix.hasRowText){var o=this.createTextCell(e.locText);o.row=e,i.cells.push(o),this.setCellWidth(null,o),o.className=new I().append(o.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell,!this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.detailRowText,e.hasPanel).toString()}for(var s=0;s<e.cells.length;s++){var a=e.cells[s];if(a.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(a.column))this.createMutlipleEditCells(i,a);else{a.column.isShowInMultipleColumns&&a.question.visibleChoices.map(function(u){return u.hideCaption=!1});var o=this.createEditCell(a);i.cells.push(o),this.setCellWidth(a.column,o)}}return this.addRowActionsCell(e,i,"end"),i},t.prototype.addRowActionsCell=function(e,i,n){var o=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(n)){var s=this.getRowActionsCell(o,n,i.isDetailRow);if(s)i.cells.push(s),i.hasEndActions=!0;else{var a=new Se;a.isEmpty=!0,a.isDetailRowCell=i.isDetailRow,i.cells.push(a)}}},t.prototype.createDetailPanelRow=function(e,i){var n=this.matrix.isDesignMode,o=this.createRenderedRow(this.cssClasses,!0);o.row=e;var s=new Se;this.matrix.hasRowText&&(s.colSpans=2),s.isEmpty=!0,n||o.cells.push(s);var a=null;this.hasActionCellInRows("end")&&(a=new Se,a.isEmpty=!0);var l=new Se;return l.panel=e.detailPanel,l.colSpans=i.cells.length-(n?0:s.colSpans)-(a?a.colSpans:0),l.className=this.cssClasses.detailPanelCell,o.cells.push(l),a&&(this.matrix.isMobile?this.addRowActionsCell(e,o,"end"):o.cells.push(a)),typeof this.matrix.onCreateDetailPanelRenderedRowCallback=="function"&&this.matrix.onCreateDetailPanelRenderedRowCallback(o),o},t.prototype.buildVerticalRows=function(){for(var e=this.matrix.columns,i=[],n=0;n<e.length;n++){var o=e[n];if(o.isColumnVisible)if(this.matrix.IsMultiplyColumn(o))this.createMutlipleVerticalRows(i,o,n);else{var s=this.createVerticalRow(o,n),a=this.createErrorRow(s);this.showCellErrorsTop?(i.push(a),i.push(s)):(i.push(s),i.push(a))}}return this.hasActionCellInRows("end")&&i.push(this.createEndVerticalActionRow()),i},t.prototype.createMutlipleVerticalRows=function(e,i,n){var o=this.getMultipleColumnChoices(i);if(o)for(var s=0;s<o.length;s++){var a=this.createVerticalRow(i,n,o[s],s),l=this.createErrorRow(a);this.showCellErrorsTop?(e.push(l),e.push(a)):(e.push(a),e.push(l))}},t.prototype.createVerticalRow=function(e,i,n,o){n===void 0&&(n=null),o===void 0&&(o=-1);var s=this.createRenderedRow(this.cssClasses);if(this.matrix.showHeader){var a=n?n.locText:e.locTitle,l=this.createTextCell(a);l.column=e,l.className=new I().append(l.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell).toString(),s.cells.push(l)}for(var u=this.matrix.visibleRows,f=0;f<u.length;f++){var y=n,b=o>=0?o:f,E=u[f].cells[i],S=n?E.question.visibleChoices:void 0;S&&b<S.length&&(y=S[b]);var O=this.createEditCell(E,y);O.item=y,O.choiceIndex=b,s.cells.push(O)}return this.matrix.hasTotal&&s.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[i])),s},t.prototype.createEndVerticalActionRow=function(){var e=this.createRenderedRow(this.cssClasses);this.matrix.showHeader&&e.cells.push(this.createEmptyCell());for(var i=this.matrix.visibleRows,n=0;n<i.length;n++)e.cells.push(this.getRowActionsCell(n,"end"));return this.matrix.hasTotal&&e.cells.push(this.createEmptyCell()),e},t.prototype.createMutlipleEditCells=function(e,i,n){n===void 0&&(n=!1);var o=n?this.getMultipleColumnChoices(i.column):i.question.visibleChoices;if(o)for(var s=0;s<o.length;s++){var a=this.createEditCell(i,n?void 0:o[s]);n||(this.setItemCellCssClasses(a),a.choiceIndex=s),e.cells.push(a)}},t.prototype.setItemCellCssClasses=function(e){e.className=new I().append(this.cssClasses.cell).append(this.cssClasses.itemCell).append(this.cssClasses.radioCell,e.isRadio).append(this.cssClasses.checkboxCell,e.isCheckbox).toString()},t.prototype.createEditCell=function(e,i){i===void 0&&(i=void 0);var n=new Se;return n.cell=e,n.row=e.row,n.column=e.column,n.question=e.question,n.matrix=this.matrix,n.item=i,n.isOtherChoice=!!i&&!!e.question&&e.question.otherItem===i,n.className=n.calculateFinalClassName(this.cssClasses),n},t.prototype.createErrorCell=function(e,i){var n=new Se;return n.question=e.question,n.row=e.row,n.matrix=this.matrix,n.isErrorsCell=!0,n.className=new I().append(this.cssClasses.cell).append(this.cssClasses.errorsCell).append(this.cssClasses.errorsCellTop,this.showCellErrorsTop).append(this.cssClasses.errorsCellBottom,this.showCellErrorsBottom).toString(),n},t.prototype.createMutlipleColumnsFooter=function(e,i){this.createMutlipleEditCells(e,i,!0)},t.prototype.createMutlipleColumnsHeader=function(e){var i=this.getMultipleColumnChoices(e);if(i)for(var n=0;n<i.length;n++){var o=this.createTextCell(i[n].locText);this.setHeaderCell(e,o),this.setHeaderCellCssClasses(o),this.headerRow.cells.push(o)}},t.prototype.getMultipleColumnChoices=function(e){var i=e.templateQuestion.choices;return i&&Array.isArray(i)&&i.length==0?[].concat(this.matrix.choices,e.getVisibleMultipleChoices()):(i=e.getVisibleMultipleChoices(),!i||!Array.isArray(i)?null:i)},t.prototype.setHeaderCellCssClasses=function(e,i,n){e.className=new I().append(this.cssClasses.headerCell).append(this.cssClasses.columnTitleCell,this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.emptyCell,!!e.isEmpty).append(this.cssClasses.cell+"--"+i,!!i).append(n,!!n).toString()},t.prototype.createHeaderCell=function(e,i,n){i===void 0&&(i=null);var o=e?this.createTextCell(e.locTitle):this.createEmptyCell();return o.column=e,this.setHeaderCell(e,o),i||(i=e&&e.cellType!=="default"?e.cellType:this.matrix.cellType),this.setHeaderCellCssClasses(o,i,n),o},t.prototype.setHeaderCell=function(e,i){this.setCellWidth(e,i)},t.prototype.setCellWidth=function(e,i){i.minWidth=e!=null?this.matrix.getColumnWidth(e):this.matrix.getRowTitleWidth(),i.width=e!=null?e.width:this.matrix.getRowTitleWidth()},t.prototype.createTextCell=function(e){var i=new Se;return i.locTitle=e,this.cssClasses.cell&&(i.className=this.cssClasses.cell),i},t.prototype.createEmptyCell=function(e){e===void 0&&(e=!1);var i=this.createTextCell(null);return i.isEmpty=!0,i.className=new I().append(this.cssClasses.cell).append(this.cssClasses.emptyCell).append(this.cssClasses.errorsCell,e).toString(),i},c([re({onPush:function(e,i,n){n.updateRenderedRows()},onRemove:function(e,i,n){n.updateRenderedRows()}})],t.prototype,"rows",void 0),c([re()],t.prototype,"_renderedRows",void 0),t})(U),Ji=(function(){function r(t,e,i){this.column=t,this.row=e,this.data=i,this.questionValue=this.createQuestion(t,e,i),this.questionValue.updateCustomWidget(),this.updateCellQuestionTitleDueToAccessebility(e)}return r.prototype.updateCellQuestionTitleDueToAccessebility=function(t){var e=this;this.questionValue.locTitle.onGetTextCallback=function(i){var n=t?.getSurvey();if(!n||n.isSingleVisibleInput)return e.questionValue.title;var o=t.getAccessbilityText();return o?e.column.colOwner.getCellAriaLabel(t,e.column,o):e.questionValue.title}},r.prototype.locStrsChanged=function(){this.question.locStrsChanged()},r.prototype.createQuestion=function(t,e,i){var n=this,o=i.createQuestion(this.row,this.column);return o.onFirstRendering(),o.readOnlyCallback=function(){return!n.row.isRowEnabled()},o.validateValueCallback=function(){return i.validateCell(e,t.name,e.value)},Ie.getProperties(t.getType()).forEach(function(s){var a=s.name;t[a]!==void 0&&(o[a]=t[a])}),o},Object.defineProperty(r.prototype,"question",{get:function(){return this.questionValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.question.value},set:function(t){this.question.value=t},enumerable:!1,configurable:!0}),r.prototype.getQuestionWrapperClassName=function(t){return t},r.prototype.runCondition=function(t){this.question.runCondition(t)},r})(),Bl=(function(r){P(t,r);function t(e,i,n){var o=r.call(this,e,i,n)||this;return o.column=e,o.row=i,o.data=n,o.updateCellQuestion(),o}return t.prototype.createQuestion=function(e,i,n){var o=V.createClass("expression");return o.setSurveyImpl(i),o},t.prototype.locStrsChanged=function(){this.updateCellQuestion(),r.prototype.locStrsChanged.call(this)},t.prototype.updateCellQuestion=function(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,function(e){delete e.defaultValue}),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0},t.prototype.getQuestionWrapperClassName=function(e){var i=r.prototype.getQuestionWrapperClassName.call(this,e);if(!i)return i;this.question.expression&&this.question.expression!="''"&&(i+=" "+e+"--expression");var n=this.column.totalAlignment;return n==="auto"&&this.column.cellType==="dropdown"&&(n="left"),i+" "+e+"--"+n},t.prototype.getTotalExpression=function(){if(this.column.totalExpression)return this.column.totalExpression;if(this.column.totalType=="none")return"''";var e=this.column.totalType+"InArray";return W.Instance.hasFunction(e)?e+"({matrix}, '"+this.column.name+"')":""},t})(Ji),_l=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.row=e,i}return t.prototype.getIndex=function(){return this.row.rowIndex-1},t.prototype.getQuestionData=function(){return this.row.data},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getQuestionData().visibleRows.indexOf(this.row)},enumerable:!1,configurable:!0}),t.prototype.getValue=function(e){var i=e.path;if(i.length!==0){var n=C.expressionVariables;if(i.length===1){var o=this.getRowValue(i[0].name);if(o!==void 0)return{isFound:!0,value:o};if(i[0].name===n.matrix){var s=this.row.data;return{isFound:!0,context:s.getValueGetterContext(),value:s.getFilteredData()}}}if(i.length>1){var a=i[0].name===n.prevRow?-1:i[0].name===n.nextRow?1:0;if(a!==0){var l=this.visibleIndex+a,s=this.getQuestionData();if(l<0||l>=s.visibleRows.length)return{isFound:!0,value:void 0,context:this};var u=s.visibleRows[l];return i[0].name=n.row,e.index=l,u.getValueGetterContext().getValue(e)}}if(i.length>1&&i[0].name===n.totalRow){var f=this.row.data.visibleTotalRow;if(f)return i[0].name="row",f.getValueGetterContext().getValue(e)}var y=i[0].name===n.row;if(y||!e.isRoot){y&&i.shift();var b=r.prototype.getValue.call(this,e);if(b&&b.isFound)return b;var E=this.row.getAllValues();return e.isRoot&&(b=this.getValueFromBindedQuestions(i,E),b)?b:new fe(E).getValue(e)}}},t.prototype.getRootObj=function(){return this.row.data},t.prototype.updateValueByItem=function(e,i){var n=this.row.getQuestionsByValueName(e,!0);n.length>0&&(i.isFound=!0,i.obj=n[0],i.context=n[0].getValueGetterContext())},t.prototype.getRowValue=function(e){var i=C.expressionVariables;if(e=e.toLocaleLowerCase(),e===i.rowIndex.toLocaleLowerCase())return this.row.rowIndex;if(e===i.visibleRowIndex.toLocaleLowerCase())return this.visibleIndex+1;if([i.item,i.rowName.toLocaleLowerCase(),i.rowValue.toLocaleLowerCase()].indexOf(e)>-1)return this.row.rowName;if(e==i.rowTitle.toLocaleLowerCase())return this.row.rowTitle},t})(Wr),vt=(function(){function r(t,e){var i=this;this.data=t,this.isSettingValue=!1,this.detailPanelValue=null,this.visibleValue=!0,this.cells=[],this.visibleIndex=-1,this.isCreatingDetailPanel=!1,this.data=t,this.subscribeToChanges(e),this.textPreProcessor=new yt(this),this.showHideDetailPanelClick=function(){if(i.getSurvey().isDesignMode)return!0;i.showHideDetailPanel()},this.idValue=r.getId()}return r.getId=function(){return"srow_"+r.idCounter++},Object.defineProperty(r.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rowName",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rowTitle",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataName",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),r.prototype.getValueGetterContext=function(){return new _l(this)},r.prototype.isRowEnabled=function(){return!0},r.prototype.isRowHasEnabledCondition=function(){return!1},Object.defineProperty(r.prototype,"isVisible",{get:function(){return this.visible&&this.isItemVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return this.visibleValue},set:function(t){var e;this.visible!==t&&(this.visibleValue=t,(e=this.data)===null||e===void 0||e.onRowVisibilityChanged(this))},enumerable:!1,configurable:!0}),r.prototype.isItemVisible=function(){return!0},Object.defineProperty(r.prototype,"value",{get:function(){return this.getValueCore(!1)},set:function(t){this.isSettingValue=!0,this.subscribeToChanges(t);for(var e=this.questions,i=0;i<e.length;i++){var n=e[i],o=this.getCellValue(t,n.getValueName()),s=n.comment,a=t?t[n.getValueName()+U.commentSuffix]:"";a==null&&(a=""),n.updateValueFromSurvey(o),(a||this.isTwoValueEquals(s,n.comment))&&n.updateCommentFromSurvey(a),n.onSurveyValueChanged(o)}this.isSettingValue=!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filteredValue",{get:function(){return this.getValueCore(!0)},enumerable:!1,configurable:!0}),r.prototype.getValueCore=function(t){for(var e={},i=this.questions,n=0;n<i.length;n++){var o=i[n];o.isEmpty()||(e[o.getValueName()]=t?o.getFilteredValue():o.value),o.comment&&this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(e[o.getValueName()+U.commentSuffix]=o.comment)}return e},Object.defineProperty(r.prototype,"locText",{get:function(){return null},enumerable:!1,configurable:!0}),r.prototype.getAccessbilityText=function(){return this.locText&&this.locText.renderedHtml},Object.defineProperty(r.prototype,"hasPanel",{get:function(){return this.data?this.data.hasDetailPanel(this):!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"detailPanelId",{get:function(){return this.detailPanel?this.detailPanel.id:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isDetailPanelShowing",{get:function(){return this.data?this.data.getIsDetailPanelShowing(this):!1},enumerable:!1,configurable:!0}),r.prototype.setIsDetailPanelShowing=function(t){!t&&this.detailPanel&&this.detailPanel.onHidingContent(),this.data&&this.data.setIsDetailPanelShowing(this,t),t&&this.detailPanel&&this.detailPanel.onFirstRendering(),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()},r.prototype.showHideDetailPanel=function(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()},r.prototype.showDetailPanel=function(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)},r.prototype.hideDetailPanel=function(t){t===void 0&&(t=!1),this.setIsDetailPanelShowing(!1),t&&(this.detailPanelValue=null)},r.prototype.ensureDetailPanel=function(){if(!this.isCreatingDetailPanel&&!(this.detailPanelValue||!this.hasPanel||!this.data)){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var t=this.detailPanelValue.questions,e=this.getDataRowValue();if(!w.isValueEmpty(e))for(var i=0;i<t.length;i++){var n=t[i].getValueName(),o=this.editingObj?V.getObjPropertyValue(this.editingObj,n):e[n];w.isValueEmpty(o)||(t[i].value=o)}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}},r.prototype.getAllValues=function(){var t=this.value;if(this.data){var e=this.getDataRowValue();if(e)for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t},r.prototype.getFilteredProperties=function(){return{survey:this.getSurvey(),row:this}},r.prototype.getDataRowValue=function(){return this.data?this.data.getRowValue(this.data.getRowIndex(this)):null},r.prototype.runCondition=function(t,e,i){if(this.data){var n=w.createCopy(t);n[C.expressionVariables.row]=this,this.visible=i===!0||this.getRowVisibleIfBaseOnExpression(t,e),this.runRowsEnableCondition(n);for(var o=0;o<this.cells.length;o++)this.cells[o].runCondition(n);this.detailPanel&&this.detailPanel.runCondition(n),this.isRowHasEnabledCondition()&&this.onQuestionReadOnlyChanged()}},r.prototype.runRowsEnableCondition=function(t){},r.prototype.getRowsVisibleIfExpression=function(t){return t?[t]:[]},r.prototype.getRowVisibleIfBaseOnExpression=function(t,e){for(var i=this.getRowsVisibleIfExpression(e),n=!0,o=0;o<i.length&&(n=new ge(i[o]).runContext(this.getValueGetterContext(),t),!!n);o++);return n},r.prototype.updateElementVisibility=function(){this.cells.forEach(function(t){return t.question.updateElementVisibility()}),this.detailPanel&&this.detailPanel.updateElementVisibility()},r.prototype.getNamesWithDefaultValues=function(){var t=[];return this.questions.forEach(function(e){e.isValueDefault&&t.push(e.getValueName())}),t},r.prototype.clearValue=function(t,e){for(var i=this.questions,n=0;n<i.length;n++)i[n].clearValue(t,e)},r.prototype.onAnyValueChanged=function(t,e){for(var i=this.questions,n=0;n<i.length;n++)i[n].onAnyValueChanged(t,e)},r.prototype.getDataValueCore=function(t,e){var i=this.getSurvey();return i?i.getDataValueCore(t,e):t[e]},r.prototype.getValue=function(t){var e=this.getQuestionByName(t);return e?e.value:null},r.prototype.setValue=function(t,e){this.setValueCore(t,e,!1)},r.prototype.getComment=function(t){var e=this.getQuestionByName(t);return e?e.comment:""},r.prototype.setComment=function(t,e,i){this.setValueCore(t,e,!0)},r.prototype.findQuestionByName=function(t){if(t){var e=C.expressionVariables.row+".";if(t.indexOf(e)===0)return this.getQuestionByName(t.substring(e.length));var i=this.getSurvey();return i?i.getQuestionByName(t):null}},r.prototype.setValueCore=function(t,e,i){if(!(this.isSettingValue||this.isCreatingDetailPanel)){this.updateQuestionsValue(t,e,i),i||this.updateSharedQuestionsValue(t,e);var n=this.value,o=i?t+U.commentSuffix:t,s=e,a=this.getQuestionByName(t),l=this.data.onRowChanging(this,o,n);if(a&&!this.isTwoValueEquals(l,s)&&(this.isSettingValue=!0,i?a.comment=l:a.value=l,this.isSettingValue=!1,n=this.value),!(this.data.isValidateOnValueChanging&&!this.validateCellQuestion(a))){var u=e==null&&!a||i&&!e&&!!a;this.data.onRowChanged(this,o,n,u);var f=C.expressionVariables.row;if(o){var y=f+"."+o;this.runTriggers(y,n),this.data.runTriggersInRow(this,y,n)}this.onAnyValueChanged(f,"")}}},r.prototype.updateQuestionsValue=function(t,e,i){if(this.detailPanel){var n=this.getQuestionByColumnName(t),o=this.detailPanel.getQuestionByName(t);if(!(!n||!o)){var s=this.isTwoValueEquals(e,i?n.comment:n.value),a=s?o:n;this.isSettingValue=!0,i?a.comment=e:a.value=e,this.isSettingValue=!1}}},r.prototype.updateSharedQuestionsValue=function(t,e){var i=this.getQuestionsByValueName(t);if(i.length>1)for(var n=0;n<i.length;n++)w.isTwoValueEquals(i[n].value,e)||(this.isSettingValue=!0,i[n].updateValueFromSurvey(e),this.isSettingValue=!1)},r.prototype.runTriggers=function(t,e,i){!t&&!i||this.questions.forEach(function(n){return n.runTriggers(t,e,i)})},r.prototype.validateCellQuestion=function(t){if(!t)return!0;if(!t.validateElement(new Ze({fireCallback:!0,isOnValueChanged:!this.data.isValidateOnValueChanging})))return!1;if(t.isEmpty())return!0;var e=this.getCellByColumnName(t.name);return!e||!e.column||!e.column.isUnique?!0:!this.data.checkIfValueInRowDuplicated(this,t)},Object.defineProperty(r.prototype,"isEmpty",{get:function(){var t=this.value;if(w.isValueEmpty(t))return!0;for(var e in t)if(t[e]!==void 0&&t[e]!==null)return!1;return!0},enumerable:!1,configurable:!0}),r.prototype.hasValueAnyQuestion=function(t){for(var e=t?this.visibleQuestions:this.questions,i=0;i<e.length;i++)if(!e[i].isEmpty())return!0;return!1},r.prototype.getQuestionByColumn=function(t){var e=this.getCellByColumn(t);return e?e.question:null},r.prototype.getCellByColumn=function(t){for(var e=0;e<this.cells.length;e++)if(this.cells[e].column==t)return this.cells[e];return null},r.prototype.getCellByColumnName=function(t){for(var e=0;e<this.cells.length;e++)if(this.cells[e].column.name==t)return this.cells[e];return null},r.prototype.getQuestionByColumnName=function(t){var e=this.getCellByColumnName(t);return e?e.question:null},Object.defineProperty(r.prototype,"questions",{get:function(){for(var t=[],e=0;e<this.cells.length;e++)t.push(this.cells[e].question);for(var i=this.detailPanel?this.detailPanel.questions:[],e=0;e<i.length;e++)t.push(i[e]);return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visibleQuestions",{get:function(){var t=[];return this.questions.forEach(function(e){e.isVisible&&t.push(e)}),t},enumerable:!1,configurable:!0}),r.prototype.getQuestionByName=function(t){var e=this.getQuestionByColumnName(t);return e||(this.detailPanel?this.detailPanel.getQuestionByName(t):null)},r.prototype.getQuestionsByName=function(t){var e=[],i=this.getQuestionByColumnName(t);return i&&e.push(i),this.detailPanel&&(i=this.detailPanel.getQuestionByName(t),i&&e.push(i)),e},r.prototype.getQuestionsByValueName=function(t,e){e&&(t=t.toLocaleLowerCase());for(var i=[],n=0;n<this.cells.length;n++){var o=this.cells[n],s=o.question;if(s){var a=s.getValueName();e&&(a=a.toLocaleLowerCase()),a===t&&i.push(o.question)}}return this.detailPanel&&(i=i.concat(this.detailPanel.getQuestionsByValueName(t,e))),i},r.prototype.getSharedQuestionByName=function(t){return this.data?this.data.getSharedQuestionByName(t,this):null},r.prototype.clearIncorrectValues=function(t){for(var e in t){var i=this.getQuestionByName(e);if(i){var n=i.value;i.clearIncorrectValues(),this.isTwoValueEquals(n,i.value)||this.setValue(e,i.value)}else!this.getSharedQuestionByName(e)&&e.indexOf(C.matrix.totalsSuffix)<0&&this.setValue(e,null)}},r.prototype.getLocale=function(){return this.data?this.data.getLocale():""},r.prototype.getMarkdownHtml=function(t,e,i){return this.data?this.data.getMarkdownHtml(t,e,i):void 0},r.prototype.getRenderer=function(t){return this.data?this.data.getRenderer(t):null},r.prototype.getRendererContext=function(t){return this.data?this.data.getRendererContext(t):t},r.prototype.getProcessedText=function(t){return this.data?this.data.getProcessedText(t,this):t},r.prototype.locStrsChanged=function(){for(var t=0;t<this.cells.length;t++)this.cells[t].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()},r.prototype.updateCellQuestionOnColumnChanged=function(t,e,i){var n=this.getCellByColumn(t);n&&this.updateCellOnColumnChanged(n,e,i)},r.prototype.updateCellQuestionOnColumnItemValueChanged=function(t,e,i,n,o,s){var a=this.getCellByColumn(t);a&&this.updateCellOnColumnItemValueChanged(a,e,i,n,o,s)},r.prototype.onQuestionReadOnlyChanged=function(){for(var t=this.questions,e=0;e<t.length;e++){var i=t[e];i.setPropertyValue("isReadOnly",i.isReadOnly)}if(this.detailPanel){var n=!!this.data&&this.data.isMatrixReadOnly();this.detailPanel.readOnly=n||!this.isRowEnabled()}},r.prototype.validate=function(t){var e=!0,i=this.cells;if(!i)return e;for(var n=0;n<i.length;n++)if(i[n]){var o=i[n].question;!o||!o.isVisible||t&&t.isOnValueChanged===!0&&o.isEmpty()||(e=o.validateElement(t)&&e)}if(this.hasPanel){this.ensureDetailPanel();var s=this.detailPanel.validateElement(t),a=t;!a.hideErroredPanel&&!s&&t.fireCallback&&(a.isSingleDetailPanel&&(a.hideErroredPanel=!0),this.showDetailPanel()),e=s&&e}return e},r.prototype.updateCellOnColumnChanged=function(t,e,i){e==="choices"&&Array.isArray(i)&&i.length===0&&this.data&&(i=this.data.choices),t.question[e]=i},r.prototype.updateCellOnColumnItemValueChanged=function(t,e,i,n,o,s){var a=t.question[e];if(Array.isArray(a)){var l=n==="value"?s:i.value,u=q.getItemByValue(a,l);u&&(u[n]=o)}},r.prototype.buildCells=function(t){this.isSettingValue=!0;for(var e=this.data.columns,i=0;i<e.length;i++){var n=e[i],o=this.createCell(n);this.cells.push(o);var s=this.getCellValue(t,n.name);if(!w.isValueEmpty(s)){o.question.value=s;var a=n.name+U.commentSuffix;t&&!w.isValueEmpty(t[a])&&(o.question.comment=t[a])}}this.isSettingValue=!1},r.prototype.isTwoValueEquals=function(t,e){return w.isTwoValueEquals(t,e,!1,!0,!1)},r.prototype.getCellValue=function(t,e){return this.editingObj?V.getObjPropertyValue(this.editingObj,e):t?t[e]:void 0},r.prototype.createCell=function(t){return new Ji(t,this,this.data)},r.prototype.getSurveyData=function(){return this},r.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},r.prototype.getTextProcessor=function(){return this.textPreProcessor},Object.defineProperty(r.prototype,"rowIndex",{get:function(){return this.getRowIndex()},enumerable:!1,configurable:!0}),r.prototype.getRowIndex=function(){return this.data?this.data.getRowIndex(this)+1:-1},Object.defineProperty(r.prototype,"editingObj",{get:function(){return this.editingObjValue},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)},r.prototype.subscribeToChanges=function(t){var e=this;!t||!t.getType||!t.onPropertyChanged||t!==this.editingObj&&(this.editingObjValue=t,this.onEditingObjPropertyChanged=function(i,n){e.updateOnSetValue(n.name,n.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))},r.prototype.updateOnSetValue=function(t,e){this.isSettingValue=!0;for(var i=this.getQuestionsByName(t),n=0;n<i.length;n++)i[n].value=e;this.isSettingValue=!1},r.idCounter=1,r})(),$i=(function(r){P(t,r);function t(e){var i=r.call(this,e,null)||this;return i.buildCells(null),i}return t.prototype.createCell=function(e){return new Bl(e,this,this.data)},t.prototype.setValue=function(e,i){this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()},t.prototype.runCondition=function(e,i){var n=0,o;do o=w.getUnbindValue(this.value),r.prototype.runCondition.call(this,e,""),n++;while(!w.isTwoValueEquals(o,this.value)&&n<3)},t.prototype.updateCellOnColumnChanged=function(e,i,n){e.updateCellQuestion()},t})(vt),oo=(function(){function r(t,e){this.matrix=t,this.row=e}return r.prototype.getLocale=function(){return this.matrix.getLocale()},r.prototype.getMarkdownHtml=function(t,e,i){return this.matrix.getMarkdownHtml(t,e,i)},r.prototype.getProcessedText=function(t){return this.matrix.processSingleInputTitle(t,this.row)},r.prototype.getRenderer=function(t){return this.matrix.getRenderer(t)},r.prototype.getRendererContext=function(t){return this.matrix.getRendererContext(t)},r})(),et=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isRowChanging=!1,e.lockResetRenderedTable=!1,e}return Object.defineProperty(t,"defaultCellType",{get:function(){return C.matrix.defaultCellType},set:function(e){C.matrix.defaultCellType=e},enumerable:!1,configurable:!0}),t.addDefaultColumns=function(e){for(var i=K.DefaultColums,n=0;n<i.length;n++)e.addColumn(i[n])},t.prototype.createColumnValues=function(){var e=this;return this.createNewArray("columns",function(i){i.colOwner=e,e.onAddColumn&&e.onAddColumn(i),e.survey&&e.survey.matrixColumnAdded(e,i)},function(i){i.colOwner=null,e.onRemoveColumn&&e.onRemoveColumn(i)})},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="columns"||e==="cellType")&&this.updateColumnsAndRows();var o=["placeholder","columnColCount","rowTitleWidth","choices"],s=["transposeData","addRowButtonLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode","displayMode"];o.indexOf(e)>-1&&this.clearRowsAndResetRenderedTable(),s.indexOf(e)>-1&&this.resetRenderedTable()},t.prototype.getType=function(){return"matrixdropdownbase"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.detailElements,!0)},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.clearGeneratedRows()},Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateLocked",{get:function(){return this.isLoadingFromJson||this.isUpdating},enumerable:!1,configurable:!0}),t.prototype.beginUpdate=function(){this.isUpdating=!0},t.prototype.endUpdate=function(){this.isUpdating=!1,this.updateColumnsAndRows()},t.prototype.updateColumnsAndRows=function(){this.updateColumnsIndexes(this.columns),this.updateColumnsCellType(),this.generatedTotalRow=null,this.clearRowsAndResetRenderedTable()},t.prototype.itemValuePropertyChanged=function(e,i,n,o){r.prototype.itemValuePropertyChanged.call(this,e,i,n,o),e.ownerPropertyName==="choices"&&this.clearRowsAndResetRenderedTable()},Object.defineProperty(t.prototype,"columnLayout",{get:function(){return this.transposeData?"vertical":"horizontal"},set:function(e){this.transposeData=e==="vertical"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsLocation",{get:function(){return this.columnLayout},set:function(e){this.columnLayout=e},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(e){var i=e.parent?this.detailErrorLocation:this.cellErrorLocation;return i!=="default"?i:r.prototype.getChildErrorLocation.call(this,e)},Object.defineProperty(t.prototype,"isColumnLayoutHorizontal",{get:function(){return this.isMobile?!0:!this.transposeData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useCaseSensitiveComparison",{get:function(){return this.useCaseSensitiveComparisonValue!==void 0?this.useCaseSensitiveComparisonValue:C.comparator.caseSensitive},set:function(e){this.useCaseSensitiveComparisonValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUniqueCaseSensitive",{get:function(){return this.useCaseSensitiveComparison},set:function(e){this.useCaseSensitiveComparison=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanel",{get:function(){if(!this.detailPanelValue){var e=this.createNewDetailPanel();e.selectedElementInDesign=this,e.renderWidth="100%",e.isInteractiveDesignElement=!1,e.showTitle=!1;var i=this.getPropertyValueWithoutDefault("allowAdaptiveActions");i!==void 0&&(e.allowAdaptiveActions=i),this.detailPanelValue=e}return this.detailPanelValue},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){var e=this.getPanelInDesignMode();return e?[e]:null},t.prototype.getPanelInDesignMode=function(){return this.detailPanelMode!=="none"?this.detailPanel:null},Object.defineProperty(t.prototype,"detailElements",{get:function(){return this.detailPanel.elements},enumerable:!1,configurable:!0}),t.prototype.isPropertyStoredInHash=function(e){return e==="detailElements"?!this.detailPanelValue:r.prototype.isPropertyStoredInHash.call(this,e)},t.prototype.createNewDetailPanel=function(){return V.createClass("panel")},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return null},Object.defineProperty(t.prototype,"canAddRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){return!0},t.prototype.onPointerDown=function(e,i){},t.prototype.onRowsChanged=function(){this.clearVisibleRows(),this.resetRenderedTable(),r.prototype.onRowsChanged.call(this),this.updateRowsVisibleIndexes()},t.prototype.updateRowsVisibleIndexes=function(){var e=this.visibleRows;if(Array.isArray(e)){var i=C.expressionVariables.visibleRowIndex,n={};n[i]=0;for(var o=0;o<e.length;o++)e[o].visibleIndex=o,n[i]=o+1,e[o].runTriggers(i,o+1,n)}},t.prototype.onStartRowAddingRemoving=function(){this.lockResetRenderedTable=!0,this.setValueChangedDirectly(!0)},t.prototype.onEndRowAdding=function(){if(this.lockResetRenderedTable=!1,!!this.renderedTable)if(this.renderedTable.isRequireReset())this.resetRenderedTable();else{var e=this.visibleRows.length-1;this.renderedTable.onAddedRow(this.visibleRows[e],e)}},t.prototype.onEndRowRemoving=function(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)},t.prototype.clearRowsAndResetRenderedTable=function(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)},t.prototype.resetRenderedTable=function(e){this.isRendredTableCreated&&(this.lockResetRenderedTable||this.isUpdateLocked?e&&this.renderedTable.requireReset():(this.resetPropertyValue("renderedTable"),this.fireCallback(this.onRenderedTableResetCallback)))},t.prototype.clearGeneratedRows=function(){if(this.clearVisibleRows(),!!this.generatedVisibleRows){for(var e=0;e<this.generatedVisibleRows.length;e++)this.generatedVisibleRows[e].dispose();r.prototype.clearGeneratedRows.call(this)}},Object.defineProperty(t.prototype,"isRendredTableCreated",{get:function(){return!!this.getPropertyValueWithoutDefault("renderedTable")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedTable",{get:function(){var e=this;return this.getPropertyValue("renderedTable",void 0,function(){return e.createRenderedTable()})},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new Gi(this)},t.prototype.getRowByQuestion=function(e){if(e)return e.data},t.prototype.onMatrixRowCreated=function(e){if(this.survey)for(var i={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},n=0;n<this.columns.length;n++){i.column=this.columns[n],i.columnName=i.column.name;var o=e.cells[n];i.cell=o,i.cellQuestion=o.question,i.value=o.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(i),this.survey.matrixCellCreated(this,i)}},t.prototype.isSelectCellType=function(){return V.isDescendantOf(this.cellType,"selectbase")},t.prototype.updateColumnsCellType=function(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()},t.prototype.updateColumnsIndexes=function(e){for(var i=0;i<e.length;i++)e[i].setIndex(i)},Object.defineProperty(t.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e),this.detailPanelValue&&(this.detailPanel.allowAdaptiveActions=e)},enumerable:!1,configurable:!0}),t.prototype.hasChoices=function(){var e=this.getPropertyValueWithoutDefault("choices");return e&&e.length>0},t.prototype.onColumnPropertyChanged=function(e,i,n){if(this.updateHasFooter(),!!this.generatedVisibleRows){for(var o=0;o<this.generatedVisibleRows.length;o++)this.generatedVisibleRows[o].updateCellQuestionOnColumnChanged(e,i,n);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,i,n),this.onColumnsChanged(),i=="isRequired"&&this.resetRenderedTable()}},t.prototype.onColumnNestedPropertyChanged=function(e,i,n,o){if(this.generatedVisibleRows)for(var s=0;s<this.generatedVisibleRows.length;s++){var a=this.generatedVisibleRows[s],l=a.getQuestionByColumn(e);l&&l[i]&&(l[i][n]=o)}},t.prototype.onColumnItemValuePropertyChanged=function(e,i,n,o,s,a){if(this.generatedVisibleRows)for(var l=0;l<this.generatedVisibleRows.length;l++)this.generatedVisibleRows[l].updateCellQuestionOnColumnItemValueChanged(e,i,n,o,s,a)},t.prototype.onShowInMultipleColumnsChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnVisibilityChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnCellTypeChanged=function(e){this.updateDefaultRowValue(e),this.resetTableAndRows()},t.prototype.getDesignRowContext=function(){var e=this.visibleRows&&this.visibleRows.length>0?this.visibleRows[0]:this.createMatrixRow(new q(1));return e.getValueGetterContext()},t.prototype.updateDefaultRowValue=function(e){var i=this.defaultRowValue;i&&e.cellType==="file"&&i[e.name]&&(delete i[e.name],Object.keys(i).length===0&&(i=void 0),this.defaultRowValue=i)},t.prototype.resetTableAndRows=function(){this.clearGeneratedRows(),this.resetRenderedTable()},t.prototype.getRowTitleWidth=function(){return""},Object.defineProperty(t.prototype,"hasFooter",{get:function(){return this.getPropertyValue("hasFooter",!1)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return"default"},t.prototype.getShowColumnsIfEmpty=function(){return!1},t.prototype.updateShowTableAndAddRow=function(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()},t.prototype.updateHasFooter=function(){this.setPropertyValue("hasFooter",this.hasTotal)},Object.defineProperty(t.prototype,"hasTotal",{get:function(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getCellType=function(){return this.cellType},t.prototype.getCustomCellType=function(e,i,n){if(!this.survey)return n;var o={rowValue:i.value,row:i,column:e,columnName:e.name,cellType:n};return this.survey.matrixCellCreating(this,o),o.cellType},t.prototype.getConditionJson=function(e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),!i)return r.prototype.getConditionJson.call(this,e);for(var n="",o=i.length-1;o>=0&&i[o]!=".";o--)n=i[o]+n;var s=void 0,a=this.getColumnByName(n);return a?s=a.createCellQuestion(null):this.detailPanelMode!=="none"&&(s=this.detailPanel.getQuestionByName(n)),s?s.getConditionJson(e):null},t.prototype.clearIncorrectValues=function(){if(Array.isArray(this.visibleRows))for(var e=this.generatedVisibleRows,i=0;i<e.length;i++)e[i].clearIncorrectValues(this.getRowValue(i))},t.prototype.clearErrors=function(){r.prototype.clearErrors.call(this),this.runFuncForCellQuestions(function(e){e.clearErrors()})},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.runFuncForCellQuestions(function(e){e.localeChanged()})},t.prototype.runFuncForCellQuestions=function(e){var i=this.generatedVisibleRows;if(i)for(var n=0;n<i.length;n++){var o=i[n];if(o.isVisible)for(var s=0;s<o.cells.length;s++)e(o.cells[s].question)}},t.prototype.runItemsCondition=function(e){var i=0,n,o=!1,s=this.runConditionsForColumns(e);do n=w.getUnbindValue(this.totalValue),o=this.runCellsCondition(e)||o,this.runTotalsCondition(e),i++;while(!w.isTwoValueEquals(n,this.totalValue)&&i<3);o&&this.isClearValueOnHidden&&this.clearInvisibleValuesInRows(),s&&this.resetRenderedTable(!0),this.updateVisibilityBasedOnRows()},t.prototype.runTriggers=function(e,i,n){r.prototype.runTriggers.call(this,e,i,n),this.runFuncForCellQuestions(function(o){o.runTriggers(e,i,n)})},t.prototype.updateElementVisibility=function(){r.prototype.updateElementVisibility.call(this);var e=this.generatedVisibleRows;e&&e.forEach(function(i){return i.updateElementVisibility()}),this.updateShowTableAndAddRow()},t.prototype.shouldRunColumnExpression=function(){return!1},t.prototype.runCellsCondition=function(e){if(this.isDesignMode)return!1;var i=!1,n=this.areInvisibleElementsShowing,o=this.getExpressionFromSurvey("rowsVisibleIf"),s=this.generatedVisibleRows;if(s)for(var a=0;a<s.length;a++){var l=s[a].isVisible;s[a].runCondition(e,o,n),l!==s[a].isVisible&&(i=!0)}return this.checkColumnsVisibility(),this.checkColumnsRenderedRequired(),i},t.prototype.runConditionsForColumns=function(e){var i=this.getExpressionFromSurvey("columnsVisibleIf");return this.columns.forEach(function(n){if(!i)n.isColumnsVisibleIf=!0;else{var o=new ge(i);n.isColumnsVisibleIf=o.runContext(n.getValueGetterContext(),e)===!0}}),!1},t.prototype.checkColumnsVisibility=function(){if(!this.isDesignMode){for(var e=!1,i=0;i<this.columns.length;i++){var n=this.columns[i],o=!!n.visibleIf||n.isFilteredMultipleColumns;!o&&!this.columnsVisibleIf&&n.isColumnVisible||(e=this.isColumnVisibilityChanged(n,o)||e)}e&&this.resetRenderedTable(!0)}},t.prototype.checkColumnsRenderedRequired=function(){var e=this.generatedVisibleRows;if(e)for(var i=0;i<this.columns.length;i++){var n=this.columns[i];if(!(!n.requiredIf||!n.isColumnVisible)){for(var o=e.length>0,s=0;s<e.length;s++)if(!e[s].cells[i].question.isRequired){o=!1;break}n.updateIsRenderedRequired(o)}}},t.prototype.isColumnVisibilityChanged=function(e,i){var n=e.isColumnVisible,o=!i,s=this.generatedVisibleRows,a=i&&s,l=a&&e.isFilteredMultipleColumns,u=l?e.getVisibleChoicesInCell:[],f=new Array;if(a)for(var y=0;y<s.length;y++){var b=s[y].cells[e.index],E=b?.question;if(E&&E.isVisible)if(o=!0,l)this.updateNewVisibleChoices(E,f);else break}return e.hasVisibleCell=o&&e.isColumnsVisibleIf,l&&(e.setVisibleChoicesInCell(f),!w.isArraysEqual(u,f,!0,!1,!1))?!0:n!==e.isColumnVisible},t.prototype.updateNewVisibleChoices=function(e,i){var n=e.visibleChoices;if(Array.isArray(n))for(var o=0;o<n.length;o++){var s=n[o];i.indexOf(s.value)<0&&i.push(s.value)}},t.prototype.runTotalsCondition=function(e){this.generatedTotalRow&&this.generatedTotalRow.runCondition(e)},t.prototype.IsMultiplyColumn=function(e){return e.isShowInMultipleColumns&&!this.isMobile},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this);for(var e=this.columns,i=0;i<e.length;i++)e[i].locStrsChanged();var n=this.generatedVisibleRows;if(n){for(var i=0;i<n.length;i++)n[i].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}},t.prototype.getColumnByName=function(e){for(var i=0;i<this.columns.length;i++)if(this.columns[i].name==e)return this.columns[i];return null},t.prototype.getColumnName=function(e){return this.getColumnByName(e)},t.prototype.getColumnWidth=function(e){var i;return e.minWidth?e.minWidth:this.columnMinWidth?this.columnMinWidth:((i=C.matrix.columnWidthsByType[e.cellType])===null||i===void 0?void 0:i.minWidth)||""},Object.defineProperty(t.prototype,"choices",{get:function(){return this.getItemValuesPropertyValue("choices")},set:function(e){this.setArrayPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputTitleTemplate",{get:function(){return this.getLocStringText(this.locSingleInputTitleTemplate)},set:function(e){this.setLocStringText(this.locSingleInputTitleTemplate,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSingleInputTitleTemplate",{get:function(){var e=this;return this.getOrCreateLocStr("singleInputTitleTemplate",!0,this.getSingleInputTitleTemplate(),function(i){i.owner=new oo(e)})},enumerable:!1,configurable:!0}),t.prototype.getSingleQuestionLocTitleCore=function(){return this.locSingleInputTitleTemplate},t.prototype.getSingleInputTitleTemplate=function(){return""},t.prototype.processSingleInputTitle=function(e,i){i||(i=this.getRowByQuestion(this.singleInputQuestion));var n=i?i.getTextProcessor():this.textProcessor;return n?n.processText(e,!0):e},t.prototype.singleInputMoveToFirstCore=function(){var e,i=(e=this.singleInputQuestion)===null||e===void 0?void 0:e.data;this.singleInputEditRow(i)},t.prototype.singleInputEditRow=function(e){if(e){var i=e.visibleQuestions;Array.isArray(i)&&i.length>0&&this.setSingleInputQuestion(i[0])}},Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.survey?this.survey.storeOthersAsComment:!1},enumerable:!1,configurable:!0}),t.prototype.addColumn=function(e,i){var n=new mt(e,i,this);return this.columns.push(n),n},t.prototype.clearVisibleRows=function(){this.visibleRowsArray=null},t.prototype.isColumnVisible=function(e){return e.isColumnVisible},t.prototype.getVisibleRows=function(){return this.isUpdateLocked?null:this.isGenereatingRows?[]:this.visibleRowsArray?this.visibleRowsArray:(this.generateVisibleRowsIfNeeded(),this.visibleRowsArray=this.getVisibleFromGenerated(this.generatedVisibleRows),this.updateRowsVisibleIndexes(),this.visibleRowsArray)},Object.defineProperty(t.prototype,"allRows",{get:function(){return this.isGenereatingRows?[]:(this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)},enumerable:!1,configurable:!0}),t.prototype.generateVisibleRowsIfNeeded=function(){if(!this.isUpdateLocked&&!this.generatedVisibleRows){this.isGenereatingRows=!0,this.generatedVisibleRows=this.generateRows(),this.isGenereatingRows=!1;for(var e=0;e<this.generatedVisibleRows.length;e++){var i=this.generatedVisibleRows[e];i.visibleIndex=e,this.onMatrixRowCreated(i)}this.data&&(this.runCellsCondition(this.data.getFilteredProperties()),this.isValueChangedWithoutRows&&(this.isValueChangedWithoutRows=!1,this.runTriggersOnNewRows())),this.generatedVisibleRows&&(this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered())}},t.prototype.runTriggersOnNewRows=function(){var e=this,i=this.value;this.generatedVisibleRows.forEach(function(n){var o=e.getRowValueCore(n,i);if(!w.isValueEmpty(o)){var s=w.createCopyWithPrefix(o,C.expressionVariables.row+".");n.runTriggers("",void 0,s)}})},t.prototype.getVisibleFromGenerated=function(e){var i=[];return e?(e.forEach(function(n){n.isVisible&&i.push(n)}),i.length===e.length?e:i):i},t.prototype.updateValueOnRowsGeneration=function(e){for(var i=this.createNewValue(!0),n=this.createNewValue(),o=0;o<e.length;o++){var s=e[o];if(!s.editingObj){var a=this.getRowValue(o),l=s.value;this.isTwoValueEquals(a,l)||(n=this.getNewValueOnRowChanged(s,"",l,!1,n).value)}}this.isTwoValueEquals(i,n)||(this.isRowChanging=!0,this.setNewValue(n),this.isRowChanging=!1)},Object.defineProperty(t.prototype,"totalValue",{get:function(){return!this.hasTotal||!this.visibleTotalRow?{}:this.visibleTotalRow.value},enumerable:!1,configurable:!0}),t.prototype.getVisibleTotalRow=function(){return this.isUpdateLocked?null:(this.hasTotal?this.generatedTotalRow||(this.generatedTotalRow=this.generateTotalRow(),this.data&&this.runTotalsCondition({survey:this.survey})):this.generatedTotalRow=null,this.generatedTotalRow)},Object.defineProperty(t.prototype,"visibleTotalRow",{get:function(){return this.getVisibleTotalRow()},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter(),this.genetateColumnsName()},t.prototype.genetateColumnsName=function(){var e=this;this.columns.forEach(function(i){(!i.name||i.name==="")&&(i.name=e.generateNewName(e.columns,"question"))})},t.prototype.generateNewName=function(e,i){return this.getSurvey().getNewGeneratedName(e,i)},t.prototype.getRowValue=function(e){if(e<0||!Array.isArray(this.visibleRows))return null;var i=this.generatedVisibleRows;if(e>=i.length)return null;var n=this.value,o=this.getRowValueCore(i[e],n);return this.isValueSurveyElement(n)?o:w.getUnbindValue(o)},t.prototype.checkIfValueInRowDuplicated=function(e,i){return this.generatedVisibleRows?this.isValueInColumnDuplicated(i.name,!0,e):!1},t.prototype.setRowValue=function(e,i){if(e<0)return null;var n=this.visibleRows;if(e>=n.length)return null;n[e].value=i,this.onRowChanged(n[e],"",i,!1)},t.prototype.generateRows=function(){return null},t.prototype.generateTotalRow=function(){return new $i(this)},t.prototype.createNewValue=function(e){e===void 0&&(e=!1);var i=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(i)?null:i},t.prototype.getRowValueCore=function(e,i,n){n===void 0&&(n=!1);var o=i&&i[e.rowName]?i[e.rowName]:null;return!o&&n&&(o={},i&&(i[e.rowName]=o)),o},t.prototype.getRowObj=function(e){var i=this.getRowValueCore(e,this.value);return i&&i.getType?i:null},t.prototype.getRowDisplayValue=function(e,i,n){if(!n||i.editingObj)return n;for(var o=Object.keys(n),s=0;s<o.length;s++){var a=o[s],l=i.getQuestionByName(a);if(l||(l=this.getSharedQuestionByName(a,i)),l){var u=l.getDisplayValue(e,n[a]);e&&l.title&&l.title!==a?(n[l.title]=u,delete n[a]):n[a]=u}}return n},t.prototype.getPlainData=function(e){var i=this;e===void 0&&(e={includeEmpty:!0});var n=r.prototype.getPlainData.call(this,e);if(n){n.isNode=!0;var o=Array.isArray(n.data)?[].concat(n.data):[];n.data=this.visibleRows.map(function(s){var a={name:s.dataName,title:s.text,value:s.value,displayValue:i.getRowDisplayValue(!1,s,s.value),getString:function(l){return i.getValueAsString(l)},isNode:!0,data:s.cells.map(function(l){return l.question.getPlainData(e)}).filter(function(l){return!!l})};return(e.calculations||[]).forEach(function(l){a[l.propertyName]=s[l.propertyName]}),a}),n.data=n.data.concat(o)}return n},t.prototype.addConditionObjectsByContext=function(e,i){var n=[].concat(this.columns);this.detailPanelMode!=="none"&&(n=n.concat(this.detailPanel.questions));var o=!!i&&n.indexOf(i)>-1,s=i===!0||o,a=this.getConditionObjectsRowIndeces();s&&a.push(-1);for(var l=0;l<a.length;l++){var u=a[l],f=u>-1?this.getConditionObjectRowName(u):"row";if(f)for(var y=u>-1?this.getConditionObjectRowText(u):"row",b=u>-1||i===!0,E=b&&u===-1?".":"",S=(b?this.getValueName():"")+E+f+".",O=(b?this.processedTitle:"")+E+y+".",R=0;R<n.length;R++){var A=n[R];if(!(u===-1&&i===A)){var Q={name:S+A.name,text:O+A.fullTitle,question:this};u===-1&&i===!0?Q.context=this:o&&S.startsWith("row.")&&(Q.context=i),e.push(Q)}}}},t.prototype.onHidingContent=function(){if(r.prototype.onHidingContent.call(this),!!this.generatedVisibleRows){var e=[];this.collectNestedQuestions(e,!0),e.forEach(function(i){return i.onHidingContent()})}},t.prototype.getIsReadyNestedQuestions=function(){if(!this.generatedVisibleRows)return[];var e=new Array;return this.collectNestedQuestonsInRows(this.generatedVisibleRows,e,!1,!0,!1),this.generatedTotalRow&&this.collectNestedQuestonsInRows([this.generatedTotalRow],e,!1,!0,!1),e},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){o&&e.push(this),this.collectNestedQuestonsInRows(this.visibleRows,e,i,n,o)},t.prototype.collectNestedQuestonsInRows=function(e,i,n,o,s){Array.isArray(e)&&e.forEach(function(a){a.questions.forEach(function(l){return l.addNestedQuestion(i,n,o,s)})})},t.prototype.getConditionObjectRowName=function(e){return""},t.prototype.getConditionObjectRowText=function(e){return this.getConditionObjectRowName(e)},t.prototype.getConditionObjectsRowIndeces=function(){return[]},t.prototype.getProgressInfo=function(){if(this.getIsRequireToGenerateRows()&&this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)return ae.getProgressInfoByElements(this.getCellQuestions(),this.isRequired);var e=U.createProgressInfo();return this.updateProgressInfoByValues(e),e.requiredQuestionCount===0&&this.isRequired&&(e.requiredQuestionCount=1,e.requiredAnsweredQuestionCount=this.isEmpty()?0:1),e},t.prototype.getIsRequireToGenerateRows=function(){return!!this.rowsVisibleIf},t.prototype.updateProgressInfoByValues=function(e){},t.prototype.updateProgressInfoByRow=function(e,i){for(var n=0;n<this.columns.length;n++){var o=this.columns[n];if(o.templateQuestion.hasInput){var s=!w.isValueEmpty(i[o.name]);!s&&o.templateQuestion.visibleIf||(e.questionCount+=1,e.requiredQuestionCount+=o.isRequired,e.answeredQuestionCount+=s?1:0,e.requiredAnsweredQuestionCount+=s&&o.isRequired?1:0)}}},t.prototype.getCellQuestions=function(){var e=[];return this.runFuncForCellQuestions(function(i){e.push(i)}),e},t.prototype.onBeforeValueChanged=function(e){},t.prototype.onSetQuestionValue=function(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),!(!this.generatedVisibleRows||this.generatedVisibleRows.length==0))){this.isRowChanging=!0;for(var e=this.createNewValue(),i=0;i<this.generatedVisibleRows.length;i++){var n=this.generatedVisibleRows[i];this.generatedVisibleRows[i].value=this.getRowValueCore(n,e)}this.isRowChanging=!1}},t.prototype.setQuestionValue=function(e){r.prototype.setQuestionValue.call(this,e,!1),this.onSetQuestionValue(),this.updateIsAnswered()},t.prototype.supportAutoAdvance=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var i=0;i<e.length;i++){var n=this.generatedVisibleRows[i].cells;if(n)for(var o=0;o<n.length;o++){var s=n[o].question;if(s&&(!s.supportAutoAdvance()||!s.value))return!1}}return!0},t.prototype.getContainsErrors=function(){return r.prototype.getContainsErrors.call(this)||this.checkForAnswersOrErrors(function(e){return e.containsErrors},!1)},t.prototype.getIsAnswered=function(){return r.prototype.getIsAnswered.call(this)&&this.checkForAnswersOrErrors(function(e){return e.isAnswered},!0)},t.prototype.checkForAnswersOrErrors=function(e,i){i===void 0&&(i=!1);var n=this.generatedVisibleRows;if(!n)return!1;for(var o=0;o<n.length;o++){var s=n[o].cells;if(s){for(var a=0;a<s.length;a++)if(s[a]){var l=s[a].question;if(l&&l.isVisible){if(e(l)){if(!i)return!0}else if(i)return!1}}}}return!!i},t.prototype.validateElementCore=function(e){var i=this.validateRows(e),n=this.isValueDuplicated(e);return r.prototype.validateElementCore.call(this,e)&&i&&!n},t.prototype.getIsRunningValidators=function(){if(r.prototype.getIsRunningValidators.call(this))return!0;if(!this.generatedVisibleRows)return!1;for(var e=0;e<this.generatedVisibleRows.length;e++){var i=this.generatedVisibleRows[e].cells;if(i){for(var n=0;n<i.length;n++)if(i[n]){var o=i[n].question;if(o&&o.isRunningValidators)return!0}}}return!1},t.prototype.getAllErrors=function(){var e=r.prototype.getAllErrors.call(this),i=this.generatedVisibleRows;if(i===null)return e;for(var n=0;n<i.length;n++)for(var o=i[n],s=0;s<o.cells.length;s++){var a=o.cells[s].question.getAllErrors();a&&a.length>0&&(e=e.concat(a))}return e},t.prototype.validateRows=function(e){var i=this.generatedVisibleRows;i||(i=this.visibleRows);var n=!0;e.isSingleDetailPanel=this.detailPanelMode==="underRowSingle";for(var o=0;o<i.length;o++)i[o].isVisible&&(n=i[o].validate(e)&&n);return n},t.prototype.isValueDuplicated=function(e){if(!this.generatedVisibleRows)return!1;for(var i=this.getUniqueColumnsNames(),n=!1,o=0;o<i.length;o++){var s=this.getDuplicatedRowAndShowErrors(i[o],!0);s&&s.length>0&&(e.setErrorElement(s[0].getQuestionByColumnName(i[o])),n=!0)}return n},t.prototype.getUniqueColumnsNames=function(){for(var e=new Array,i=0;i<this.columns.length;i++)this.columns[i].isUnique&&e.push(this.columns[i].name);return e},t.prototype.isValueInColumnDuplicated=function(e,i,n){var o=this.getDuplicatedRowAndShowErrors(e,i,n);return n?o.indexOf(n)>-1:o.length>0},t.prototype.getDuplicatedRowAndShowErrors=function(e,i,n){var o=this.getDuplicatedRows(e);return i&&this.showDuplicatedErrorsInRows(o,e),this.removeDuplicatedErrorsInRows(o,e),o},t.prototype.getDuplicatedRows=function(e){for(var i={},n=[],o=this.generatedVisibleRows,s=0;s<o.length;s++){var a=void 0,l=o[s].getQuestionByName(e);if(l)a=l.value;else{var u=this.getRowValue(s);a=u?u[e]:void 0}this.isValueEmpty(a)||(!this.useCaseSensitiveComparison&&typeof a=="string"&&(a=a.toLocaleLowerCase()),i[a]||(i[a]=[]),i[a].push(o[s]))}for(var f in i)i[f].length>1&&i[f].forEach(function(y){return n.push(y)});return n},t.prototype.showDuplicatedErrorsInRows=function(e,i){var n=this;e.forEach(function(o){var s,a=o.getQuestionByName(i),l=(s=n.detailPanelValue)===null||s===void 0?void 0:s.getQuestionByName(i);!a&&l&&(o.showDetailPanel(),o.detailPanel&&(a=o.detailPanel.getQuestionByName(i))),a&&(l&&o.showDetailPanel(),n.addDuplicationError(a))})},t.prototype.removeDuplicatedErrorsInRows=function(e,i){var n=this;this.generatedVisibleRows.forEach(function(o){if(e.indexOf(o)<0){var s=o.getQuestionByName(i);s&&n.removeDuplicationError(o,s)}})},t.prototype.getDuplicationError=function(e){for(var i=e.errors,n=0;n<i.length;n++)if(i[n].getErrorType()==="keyduplicationerror")return i[n];return null},t.prototype.addDuplicationError=function(e){this.getDuplicationError(e)||e.addError(new Nr(this.keyDuplicationError,this))},t.prototype.removeDuplicationError=function(e,i){i.removeError(this.getDuplicationError(i))&&i.errors.length===0&&e.editingObj&&(e.editingObj[i.getValueName()]=i.value)},t.prototype.getFirstQuestionToFocus=function(e){return this.getFirstCellQuestion(e)},t.prototype.getFirstInputElementId=function(){var e=this.getFirstCellQuestion(!1);return e?e.inputId:r.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var e=this.getFirstCellQuestion(!0);return e?e.inputId:r.prototype.getFirstErrorInputElementId.call(this)},t.prototype.getFirstCellQuestion=function(e){if(!this.generatedVisibleRows)return null;for(var i=0;i<this.generatedVisibleRows.length;i++)for(var n=this.generatedVisibleRows[i].cells,o=0;o<n.length;o++){var s=n[o].question;if(s.isVisible&&!s.isReadOnly&&(!e||s.currentErrorCount>0))return s}return null},t.prototype.onReadOnlyChanged=function(){if(r.prototype.onReadOnlyChanged.call(this),!!this.generateRows)for(var e=0;e<this.visibleRows.length;e++)this.visibleRows[e].onQuestionReadOnlyChanged()},t.prototype.createQuestion=function(e,i){return this.createQuestionCore(e,i)},t.prototype.createQuestionCore=function(e,i){var n=i.createCellQuestion(e);return n.setSurveyImpl(e),n.setParentQuestion(this),n.inMatrixMode=!0,n},t.prototype.deleteRowValue=function(e,i){return e&&(delete e[i.rowName],this.isObject(e)&&Object.keys(e).length==0?null:e)},t.prototype.onAnyValueChanged=function(e,i){if(!(this.isUpdateLocked||this.isDoingonAnyValueChanged)){if(!this.generatedVisibleRows){e===this.getValueName()&&(this.isValueChangedWithoutRows=!0);return}this.isDoingonAnyValueChanged=!0;for(var n=this.generatedVisibleRows,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,i);var s=this.visibleTotalRow;s&&s.onAnyValueChanged(e,i),this.isDoingonAnyValueChanged=!1}},t.prototype.isObject=function(e){return e!==null&&typeof e=="object"},t.prototype.getOnCellValueChangedOptions=function(e,i,n){var o=function(s){return e.getQuestionByName(s)};return{row:e,columnName:i,rowValue:n,value:n?n[i]:null,getCellQuestion:o,cellQuestion:e.getQuestionByName(i),column:this.getColumnByName(i)}},t.prototype.onCellValueChanged=function(e,i,n){if(this.survey){var o=this.getOnCellValueChangedOptions(e,i,n);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(o),this.survey.matrixCellValueChanged(this,o)}},t.prototype.validateCell=function(e,i,n){if(this.survey){var o=this.getOnCellValueChangedOptions(e,i,n);return this.survey.matrixCellValidate(this,o)}},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return this.survey?this.survey.isValidateOnValueChanging:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasInvisibleRows",{get:function(){var e=this.generatedVisibleRows;if(!Array.isArray(e))return!1;for(var i=0;i<e.length;i++)if(!e[i].isVisible)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getFilteredData=function(){return this.isEmpty()||!this.generatedVisibleRows||this.isEditingSurveyElement?this.value:this.getFilteredDataCore()},t.prototype.getFilteredDataCore=function(){return this.value},t.prototype.onRowChanging=function(e,i,n){if(!this.survey&&!this.cellValueChangingCallback)return n?n[i]:null;var o=this.getOnCellValueChangedOptions(e,i,n),s=this.getRowValueCore(e,this.createNewValue(),!0);return o.oldValue=s?s[i]:null,this.cellValueChangingCallback&&(o.value=this.cellValueChangingCallback(e,i,o.value,o.oldValue)),this.survey&&this.survey.matrixCellValueChanging(this,o),o.value},t.prototype.getSharedQuestionFromArray=function(e,i){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,i):null},t.prototype.onRowChanged=function(e,i,n,o){var s=i?this.getRowObj(e):null;if(s){var a=null;n&&!o&&(a=n[i]),this.isRowChanging=!0,V.setObjPropertyValue(s,i,a),this.isRowChanging=!1,this.onCellValueChanged(e,i,s)}else{var l=this.createNewValue(!0),u=this.getNewValueOnRowChanged(e,i,n,o,this.createNewValue());if(this.isTwoValueEquals(l,u.value))return;this.isRowChanging=!0,this.setNewValue(u.value),this.isRowChanging=!1,i&&this.onCellValueChanged(e,i,u.rowValue)}this.getUniqueColumnsNames().indexOf(i)>-1&&this.isValueInColumnDuplicated(i,!!s)},t.prototype.getNewValueOnRowChanged=function(e,i,n,o,s){var a=this.getRowValueCore(e,s,!0);if(o&&delete a[i],e.questions.forEach(function(u){delete a[u.getValueName()]}),n){n=JSON.parse(JSON.stringify(n));for(var l in n)this.isValueEmpty(n[l])||(a[l]=n[l])}return this.isObject(a)&&Object.keys(a).length===0&&(s=this.deleteRowValue(s,e)),s=this.correctValueForMinMaxRows(s),{value:s,rowValue:a}},t.prototype.correctValueForMinMaxRows=function(e){return e},t.prototype.getRowIndex=function(e){return Array.isArray(this.generatedVisibleRows)?this.generatedVisibleRows.indexOf(e):-1},t.prototype.getElementsInDesign=function(e){e===void 0&&(e=!1);var i;return this.detailPanelMode=="none"?i=r.prototype.getElementsInDesign.call(this,e):i=e?[this.detailPanel]:this.detailElements,this.columns.concat(i)},t.prototype.hasDetailPanel=function(e){return this.detailPanelMode=="none"?!1:this.isDesignMode?!0:this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0},t.prototype.getIsDetailPanelShowing=function(e){if(this.detailPanelMode=="none")return!1;if(this.isDesignMode){var i=this.visibleRows.indexOf(e)==0;return i&&(e.detailPanel||e.showDetailPanel()),i}return this.getPropertyValue("isRowShowing"+e.id,!1)},t.prototype.setIsDetailPanelShowing=function(e,i){if(i!=this.getIsDetailPanelShowing(e)){if(i&&this.detailPanelMode==="underRowSingle")for(var n=this.visibleRows,o=0;o<n.length;o++)n[o].isDetailPanelShowing&&n[o].hideDetailPanel();this.setPropertyValue("isRowShowing"+e.id,i),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,i),this.survey&&this.survey.matrixDetailPanelVisibleChanged(this,e.rowIndex-1,e,i)}},t.prototype.getDetailPanelButtonCss=function(e){var i=new I().append(this.getPropertyValue("detailButtonCss"+e.id));return i.append(this.cssClasses.detailButton,i.toString()==="").toString()},t.prototype.getDetailPanelIconCss=function(e){var i=new I().append(this.getPropertyValue("detailIconCss"+e.id));return i.append(this.cssClasses.detailIcon,i.toString()==="").toString()},t.prototype.getDetailPanelIconId=function(e){return this.getIsDetailPanelShowing(e)?this.cssClasses.detailIconExpandedId:this.cssClasses.detailIconId},t.prototype.updateDetailPanelButtonCss=function(e){var i=this.cssClasses,n=this.getIsDetailPanelShowing(e),o=new I().append(i.detailIcon).append(i.detailIconExpanded,n);this.setPropertyValue("detailIconCss"+e.id,o.toString());var s=new I().append(i.detailButton).append(i.detailButtonExpanded,n);this.setPropertyValue("detailButtonCss"+e.id,s.toString())},t.prototype.createRowDetailPanel=function(e){var i=this;if(this.isDesignMode)return this.detailPanel;var n=this.createNewDetailPanel();n.readOnly=this.isReadOnly||!e.isRowEnabled(),n.setSurveyImpl(e);var o=this.detailPanel.toJSON();return new le().toObject(o,n),n.renderWidth="100%",n.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,n),n.questions.forEach(function(s){return s.setParentQuestion(i)}),n.onSurveyLoad(),n},t.prototype.getSharedQuestionByName=function(e,i){if(!this.survey||!this.valueName)return null;var n=this.getRowIndex(i);return n<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,n)},t.prototype.runTriggersInRow=function(e,i,n){if(!(!this.survey||!this.valueName)){var o=this.getRowIndex(e);o<0||this.survey.getQuestionsByValueName(this.valueName).forEach(function(s){var a=s.visibleRows;Array.isArray(a)&&o<a.length&&a[0]instanceof vt&&a[o].runTriggers(i,n)})}},t.prototype.onTotalValueChanged=function(){this.data&&this.visibleTotalRow&&!this.isUpdateLocked&&!this.isSett&&this.data.setValue(this.getValueName()+C.matrix.totalsSuffix,this.totalValue,!1)},t.prototype.getParentTextProcessor=function(){if(!this.parentQuestion||!this.parent)return null;var e=this.parent.data;return e&&e.getTextProcessor?e.getTextProcessor():null},t.prototype.isMatrixReadOnly=function(){return this.isReadOnly},t.prototype.onRowVisibilityChanged=function(e){this.clearVisibleRows(),this.resetRenderedTable(),this.resetSingleInput()},t.prototype.clearValueIfInvisibleCore=function(e){r.prototype.clearValueIfInvisibleCore.call(this,e),this.clearInvisibleValuesInRows()},t.prototype.clearInvisibleValuesInRows=function(){var e;if(!(this.isEmpty()||!this.isRowsFiltered())){var i=((e=this.survey)===null||e===void 0?void 0:e.questionsByValueName(this.getValueName()))||[];i.length<2&&(this.value=this.getFilteredData())}},t.prototype.isRowsFiltered=function(){return this.visibleRows!==this.generatedVisibleRows},t.prototype.getQuestionFromArray=function(e,i){return i>=this.visibleRows.length?null:this.visibleRows[i].getQuestionByName(e)},t.prototype.isMatrixValueEmpty=function(e){if(e){if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(this.isObject(e[i])&&Object.keys(e[i]).length>0)return!1;return!0}return Object.keys(e).length==0}},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getCellTemplateData=function(e){return this.SurveyModel.getMatrixCellTemplateData(e)},t.prototype.getCellWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,e.row instanceof $i?"row-footer":"cell")},t.prototype.getCellWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,e.row instanceof $i?"row-footer":"cell")},t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")},t.prototype.onMobileChanged=function(){r.prototype.onMobileChanged.call(this),this.resetRenderedTable()},t.prototype.getRootCss=function(){return new I().append(r.prototype.getRootCss.call(this)).append(this.cssClasses.rootScroll,this.horizontalScroll).toString()},t.prototype.afterRenderQuestionElement=function(e){r.prototype.afterRenderQuestionElement.call(this,e),this.setRootElement(e?.parentElement)},t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.setRootElement(void 0)},t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},Object.defineProperty(t.prototype,"dragDropMatrixAttribute",{get:function(){return this.renderedTable.wrapperDropTargetId},enumerable:!1,configurable:!0}),c([p()],t.prototype,"transposeData",void 0),c([p({isLowerCase:!0})],t.prototype,"detailErrorLocation",void 0),c([p({isLowerCase:!0})],t.prototype,"cellErrorLocation",void 0),c([p()],t.prototype,"detailPanelMode",void 0),c([p({isLowerCase:!0,defaultValue:C.matrix.defaultCellType})],t.prototype,"cellType",void 0),c([p({onSetting:function(e){return e<0?0:e>4?4:e}})],t.prototype,"columnColCount",void 0),c([p()],t.prototype,"horizontalScroll",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"placeholder",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"keyDuplicationError",void 0),t})(zi);V.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",uniqueProperty:"name",className:"matrixdropdowncolumn",isArray:!0},{name:"columnLayout",alternativeName:"columnsLocation",choices:["horizontal","vertical"],visible:!1,isSerializable:!1},{name:"transposeData:boolean",version:"1.9.130",oldName:"columnLayout"},{name:"detailElements",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},{name:"cellErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"detailErrorLocation",default:"default",choices:["default","top","bottom"],visibleIf:function(r){return!!r&&r.detailPanelMode!="none"}},{name:"horizontalScroll:boolean",visible:!1},{name:"choices:itemvalue[]",uniqueProperty:"value",visibleIf:function(r){return r.isSelectCellType()}},{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"singleInputTitleTemplate",serializationProperty:"locSingleInputTitleTemplate",visibleIf:function(r){var t;return((t=r.survey)===null||t===void 0?void 0:t.questionsOnPageMode)==="inputPerPage"}},{name:"cellType",default:"dropdown",choices:function(){return mt.getColumnTypes()}},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth",{name:"allowAdaptiveActions:boolean",default:!1,visible:!1}],function(){return new et("")},"matrixbase");var Ql=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.question=e,i}return t.prototype.getObj=function(){return this.question},t.prototype.getValue=function(e){var i=e.path;if(!this.question.isDesignMode&&!e.createObjects&&this.question.isEmpty())return{isFound:i.length===0,value:void 0};if(i.length>0){var n=r.prototype.getValue.call(this,e);if(n&&n.isFound)return n}return new fe(this.question.value).getValue(e)},t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,i){var n,o=this.question.visibleRows;e=e.toLocaleLowerCase();for(var s=0;s<o.length;s++){var a=o[s],l=((n=a.rowName)===null||n===void 0?void 0:n.toString())||"";if(l.toLocaleLowerCase()===e){i.isFound=!0,i.obj=a,i.context=a.getValueGetterContext();return}}},t})(Ne),so=(function(r){P(t,r);function t(e,i,n,o){var s=r.call(this,n,o)||this;return s.name=e,s.item=i,s.buildCells(o),s}return Object.defineProperty(t.prototype,"rowName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTitle",{get:function(){return this.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),t.prototype.isItemVisible=function(){return this.item.isVisible},t.prototype.isRowEnabled=function(){return this.item.isEnabled},t.prototype.isRowHasEnabledCondition=function(){return!!this.item.enableIf},t.prototype.getRowsVisibleIfExpression=function(e){var i=r.prototype.getRowsVisibleIfExpression.call(this,e);return this.item.visibleIf&&i.push(this.item.visibleIf),i},t.prototype.runRowsEnableCondition=function(e){this.item.enableIf&&(this.item.enabled=new ge(this.item.enableIf).runContext(this.getValueGetterContext(),e))},t})(vt),Ki=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.defaultValuesInRows={},e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="rows"&&this.generatedVisibleRows&&(this.clearGeneratedRows(),this.resetRenderedTable(),this.getVisibleRows(),this.clearIncorrectValues()),e==="hideIfRowsEmpty"&&this.updateVisibilityBasedOnRows()},t.prototype.getType=function(){return"matrixdropdown"},t.prototype.getAllChildren=function(){return z(z(z([],r.prototype.getAllChildren.call(this),!0),this.columns,!0),this.rows,!0)},t.prototype.getFooterText=function(){return this.locTotalText},t.prototype.getRowTitleWidth=function(){return this.rowTitleWidth},t.prototype.getSingleInputTitleTemplate=function(){return"rowNameTemplateTitle"},t.prototype.getValueGetterContext=function(){return new Ql(this)},t.prototype.getDisplayValueCore=function(e,i){if(!i)return i;var n=this.visibleRows,o={};if(!n)return o;for(var s=0;s<n.length;s++){var a=n[s].rowName,l=i[a];if(l){if(e){var u=q.getTextOrHtmlByValue(this.rows,a);u&&(a=u)}o[a]=this.getRowDisplayValue(e,n[s],l)}}return o},t.prototype.getConditionObjectRowName=function(e){return"."+this.rows[e].value},t.prototype.getConditionObjectRowText=function(e){return"."+this.rows[e].calculatedText},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],i=0;i<this.rows.length;i++)e.push(i);return e},t.prototype.isNewValueCorrect=function(e){return w.isValueObject(e,!0)},t.prototype.clearIncorrectValues=function(){if(!this.isEmpty()){this.getVisibleRows();var e={},i=this.value;for(var n in i){var o=this.getRowByKey(n);o&&o.isVisible&&(e[n]=i[n])}this.value=e}r.prototype.clearIncorrectValues.call(this)},t.prototype.getRowByKey=function(e){var i=this.generatedVisibleRows;if(!i)return null;for(var n=0;n<i.length;n++)if(i[n].rowName===e)return i[n];return null},t.prototype.clearGeneratedRows=function(){var e=this;this.generatedVisibleRows&&(this.isDisposed||this.generatedVisibleRows.forEach(function(i){e.defaultValuesInRows[i.rowName]=i.getNamesWithDefaultValues()}),r.prototype.clearGeneratedRows.call(this))},t.prototype.getRowValueForCreation=function(e,i){var n=e[i];if(!n)return n;var o=this.defaultValuesInRows[i];return!Array.isArray(o)||o.length===0||o.forEach(function(s){delete n[s]}),n},t.prototype.generateRows=function(){var e=new Array,i=this.rows;if(!i||i.length===0)return e;var n=this.value;n||(n={});for(var o=0;o<i.length;o++){var s=i[o];this.isValueEmpty(s.value)||e.push(this.createMatrixRow(s,this.getRowValueForCreation(n,s.value)))}return e},t.prototype.createMatrixRow=function(e,i){return new so(e.value,e,this,i)},t.prototype.getFilteredDataCore=function(){var e={};return this.generatedVisibleRows.forEach(function(i){i.isVisible&&!i.isEmpty&&(e[i.rowName]=i.filteredValue)}),e},t.prototype.getSearchableItemValueKeys=function(e){e.push("rows")},t.prototype.getIsRequireToGenerateRows=function(){if(r.prototype.getIsRequireToGenerateRows.call(this))return!0;for(var e=0;e<this.rows.length;e++)if(this.rows[e].visibleIf)return!0;return!1},t.prototype.updateProgressInfoByValues=function(e){var i=this.value;i||(i={});for(var n=0;n<this.rows.length;n++){var o=this.rows[n],s=i[o.value];this.updateProgressInfoByRow(e,s||{})}},c([p({localizable:{markdown:!0}})],t.prototype,"totalText",void 0),c([p()],t.prototype,"hideIfRowsEmpty",void 0),t})(et);V.addClass("matrixdropdown",[{name:"rows:itemvalue[]",uniqueProperty:"value"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"},"hideIfRowsEmpty:boolean"],function(){return new Ki("")},"matrixdropdownbase"),K.Instance.registerQuestion("matrixdropdown",function(r){var t=new Ki(r);return t.choices=[1,2,3,4,5],t.rows=K.DefaultRows,et.addDefaultColumns(t),t}),k.getWindow()&&k.getWindow().addEventListener("touchmove",function(r){ao.PreventScrolling&&r.preventDefault()},{passive:!1});var ao=(function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1);var n=this;this.dd=t,this.longTap=e,this.fitToContainer=i,this.scrollIntervalId=null,this.stopLongTapIfMoveEnough=function(o){o.preventDefault(),n.currentX=o.pageX,n.currentY=o.pageY,!n.isMicroMovement&&(n.returnUserSelectBack(),n.stopLongTap())},this.stopLongTap=function(o){clearTimeout(n.timeoutID),n.timeoutID=null,D.getDocument().removeEventListener("pointerup",n.stopLongTap),D.getDocument().removeEventListener("pointermove",n.stopLongTapIfMoveEnough)},this.handlePointerCancel=function(o){n.clear()},this.handleEscapeButton=function(o){o.keyCode==27&&n.clear()},this.onContextMenu=function(o){o.preventDefault(),o.stopPropagation()},this.dragOver=function(o){n.moveShortcutElement(o),n.draggedElementShortcut.style.cursor="grabbing",n.dd.dragOver(o)},this.clear=function(){cancelAnimationFrame(n.scrollIntervalId),D.getDocument().removeEventListener("pointermove",n.dragOver),D.getDocument().removeEventListener("pointercancel",n.handlePointerCancel),D.getDocument().removeEventListener("keydown",n.handleEscapeButton),D.getDocument().removeEventListener("pointerup",n.drop),n.draggedElementShortcut.removeEventListener("pointerup",n.drop),m.IsTouch&&n.draggedElementShortcut.removeEventListener("contextmenu",n.onContextMenu),n.draggedElementShortcut.parentElement.removeChild(n.draggedElementShortcut),n.dd.clear(),n.draggedElementShortcut=null,n.scrollIntervalId=null,m.IsTouch&&(n.savedTargetNode.style.cssText=null,n.savedTargetNode&&n.savedTargetNode.parentElement.removeChild(n.savedTargetNode),n.insertNodeToParentAtIndex(n.savedTargetNodeParent,n.savedTargetNode,n.savedTargetNodeIndex),r.PreventScrolling=!1),n.savedTargetNode=null,n.savedTargetNodeParent=null,n.savedTargetNodeIndex=null,n.returnUserSelectBack()},this.drop=function(){n.dd.drop(),n.clear()},this.draggedElementShortcut=null}return Object.defineProperty(r.prototype,"documentOrShadowRoot",{get:function(){var t=this.rootElement.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rootElement",{get:function(){return Bt(C.environment.root)?this.rootContainer||C.environment.root:this.rootContainer||C.environment.root.documentElement||D.getDocument().body},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewRootElement",{get:function(){return Bt(this.rootElement)?this.rootElement.host:this.rootElement},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMicroMovement",{get:function(){var t=5,e=Math.abs(this.currentX-this.startX),i=Math.abs(this.currentY-this.startY);return e<t&&i<t},enumerable:!1,configurable:!0}),r.prototype.startLongTapProcessing=function(t,e,i,n,o){var s=this;o===void 0&&(o=!1),this.startX=t.pageX,this.startY=t.pageY,D.getDocument().body.style.setProperty("touch-action","none","important"),this.timeoutID=setTimeout(function(){s.doStartDrag(t,e,i,n),o||(s.savedTargetNode=t.target,s.savedTargetNode.style.cssText=`
          position: absolute;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden;
          clip: rect(1px 1px 1px 1px);
          clip: rect(1px, 1px, 1px, 1px);
        `,s.savedTargetNodeParent=s.savedTargetNode.parentElement,s.savedTargetNodeIndex=s.getNodeIndexInParent(s.savedTargetNode),s.rootElement.appendChild(s.savedTargetNode)),s.stopLongTap()},this.longTap?500:0),D.getDocument().addEventListener("pointerup",this.stopLongTap),D.getDocument().addEventListener("pointermove",this.stopLongTapIfMoveEnough)},r.prototype.moveShortcutElement=function(t){var e=this.viewRootElement.getBoundingClientRect().x,i=this.viewRootElement.getBoundingClientRect().y,n=this.viewRootElement.scrollLeft,o=this.viewRootElement.scrollTop;this.doScroll(t.clientY,t.clientX);var s=this.draggedElementShortcut.offsetHeight,a=this.draggedElementShortcut.offsetWidth,l=this.draggedElementShortcut.shortcutXOffset||a/2,u=this.draggedElementShortcut.shortcutYOffset||s/2;D.getComputedStyle(this.rootElement).direction==="rtl"&&(l=a/2,u=s/2);var f=D.getDocument().documentElement.clientHeight,y=D.getDocument().documentElement.clientWidth,b=t.pageX,E=t.pageY,S=t.clientX,O=t.clientY;e-=n,i-=o;var R=this.getShortcutBottomCoordinate(O,s,u),A=this.getShortcutRightCoordinate(S,a,l);if(A>=y){this.draggedElementShortcut.style.left=y-a-e+"px",this.draggedElementShortcut.style.top=O-u-i+"px";return}if(S-l<=0){this.draggedElementShortcut.style.left=b-S-e+"px",this.draggedElementShortcut.style.top=O-i-u+"px";return}if(R>=f){this.draggedElementShortcut.style.left=S-l-e+"px",this.draggedElementShortcut.style.top=f-s-i+"px";return}if(O-u<=0){this.draggedElementShortcut.style.left=S-l-e+"px",this.draggedElementShortcut.style.top=E-O-i+"px";return}this.draggedElementShortcut.style.left=S-e-l+"px",this.draggedElementShortcut.style.top=O-i-u+"px"},r.prototype.getShortcutBottomCoordinate=function(t,e,i){return t+e-i},r.prototype.getShortcutRightCoordinate=function(t,e,i){return t+e-i},r.prototype.requestAnimationFrame=function(t){return requestAnimationFrame(t)},r.prototype.scrollByDrag=function(t,e,i){var n=this,o=100,s,a,l,u;t.tagName==="HTML"?(s=0,a=D.getDocument().documentElement.clientHeight,l=0,u=D.getDocument().documentElement.clientWidth):(s=t.getBoundingClientRect().top,a=t.getBoundingClientRect().bottom,l=t.getBoundingClientRect().left,u=t.getBoundingClientRect().right);var f=function(){var y=e-s<=o,b=a-e<=o,E=i-l<=o,S=u-i<=o;y&&!E&&!S?t.scrollTop-=15:b&&!E&&!S?t.scrollTop+=15:S&&!y&&!b?t.scrollLeft+=15:E&&!y&&!b&&(t.scrollLeft-=15),n.scrollIntervalId=n.requestAnimationFrame(f)};this.scrollIntervalId=this.requestAnimationFrame(f)},r.prototype.doScroll=function(t,e){cancelAnimationFrame(this.scrollIntervalId);var i=this.draggedElementShortcut.style.display;this.draggedElementShortcut.style.display="none";var n=this.documentOrShadowRoot.elementFromPoint(e,t);this.draggedElementShortcut.style.display=i||"block";var o=_t(n);this.scrollByDrag(o,t,e)},r.prototype.doStartDrag=function(t,e,i,n){m.IsTouch&&(r.PreventScrolling=!0),t.which!==3&&(this.dd.dragInit(t,e,i,n),this.rootElement.append(this.draggedElementShortcut),this.moveShortcutElement(t),D.getDocument().addEventListener("pointermove",this.dragOver),D.getDocument().addEventListener("pointercancel",this.handlePointerCancel),D.getDocument().addEventListener("keydown",this.handleEscapeButton),D.getDocument().addEventListener("pointerup",this.drop),m.IsTouch?this.draggedElementShortcut.addEventListener("contextmenu",this.onContextMenu):this.draggedElementShortcut.addEventListener("pointerup",this.drop))},r.prototype.returnUserSelectBack=function(){D.getDocument().body.style.setProperty("touch-action","auto"),D.getDocument().body.style.setProperty("user-select","auto"),D.getDocument().body.style.setProperty("-webkit-user-select","auto")},r.prototype.startDrag=function(t,e,i,n,o){if(o===void 0&&(o=!1),D.getDocument().body.style.setProperty("user-select","none","important"),D.getDocument().body.style.setProperty("-webkit-user-select","none","important"),m.IsTouch){this.startLongTapProcessing(t,e,i,n,o);return}this.doStartDrag(t,e,i,n)},r.prototype.getNodeIndexInParent=function(t){return z([],t.parentElement.childNodes,!0).indexOf(t)},r.prototype.insertNodeToParentAtIndex=function(t,e,i){t.insertBefore(e,t.childNodes[i])},r.PreventScrolling=!1,r})(),Yi=(function(){function r(t,e,i,n){var o=this,s;this.surveyValue=t,this.creator=e,this._isBottom=null,this.onGhostPositionChanged=new se,this.onDragStart=new se,this.onDragEnd=new se,this.onDragClear=new se,this.onBeforeDrop=this.onDragStart,this.onAfterDrop=this.onDragEnd,this.draggedElement=null,this.dropTarget=null,this.prevDropTarget=null,this.allowDropHere=!1,this.banDropHere=function(){o.allowDropHere=!1,o.doBanDropHere(),o.dropTarget=null,o.domAdapter.draggedElementShortcut.style.cursor="not-allowed",o.isBottom=null},this.doBanDropHere=function(){},this.domAdapter=n||new ao(this,i,(s=this.survey)===null||s===void 0?void 0:s.fitToContainer)}return Object.defineProperty(r.prototype,"isBottom",{get:function(){return!!this._isBottom},set:function(t){this._isBottom=t,this.ghostPositionChanged()},enumerable:!1,configurable:!0}),r.prototype.ghostPositionChanged=function(){this.onGhostPositionChanged.fire({},{})},Object.defineProperty(r.prototype,"dropTargetDataAttributeName",{get:function(){return"[data-sv-drop-target-".concat(this.draggedElementType,"]")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"survey",{get:function(){var t;return this.surveyValue||((t=this.creator)===null||t===void 0?void 0:t.survey)},enumerable:!1,configurable:!0}),r.prototype.startDrag=function(t,e,i,n,o){o===void 0&&(o=!1),this.domAdapter.rootContainer=this.getRootElement(this.survey,this.creator),this.domAdapter.startDrag(t,e,i,n,o)},r.prototype.getRootElement=function(t,e){return e?e.rootElement:t.rootElement},r.prototype.dragInit=function(t,e,i,n){this.draggedElement=e,this.parentElement=i;var o=this.getShortcutText(this.draggedElement);this.domAdapter.draggedElementShortcut=this.createDraggedElementShortcut(o,n,t),this.onStartDrag(t);var s=this.draggedElement&&this.draggedElement.parent;this.onDragStart.fire(this,{fromElement:s,draggedElement:this.draggedElement})},r.prototype.onStartDrag=function(t){},r.prototype.isDropTargetDoesntChanged=function(t){return this.dropTarget===this.prevDropTarget&&t===this.isBottom},r.prototype.getShortcutText=function(t){return t?.shortcutText},r.prototype.createDraggedElementShortcut=function(t,e,i){var n=D.createElement("div");return n&&(n.innerText=t,n.className=this.getDraggedElementClass()),n},r.prototype.getDraggedElementClass=function(){return"sv-dragged-element-shortcut"},r.prototype.doDragOver=function(){},r.prototype.afterDragOver=function(t){},r.prototype.findDropTargetNodeFromPoint=function(t,e){var i=this.domAdapter.draggedElementShortcut.style.display;if(this.domAdapter.draggedElementShortcut.style.display="none",!D.isAvailable())return null;var n=this.domAdapter.documentOrShadowRoot.elementsFromPoint(t,e);this.domAdapter.draggedElementShortcut.style.display=i||"block";for(var o=0,s=n[o];s&&s.className&&typeof s.className.indexOf=="function"&&s.className.indexOf("sv-drag-target-skipped")!=-1;)o++,s=n[o];return s?this.findDropTargetNodeByDragOverNode(s):null},r.prototype.getDataAttributeValueByNode=function(t){var e=this,i="svDropTarget",n=this.draggedElementType.split("-");return n.forEach(function(o){i+=e.capitalizeFirstLetter(o)}),t.dataset[i]},r.prototype.getDropTargetByNode=function(t,e){var i=this.getDataAttributeValueByNode(t);return this.getDropTargetByDataAttributeValue(i,t,e)},r.prototype.capitalizeFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},r.prototype.calculateVerticalMiddleOfHTMLElement=function(t){var e=t.getBoundingClientRect();return e.y+e.height/2},r.prototype.calculateHorizontalMiddleOfHTMLElement=function(t){var e=t.getBoundingClientRect();return e.x+e.width/2},r.prototype.calculateIsBottom=function(t,e){return!1},r.prototype.findDropTargetNodeByDragOverNode=function(t){var e=t.closest(this.dropTargetDataAttributeName);return e},r.prototype.dragOver=function(t){var e=this.findDropTargetNodeFromPoint(t.clientX,t.clientY);if(!e){this.banDropHere();return}this.dropTarget=this.getDropTargetByNode(e,t);var i=this.isDropTargetValid(this.dropTarget,e);if(this.doDragOver(),!i){this.banDropHere();return}var n=this.calculateIsBottom(t.clientY,e);this.allowDropHere=!0,!this.isDropTargetDoesntChanged(n)&&(this.isBottom=null,this.isBottom=n,this.draggedElement!=this.dropTarget&&this.afterDragOver(e),this.prevDropTarget=this.dropTarget)},r.prototype.drop=function(){if(this.allowDropHere){var t=this.draggedElement.parent,e=this.doDrop();this.onDragEnd.fire(this,{fromElement:t,draggedElement:e,toElement:this.dropTarget})}},r.prototype.clear=function(){var t={draggedElement:this.draggedElement};this.dropTarget=null,this.prevDropTarget=null,this.draggedElement=null,this.isBottom=null,this.parentElement=null,this.onDragClear.fire(this,t)},r})(),jl=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dropIsBanned=!1,e.matrixRowMap={},e.fromIndex=null,e.toIndex=null,e.toMatrix=null,e.expandCollapseTimer=null,e.expandCollapseHandlingRow=null,e.doBanDropHere=function(){e.dropIsBanned||(e.removeGhost(),e.parentElement.renderedTable.rows.splice(e.initialDraggedElementIndex,0,e.draggedRenderedRow),e.dropIsBanned=!0,e.lastDropTargetParentElement=e.parentElement)},e.doDrop=function(){if(e.parentElement==e.toMatrix)e.fromIndex<e.toIndex&&e.toIndex--,e.parentElement.moveRowByIndex(e.fromIndex,e.toIndex);else if(e.toMatrix){var i=$e({},e.parentElement.value[e.fromIndex]);e.parentElement.removeRowByIndex(e.fromIndex),e.toMatrix.addRowByIndex(i,e.toIndex)}return e.parentElement},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"matrix-row"},enumerable:!1,configurable:!0}),t.prototype.patchUserSelect=function(){var e=D.getBody();e&&(this.restoreUserSelectValue=e.style.userSelect,e.style.userSelect="none")},t.prototype.onStartDrag=function(){var e=this,i;this.patchUserSelect();var n=this.parentElement.renderedTable.rows,o=n.findIndex(function(a){return a.row===e.draggedElement});o>=0&&(this.draggedRenderedRow=n[o],this.initialDraggedElementIndex=o,this.draggedRenderedRow.isGhostRow=!0,this.lastDropTargetParentElement=this.parentElement);var s=[];this.survey.onMatrixRowDragOver.isEmpty?s.push(this.parentElement):this.fillMatricies(this.survey.getAllQuestions(),s),this.fillMatrixRowMap(s),this.fromIndex=this.parentElement.visibleRows.indexOf(this.draggedElement),(i=this.draggedElement)===null||i===void 0||i.hideDetailPanel()},t.prototype.fillMatricies=function(e,i){var n=this,o=e.filter(function(s){return s.isDescendantOf("matrixdynamic")&&s.allowRowReorder});o.forEach(function(s){i.push(s),s.detailPanelMode!=="none"&&s.visibleRows.forEach(function(a){a.isDetailPanelShowing&&n.fillMatricies(a.questions,i)})})},t.prototype.fillMatrixRowMap=function(e){var i=this;e.forEach(function(n){n.visibleRows.forEach(function(o){i.matrixRowMap[o.id]={row:o,matrix:n}}),n.visibleRows.length==0&&(i.matrixRowMap[n.id]={row:n,matrix:n})})},Object.defineProperty(t.prototype,"shortcutClass",{get:function(){return new I().append(this.parentElement.cssClasses.draggedRow).toString()},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,i,n){var o=D.createElement("div");if(o){o.className=this.shortcutClass;var s=!0;if(i){var a=i.closest("[data-sv-drop-target-matrix-row]"),l=a.cloneNode(s);l.style.cssText=`
        width: `.concat(a.offsetWidth,`px;
      `),l.classList.remove("sv-matrix__drag-drop--moveup"),l.classList.remove("sv-matrix__drag-drop--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,o.appendChild(l);var u=i.getBoundingClientRect();o.shortcutXOffset=n.clientX-u.x,o.shortcutYOffset=n.clientY-u.y}return o}},t.prototype.getDropTargetByDataAttributeValue=function(e){var i=this.matrixRowMap[e];return i?.row||i?.matrix},t.prototype.canInsertIntoThisRow=function(e){var i=this.parentElement.lockedRowCount;return i<=0||e.rowIndex>i},t.prototype.isDropTargetValid=function(e,i){return this.canInsertIntoThisRow(e)},t.prototype.calculateIsBottom=function(e,i){var n=!!i.dataset.svDropTargetMatrix;if(n)return!0;var o=i.getBoundingClientRect();return e>=o.y+o.height/2},t.prototype.doDragOver=function(){var e=this,i,n,o,s,a,l,u,f;if(!this.survey.onMatrixRowDragOver.isEmpty&&this.dropTarget&&typeof this.dropTarget.isDetailPanelShowing<"u"&&this.dropTarget.isDetailPanelShowing===!1){var y=this.dropTarget,b=y.data,E=b.renderedTable.rows.filter(function(R){return R.row==y})[0],S=(s=(o=(n=(i=E?.cells[1])===null||i===void 0?void 0:i.item)===null||n===void 0?void 0:n.value)===null||o===void 0?void 0:o.actions)===null||s===void 0?void 0:s.filter(function(R){return R.id=="show-detail"})[0],O=(f=(u=(l=(a=E?.cells[E.cells.length-1])===null||a===void 0?void 0:a.item)===null||l===void 0?void 0:l.value)===null||u===void 0?void 0:u.actions)===null||f===void 0?void 0:f.filter(function(R){return R.id=="show-detail"})[0];S?.visible||O?.visible?this.expandCollapseHandlingRow!==y.id&&(this.expandCollapseHandlingRow=y.id,this.clearExpandCollapseTimeout(),this.expandCollapseTimer=setTimeout(function(){var R=[];y.showDetailPanel(),e.fillMatricies([b],R),e.fillMatrixRowMap(R)},500)):this.clearExpandCollapseTimeout()}},t.prototype.removeGhost=function(){var e=this.lastDropTargetParentElement.renderedTable.rows,i=e.indexOf(this.draggedRenderedRow);i>=0&&e.splice(i,1)},t.prototype.afterDragOver=function(e){var i=this;if(this.dropTarget){var n=this.matrixRowMap[this.dropTarget.id].matrix,o=this.matrixRowMap[this.dropTarget.id].row,s=this.isBottom&&!o.isDetailPanelShowing?1:0,a=0,l={allow:n==this.parentElement,row:o,fromMatrix:this.parentElement,toMatrix:n};if(this.survey.onMatrixRowDragOver.fire(this.survey,l),!!l.allow){this.removeGhost(),this.lastDropTargetParentElement=n;var u=n.renderedTable.rows;if(n.visibleRows.length>0){var f=u.findIndex(function(y){return y.row==i.dropTarget});f>=0&&u.splice(f+s,0,this.draggedRenderedRow),a=n.visibleRows.indexOf(this.dropTarget)+s}else n.renderedTable.headerRow||(u[0].cells[0].colSpans=this.draggedRenderedRow.cells.length),u.splice(0,0,this.draggedRenderedRow);this.toIndex=a,this.toMatrix=n,this.dropIsBanned=!1,r.prototype.ghostPositionChanged.call(this)}}},t.prototype.clear=function(){this.matrixRowMap={};var e=this.parentElement.renderedTable.rows;e.forEach(function(n){n.isGhostRow=!1}),this.parentElement.clearOnDrop(),this.toMatrix&&this.toMatrix.clearOnDrop(),this.fromIndex=null,this.toIndex=null;var i=D.getBody();i&&(i.style.userSelect=this.restoreUserSelectValue||"initial"),r.prototype.clear.call(this),this.clearExpandCollapseTimeout()},t.prototype.clearExpandCollapseTimeout=function(){clearTimeout(this.expandCollapseTimer),this.expandCollapseTimer=null,this.expandCollapseHandlingRow=null},t})(Yi),Yt=(function(){function r(t,e){e===void 0&&(e=!0);var i=this;this.dragHandler=t,this.preventOnTouch=e,this.rootNode=null,this.onPointerUp=function(n){i.clearListeners()},this.tryToStartDrag=function(n){if(i.currentX=n.pageX,i.currentY=n.pageY,!i.isMicroMovement)return i.clearListeners(),i.dragHandler(i.pointerDownEvent,i.targets,i.itemModel),!0}}return r.prototype.onPointerDown=function(t,e){if(this.targets={currentTarget:t.currentTarget,target:t.target},m.IsTouch&&this.preventOnTouch){this.dragHandler(t,this.targets,e);return}this.pointerDownEvent=t,this.startX=t.pageX,this.startY=t.pageY;var i=Qe(this.targets.currentTarget);i&&(i.addEventListener("pointermove",this.tryToStartDrag),this.rootNode=i,this.targets.currentTarget.addEventListener("pointerup",this.onPointerUp),this.itemModel=e)},Object.defineProperty(r.prototype,"isMicroMovement",{get:function(){var t=10,e=Math.abs(this.currentX-this.startX),i=Math.abs(this.currentY-this.startY);return e<t&&i<t},enumerable:!1,configurable:!0}),r.prototype.clearListeners=function(){var t;this.pointerDownEvent&&((t=this.rootNode)===null||t===void 0||t.removeEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.getRootNode().removeEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.removeEventListener("pointerup",this.onPointerUp))},r})(),Xi=(function(){function r(t,e,i){this.locText=t,this.btnEdit=e,this.btnRemove=i}return Object.defineProperty(r.prototype,"showRemove",{get:function(){return!!this.btnRemove},enumerable:!1,configurable:!0}),r})(),Zi=(function(){function r(t,e){this.question=t,this.noEntry=e,this.items=[]}return r.prototype.isEmpty=function(){return this.items.length==0},r.prototype.dispose=function(){this.items.forEach(function(t){var e,i;(e=t.btnEdit)===null||e===void 0||e.dispose(),(i=t.btnRemove)===null||i===void 0||i.dispose()})},r})(),ql=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.question=e,i}return t.prototype.getValue=function(e){var i=e.path,n=e.index,o=this.question;if(n>-1&&o.isDesignMode)return o.getDesignRowContext().getValue(e);if(n>-1){var s=o.allRows;return n>=0&&n<s.length?(e.isRoot=!1,s[n].getValueGetterContext().getValue(e)):{isFound:!1,value:void 0,context:this}}return!e.createObjects&&this.question.isEmpty()?{isFound:i.length===0,value:void 0}:r.prototype.getValue.call(this,e)},t})(Wt),lo=(function(r){P(t,r);function t(e,i,n){var o=r.call(this,i,n)||this;return o.index=e,o.buildCells(n),o}return t.prototype.getRowIndex=function(){var e=r.prototype.getRowIndex.call(this);return e>0?e:this.index+1},Object.defineProperty(t.prototype,"rowName",{get:function(){return this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataName",{get:function(){return"row"+(this.index+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return"row "+(this.visibleIndex+1)},enumerable:!1,configurable:!0}),t.prototype.getAccessbilityText=function(){return(this.visibleIndex+1).toString()},Object.defineProperty(t.prototype,"shortcutText",{get:function(){var e=this.data,i=e.visibleRows.indexOf(this)+1,n=this.cells.length>1?this.cells[1].questionValue:void 0,o=this.cells.length>0?this.cells[0].questionValue:void 0;return n&&n.value||o&&o.value||""+i},enumerable:!1,configurable:!0}),t})(vt),en=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.rowCounter=0,i.setRowCountValueFromData=!1,i.startDragMatrixRow=function(n,o){i.dragDropMatrixRows.startDrag(n,i.draggedRow,i,o.target)},i.initialRowCount=i.getDefaultPropertyValue("rowCount"),i.dragOrClickHelper=new Yt(i.startDragMatrixRow),i}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="hideColumnsIfEmpty"||e==="allowAddRows")&&this.updateShowTableAndAddRow();var o=["allowRowReorder","isReadOnly","lockedRowCount"];o.indexOf(e)>-1&&this.resetRenderedTable(),e==="minRowCount"&&this.onMinRowCountChanged(),e==="maxRowCount"&&this.onMaxRowCountChanged(),e==="allowRemoveRows"&&!this.isUpdateLocked&&this.resetRenderedTable()},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e,i),this.dragDropMatrixRows=new jl(this.survey,null,!0)},t.prototype.isBanStartDrag=function(e){var i=e.target;return i.getAttribute("contenteditable")==="true"||i.nodeName==="INPUT"||!this.isDragHandleAreaValid(i)},t.prototype.isDragHandleAreaValid=function(e){return this.survey.matrixDragHandleArea==="icon"?e.classList.contains(this.cssClasses.dragElementDecorator):!0},t.prototype.onPointerDown=function(e,i){!i||!this.isRowsDragAndDrop||this.isDesignMode||this.isBanStartDrag(e)||(this.draggedRow=i,this.dragOrClickHelper.onPointerDown(e))},t.prototype.getType=function(){return"matrixdynamic"},t.prototype.getAllChildren=function(){return z(z(z([],r.prototype.getAllChildren.call(this),!0),this.columns,!0),this.choices,!0)},Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastRow",{get:function(){return this.copyDefaultValueFromLastEntry},set:function(e){this.copyDefaultValueFromLastEntry=e},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return r.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultRowValue)},t.prototype.valueFromData=function(e){return this.minRowCount<1||this.isEditingSurveyElement||this.isEmpty()?r.prototype.valueFromData.call(this,e):this.correctValueForMinMaxRows(e)},t.prototype.correctValueForMinMaxRows=function(e){Array.isArray(e)||(e=[]);for(var i=e.length;i<this.minRowCount;i++)e.push({});return e},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultRowValue)||!this.isValueEmpty(this.defaultValue)){r.prototype.setDefaultValue.call(this);return}if(!(!this.isEmpty()||this.rowCount==0)){for(var e=[],i=0;i<this.rowCount;i++)e.push(this.defaultRowValue);this.value=e}},t.prototype.moveRowByIndex=function(e,i){var n=this.createNewValue(),o=Math.max(e,i);if(!(!Array.isArray(n)&&o>=n.length)){var s=n[e];n.splice(e,1),n.splice(i,0,s);var a=this.generatedVisibleRows;if(Array.isArray(a)&&o<a.length){var l=a[i],u=a[e];if(this.getIsDetailPanelShowing(u)!==this.getIsDetailPanelShowing(l)){var f=this.getIsDetailPanelShowing(l);this.setIsDetailPanelShowing(l,this.getIsDetailPanelShowing(u)),this.setIsDetailPanelShowing(u,f)}}this.value=n,this.draggedRow=null}},t.prototype.addRowByIndex=function(e,i){var n=this.createNewValue();!Array.isArray(n)&&i>=n.length||(n.splice(i,0,e),this.rowCount++,this.value=n)},t.prototype.removeRowByIndex=function(e){var i=this.createNewValue();!Array.isArray(i)&&e>=i.length||(i.splice(e,1),this.rowCount--,this.value=i)},t.prototype.clearOnDrop=function(){this.isEditingSurveyElement||this.resetRenderedTable()},t.prototype.initDataUI=function(){this.generatedVisibleRows||this.getVisibleRows()},Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(e=w.getNumber(e),!(e<0||e>C.matrix.maxRowCount||e===this.rowCount)){this.setRowCountValueFromData=!1;var i=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var n=this.value;n.splice(e),this.value=n}if(this.isUpdateLocked){this.initialRowCount=e;return}if(this.generatedVisibleRows||i==0){this.generatedVisibleRows||(this.clearGeneratedRows(),this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var o=i;o<e;o++){var s=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(s),this.onMatrixRowCreated(s)}this.runCondition(this.getDataFilteredProperties())}this.onRowsChanged()}},enumerable:!1,configurable:!0}),t.prototype.updateBindingProp=function(e,i){r.prototype.updateBindingProp.call(this,e,i);var n=this.generatedVisibleRows;if(!(e!=="rowCount"||!Array.isArray(n))){var o=this.getUnbindValue(this.value)||[];if(o.length<n.length){for(var s=!1,a=o.length;a<n.length;a++)s||(s=!n[a].isEmpty),o.push(n[a].value||{});s&&(this.value=o)}}},t.prototype.updateProgressInfoByValues=function(e){var i=this.value;Array.isArray(i)||(i=[]);for(var n=0;n<this.rowCount;n++){var o=n<i.length?i[n]:{};this.updateProgressInfoByRow(e,o)}},t.prototype.getValueForNewRow=function(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e},Object.defineProperty(t.prototype,"allowRowsDragAndDrop",{get:function(){return this.allowRowReorder},set:function(e){this.allowRowReorder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRowDragIn",{get:function(){var e,i;return!(!((i=(e=this.survey)===null||e===void 0?void 0:e.onMatrixRowDragOver)===null||i===void 0)&&i.isEmpty)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.allowRowReorder&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconDragElement",{get:function(){return this.cssClasses.iconDragElement},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new Hl(this)},Object.defineProperty(t.prototype,"rowCountValue",{get:function(){return this.getPropertyValue("rowCount")},set:function(e){this.setPropertyValue("rowCount",e)},enumerable:!1,configurable:!0}),t.prototype.onMinRowCountChanged=function(){var e=this.minRowCount;e>this.maxRowCount&&(this.maxRowCount=e),this.initialRowCount<e&&(this.initialRowCount=e),this.rowCount<e&&(this.rowCount=e)},t.prototype.onMaxRowCountChanged=function(){var e=this.maxRowCount;e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)},Object.defineProperty(t.prototype,"canAddRow",{get:function(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){if(!this.survey)return!0;var i=e.rowIndex-1;return this.lockedRowCount>0&&i<this.lockedRowCount?!1:this.survey.matrixAllowRemoveRow(this,i,e)},t.prototype.addRowUI=function(){this.addRow(!0)},t.prototype.getQuestionToFocusOnAddingRow=function(){if(this.visibleRows.length===0)return null;for(var e=this.visibleRows[this.visibleRows.length-1],i=0;i<e.cells.length;i++){var n=e.cells[i].question;if(n&&n.isVisible&&!n.isReadOnly)return n}return null},t.prototype.addRow=function(e){var i=this.rowCount,n=this.canAddRow,o={question:this,canAddRow:n,allow:n};this.survey&&this.survey.matrixBeforeRowAdded(o);var s=n!==o.allow?o.allow:n!==o.canAddRow?o.canAddRow:n;if(s&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.singleInputOnAddItem(!1),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel(),e&&i!==this.rowCount)){var a=this.getQuestionToFocusOnAddingRow();a&&a.focus()}},t.prototype.runConditionsForColumns=function(e){return!1},t.prototype.unbindValue=function(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,r.prototype.unbindValue.call(this)},t.prototype.isValueSurveyElement=function(e){return this.isEditingSurveyElement||r.prototype.isValueSurveyElement.call(this,e)},t.prototype.addRowCore=function(){var e=this.rowCount;this.rowCount=this.rowCount+1;var i=this.getDefaultRowValue(!0),n=null;if(this.isValueEmpty(i)||(n=this.createNewValue(),n.length==this.rowCount&&(n[n.length-1]=i,this.value=n)),this.data){this.runCellsCondition(this.getDataFilteredProperties());var o=this.generatedVisibleRows;if(this.isValueEmpty(i)&&o.length>0){var s=o[o.length-1];this.isValueEmpty(s.value)||(n||(n=this.createNewValue()),!this.isValueSurveyElement(n)&&!this.isTwoValueEquals(n[n.length-1],s.value)&&(n[n.length-1]=s.value,this.value=n))}}if(this.survey){var o=this.visibleRows;if(e+1==this.rowCount&&o.length>0){var s=o[o.length-1];this.survey.matrixRowAdded(this,s),this.onRowsChanged()}}},t.prototype.getDefaultRowValue=function(e){for(var i=null,n=0;n<this.columns.length;n++){var o=this.columns[n].templateQuestion;o&&!this.isValueEmpty(o.getDefaultValue())&&(i=i||{},i[this.columns[n].name]=o.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var s in this.defaultRowValue)i=i||{},i[s]=this.defaultRowValue[s];if(e&&this.copyDefaultValueFromLastEntry){var a=this.value;if(a&&Array.isArray(a)&&a.length>=this.rowCount-1){var l=a[this.rowCount-2];for(var s in l)i=i||{},i[s]=l[s]}}return i},t.prototype.focusAddBUtton=function(){var e=this.getRootElement();if(e&&this.cssClasses.buttonAdd){var i=e.querySelectorAll("."+this.cssClasses.buttonAdd)[0];i&&i.focus()}},t.prototype.getActionCellIndex=function(e){var i=this.showHeader?1:0;return this.isColumnLayoutHorizontal?e.cells.length:this.visibleRows.indexOf(e)+i},t.prototype.removeRowUI=function(e){var i=this;if(e&&e.rowName){var n=this.visibleRows.indexOf(e);if(n<0)return;e=n}this.removeRow(e,void 0,function(){var o=i.visibleRows.length,s=n>=o?o-1:n,a=s>-1?i.visibleRows[s]:void 0;setTimeout(function(){a?i.renderedTable.focusActionCell(a,i.getActionCellIndex(a)):i.focusAddBUtton()},10)})},t.prototype.isRequireConfirmOnRowDelete=function(e){if(!this.confirmDelete||e<0||e>=this.rowCount)return!1;var i=this.createNewValue();return this.isValueEmpty(i)||!Array.isArray(i)||e>=i.length?!1:!this.isValueEmpty(i[e])},t.prototype.removeRow=function(e,i,n){var o=this;if(this.canRemoveRows&&!(e<0||e>=this.rowCount)){var s=this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;if(i===void 0&&(i=this.isRequireConfirmOnRowDelete(e)),i){ht({message:this.confirmDeleteText,funcOnYes:function(){o.removeRowAsync(e,s),n&&n()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog});return}this.removeRowAsync(e,s),n&&n()}},t.prototype.removeRowAsync=function(e,i){i&&this.survey&&!this.survey.matrixRowRemoving(this,e,i)||(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.singleInputOnRemoveItem(e),this.onEndRowRemoving(i),this.initialRowCount>this.rowCount&&(this.initialRowCount=this.rowCount))},t.prototype.removeRowCore=function(e){var i=this.visibleRows?this.visibleRows[e]:null;if(e=this.generatedVisibleRows.indexOf(i),!(e<0)){if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var n=[];Array.isArray(this.value)&&e<this.value.length?n=this.createValueCopy():n=this.createNewValue(),n.splice(e,1),n=this.deleteRowValue(n,null),this.isRowChanging=!0,this.value=n,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,i)}},t.prototype.onSingleInputQuestionAdded=function(e){this.showHeader||(e.titleLocation="hidden")},t.prototype.getSingleInputQuestionsCore=function(e,i){var n=new Array,o=this.visibleRows;if(i)for(var s=0;s<o.length;s++){var a=o[s];(!a.hasValueAnyQuestion(!0)||!a.validate(new Ze))&&this.fillSingleInputQuestionsByRow(n,a)}return this.getSingleInputQuestionsForDynamic(e,n)},t.prototype.fillSingleInputQuestionsInContainer=function(e,i){var n=this.getRowByQuestion(i);this.fillSingleInputQuestionsByRow(e,n)},t.prototype.fillSingleInputQuestionsByRow=function(e,i){i&&i.questions.forEach(function(n){return n.addNestedQuestion(e,!0,!1,!1)})},t.prototype.getSingleInputAddTextCore=function(){if(this.canAddRow)return this.addRowText},t.prototype.singleInputAddItemCore=function(){this.addRowUI()},t.prototype.getSingleQuestionOnChange=function(e){var i=this.visibleRows;if(i.length>0){(e<0||e>=i.length)&&(e=i.length-1);var n=i[e],o=n.visibleQuestions;if(o.length>0)return o[0]}return null},t.prototype.createSingleInputSummary=function(){var e=this,i=new Zi(this,this.locNoRowsText),n=new Array,o=this.canRemoveRows;return this.visibleRows.forEach(function(s){var a=new me(new oo(e,s),!0,void 0,e.getSingleInputTitleTemplate());a.setJson(e.locSingleInputTitleTemplate.getJson());var l=new G({locTitle:e.locEditRowText,action:function(){e.singleInputEditRow(s)}}),u=o&&e.canRemoveRow(s)?new G({locTitle:e.locRemoveRowText,action:function(){e.removeRowUI(s)}}):void 0;n.push(new Xi(a,l,u))}),i.items=n,i},Object.defineProperty(t.prototype,"defaultAddRowText",{get:function(){return this.getLocalizationString(this.isColumnLayoutHorizontal?"addRow":"addColumn")},enumerable:!1,configurable:!0}),t.prototype.getSingleInputTitleTemplate=function(){return"rowIndexTemplateTitle"},Object.defineProperty(t.prototype,"addRowLocation",{get:function(){return this.addRowButtonLocation},set:function(e){this.addRowButtonLocation=e},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return this.addRowButtonLocation},t.prototype.getShowColumnsIfEmpty=function(){return this.hideColumnsIfEmpty},Object.defineProperty(t.prototype,"locEditRowText",{get:function(){return this.getOrCreateLocStr("editRowText",!1,"editText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyRowsText",{get:function(){return this.noRowsText},set:function(e){this.noRowsText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEmptyRowsText",{get:function(){return this.locNoRowsText},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new ql(this)},t.prototype.getDisplayValueCore=function(e,i){if(!i||!Array.isArray(i))return i;for(var n=this.getUnbindValue(i),o=this.visibleRows,s=0;s<o.length&&s<n.length;s++){var a=n[s];a&&(n[s]=this.getRowDisplayValue(e,o[s],a))}return n},t.prototype.getConditionObjectRowName=function(e){return"["+e.toString()+"]"},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],i=Math.max(this.rowCount,1),n=0;n<Math.min(C.matrix.maxRowCountInCondition,i);n++)e.push(n);return e},t.prototype.supportAutoAdvance=function(){return!1},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCheckForErrors=function(e,i,n){r.prototype.onCheckForErrors.call(this,e,i,n),!i&&!this.validateMinRows()&&e.push(new Rl(this.minRowCount,this))},t.prototype.validateMinRows=function(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!0;var e=0;return this.generatedVisibleRows.forEach(function(i){i.isEmpty||e++}),e>=this.minRowCount},t.prototype.getUniqueColumnsNames=function(){var e=r.prototype.getUniqueColumnsNames.call(this),i=this.keyName;return i&&e.indexOf(i)<0&&e.push(i),e},t.prototype.generateRows=function(){var e=new Array;if(this.rowCount===0)return e;for(var i=this.createNewValue(),n=0;n<this.rowCount;n++)e.push(this.createMatrixRow(this.getRowValueByIndex(i,n)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=i),e},t.prototype.createMatrixRow=function(e){return new lo(this.rowCounter++,this,e)},t.prototype.getInsertedDeletedIndex=function(e,i){for(var n=Math.min(e.length,i.length),o=0;o<n;o++)if(i[o]!==e[o].editingObj)return o;return n},t.prototype.isEditingObjectValueChanged=function(){var e=this.value;if(!this.generatedVisibleRows||!this.isValueSurveyElement(e))return!1;var i=this.lastDeletedRow;this.lastDeletedRow=void 0;var n=this.generatedVisibleRows;if(!Array.isArray(e)||Math.abs(n.length-e.length)>1||n.length===e.length)return!1;var o=this.getInsertedDeletedIndex(n,e);if(n.length>e.length){this.lastDeletedRow=n[o];var s=n[o];n.splice(o,1),this.isRendredTableCreated&&this.renderedTable.onRemovedRow(s)}else{var a=void 0;i&&i.editingObj===e[o]?a=i:(i=void 0,a=this.createMatrixRow(e[o])),n.splice(o,0,a),i||this.onMatrixRowCreated(a),this.isRendredTableCreated&&this.renderedTable.onAddedRow(a,o)}return this.setPropertyValueDirectly("rowCount",e.length),!0},t.prototype.updateValueFromSurvey=function(e,i){i===void 0&&(i=!1);var n=this.setRowCountValueFromData;this.setRowCountValueFromData=!0;var o=!1;if(!n&&this.minRowCount>0&&!this.draggedRow){var s=Array.isArray(e)?e.length:0,a=this.isEditingSurveyElement;if(s<this.minRowCount&&(a&&this.rowCount>0||!a&&!w.isValueEmpty(this.defaultRowValue))){Array.isArray(e)||(e=[]);for(var l=s;l<this.minRowCount;l++)a?this.getValueForNewRow():e.push(w.createCopy(this.defaultRowValue))}a&&(s<=this.minRowCount&&this.rowCount>this.minRowCount||s>this.minRowCount&&this.rowCount<=this.minRowCount)&&(o=!0)}r.prototype.updateValueFromSurvey.call(this,e,i),o&&this.onRowsChanged(),this.setRowCountValueFromData=!1},t.prototype.getFilteredDataCore=function(){var e=[];return this.generatedVisibleRows.forEach(function(i){i.isVisible&&!i.isEmpty&&e.push(i.filteredValue)}),e},t.prototype.onBeforeValueChanged=function(e){if(!(!e||!Array.isArray(e))){var i=e.length;if(i!=this.rowCount&&!(!this.setRowCountValueFromData&&i<this.initialRowCount)&&!this.isEditingObjectValueChanged()&&(this.setRowCountValueFromData=!0,this.rowCountValue=i,!!this.generatedVisibleRows)){if(i==this.generatedVisibleRows.length+1){this.onStartRowAddingRemoving();var n=this.getRowValueByIndex(e,i-1),o=this.createMatrixRow(n);this.generatedVisibleRows.push(o),this.onMatrixRowCreated(o),this.onEndRowAdding()}else this.clearGeneratedRows(),this.getVisibleRows(),this.onRowsChanged();this.setRowCountValueFromData=!1}}},t.prototype.createNewValue=function(){var e=this.createValueCopy();(!e||!Array.isArray(e))&&(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var i=this.getDefaultRowValue(!1);i=i||{};for(var n=e.length;n<this.rowCount;n++)e.push(this.getUnbindValue(i));return e},t.prototype.deleteRowValue=function(e,i){if(!Array.isArray(e))return e;for(var n=!0,o=0;o<e.length;o++)if(this.isObject(e[o])&&Object.keys(e[o]).length>0){n=!1;break}return n?null:e},t.prototype.getRowValueByIndex=function(e,i){return Array.isArray(e)&&i>=0&&i<e.length?e[i]:null},t.prototype.getRowValueCore=function(e,i,n){if(n===void 0&&(n=!1),!this.generatedVisibleRows)return{};var o=this.getRowValueByIndex(i,this.generatedVisibleRows.indexOf(e));return!o&&n&&(o={}),o},t.prototype.getAddRowButtonCss=function(e){return e===void 0&&(e=!1),new I().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.emptyRowsButton,e).toString()},t.prototype.getRemoveRowButtonCss=function(){return new I().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).toString()},t.prototype.getRootCss=function(){var e;return new I().append(r.prototype.getRootCss.call(this)).append(this.cssClasses.empty,!(!((e=this.renderedTable)===null||e===void 0)&&e.showTable)).toString()},c([p()],t.prototype,"confirmDelete",void 0),c([p({defaultValue:""})],t.prototype,"keyName",void 0),c([p()],t.prototype,"defaultRowValue",void 0),c([p()],t.prototype,"copyDefaultValueFromLastEntry",void 0),c([p()],t.prototype,"allowRowReorder",void 0),c([p({defaultValue:0})],t.prototype,"lockedRowCount",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"minRowCount",void 0),c([p({onSetting:function(e){return e<=0?1:e>C.matrix.maxRowCount?C.matrix.maxRowCount:e}})],t.prototype,"maxRowCount",void 0),c([p()],t.prototype,"allowAddRows",void 0),c([p()],t.prototype,"allowRemoveRows",void 0),c([p()],t.prototype,"detailPanelShowOnAdding",void 0),c([p({localizable:{defaultStr:"confirmDelete"}})],t.prototype,"confirmDeleteText",void 0),c([p({localizable:{defaultStr:"addRow",onCreate:function(e,i){return i.onGetTextCallback=function(n){return n||e.defaultAddRowText}}}})],t.prototype,"addRowText",void 0),c([p()],t.prototype,"addRowButtonLocation",void 0),c([p()],t.prototype,"hideColumnsIfEmpty",void 0),c([p({localizable:{defaultStr:"removeRow"}})],t.prototype,"removeRowText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"noRowsText",void 0),t})(et),Hl=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setDefaultRowActions=function(e,i){r.prototype.setDefaultRowActions.call(this,e,i)},t})(Gi);V.addClass("matrixdynamic",[{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:C.matrix.maxRowCount},{name:"keyName"},"defaultRowValue:rowvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastRow"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(r){return!r||r.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowButtonLocation",alternativeName:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"noRowsText:text",alternativeName:"emptyRowsText",serializationProperty:"locNoRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(r){return!r||r.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(r){return r.detailPanelMode!=="none"}},{name:"allowRowReorder:switch",alternativeName:"allowRowsDragAndDrop"}],function(){return new en("")},"matrixdropdownbase"),K.Instance.registerQuestion("matrixdynamic",function(r){var t=new en(r);return t.choices=[1,2,3,4,5],et.addDefaultColumns(t),t});var He={currentType:"default",getCss:function(){var r=this.currentType?this[this.currentType]:Xt;return r||(r=Xt),r},getAvailableThemes:function(){return Object.keys(this).filter(function(r){return["currentType","getCss","getAvailableThemes"].indexOf(r)===-1})}},Xt={root:"sd-root-modern",rootProgress:"sd-progress",rootMobile:"sd-root-modern--mobile",rootAnimationDisabled:"sd-root-modern--animation-disabled",rootReadOnly:"sd-root--readonly",rootCompact:"sd-root--compact",rootFitToContainer:"sd-root-modern--full-container",rootWrapper:"sd-root-modern__wrapper",rootWrapperFixed:"sd-root-modern__wrapper--fixed",rootWrapperHasImage:"sd-root-modern__wrapper--has-image",rootBackgroundImage:"sd-root_background-image",container:"sd-container-modern",header:"sd-title sd-container-modern__title",bodyContainer:"sv-components-row",body:"sd-body",bodyWithTimer:"sd-body--with-timer",clockTimerRoot:"sd-timer",clockTimerRootTop:"sd-timer--top",clockTimerRootBottom:"sd-timer--bottom",clockTimerProgress:"sd-timer__progress",clockTimerProgressAnimation:"sd-timer__progress--animation",clockTimerTextContainer:"sd-timer__text-container",clockTimerMinorText:"sd-timer__text--minor",clockTimerMajorText:"sd-timer__text--major",bodyEmpty:"sd-body sd-body--empty",bodyLoading:"sd-body--loading",footer:"sd-footer sd-body__navigation sd-clearfix",title:"sd-title",description:"sd-description",logo:"sd-logo",logoImage:"sd-logo__image",headerText:"sd-header__text",headerClose:"sd-hidden",navigationButton:"",bodyNavigationButton:"sd-btn",completedPage:"sd-completedpage",completedBeforePage:"sd-completed-before-page",timerRoot:"sd-body__timer",navigation:{complete:"sd-btn--action sd-navigation__complete-btn",prev:"sd-navigation__prev-btn",next:"sd-navigation__next-btn",start:"sd-navigation__start-btn",preview:"sd-navigation__preview-btn",edit:"sd-btn sd-btn--small"},panel:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",asPage:"sd-panel--as-page",number:"sd-element__num",title:"sd-title sd-element__title sd-panel__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleNumInline:"sd-element__title--num-inline",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleOnExpand:"sd-panel__title--expanded",titleOnError:"sd-panel__title--error",titleBar:"sd-action-title-bar",description:"sd-description sd-panel__description",container:"sd-element sd-element--complex sd-panel sd-row__panel",withFrame:"sd-element--with-frame",content:"sd-element__content sd-panel__content",icon:"sd-panel__icon",iconExpanded:"sd-panel__icon--expanded",footer:"sd-panel__footer",requiredMark:"sd-panel__required-text",header:"sd-panel__header sd-element__header sd-element__header--location-top",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",nested:"sd-element--nested sd-element--nested-with-borders",invisible:"sd-element--invisible",navigationButton:"",compact:"sd-element--with-frame sd-element--compact",errorsContainer:"sd-panel__errbox sd-element__erbox sd-element__erbox--above-element"},paneldynamic:{mainRoot:"sd-element  sd-question sd-question--paneldynamic sd-element--complex sd-question--complex sd-row__question",empty:"sd-question--empty",root:"sd-paneldynamic",iconRemove:"sd-hidden",navigation:"sd-paneldynamic__navigation",title:"sd-title sd-element__title sd-question__title",header:"sd-paneldynamic__header sd-element__header",headerTab:"sd-paneldynamic__header-tab",button:"sd-action sd-paneldynamic__btn",buttonRemove:"sd-action--negative sd-paneldynamic__remove-btn",buttonAdd:"sd-paneldynamic__add-btn",buttonPrev:"sd-paneldynamic__prev-btn sd-action--icon sd-action",buttonPrevDisabled:"sd-action--disabled",buttonNextDisabled:"sd-action--disabled",buttonNext:"sd-paneldynamic__next-btn sd-action--icon sd-action",progressContainer:"sd-paneldynamic__progress-container",progress:"sd-progress",progressBar:"sd-progress__bar",nested:"sd-element--nested sd-element--nested-with-borders",progressText:"sd-paneldynamic__progress-text",separator:"sd-paneldynamic__separator",panelWrapper:"sd-paneldynamic__panel-wrapper",footer:"sd-paneldynamic__footer",panelFooter:"sd-paneldynamic__panel-footer",footerButtonsContainer:"sd-paneldynamic__buttons-container",panelsContainer:"sd-paneldynamic__panels-container",panelWrapperInRow:"sd-paneldynamic__panel-wrapper--in-row",panelWrapperEnter:"sd-paneldynamic__panel-wrapper--enter",panelWrapperLeave:"sd-paneldynamic__panel-wrapper--leave",panelWrapperList:"sd-paneldynamic__panel-wrapper--list",progressBtnIcon:"icon-progressbuttonv2",noEntriesPlaceholder:"sd-paneldynamic__placeholder sd-question__placeholder",compact:"sd-element--with-frame sd-element--compact",tabsContainer:"sd-paneldynamic__tabs-container",tabsContainerWithHeader:"sd-paneldynamic__tabs-container--with-header",tabsRoot:"sd-tabs-toolbar",tabsLeft:"sd-tabs-toolbar--left",tabsRight:"sd-tabs-toolbar--right",tabsCenter:"sd-tabs-toolbar--center",tabs:{item:"sd-tab-item",itemPressed:"sd-tab-item--pressed",itemAsIcon:"sd-tab-item--icon",itemIcon:"sd-tab-item__icon",itemTitle:"sd-tab-item__title"}},progress:"sd-progress sd-body__progress",progressTop:"sd-body__progress--top",progressBottom:"sd-body__progress--bottom",progressBar:"sd-progress__bar",progressText:"sd-progress__text",progressButtonsRoot:"sd-progress-buttons",progressButtonsNumbered:"sd-progress-buttons--numbered",progressButtonsFitSurveyWidth:"sd-progress-buttons--fit-survey-width",progressButtonsContainerCenter:"sd-progress-buttons__container-center",progressButtonsContainer:"sd-progress-buttons__container",progressButtonsConnector:"sd-progress-buttons__connector",progressButtonsButton:"sd-progress-buttons__button",progressButtonsButtonBackground:"sd-progress-buttons__button-background",progressButtonsButtonContent:"sd-progress-buttons__button-content",progressButtonsHeader:"sd-progress-buttons__header",progressButtonsFooter:"sd-progress-buttons__footer",progressButtonsImageButtonLeft:"sd-progress-buttons__image-button-left",progressButtonsImageButtonRight:"sd-progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sd-progress-buttons__image-button--hidden",progressButtonsListContainer:"sd-progress-buttons__list-container",progressButtonsList:"sd-progress-buttons__list",progressButtonsListElementPassed:"sd-progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sd-progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sd-progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sd-progress-buttons__page-title",progressButtonsPageDescription:"sd-progress-buttons__page-description",progressTextInBar:"sd-hidden",page:{root:"sd-page sd-body__page",emptyHeaderRoot:"sd-page__empty-header",title:"sd-title sd-page__title",description:"sd-description sd-page__description",number:"sd-page__num",errorsContainer:"sd-page__errbox"},pageTitle:"sd-title sd-page__title",pageDescription:"sd-description sd-page__description",row:"sd-row sd-clearfix",rowMultiple:"sd-row--multiple",rowCompact:"sd-row--compact",rowEnter:"sd-row--enter",rowDelayedEnter:"sd-row--delayed-enter",rowLeave:"sd-row--leave",rowReplace:"sd-row--replace",pageRow:"sd-page__row",question:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",mobile:"sd-question--mobile",mainRoot:"sd-element sd-question sd-row__question",flowRoot:"sd-element sd-question sd-row__question sd-row__question--flow",withFrame:"sd-element--with-frame",asCell:"sd-table__cell",answered:"sd-question--answered",header:"sd-question__header sd-element__header",headerLeft:"sd-question__header--location--left",headerTop:"sd-question__header--location-top sd-element__header--location-top",headerBottom:"sd-question__header--location--bottom",content:"sd-element__content sd-question__content",contentSupportContainerQueries:"sd-question__content--support-container-queries",contentLeft:"sd-question__content--left",titleNumInline:"sd-element__title--num-inline",titleLeftRoot:"sd-question--left",titleTopRoot:"sd-question--title-top",descriptionUnderInputRoot:"sd-question--description-under-input",titleBottomRoot:"sd-question--title-bottom",titleOnAnswer:"sd-question__title--answer",titleEmpty:"sd-question__title--empty",titleOnError:"sd-question__title--error",title:"sd-title sd-element__title sd-question__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleReadOnly:"sd-element__title--readonly",titleBar:"sd-action-title-bar",requiredMark:"sd-question__required-text",number:"sd-element__num",description:"sd-description sd-question__description",descriptionUnderInput:"sd-question__description--under-input",comment:"sd-input sd-comment",required:"sd-question--required",titleRequired:"sd-question__title--required",indent:20,footer:"sd-question__footer",commentArea:"sd-question__comment-area",formGroup:"sd-question__form-group",hasError:"sd-question--error",hasErrorTop:"sd-question--error-top",hasErrorBottom:"sd-question--error-bottom",collapsed:"sd-element--collapsed",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",expanded:"sd-element--expanded",nested:"sd-element--nested",invisible:"sd-element--invisible",composite:"sd-element--complex sd-composite",disabled:"sd-question--disabled",readOnly:"sd-question--readonly",preview:"sd-question--preview",noPointerEventsMode:"sd-question--no-pointer-events",errorsContainer:"sd-element__erbox sd-question__erbox",errorsContainerTop:"sd-element__erbox--above-element sd-question__erbox--above-question",errorsContainerBottom:"sd-question__erbox--below-question",confirmDialog:"sd-popup--confirm sv-popup--confirm",singleInputTitle:"sd-element__title--singleinput",singleInputWrapper:"sd-question__singleinput-wrapper",breadcrumbsRoot:"sd-breadcrumbs",breadcrumbsItem:"sd-breadcrumbs-item",breadcrumbsItemButton:"sd-breadcrumbs-item__button",breadcrumbsSeparator:"sd-breadcrumbs-separator",summary:"sd-summary",summaryRow:"sd-summary-row",summaryRowContent:"sd-summary-row__content",summaryRowActions:"sd-summary-row__actions",summaryRowAction:"sd-summary-row-action",summaryRowActionEdit:"sd-summary-row-action sd-summary-row-action--edit",summaryRowActionDelete:"sd-summary-row-action sd-summary-row-action--delete"},image:{mainRoot:"sd-element sd-question sd-question--image",root:"sd-image",image:"sd-image__image",adaptive:"sd-image__image--adaptive",noImage:"sd-image__no-image",noImageSvgIconId:"icon-no-image",withFrame:""},html:{mainRoot:"sd-element sd-question sd-row__question sd-question--html",root:"sd-html",withFrame:"",nested:"sd-element--nested sd-html--nested"},error:{root:"sd-error",warningMode:"sd-error--warning",infoMode:"sd-error--info",icon:"",item:"sd-error__item",locationTop:"",locationBottom:""},checkbox:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-checkbox sd-selectbase__item",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemOnError:"sd-item--error",itemSelectAll:"sd-checkbox--selectall",itemNone:"sd-checkbox--none",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemReadOnly:"sd-item--readonly sd-checkbox--readonly",itemPreview:"sd-item--preview sd-checkbox--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemSvgIconId:"#icon-check-16x16",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-checkbox__decorator",otherArea:"sd-selectbase__other",column:"sd-selectbase__column"},radiogroup:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-radio sd-selectbase__item",itemOnError:"sd-item--error",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemDisabled:"sd-item--disabled sd-radio--disabled",itemReadOnly:"sd-item--readonly sd-radio--readonly",itemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-radio__decorator",otherArea:"sd-selectbase__other",clearButton:"",column:"sd-selectbase__column"},boolean:{mainRoot:"sd-element sd-question sd-row__question sd-question--boolean",root:"sv_qcbc sv_qbln sd-scrollable-container sd-boolean-root",rootRadio:"sv_qcbc sv_qbln sd-scrollable-container sd-scrollable-container--compact",item:"sd-boolean",itemOnError:"sd-boolean--error",control:"sd-boolean__control sd-visuallyhidden",itemChecked:"sd-boolean--checked",itemExchanged:"sd-boolean--exchanged",itemIndeterminate:"sd-boolean--indeterminate",itemDisabled:"sd-boolean--disabled",itemReadOnly:"sd-boolean--readonly",itemPreview:"sd-boolean--preview",itemHover:"sd-boolean--allowhover",label:"sd-boolean__label",labelTrue:"sd-boolean__label--true",labelFalse:"sd-boolean__label--false",switch:"sd-boolean__switch",disabledLabel:"sd-checkbox__label--disabled",labelReadOnly:"sd-checkbox__label--readonly",labelPreview:"sd-checkbox__label--preview",sliderText:"sd-boolean__thumb-text",slider:"sd-boolean__thumb",sliderGhost:"sd-boolean__thumb-ghost",radioItem:"sd-item",radioItemChecked:"sd-item--checked sd-radio--checked",radioItemDisabled:"sd-item--disabled sd-radio--disabled",radioItemReadOnly:"sd-item--readonly sd-radio--readonly",radioItemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",radioLabel:"sd-selectbase__label",radioControlLabel:"sd-item__control-label",radioFieldset:"sd-selectbase",itemRadioDecorator:"sd-item__svg sd-radio__svg",materialRadioDecorator:"sd-item__decorator sd-radio__decorator",itemRadioControl:"sd-visuallyhidden sd-item__control sd-radio__control",rootCheckbox:"sd-selectbase",checkboxItem:"sd-item sd-selectbase__item sd-checkbox",checkboxLabel:"sd-selectbase__label",checkboxItemOnError:"sd-item--error",checkboxItemIndeterminate:"sd-checkbox--intermediate",checkboxItemChecked:"sd-item--checked sd-checkbox--checked",checkboxItemDecorator:"sd-item__svg sd-checkbox__svg",checkboxItemDisabled:"sd-item--disabled sd-checkbox--disabled",checkboxItemReadOnly:"sd-item--readonly sd-checkbox--readonly",checkboxItemPreview:"sd-item--preview sd-checkbox--preview",controlCheckbox:"sd-visuallyhidden sd-item__control sd-checkbox__control",checkboxMaterialDecorator:"sd-item__decorator sd-checkbox__decorator",checkboxControlLabel:"sd-item__control-label",checkboxIsLabelRendered:"sd-checkbox--label-rendered",svgIconCheckedId:"#icon-check-16x16"},text:{root:"sd-input sd-text",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",constrolWithCharacterCounter:"sd-text__character-counter",characterCounterBig:"sd-text__character-counter--big",content:"sd-text__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},multipletext:{root:"sd-multipletext",rootMobile:"sd-multipletext--mobile",itemLabel:"sd-multipletext__item-container sd-input",itemLabelReadOnly:"sd-input--readonly",itemLabelDisabled:"sd-input--disabled",itemLabelPreview:"sd-input--preview",itemLabelOnError:"sd-multipletext__item-container--error",itemLabelAllowFocus:"sd-multipletext__item-container--allow-focus",itemLabelAnswered:"sd-multipletext__item-container--answered",itemWithCharacterCounter:"sd-multipletext-item__character-counter",item:"sd-multipletext__item",itemTitle:"sd-multipletext__item-title",content:"sd-multipletext__content sd-question__content",row:"sd-multipletext__row",cell:"sd-multipletext__cell",cellError:"sd-multipletext__cell--error",cellErrorTop:"sd-multipletext__cell--error-top",cellErrorBottom:"sd-multipletext__cell--error-bottom"},dropdown:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",item:"sd-item sd-radio sd-selectbase__item",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",cleanButtonIconId:"icon-cancel",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-dropdown",controlInputFieldComponent:"sd-dropdown__input-field-component",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-radio__decorator",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},imagepicker:{mainRoot:"sd-element sd-question sd-row__question",root:"sd-selectbase sd-imagepicker",rootResponsive:"sd-imagepicker--responsive",rootStatic:"sd-imagepicker--static",rootColumn:"sd-imagepicker--column",item:"sd-imagepicker__item",itemOnError:"sd-imagepicker__item--error",itemInline:"sd-imagepicker__item--inline",itemChecked:"sd-imagepicker__item--checked",itemDisabled:"sd-imagepicker__item--disabled",itemReadOnly:"sd-imagepicker__item--readonly",itemPreview:"sd-imagepicker__item--preview",itemHover:"sd-imagepicker__item--allowhover",label:"sd-imagepicker__label",itemDecorator:"sd-imagepicker__item-decorator",imageContainer:"sd-imagepicker__image-container",itemControl:"sd-imagepicker__control sd-visuallyhidden",image:"sd-imagepicker__image",itemText:"sd-imagepicker__text",itemNoImage:"sd-imagepicker__no-image",itemNoImageSvgIcon:"sd-imagepicker__no-image-svg",itemNoImageSvgIconId:"icon-no-image",column:"sd-selectbase__column sd-imagepicker__column",checkedItemDecorator:"sd-imagepicker__check-decorator",checkedItemSvgIcon:"sd-imagepicker__check-icon",checkedItemSvgIconId:"icon-check-24x24"},matrix:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",tableWrapper:"sd-matrix sd-table-wrapper",tableWrapperLeft:"sd-table-wrapper--left",root:"sd-table sd-matrix__table",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",rootAlternateRows:"sd-table--alternate-rows",rowError:"sd-matrix__row--error",cell:"sd-table__cell sd-matrix__cell",row:"sd-table__row",rowDisabled:"sd-table__row-disabled",rowReadOnly:"sd-table__row-readonly",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-matrix__cell sd-table__cell--row-text",label:"sd-item sd-{type} sd-matrix__label",itemOnError:"sd-item--error",itemValue:"sd-visuallyhidden sd-item__control sd-{type}__control",itemChecked:"sd-item--checked sd-{type}--checked",itemDisabled:"sd-item--disabled sd-{type}--disabled",itemReadOnly:"sd-item--readonly sd-{type}--readonly",itemPreview:"sd-item--preview sd-{type}--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemHover:"sd-{type}--allowhover",materialDecorator:"sd-item__decorator sd-{type}__decorator",itemDecorator:"sd-item__svg sd-{type}__svg",cellText:"sd-matrix__text",cellTextSelected:"sd-matrix__text--checked",cellTextDisabled:"sd-matrix__text--disabled",cellResponsiveTitle:"sd-matrix__responsive-title",compact:"sd-element--with-frame sd-element--compact"},matrixdropdown:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",root:"sd-table sd-matrixdropdown",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",tableWrapper:"sd-table-wrapper",tableWrapperLeft:"sd-table-wrapper--left",rootAlternateRows:"sd-table--alternate-rows",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",itemCell:"sd-table__cell--item",row:"sd-table__row",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",expandedRow:"sd-table__row--expanded",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",compact:"sd-element--with-frame sd-element--compact"},matrixdynamic:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",empty:"sd-question--empty",root:"sd-table sd-matrixdynamic",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",tableWrapper:"sd-table-wrapper",tableWrapperLeft:"sd-table-wrapper--left",rootAlternateRows:"sd-table--alternate-rows",content:"sd-matrixdynamic__content sd-question__content",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",row:"sd-table__row",rowEmpty:"sd-table__row--empty",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",expandedRow:"sd-table__row--expanded",itemCell:"sd-table__cell--item",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",button:"sd-action sd-matrixdynamic__btn",detailRow:"sd-table__row sd-table__row--detail",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",buttonAdd:"sd-matrixdynamic__add-btn",buttonRemove:"sd-action--negative sd-matrixdynamic__remove-btn",iconAdd:"sd-hidden",iconRemove:"",dragElementDecorator:"sd-drag-element__svg",iconDragElement:"#icon-drag-24x24",footer:"sd-matrixdynamic__footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",noRowsSection:"sd-matrixdynamic__placeholder sd-question__placeholder",iconDrag:"sv-matrixdynamic__drag-icon",ghostRow:"sv-matrix-row--drag-drop-ghost-mod",draggedRow:"sv-matrixdynamic-dragged-row",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",compact:"sd-element--with-frame sd-element--compact"},rating:{rootDropdown:"sd-scrollable-container sd-scrollable-container--compact sd-selectbase",root:"sd-scrollable-container sd-rating",rootWrappable:"sd-rating--wrappable",rootLabelsTop:"sd-rating--labels-top",rootLabelsBottom:"sd-rating--labels-bottom",rootLabelsDiagonal:"sd-rating--labels-diagonal",item:"sd-rating__item",itemOnError:"sd-rating__item--error",itemHover:"sd-rating__item--allowhover",selected:"sd-rating__item--selected",itemStar:"sd-rating__item-star",itemStarOnError:"sd-rating__item-star--error",itemStarHover:"sd-rating__item-star--allowhover",itemStarSelected:"sd-rating__item-star--selected",itemStarDisabled:"sd-rating__item-star--disabled",itemStarReadOnly:"sd-rating__item-star--readonly",itemStarPreview:"sd-rating__item-star--preview",itemStarHighlighted:"sd-rating__item-star--highlighted",itemStarUnhighlighted:"sd-rating__item-star--unhighlighted",itemStarSmall:"sd-rating__item-star--small",itemSmiley:"sd-rating__item-smiley",itemSmileyOnError:"sd-rating__item-smiley--error",itemSmileyHover:"sd-rating__item-smiley--allowhover",itemSmileySelected:"sd-rating__item-smiley--selected",itemSmileyDisabled:"sd-rating__item-smiley--disabled",itemSmileyReadOnly:"sd-rating__item-smiley--readonly",itemSmileyPreview:"sd-rating__item-smiley--preview",itemSmileyHighlighted:"sd-rating__item-star--highlighted",itemSmileyScaleColored:"sd-rating__item-smiley--scale-colored",itemSmileyRateColored:"sd-rating__item-smiley--rate-colored",itemSmileySmall:"sd-rating__item-smiley--small",minText:"sd-rating__item-text sd-rating__min-text",itemText:"sd-rating__item-text",maxText:"sd-rating__item-text sd-rating__max-text",itemDisabled:"sd-rating__item--disabled",itemReadOnly:"sd-rating__item--readonly",itemPreview:"sd-rating__item--preview",itemFixedSize:"sd-rating__item--fixed-size",control:"sd-input sd-dropdown",itemSmall:"sd-rating--small",selectWrapper:"sv-dropdown_select-wrapper",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",onError:"sd-input--error"},slider:{root:"sd-slider",rootSingleMode:"sd-slider--single",rootNegativeScaleMode:"sd-slider--negative-scale-mode",rootDesignMode:"sd-slider--design-mode",rootAnimatedThumbMode:"sd-slider--animated-thumb-mode",rootTooltipsAlwaysMode:"sd-slider--tooltips-always-mode",rootLabelsShowValueTextMode:"sd-slider--labels-show-value-text-mode",visualContainer:"sd-slider-container",visualContainerSlider:"sd-slider-container__slider",rangeTrack:"sd-slider__track sd-slider__range-track",inverseTrackLeft:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--left",inverseTrackRight:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--right",thumbContainer:"sd-slider__thumb-container",thumbContainerIndeterminateMode:"sd-slider__thumb-container--indeterminate",thumbContainerFocusedMode:"sd-slider__thumb-container--focused",thumb:"sd-slider__thumb",thumbDot:"sd-slider__thumb-dot",tooltip:"sd-slider__tooltip",tooltipPanel:"sd-slider__tooltip-panel",tooltipOnHoverMode:"sd-slider__tooltip--on-hover",tooltipValue:"sd-slider__tooltip-value",input:"sd-slider__input",labelsContainer:"sd-slider-labels-container",label:"sd-slider__label",labelLongMod:"sd-slider__label--long",labelTick:"sd-slider__label-tick",labelTextContainer:"sd-slider__label-text-container",labelText:"sd-slider__label-text",labelTextSecondaryMode:"sd-slider__label-text sd-slider__label-text--secondary",clearButton:""},comment:{root:"sd-input sd-comment",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",content:"sd-comment__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},expression:"sd-expression",file:{root:"sd-file",rootDragging:"sd-file--dragging",rootAnswered:"sd-file--answered",rootDisabled:"sd-file--disabled",rootReadOnly:"sd-file--readonly",rootPreview:"sd-file--preview",placeholderInput:"sd-visuallyhidden",previewItem:"sd-file__preview-item",fileSign:"",fileList:"sd-file__list",fileSignBottom:"sd-file__sign",dragArea:"sd-file__drag-area",dragAreaActive:"sd-file__drag-area--active",fileDecorator:"sd-file__decorator",onError:"sd-file__decorator--error",fileDecoratorDrag:"sd-file__decorator--drag",fileInput:"sd-visuallyhidden",chooseFile:"sd-file__choose-btn",chooseFileAsText:"sd-action sd-file__choose-btn--text",chooseFileAsTextDisabled:"sd-action--disabled",chooseFileAsIcon:"sd-file__choose-btn--icon",chooseFileIconId:"icon-choosefile",disabled:"sd-file__choose-btn--disabled",controlDisabled:"sd-file__choose-file-btn--disabled",removeButton:"sd-context-btn--negative",removeButtonBottom:"",removeButtonIconId:"icon-clear",removeFile:"sd-hidden",removeFileSvg:"",removeFileSvgIconId:"icon-close_16x16",wrapper:"sd-file__wrapper",defaultImage:"sd-file__default-image",defaultImageIconId:"icon-defaultfile",leftIconId:"icon-arrowleft",rightIconId:"icon-arrowright",removeFileButton:"sd-context-btn--small sd-context-btn--with-border sd-context-btn--colorful sd-context-btn--negative sd-file__remove-file-button",dragAreaPlaceholder:"sd-file__drag-area-placeholder",imageWrapper:"sd-file__image-wrapper",imageWrapperDefaultImage:"sd-file__image-wrapper--default-image",single:"sd-file--single",singleImage:"sd-file--single-image",mobile:"sd-file--mobile",videoContainer:"sd-file__video-container",contextButton:"sd-context-btn",video:"sd-file__video",actionsContainer:"sd-file__actions-container",closeCameraButton:"sd-file__close-camera-button",changeCameraButton:"sd-file__change-camera-button",takePictureButton:"sd-file__take-picture-button",loadingIndicator:"sd-file__loading-indicator",page:"sd-file__page"},signaturepad:{mainRoot:"sd-element sd-question sd-question--signature sd-row__question",root:"sd-signaturepad sjs_sp_container",small:"sd-row__question--small",controls:"sjs_sp_controls sd-signaturepad__controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas sd-signaturepad__canvas",backgroundImage:"sjs_sp__background-image sd-signaturepad__background-image",clearButton:"sjs_sp_clear sd-context-btn sd-context-btn--negative sd-signaturepad__clear",clearButtonIconId:"icon-clear",loadingIndicator:"sd-signaturepad__loading-indicator"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sd-ranking--disabled",rootReadOnly:"sd-ranking--readonly",rootPreview:"sd-ranking--preview",rootDesignMode:"sv-ranking--design-mode",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankEmptyValueMod:"sv-ranking--select-to-rank-empty-value",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",rootSelectToRankSwapAreas:"sv-ranking--select-to-rank-swap-areas",item:"sv-ranking-item",itemContent:"sv-ranking-item__content sd-ranking-item__content",itemIndex:"sv-ranking-item__index sd-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty sd-ranking-item__index--empty",itemDisabled:"sv-ranking-item--disabled",itemReadOnly:"sv-ranking-item--readonly",itemPreview:"sv-ranking-item--preview",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking--drag",itemOnError:"sv-ranking-item--error",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},buttongroup:{root:"sd-button-group-scrollable-container sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden",rootDropdown:"sd-button-group-scrollable-container sd-scrollable-container--compact sd-selectbase",selectWrapper:"sv-dropdown_select-wrapper",control:"sd-input sd-dropdown",controlEmpty:"sd-dropdown--empty",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",cleanButtonIconId:"icon-cancel",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},list:{root:"sv-list__container sd-list",item:"sv-list__item sd-list__item",itemBody:"sv-list__item-body sd-list__item-body",itemSelected:"sv-list__item--selected sd-list__item--selected",itemFocused:"sv-list__item--focused sd-list__item--focused",itemHovered:"sv-list__item--hovered sd-list__item--hovered"},actionBar:{root:"sd-action-bar",item:"sd-action",defaultSizeMode:"",smallSizeMode:"",itemPressed:"sd-action--pressed",itemAsIcon:"sd-action--icon",itemIcon:"sd-action__icon",itemTitle:"sd-action__title"},variables:{mobileWidth:"--sd-mobile-width",themeMark:"--sv-defaultV2-mark"},tagbox:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemSvgIconId:"#icon-check-16x16",item:"sd-item sd-checkbox sd-selectbase__item",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",cleanButtonIconId:"icon-cancel-24x24",cleanItemButton:"sd-tagbox-item_clean-button",cleanItemButtonSvg:"sd-tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",chevronButtonIconId:"icon-chevron",control:"sd-input sd-tagbox sd-dropdown",controlValue:"sd-tagbox__value sd-dropdown__value",controlValueItems:"sd-tagbox__value-items",placeholderInput:"sd-tagbox__placeholder",controlEditable:"sd-input--editable",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty sd-tagbox--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-tagbox__filter-string-input sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-checkbox__decorator",hint:"sd-tagbox__hint",hintPrefix:"sd-dropdown__hint-prefix sd-tagbox__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix sd-tagbox__hint-suffix",hintSuffixWrapper:"sd-tagbox__hint-suffix-wrapper"},imagemap:{root:"sd-imagemap",bg:"sd-imagemap-bg",svg:"sd-imagemap-svg",svgItem:"sd-imagemap-svg-item",svgItemHovered:"sd-imagemap-svg-item sd-imagemap-svg-item--hover",svgItemSelected:"sd-imagemap-svg-item sd-imagemap-svg-item--selected",svgItemDisabled:"sd-imagemap-svg-item sd-imagemap-svg-item--disabled",svgControlPoint:"sd-imagemap-control-point"}},uo="default";He[uo]=Xt;var Le={setTimeout:function(r){return Le.safeTimeOut(r,1e3)},clearTimeout:function(r){clearTimeout(r)},safeTimeOut:function(r,t){return t<=0?(r(),0):setTimeout(r,t)},now:function(){return Date.now()}},tn=(function(){function r(){this.listenerCounter=0,this.timerId=-1,this.onTimerTick=new se,this.onTimer=this.onTimerTick}return Object.defineProperty(r,"instance",{get:function(){return r.instanceValue||(r.instanceValue=new r),r.instanceValue},enumerable:!1,configurable:!0}),r.prototype.start=function(t){var e=this;t===void 0&&(t=null),t&&this.onTimerTick.add(t),this.prevTimeInMs=Le.now(),this.timerId<0&&(this.timerId=Le.setTimeout(function(){e.doTimer()})),this.listenerCounter++},r.prototype.stop=function(t){t===void 0&&(t=null),t&&this.onTimerTick.remove(t),this.listenerCounter--,this.listenerCounter==0&&this.timerId>-1&&(Le.clearTimeout(this.timerId),this.timerId=-1)},r.prototype.doTimer=function(){var t=this;if((this.onTimerTick.isEmpty||this.listenerCounter==0)&&(this.timerId=-1),!(this.timerId<0)){var e=Le.now(),i=Math.floor((e-this.prevTimeInMs)/1e3);this.prevTimeInMs=e,i<0&&(i=1);var n=this.timerId;this.onTimerTick.fire(this,{seconds:i}),n===this.timerId&&(this.timerId=Le.setTimeout(function(){t.doTimer()}))}},r.instanceValue=null,r})(),co=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.timerFunc=null,i.surveyValue=e,i}return Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.survey&&(this.isRunning||this.isDesignMode||(this.survey.onCurrentPageChanged.add(function(){e.update()}),this.timerFunc=function(i,n){e.doTimer(n.seconds)},this.setIsRunning(!0),this.update(),tn.instance.start(this.timerFunc)))},t.prototype.stop=function(){this.isRunning&&(this.setIsRunning(!1),tn.instance.stop(this.timerFunc))},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getPropertyValue("isRunning",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsRunning=function(e){this.setPropertyValue("isRunning",e)},t.prototype.update=function(){this.updateText(),this.updateProgress()},t.prototype.doTimer=function(e){var i=this.survey.currentPage;if(i){var n=i.getMaxTimeToFinish();n>0&&n<i.timeSpent+e&&(e=n-i.timeSpent),i.timeSpent=i.timeSpent+e}this.spent=this.spent+e,this.update(),this.onTimerTick&&this.onTimerTick(i)},t.prototype.updateProgress=function(){var e=this,i=this.survey.timerInfo,n=i.spent,o=i.limit;o?(n==0?(this.progress=0,setTimeout(function(){e.progress=Math.floor((n+1)/o*100)/100},0)):n<=o&&(this.progress=Math.floor((n+1)/o*100)/100),this.progress>1&&(this.progress=void 0)):this.progress=void 0},t.prototype.updateText=function(){var e=this.survey.timerClock;this.clockMajorText=e.majorText,this.clockMinorText=e.minorText,this.text=this.survey.timerInfoText},Object.defineProperty(t.prototype,"showProgress",{get:function(){return this.progress!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimerAsClock",{get:function(){return!!this.survey.getCss().clockTimerRoot},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootCss",{get:function(){return new I().append(this.survey.getCss().clockTimerRoot).append(this.survey.getCss().clockTimerRootTop,this.survey.isTimerPanelShowingOnTop).append(this.survey.getCss().clockTimerRootBottom,this.survey.isTimerPanelShowingOnBottom).toString()},enumerable:!1,configurable:!0}),t.prototype.getProgressCss=function(){return new I().append(this.survey.getCss().clockTimerProgress).append(this.survey.getCss().clockTimerProgressAnimation,this.progress>0).toString()},Object.defineProperty(t.prototype,"textContainerCss",{get:function(){return this.survey.getCss().clockTimerTextContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minorTextCss",{get:function(){return this.survey.getCss().clockTimerMinorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"majorTextCss",{get:function(){return this.survey.getCss().clockTimerMajorText},enumerable:!1,configurable:!0}),c([p()],t.prototype,"text",void 0),c([p()],t.prototype,"progress",void 0),c([p()],t.prototype,"clockMajorText",void 0),c([p()],t.prototype,"clockMinorText",void 0),c([p({defaultValue:0})],t.prototype,"spent",void 0),t})(U),po=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.cssClasses=e,i.timeout=C.notifications.lifetime,i.timer=void 0,i.actionsVisibility={},i.showActions=!0,i.actionBar=new be,i.actionBar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode},!1),i.css=i.cssClasses.root,i}return t.prototype.getCssClass=function(e){return new I().append(this.cssClasses.root).append(this.cssClasses.rootWithButtons,this.actionBar.getVisibleActions().length>0).append(this.cssClasses.info,e!=="error"&&e!=="success").append(this.cssClasses.error,e==="error").append(this.cssClasses.success,e==="success").append(this.cssClasses.shown,this.active).toString()},t.prototype.updateActionsVisibility=function(e){var i=this;this.actionBar.actions.forEach(function(n){return n.visible=i.showActions&&i.actionsVisibility[n.id]===e})},t.prototype.notify=function(e,i,n){var o=this;i===void 0&&(i="info"),n===void 0&&(n=!1),this.isDisplayed=!0,setTimeout(function(){o.updateActionsVisibility(i),o.message=e,o.active=!0,o.css=o.getCssClass(i),o.timer&&(clearTimeout(o.timer),o.timer=void 0),n||(o.timer=setTimeout(function(){o.timer=void 0,o.active=!1,o.css=o.getCssClass(i)},o.timeout))},1)},t.prototype.addAction=function(e,i){e.visible=!1,e.innerCss=this.cssClasses.button;var n=this.actionBar.addAction(e);this.actionsVisibility[n.id]=i},c([p({defaultValue:!1})],t.prototype,"active",void 0),c([p({defaultValue:!1})],t.prototype,"isDisplayed",void 0),c([p()],t.prototype,"message",void 0),c([p()],t.prototype,"css",void 0),t})(U),ho=(function(){function r(t,e,i){this.cover=t,this.positionX=e,this.positionY=i}return r.prototype.calcRow=function(t){return t==="top"?1:t==="middle"?2:3},r.prototype.calcColumn=function(t){return t==="left"?1:t==="center"?2:3},r.prototype.calcAlignItems=function(t){return t==="left"?"flex-start":t==="center"?"center":"flex-end"},r.prototype.calcAlignText=function(t){return t==="left"?"start":t==="center"?"center":"end"},r.prototype.calcJustifyContent=function(t){return t==="top"?"flex-start":t==="middle"?"center":"flex-end"},r.prototype.calcGridRow=function(){var t=this.calcRow(this.positionY);if(this.cover.renderedHeight)return t;var e=this.cover.getVisibleRows(),i=e.indexOf(t);if(i===-1)return 0;var n=e.length;return n===3?t:n===1?1:i+1},Object.defineProperty(r.prototype,"survey",{get:function(){return this.cover.survey},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"css",{get:function(){var t=new I().append(r.CLASSNAME).append("".concat(r.CLASSNAME,"--").concat(this.positionX)).append("".concat(r.CLASSNAME,"--").concat(this.positionY)).append(r.CLASSNAME+"--empty",this.isEmpty).toString();return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){var t=this.calcGridRow(),e={};return e.gridRow=t,e.gridColumn=t!==0?this.calcColumn(this.positionX):0,e.width=this.width?this.width+"px":void 0,t===0&&(e.display="none"),e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentStyle",{get:function(){var t={};return t.textAlign=this.calcAlignText(this.positionX),t.alignItems=this.calcAlignItems(this.positionX),t.justifyContent=this.calcJustifyContent(this.positionY),t.maxWidth=this.contentMaxWidth,t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showLogo",{get:function(){return this.survey.hasLogo&&this.positionX===this.cover.logoPositionX&&this.positionY===this.cover.logoPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showTitle",{get:function(){return this.survey.hasTitle&&this.positionX===this.cover.titlePositionX&&this.positionY===this.cover.titlePositionY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showDescription",{get:function(){return this.survey.renderedHasDescription&&this.positionX===this.cover.descriptionPositionX&&this.positionY===this.cover.descriptionPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return!this.showLogo&&!this.showTitle&&!this.showDescription},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textAreaWidth",{get:function(){return this.cover.renderedTextAreaWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){if(this.cover.width)return Math.ceil(this.cover.width/3)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentMaxWidth",{get:function(){return this.cover.getContentMaxWidth(this)},enumerable:!1,configurable:!0}),r.CLASSNAME="sv-header__cell",r})(),Zt=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.cells=[],["top","middle","bottom"].forEach(function(i){return["left","center","right"].forEach(function(n){return e.cells.push(new ho(e,n,i))})}),e.init(),e}return t.prototype.calcBackgroundSize=function(e){return e==="fill"?"100% 100%":e==="tile"?"auto":e},t.prototype.updateHeaderClasses=function(){var e=!this.backgroundColor||this.backgroundColor==="transparent",i=this.backgroundColor==="var(--sjs-primary-backcolor)",n=!e&&!i;this.headerClasses=new I().append("sv-header").append("sv-header--height-auto",!this.renderedHeight).append("sv-header__without-background",e&&!this.backgroundImage).append("sv-header__background-color--none",e&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--accent",i&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--custom",n&&!this.titleColor&&!this.descriptionColor).append("sv-header__overlap",this.overlapEnabled).toString()},t.prototype.updateContentClasses=function(){var e=!!this.survey&&this.survey.calculateWidthMode(),i=this.inheritWidthFrom==="survey"&&!!e&&e==="static";if(this.maxWidth=i?this.survey.width:void 0,this.maxWidth){var n=this.maxWidth.toString();n.indexOf("px")===-1&&n.indexOf("%")===-1&&(this.maxWidth=parseFloat(n)+"px")}this.contentClasses=new I().append("sv-header__content").append("sv-header__content--static",i).append("sv-header__content--responsive",this.inheritWidthFrom==="container"||!!e&&e==="responsive").toString()},t.prototype.updateBackgroundImageClasses=function(){this.backgroundImageClasses=new I().append("sv-header__background-image").append("sv-header__background-image--contain",this.backgroundImageFit==="contain").append("sv-header__background-image--tile",this.backgroundImageFit==="tile").toString()},t.prototype.fromTheme=function(e){r.prototype.fromJSON.call(this,e.header||{}),e.cssVariables&&(this.backgroundColor=e.cssVariables["--sjs-header-backcolor"],this.titleColor=e.cssVariables["--sjs-font-headertitle-color"],this.descriptionColor=e.cssVariables["--sjs-font-headerdescription-color"]),this.init()},t.prototype.init=function(){this.renderBackgroundImage=Ai(this.backgroundImage),this.updateHeaderClasses(),this.updateContentClasses(),this.updateBackgroundImageClasses()},t.prototype.getType=function(){return"cover"},Object.defineProperty(t.prototype,"renderedHeight",{get:function(){if(this.survey&&!this.survey.isMobile||!this.survey)return this.height?this.height+"px":void 0;if(this.survey&&this.survey.isMobile)return this.mobileHeight?this.mobileHeight+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedTextAreaWidth",{get:function(){return this.textAreaWidth?this.textAreaWidth+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.survey.hasLogo&&!this.survey.hasTitle&&!this.survey.renderedHasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this._survey},set:function(e){var i=this;this._survey!==e&&(this._survey=e,e&&(this.updateContentClasses(),this._survey.onPropertyChanged.add(function(n,o){(o.name=="widthMode"||o.name=="width")&&i.updateContentClasses()})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImageStyle",{get:function(){return this.backgroundImage?{opacity:this.backgroundImageOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.calcBackgroundSize(this.backgroundImageFit)}:null},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="height"||e==="backgroundColor"||e==="backgroundImage"||e==="overlapEnabled")&&this.updateHeaderClasses(),e==="inheritWidthFrom"&&this.updateContentClasses(),e==="backgroundImageFit"&&this.updateBackgroundImageClasses()},t.prototype.getVisibleRows=function(){for(var e=[],i=0;i<3;i++){var n=i*3;(!this.cells[n].isEmpty||!this.cells[n+1].isEmpty||!this.cells[n+2].isEmpty)&&e.push(i+1)}return e.length!==0?e:[1,2,3]},t.prototype.getContentMaxWidth=function(e){if(!(e.isEmpty||e.showLogo)){var i=this.cells.indexOf(e),n=Math.floor(i/3),o=i%3;if(o==1){if(!this.cells[n*3].isEmpty||!this.cells[n*3+2].isEmpty)return"100%"}else if(o==0){for(var s=0,a=o+1;a<3&&this.cells[n*3+a].isEmpty;)this.cells[n*3+a].isEmpty&&s++,a++;return 100*(s+1)+"%"}else if(o==2){for(var l=0,a=o-1;a>0&&this.cells[n*3+a].isEmpty;)this.cells[n*3+a].isEmpty&&l++,a--;return 100*(l+1)+"%"}}},t.prototype.processResponsiveness=function(){if(this.survey&&this.survey.rootElement&&!this.survey.isMobile){var e=this.survey.rootElement.querySelectorAll(".sv-header__content")[0];if(!e)return;var i=e.getBoundingClientRect().width,n=D.getComputedStyle(e),o=parseFloat(n.paddingLeft)||0,s=parseFloat(n.paddingRight)||0,a=parseFloat(n.columnGap)||0;this.width=i-o-s-2*a}},Object.defineProperty(t.prototype,"hasBackground",{get:function(){return!!this.backgroundImage||this.backgroundColor!=="transparent"},enumerable:!1,configurable:!0}),c([p()],t.prototype,"height",void 0),c([p()],t.prototype,"mobileHeight",void 0),c([p()],t.prototype,"inheritWidthFrom",void 0),c([p()],t.prototype,"textAreaWidth",void 0),c([p()],t.prototype,"textGlowEnabled",void 0),c([p()],t.prototype,"overlapEnabled",void 0),c([p({defaultValue:"transparent"})],t.prototype,"backgroundColor",void 0),c([p()],t.prototype,"titleColor",void 0),c([p()],t.prototype,"descriptionColor",void 0),c([p({onSet:function(e,i){i.renderBackgroundImage=Ai(e)}})],t.prototype,"backgroundImage",void 0),c([p()],t.prototype,"renderBackgroundImage",void 0),c([p()],t.prototype,"backgroundImageFit",void 0),c([p()],t.prototype,"backgroundImageOpacity",void 0),c([p()],t.prototype,"logoPositionX",void 0),c([p()],t.prototype,"logoPositionY",void 0),c([p()],t.prototype,"titlePositionX",void 0),c([p()],t.prototype,"titlePositionY",void 0),c([p()],t.prototype,"descriptionPositionX",void 0),c([p()],t.prototype,"descriptionPositionY",void 0),c([p()],t.prototype,"logoStyle",void 0),c([p()],t.prototype,"titleStyle",void 0),c([p()],t.prototype,"descriptionStyle",void 0),c([p()],t.prototype,"headerClasses",void 0),c([p()],t.prototype,"contentClasses",void 0),c([p()],t.prototype,"width",void 0),c([p()],t.prototype,"maxWidth",void 0),c([p()],t.prototype,"backgroundImageClasses",void 0),t})(U);V.addClass("cover",[{name:"height:number",minValue:0,default:0},{name:"mobileHeight:number",minValue:0,default:0},{name:"inheritWidthFrom",default:"survey"},{name:"textAreaWidth:number",minValue:0,default:0},{name:"textGlowEnabled:boolean"},{name:"overlapEnabled:boolean"},{name:"backgroundImage:file"},{name:"backgroundImageOpacity:number",minValue:0,maxValue:1,default:1},{name:"backgroundImageFit",default:"cover",choices:["cover","fill","contain"]},{name:"logoPositionX",default:"left"},{name:"logoPositionY",default:"top"},{name:"titlePositionX",default:"left"},{name:"titlePositionY",default:"bottom"},{name:"descriptionPositionX",default:"left"},{name:"descriptionPositionY",default:"bottom"}],function(){return new Zt});var zl=(function(){function r(t){this.type=t,this.timestamp=new Date}return r})(),Ul=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.taskList=[],e.onAllTasksCompleted=e.addEvent(),e}return t.prototype.runTask=function(e,i){var n=this,o=new zl(e);return this.taskList.push(o),this.hasActiveTasks=!0,i(function(){return n.taskFinished(o)}),o},t.prototype.waitAndExecute=function(e){if(!this.hasActiveTasks){e();return}this.onAllTasksCompleted.add(function(){e()})},t.prototype.taskFinished=function(e){var i=this.taskList.indexOf(e);i>-1&&this.taskList.splice(i,1),this.hasActiveTasks&&this.taskList.length==0&&(this.hasActiveTasks=!1,this.onAllTasksCompleted.fire(this,{}))},c([p({defaultValue:!1})],t.prototype,"hasActiveTasks",void 0),t})(U),fo=(function(r){P(t,r);function t(e,i){var n=r.call(this)||this;return n.effectiveWidth=e,n.questionTitleWidth=i,n}return t.prototype.getType=function(){return"panellayoutcolumn"},t.prototype.isEmpty=function(){return!this.width&&!this.questionTitleWidth},c([p()],t.prototype,"width",void 0),c([p({onSet:function(e,i,n){e!==n&&(i.width=e)}})],t.prototype,"effectiveWidth",void 0),c([p()],t.prototype,"questionTitleWidth",void 0),t})(U);V.addClass("panellayoutcolumn",[{name:"effectiveWidth:number",isSerializable:!1,minValue:0},{name:"width:number",visible:!1},"questionTitleWidth"],function(r){return new fo});var go=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.panel=e,i._scrollableParent=void 0,i._updateVisibility=void 0,i.visibleElementsAnimation=new Ae(i.getVisibleElementsAnimationOptions(),function(n){i.setWidth(n),i.setPropertyValue("visibleElements",n)},function(){return i.visibleElements}),i.visible=e.areInvisibleElementsShowing,i.createNewArray("elements"),i.createNewArray("visibleElements"),i}return Object.defineProperty(t.prototype,"allowRendering",{get:function(){return!this.panel||!this.panel.survey||!this.panel.survey.isLazyRenderingSuspended},enumerable:!1,configurable:!0}),t.prototype.startLazyRendering=function(e,i){var n=this;if(i===void 0&&(i=_t),!!D.isAvailable()){this._scrollableParent=i(e),this._scrollableParent===D.getDocumentElement()&&(this._scrollableParent=k.getWindow());var o=this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight;this.isNeedRender=!o,o&&(this._updateVisibility=function(){if(n.allowRendering){var s=ll(e,50);!n.isNeedRender&&s&&(n.isNeedRender=!0,n.stopLazyRendering())}},this.lazyRenderingTimeout=setTimeout(function(){n._scrollableParent&&n._scrollableParent.addEventListener&&n._scrollableParent.addEventListener("scroll",n._updateVisibility),n.ensureVisibility()},10))}},t.prototype.ensureVisibility=function(){this._updateVisibility&&this._updateVisibility()},t.prototype.stopLazyRendering=function(){this._scrollableParent&&this._updateVisibility&&this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),clearTimeout(this.lazyRenderingTimeout),this._scrollableParent=void 0,this._updateVisibility=void 0},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="visible"&&this.onVisibleChangedCallback&&this.onVisibleChangedCallback()},t.prototype.setIsLazyRendering=function(e){this.isLazyRenderingValue=e,this.isNeedRender=!e},t.prototype.isLazyRendering=function(){return this.isLazyRenderingValue===!0},Object.defineProperty(t.prototype,"id",{get:function(){return"pr_"+this.uniqueId},enumerable:!1,configurable:!0}),t.prototype.equalsCore=function(e){return this==e},Object.defineProperty(t.prototype,"elements",{get:function(){return this.getPropertyValue("elements")},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){var e;return r.prototype.getIsAnimationAllowed.call(this)&&this.visible&&((e=this.panel)===null||e===void 0?void 0:e.animationAllowed)},t.prototype.getVisibleElementsAnimationOptions=function(){var e=this,i=function(n){Ve(n),gt(n,{width:ki(n)+"px"})};return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},allowSyncRemovalAddition:!1,getAnimatedElement:function(n){return n.getWrapperElement()},getLeaveOptions:function(n){var o=n,s=n.isPanel?o.cssClasses.panel:o.cssClasses;return{cssClass:s.leave,onBeforeRunAnimation:i,onAfterRunAnimation:he}},getEnterOptions:function(n){var o=n,s=n.isPanel?o.cssClasses.panel:o.cssClasses;return{cssClass:s.enter,onBeforeRunAnimation:i,onAfterRunAnimation:he}}}},Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this.getPropertyValue("visibleElements")},set:function(e){if(e.length)this.visible=!0;else{this.visible=!1,this.visibleElementsAnimation.cancel();return}this.visibleElementsAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.updateVisible=function(){for(var e=[],i=0;i<this.elements.length;i++)this.elements[i].isVisible&&e.push(this.elements[i]),(this.elements[i].isPanel||this.elements[i].getType()==="paneldynamic")&&(this.setIsLazyRendering(!1),this.stopLazyRendering());this.visibleElements=e},t.prototype.addElement=function(e){this.elements.push(e),this.updateVisible()},Object.defineProperty(t.prototype,"index",{get:function(){return this.panel.rows.indexOf(this)},enumerable:!1,configurable:!0}),t.prototype.setWidth=function(e){var i=e.length;if(i!=0){for(var n=e.length===1,o=[],s=0;s<this.elements.length;s++){var a=this.elements[s];if(a.isVisible){a.isSingleInRow=n;var l=this.getElementWidth(a);l&&(a.renderWidth=this.getRenderedWidthFromWidth(l),o.push(a)),a.rightIndent=0}else a.renderWidth=""}for(var s=0;s<this.elements.length;s++){var a=this.elements[s];!a.isVisible||o.indexOf(a)>-1||(o.length==0?a.renderWidth="".concat(Number.parseFloat((100/i).toFixed(6)),"%"):a.renderWidth=this.getRenderedCalcWidth(a,o,i))}}},t.prototype.getRenderedCalcWidth=function(e,i,n){for(var o="100%",s=0;s<i.length;s++)o+=" - "+i[s].renderWidth;var a=n-i.length;return a>1&&(o="("+o+")/"+a.toString()),"calc("+o+")"},t.prototype.getElementWidth=function(e){var i=e.width;return!i||typeof i!="string"?"":i.trim()},t.prototype.getRenderedWidthFromWidth=function(e){return w.isNumber(e)?e+"px":e},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.stopLazyRendering()},t.prototype.getRowCss=function(){return new I().append(this.panel.cssClasses.row).append(this.panel.cssClasses.rowCompact,this.panel.isCompact).append(this.panel.cssClasses.pageRow,this.panel.isPage||this.panel.showPanelAsPage).append(this.panel.cssClasses.rowMultiple,this.visibleElements.length>1).toString()},t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},c([p({defaultValue:!0})],t.prototype,"visible",void 0),c([p()],t.prototype,"isNeedRender",void 0),t})(U),nn=(function(r){P(t,r);function t(e){e===void 0&&(e="");var i=r.call(this,e)||this;return i.isQuestionsReady=!1,i.questionsValue=new Array,i._columns=void 0,i._columnsReady=!1,i.rowsAnimation=new Ae(i.getRowsAnimationOptions(),function(n){i.setPropertyValue("visibleRows",n)},function(){return i.visibleRows}),i.isRandomizing=!1,i.onColumnPropertyValueChangedCallback=function(n,o,s,a,l){i._columnsReady&&(i.updateColumnWidth(i.gridLayoutColumns),i.updateRootStyle())},i.locCountRowUpdates=0,i.createNewArray("rows",function(n,o){i.onAddRow(n)},function(n){i.onRemoveRow(n)}),i.createNewArray("visibleRows"),i.elementsValue=i.createNewArray("elements",i.onAddElement.bind(i),i.onRemoveElement.bind(i)),i.setPropertyValueDirectly("id","sp_"+i.uniqueId),i.addExpressionProperty("visibleIf",function(n,o){i.visible=o===!0},function(n){return!i.areInvisibleElementsShowing}),i.addExpressionProperty("enableIf",function(n,o){i.readOnly=o===!1}),i.addExpressionProperty("requiredIf",function(n,o){i.isRequired=o===!0}),i}return Object.defineProperty(t.prototype,"gridLayoutColumns",{get:function(){var e=this,i=this.getArrayPropertyValue("gridLayoutColumns",function(n){n.onPropertyValueChangedCallback=e.onColumnPropertyValueChangedCallback});return this._columns||(this.generateColumns([].concat(i)),i=this._columns,this.gridLayoutColumns=i),i},set:function(e){this.setArrayPropertyValue("gridLayoutColumns",e)},enumerable:!1,configurable:!0}),t.prototype.onAddRow=function(e){var i=this;this.onRowVisibleChanged(),e.onVisibleChangedCallback=function(){return i.onRowVisibleChanged()}},t.prototype.getRowsAnimationOptions=function(){var e=this;return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},getAnimatedElement:function(i){return i.getRootElement()},getLeaveOptions:function(i,n){return{cssClass:e.cssClasses.rowLeave,onBeforeRunAnimation:Ve,onAfterRunAnimation:he}},getEnterOptions:function(i,n){var o=e.cssClasses;return{cssClass:new I().append(o.rowEnter).append(o.rowDelayedEnter,n.isDeletingRunning).toString(),onBeforeRunAnimation:Ve,onAfterRunAnimation:he}}}},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getPropertyValue("visibleRows")},set:function(e){this.rowsAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.onRemoveRow=function(e){e.visibleElementsAnimation.cancel(),this.visibleRows=this.rows.filter(function(i){return i.visible}),e.onVisibleChangedCallback=void 0},t.prototype.onRowVisibleChanged=function(){this.visibleRows=this.rows.filter(function(e){return e.visible})},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="questionTitleLocation"&&(this.onVisibleChanged.bind(this),this.updateElementCss(!0)),["questionStartIndex","showQuestionNumbers"].indexOf(e)>-1&&this.updateVisibleIndexes(),e==="title"&&this.resetHasTextInTitle(),e==="visible"&&(this.setPropertyValue("isVisible",this.isVisible),this.onVisibleChanged())},t.prototype.getType=function(){return"panelbase"},t.prototype.setSurveyImpl=function(e,i){this.blockAnimations(),r.prototype.setSurveyImpl.call(this,e,i),this.isDesignMode&&this.onVisibleChanged();for(var n=0;n<this.elements.length;n++)this.elements[n].setSurveyImpl(e,i);this.releaseAnimations()},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.markQuestionListDirty(),this.onRowsChanged()},Object.defineProperty(t.prototype,"hasTextInTitle",{get:function(){var e=this;return this.getPropertyValue("hasTextInTitle",void 0,function(){return!!e.title})},enumerable:!1,configurable:!0}),t.prototype.resetHasTextInTitle=function(){this.resetPropertyValue("hasTextInTitle")},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.canShowTitle(this.survey)&&(this.hasTextInTitle||this.locTitle.textOrHtml.length>0)||this.isDesignMode&&!this.isPanel&&this.showTitle&&C.designMode.showEmptyTitles},enumerable:!1,configurable:!0}),t.prototype.delete=function(e){e===void 0&&(e=!0),this.deletePanel(),this.removeFromParent(),e&&this.dispose()},t.prototype.deletePanel=function(){for(var e=this.elements,i=0;i<e.length;i++){var n=e[i];n.isPanel&&n.deletePanel(),this.onRemoveElementNotifySurvey(n)}},t.prototype.removeFromParent=function(){},t.prototype.canShowTitle=function(e){return!0},t.prototype.getDefaultTitleTagName=function(){return C.titleTags.panel},Object.defineProperty(t.prototype,"_showDescription",{get:function(){return!this.hasTitle&&this.isDesignMode?!1:this.survey&&this.survey.showPageTitles&&this.hasDescription||this.showDescription&&this.isDesignMode&&C.designMode.showEmptyDescriptions},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].localeChanged()},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].locStrsChanged()},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.elements,!0)},t.prototype.getMarkdownHtml=function(e,i,n){return i==="navigationTitle"&&this.locNavigationTitle.isEmpty?this.locTitle.renderedHtml||this.name:r.prototype.getMarkdownHtml.call(this,e,i,n)},Object.defineProperty(t.prototype,"locNavigationTitle",{get:function(){var e=this;return this.getOrCreateLocStr("navigationTitle",!0,!1,function(i){i.onGetTextCallback=function(n){return n||e.title||e.name}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedNavigationTitle",{get:function(){return this.locNavigationTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.survey&&this.isRequired?this.survey.requiredMark:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&this.titlePattern=="requireNumTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&this.titlePattern=="numRequireTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&this.titlePattern=="numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.questionOrder},set:function(e){this.questionOrder=e},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(e){return e},t.prototype.canRandomize=function(e){return e&&this.questionOrder!=="initial"||this.questionOrder==="random"},t.prototype.randomizeElements=function(e){if(!this.canRandomize(e)||this.isRandomizing)return!1;this.isRandomizing=!0;for(var i=[],n=this.elements,o=0;o<n.length;o++)i.push(n[o]);var s=w.randomizeArray(i);return this.setArrayPropertyDirectly("elements",s,!1),this.updateRows(),this.updateVisibleIndexes(),this.isRandomizing=!1,!0},Object.defineProperty(t.prototype,"areQuestionsRandomized",{get:function(){var e=this.questionOrder=="default"&&this.survey?this.survey.questionOrder:this.questionOrder;return e=="random"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this.parent==null?0:this.parent.depth+1},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var i={panel:{},error:{},row:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(i.panel,e.panel),this.copyCssClasses(i.error,e.error),e.pageRow&&(i.pageRow=e.pageRow),e.rowCompact&&(i.rowCompact=e.rowCompact),e.row&&(i.row=e.row),e.rowEnter&&(i.rowEnter=e.rowEnter),e.rowLeave&&(i.rowLeave=e.rowLeave),e.rowDelayedEnter&&(i.rowDelayedEnter=e.rowDelayedEnter),e.rowMultiple&&(i.rowMultiple=e.rowMultiple),this.survey&&this.survey.updatePanelCssClasses(this,i),i},Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return[this]},t.prototype.getLayoutType=function(){return"row"},t.prototype.isLayoutTypeSupported=function(e){return e!=="flow"},Object.defineProperty(t.prototype,"questions",{get:function(){return this.isQuestionsReady||(this.questionsValue=this.getQuestionsCore(!1),this.isQuestionsReady=!0),this.questionsValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleQuestions",{get:function(){return this.getQuestionsCore(!0)},enumerable:!1,configurable:!0}),t.prototype.getQuestionsCore=function(e){for(var i=new Array,n=0;n<this.elements.length;n++){var o=this.elements[n];if(!(e&&!o.isVisible))if(o.isPanel)for(var s=o.getQuestionsCore(e),a=0;a<s.length;a++)i.push(s[a]);else i.push(o)}return i},t.prototype.getQuestions=function(e){var i=this.questions;if(!e)return i;var n=[];return i.forEach(function(o){n.push(o),o.getNestedQuestions().forEach(function(s){return n.push(s)})}),n},t.prototype.getQuestionByName=function(e){for(var i=this.questions,n=0;n<i.length;n++)if(i[n].name==e)return i[n];return null},t.prototype.getElementByName=function(e){if(e==this.name)return this;for(var i=this.elements,n=0;n<i.length;n++){var o=i[n];if(o.name==e)return o;var s=o.getPanels();if(Array.isArray(s))for(var a=0;a<s.length;a++){var l=s[a].getElementByName(e);if(l)return l}}return null},t.prototype.getQuestionByValueName=function(e,i){i===void 0&&(i=!1);var n=this.getQuestionsByValueName(e,i);return n.length>0?n[0]:null},t.prototype.getQuestionsByValueName=function(e,i){i===void 0&&(i=!1);var n=[];i&&(e=e.toLowerCase());for(var o=this.questions,s=0;s<o.length;s++){var a=o[s].getValueName();i&&(a=a.toLowerCase()),a==e&&n.push(o[s])}return n},t.prototype.getValue=function(){var e={};return this.collectValues(e,0),w.getUnbindValue(e)},t.prototype.hasValueAnyQuestion=function(e){for(var i=e?this.visibleQuestions:this.questions,n=0;n<i.length;n++)if(!i[n].isEmpty())return!0;return!1},t.prototype.collectValues=function(e,i){var n=this.elements;i===0&&(n=this.questions);for(var o=0;o<n.length;o++){var s=n[o];if(s.isPanel||s.isPage){var a={};s.collectValues(a,i-1)&&(e[s.name]=a)}else{var l=s;if(!l.isEmpty()){var u=l.getValueName();if(e[u]=l.getStructuredValue(i-1),this.data){var f=this.data.getComment(u);f&&(e[u+U.commentSuffix]=f)}}}}return!0},t.prototype.getDisplayValue=function(e){for(var i={},n=this.questions,o=0;o<n.length;o++){var s=n[o];if(!s.isEmpty()){var a=e?s.title:s.getValueName();i[a]=s.getDisplayValue(e)}}return i},t.prototype.getComments=function(){var e={};if(!this.data)return e;for(var i=this.questions,n=0;n<i.length;n++){var o=i[n],s=this.data.getComment(o.getValueName());s&&(e[o.getValueName()]=s)}return e},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()},t.prototype.clearErrors=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]},t.prototype.markQuestionListDirty=function(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()},Object.defineProperty(t.prototype,"elements",{get:function(){return U.collectDependency(this,"elements"),this.elementsValue},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return this.elements},t.prototype.containsElement=function(e){for(var i=0;i<this.elements.length;i++){var n=this.elements[i];if(n==e)return!0;var o=n.getPanels();if(Array.isArray(o)){for(var s=0;s<o.length;s++)if(o[s].containsElement(e))return!0}}return!1},t.prototype.searchText=function(e,i){r.prototype.searchText.call(this,e,i);for(var n=0;n<this.elements.length;n++)this.elements[n].searchText(e,i)},t.prototype.hasErrors=function(e,i){return e===void 0&&(e=!0),i===void 0&&(i=!1),!this.validate(e,i)},t.prototype.validate=function(e,i,n){e===void 0&&(e=!0),i===void 0&&(i=!1);var o=new Ze({fireCallback:e,focusOnFirstError:i,callbackResult:n});return this.validateCore(o),o.finish(),o.runningResult},t.prototype.validateContainerOnly=function(){this.validateInPanels(new Ze({fireCallback:!0,isOnValueChanged:!1})),this.parent&&this.parent.validateContainerOnly()},t.prototype.onQuestionValueChanged=function(e){var i=this.questions.indexOf(e);if(!(i<0)){for(var n=5,o=this.questions.length-1,s=i-n>0?i-n:0,a=i+n<o?i+n:o,l=s;l<=a;l++)if(l!==i){var u=this.questions[l];u.errors.length>0&&u.validate(!1)&&u.validate(!0)}}},t.prototype.validateInPanels=function(e){var i=[];this.validateRequired(e,i),this.survey&&(this.survey.validatePanel(this,i,e.fireCallback),e.setErrorElement(this,i)),e.fireCallback&&(this.errors=i)},t.prototype.getErrorCustomText=function(e,i){return this.survey?this.survey.getSurveyErrorCustomText(this,e,i):e},t.prototype.validateRequired=function(e,i){if(this.isRequired){var n=[];if(this.addQuestionsToList(n,!0),n.length!=0){for(var o=0;o<n.length;o++)if(!n[o].isEmpty())return;var s=new Ar(this.requiredErrorText,this);i.push(s),e.setErrorElement(n[0],[s])}}},t.prototype.validateElement=function(e){var i=e.errorCount;return this.validateCore(e),e.errorCount<=i},t.prototype.validateCore=function(e){var i,n=(i=this.survey)===null||i===void 0?void 0:i.currentSingleQuestion;n&&this.questions.indexOf(n)<0&&(n=void 0);for(var o=n?[n]:this.elements,s=null,a=0;a<o.length;a++)if(s=o[a],!!s.isVisible)if(s.isPanel)s.validateCore(e);else{var l=s;l.validateElement(e)}n||(this.validateInPanels(e),this.updateContainsErrors())},t.prototype.getContainsErrors=function(){var e=r.prototype.getContainsErrors.call(this);if(e)return e;for(var i=this.elements,n=0;n<i.length;n++)if(i[n].containsErrors)return!0;return!1},t.prototype.updateElementVisibility=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateElementVisibility();r.prototype.updateElementVisibility.call(this)},t.prototype.getFirstQuestionToFocus=function(e,i){if(e===void 0&&(e=!1),i===void 0&&(i=!1),!e&&!i&&this.isCollapsed)return null;for(var n=this.elements,o=0;o<n.length;o++){var s=n[o];if(!(!s.isVisible||!i&&s.isCollapsed))if(s.isPanel){var a=s.getFirstQuestionToFocus(e,i);if(a)return a}else{var l=s.getFirstQuestionToFocus(e);if(l)return l}}return null},t.prototype.getFirstVisibleQuestion=function(){for(var e=this.questions,i=0;i<e.length;i++)if(e[i].isVisible)return e[i];return null},t.prototype.getFirstVisibleElement=function(){for(var e=this.elements,i=0;i<e.length;i++)if(e[i].isVisible)return e[i];return null},t.prototype.focusFirstQuestion=function(){var e=this.getFirstQuestionToFocus();e&&e.focus()},t.prototype.focusFirstErrorQuestion=function(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()},t.prototype.addQuestionsToList=function(e,i,n){i===void 0&&(i=!1),n===void 0&&(n=!1),this.addElementsToList(e,i,n,!1)},t.prototype.addPanelsIntoList=function(e,i,n){i===void 0&&(i=!1),n===void 0&&(n=!1),this.addElementsToList(e,i,n,!0)},t.prototype.addElementsToList=function(e,i,n,o){i&&!this.visible||this.addElementsToListCore(e,this.elements,i,n,o)},t.prototype.addElementsToListCore=function(e,i,n,o,s){for(var a=0;a<i.length;a++){var l=i[a];n&&!l.visible||((s&&l.isPanel||!s&&!l.isPanel)&&e.push(l),l.isPanel?l.addElementsToListCore(e,l.elements,n,o,s):o&&this.addElementsToListCore(e,l.getElementsInDesign(!1),n,o,s))}},t.prototype.calcMaxRowColSpan=function(){var e=0;return this.rows.forEach(function(i){var n=0,o=!1;i.elements.forEach(function(s){s.width&&(o=!0),n+=s.colSpan||1}),!o&&n>e&&(e=n)}),e},t.prototype.updateColumnWidth=function(e){var i=0,n=0;if(e.forEach(function(a){a.width?(i+=a.width,a.setPropertyValue("effectiveWidth",a.width)):n++}),n)for(var o=Pl((100-i)/n),s=0;s<e.length;s++)e[s].width||e[s].setPropertyValue("effectiveWidth",o)},t.prototype.updateColumns=function(){this._columns=void 0,this.updateRootStyle()},t.prototype.updateRootStyle=function(){var e;r.prototype.updateRootStyle.call(this),(e=this.elements)===null||e===void 0||e.forEach(function(i){return i.updateRootStyle()})},t.prototype.updateCustomWidgets=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()},t.prototype.getQuestionTitleLocation=function(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():this.questionTitleLocation!="default"?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},t.prototype.availableQuestionTitleWidth=function(){return this.getQuestionTitleLocation()==="left"||this.hasElementWithTitleLocationLeft()},t.prototype.hasElementWithTitleLocationLeft=function(){var e=this.elements.some(function(i){if(i instanceof t)return i.hasElementWithTitleLocationLeft();if(i instanceof ie)return i.getTitleLocation()==="left"});return e},t.prototype.getQuestionTitleWidth=function(){var e=this.onGetQuestionTitleWidth?this.onGetQuestionTitleWidth():this.questionTitleWidth;return e||this.parent&&this.parent.getQuestionTitleWidth()},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns||(this.generateColumns(this.gridLayoutColumns),this.gridLayoutColumns=this._columns),this._columns||[]},enumerable:!1,configurable:!0}),t.prototype.generateColumns=function(e){var i,n=(i=this.survey)===null||i===void 0?void 0:i.gridLayoutEnabled,o=[].concat(e);if(n){var s=this.calcMaxRowColSpan();if(s<=e.length)o=e.slice(0,s);else for(var a=e.length;a<s;a++){var l=new fo;o.push(l)}}this._columns=o;try{this._columnsReady=!1,this.updateColumnWidth(o)}finally{this._columnsReady=!0}},t.prototype.createGridLayoutColumns=function(){return this.generateColumns([]),this._columns},t.prototype.updateGridColumns=function(){this.updateColumns(),this.elements.forEach(function(e){e.isPanel&&e.updateGridColumns()})},t.prototype.getColumsForElement=function(e){var i=this.findRowByElement(e);if(!i||!this.survey||!this.survey.gridLayoutEnabled)return[];for(var n=i.elements.length-1;n>=0&&i.elements[n].getPropertyValueWithoutDefault("colSpan");)n--;for(var o=i.elements.indexOf(e),s=0,a=0;a<o;a++)s+=i.elements[a].colSpan;var l=e.getPropertyValueWithoutDefault("colSpan");if(!l&&o===n){for(var u=0,a=0;a<i.elements.length;a++)a!==n&&(u+=i.elements[a].colSpan);l=this.columns.length-u}var f=this.columns.slice(s,s+(l||1));return e.setPropertyValueDirectly("effectiveColSpan",f.length),f},t.prototype.isQuestionIndexRecursive=function(){return!!this.survey&&this.survey.showQuestionNumbers==="recursive"},t.prototype.getQuestionStartIndex=function(){var e=this.getStartIndex();return this.isQuestionIndexRecursive()?this.getStartIndexSubs(e,!0):e},t.prototype.getStartIndexSubs=function(e,i){if(!e||!this.isComplexIndex(e))return e;var n=e[e.length-1]==="."?".":"";n&&(e=e.substring(0,e.length-1));var o=e.lastIndexOf(".");return e+=n,i?e.substring(o+1):e.substring(0,o+1)},t.prototype.getQuestionStartIndexVsVisibleIndex=function(e,i){var n=this.getStartIndexSubs(e,!1),o=this.getStartIndexSubs(e,!0);return w.getNumberByIndex(i,n)+o},t.prototype.isComplexIndex=function(e){var i=e.indexOf(".");return i>-1&&i<e.length-1},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.getProgressInfo=function(){return ae.getProgressInfoByElements(this.elements,this.isRequired)},Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t.prototype.childVisibilityChanged=function(){if(!this.isRunningConditions){var e=this.getIsPageVisible(null),i=this.getPropertyValue("isVisible",!0);e!==i&&this.onVisibleChanged()}},t.prototype.canRenderFirstRows=function(){return this.isPage},t.prototype.isLazyRenderInRow=function(e){return!this.survey||!this.survey.isLazyRendering?!1:e>=this.survey.lazyRenderFirstBatchSize||!this.canRenderFirstRows()},t.prototype.createRowAndSetLazy=function(e){var i=this.createRow();return i.setIsLazyRendering(this.isLazyRenderInRow(e)),i},t.prototype.createRow=function(){return new go(this)},t.prototype.onSurveyLoad=function(){this.blockAnimations(),r.prototype.onSurveyLoad.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].onSurveyLoad();this.onElementVisibilityChanged(this),this.releaseAnimations()},t.prototype.onFirstRenderingCore=function(){r.prototype.onFirstRenderingCore.call(this),this.onRowsChanged(),this.elements.forEach(function(e){return e.onFirstRendering()})},t.prototype.updateRows=function(){this.isLoadingFromJson||(this.getElementsForRows().forEach(function(e){e.isPanel&&e.updateRows()}),this.onRowsChanged())},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),t.prototype.ensureRowsVisibility=function(){this.rows.forEach(function(e){e.ensureVisibility()})},t.prototype.onRowsChanged=function(){this.isLoadingFromJson||!this.wasRendered||(this.blockAnimations(),this.setArrayPropertyDirectly("rows",this.buildRows()),this.updateColumns(),this.releaseAnimations())},t.prototype.blockRowsUpdates=function(){this.locCountRowUpdates++},t.prototype.releaseRowsUpdates=function(){this.locCountRowUpdates--},t.prototype.updateRowsBeforeElementRemoved=function(e){var i=this;if(!(!this.wasRendered&&this.rows.length===0)){var n=this.findRowByElement(e),o=this.rows.indexOf(n),s=n.elements.indexOf(e);n.elements.splice(s,1),n.elements.length==0?this.rows.splice(o,1):!n.elements[0].startWithNewLine&&this.rows[o-1]?(n.elements.forEach(function(a){return i.rows[o-1].addElement(a)}),this.rows.splice(o,1)):n.updateVisible()}},t.prototype.updateRowsOnElementAdded=function(e){var i=this;if(!(!this.wasRendered&&this.rows.length===0&&this.elements.length>1)){var n=this.elements.indexOf(e),o=this.elements[n+1],s=function(y){var b=i.createRowAndSetLazy(y);return i.isDesignMode&&b.setIsLazyRendering(!1),i.rows.splice(y,0,b),b},a=function(y,b,E){for(var S,O=[],R=3;R<arguments.length;R++)O[R-3]=arguments[R];var A=(S=y.elements).splice.apply(S,z([b,E],O,!1));return y.updateVisible(),A};if(!o){n==0||e.startWithNewLine?a(s(this.rows.length),0,0,e):this.rows[this.rows.length-1].addElement(e);return}var l=this.findRowByElement(o);if(l){var u=this.rows.indexOf(l),f=l.elements.indexOf(o);f==0?o.startWithNewLine?e.startWithNewLine||u<1?s(u).addElement(e):this.rows[u-1].addElement(e):a(l,0,0,e):e.startWithNewLine?a.apply(void 0,z([s(u+1),0,0],[e].concat(a(l,f,l.elements.length)),!1)):a(l,f,0,e)}}},t.prototype.canFireAddRemoveNotifications=function(e){return!!this.survey&&e.prevSurvey!==this.survey},t.prototype.onAddElement=function(e,i){var n=this,o=this.survey,s=this.canFireAddRemoveNotifications(e);this.surveyImpl&&e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.canBuildRows()&&this.updateRowsOnElementAdded(e),s&&(e.isPanel?o.panelAdded(e,i,this,this.root):o.questionAdded(e,i,this,this.root)),this.addElementCallback&&this.addElementCallback(e),e.registerPropertyChangedHandlers(["visible","isVisible"],function(){n.onElementVisibilityChanged(e)},this.id),e.registerPropertyChangedHandlers(["startWithNewLine"],function(){n.onElementStartWithNewLineChanged(e)},this.id),this.onElementVisibilityChanged(this)},t.prototype.onRemoveElement=function(e){e.parent=null,this.unregisterElementPropertiesChanged(e),this.markQuestionListDirty(),this.updateRowsOnElementRemoved(e),!this.isRandomizing&&(this.onRemoveElementNotifySurvey(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this))},t.prototype.unregisterElementPropertiesChanged=function(e){e.unregisterPropertyChangedHandlers(["visible","isVisible","startWithNewLine"],this.id)},t.prototype.onRemoveElementNotifySurvey=function(e){this.canFireAddRemoveNotifications(e)&&(e.isPanel?this.survey.panelRemoved(e):this.survey.questionRemoved(e))},t.prototype.onElementVisibilityChanged=function(e){this.isLoadingFromJson||this.isRandomizing||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))},t.prototype.onElementStartWithNewLineChanged=function(e){this.locCountRowUpdates>0||(this.blockAnimations(),this.updateRowsBeforeElementRemoved(e),this.updateRowsOnElementAdded(e),this.releaseAnimations())},t.prototype.updateRowsVisibility=function(e){for(var i=this.rows,n=0;n<i.length;n++){var o=i[n];if(o.elements.indexOf(e)>-1){o.updateVisible(),o.visible&&!o.isNeedRender&&(o.isNeedRender=!0);break}}},t.prototype.canBuildRows=function(){return!this.isLoadingFromJson&&this.getChildrenLayoutType()=="row"},t.prototype.buildRows=function(){if(!this.canBuildRows())return[];for(var e=new Array,i=this.getElementsForRows(),n=0;n<i.length;n++){var o=i[n],s=n==0||o.startWithNewLine,a=s?this.createRowAndSetLazy(e.length):e[e.length-1];s&&e.push(a),a.addElement(o)}return e.forEach(function(l){return l.updateVisible()}),e},t.prototype.getElementsForRows=function(){return this.elements},t.prototype.getDragDropInfo=function(){var e=this.getPage(this.parent);return e?e.getDragDropInfo():void 0},t.prototype.updateRowsOnElementRemoved=function(e){this.canBuildRows()&&(this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e)),this.updateColumns())},t.prototype.updateRowsRemoveElementFromRow=function(e,i){if(!(!i||!i.panel)){var n=i.elements.indexOf(e);n<0||(i.elements.splice(n,1),i.elements.length>0?(this.blockRowsUpdates(),i.elements[0].startWithNewLine=!0,this.releaseRowsUpdates(),i.updateVisible()):i.index>=0&&i.panel.rows.splice(i.index,1))}},t.prototype.getAllRows=function(){var e=this,i=[];return this.rows.forEach(function(n){var o=[];n.elements.forEach(function(s){s.isPanel?o.push.apply(o,s.getAllRows()):s.getType()=="paneldynamic"&&(e.isDesignMode?o.push.apply(o,s.template.getAllRows()):s.panels.forEach(function(a){return o.push.apply(o,a.getAllRows())}))}),i.push(n),i.push.apply(i,o)}),i},t.prototype.findRowAndIndexByElement=function(e,i){if(!e)return{row:void 0,index:this.rows.length-1};i=i||this.rows;for(var n=0;n<i.length;n++)if(i[n].elements.indexOf(e)>-1)return{row:i[n],index:n};return{row:null,index:-1}},t.prototype.forceRenderRow=function(e){e&&!e.isNeedRender&&(e.isNeedRender=!0,e.stopLazyRendering())},t.prototype.forceRenderElement=function(e,i,n){i===void 0&&(i=function(){}),n===void 0&&(n=0);var o=this.getAllRows(),s=this.findRowAndIndexByElement(e,o),a=s.row,l=s.index;if(l>=0&&l<o.length){var u=[];u.push(a);for(var f=l-1;f>=l-n&&f>=0;f--)u.push(o[f]);this.forceRenderRows(u,i)}},t.prototype.forceRenderRows=function(e,i){var n=this;i===void 0&&(i=function(){});var o=(function(s){return function(){s--,s<=0&&i()}})(e.length);e.forEach(function(s){return new al(s.visibleElements,o)}),e.forEach(function(s){return n.forceRenderRow(s)})},t.prototype.findRowByElement=function(e){return this.findRowAndIndexByElement(e).row},t.prototype.elementWidthChanged=function(e){if(!this.isLoadingFromJson){var i=this.findRowByElement(e);i&&i.updateVisible()}},Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hasTitle?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.hasTitle?null:this.title||this.name||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.getRenderedTitle(this.locTitle.textOrHtml)},enumerable:!1,configurable:!0}),t.prototype.getRenderedTitle=function(e){return this.textProcessor!=null?this.textProcessor.processText(e,!0):e},t.prototype.onHidingContent=function(){this.questions.forEach(function(e){return e.onHidingContent()})},t.prototype.onVisibleChanged=function(){if(!this.isRandomizing&&(this.setPropertyValue("isVisible",this.isVisible),this.canUpdateValueOnVisibleChanged()))for(var e=this.questions,i=this.isVisible,n=0;n<e.length;n++){var o=e[n];i?o.updateValueWithDefaults():(o.clearValueIfInvisible("onHiddenContainer"),o.onHidingContent())}},t.prototype.notifyStateChanged=function(e){r.prototype.notifyStateChanged.call(this,e),this.isCollapsed&&this.questions.forEach(function(i){return i.onHidingContent()})},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)},enumerable:!1,configurable:!0}),t.prototype.getIsContentVisible=function(e){if(this.areInvisibleElementsShowing)return!0;for(var i=0;i<this.elements.length;i++)if(this.elements[i]!=e&&this.elements[i].isVisible)return!0;return!1},t.prototype.getIsPageVisible=function(e){var i=this.getIsContentVisible(e);return this.visible&&i},t.prototype.setVisibleIndex=function(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var i=e;e+=this.beforeSetVisibleIndex(e);for(var n=this.getPanelStartIndex(e),o=n,s=this.elements,a=0;a<s.length;a++)o+=s[a].setVisibleIndex(o);return this.isContinueNumbering()&&(e+=o-n),e-i},t.prototype.updateVisibleIndexes=function(){this.lastVisibleIndex!==void 0&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))},t.prototype.resetVisibleIndexes=function(){for(var e=this.elements,i=0;i<e.length;i++)e[i].setVisibleIndex(-1)},t.prototype.beforeSetVisibleIndex=function(e){return 0},t.prototype.getPanelStartIndex=function(e){return e},t.prototype.isContinueNumbering=function(){return!0},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,i=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||i},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var e=0;e<this.elements.length;e++){var i=this.elements[e];i.setPropertyValue("isReadOnly",i.isReadOnly)}r.prototype.onReadOnlyChanged.call(this)},t.prototype.updateElementCss=function(e){r.prototype.updateElementCss.call(this,e);for(var i=0;i<this.elements.length;i++){var n=this.elements[i];n.updateElementCss(e)}},t.prototype.addElement=function(e,i){return i===void 0&&(i=-1),this.canAddElement(e)?(i<0||i>=this.elements.length?this.elements.push(e):this.elements.splice(i,0,e),this.wasRendered&&e.onFirstRendering(),this.updateColumns(),!0):!1},t.prototype.insertElement=function(e,i,n){if(n===void 0&&(n="bottom"),!i){this.addElement(e);return}this.blockRowsUpdates();var o=this.elements.indexOf(i),s=this.findRowByElement(i);n=="left"||n=="right"?n=="right"?(e.startWithNewLine=!1,o++):s.elements.indexOf(i)==0?(i.startWithNewLine=!1,e.startWithNewLine=!0):e.startWithNewLine=!1:(e.startWithNewLine=!0,n=="top"?o=this.elements.indexOf(s.elements[0]):o=this.elements.indexOf(s.elements[s.elements.length-1])+1),this.releaseRowsUpdates(),this.addElement(e,o)},t.prototype.insertElementAfter=function(e,i){var n=this.elements.indexOf(i);n>=0&&this.addElement(e,n+1)},t.prototype.insertElementBefore=function(e,i){var n=this.elements.indexOf(i);n>=0&&this.addElement(e,n)},t.prototype.canAddElement=function(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())},t.prototype.addQuestion=function(e,i){return i===void 0&&(i=-1),this.addElement(e,i)},t.prototype.addPanel=function(e,i){return i===void 0&&(i=-1),this.addElement(e,i)},t.prototype.addNewQuestion=function(e,i,n){i===void 0&&(i=null),n===void 0&&(n=-1);var o=K.Instance.createQuestion(e,i);return this.addQuestion(o,n)?o:null},t.prototype.addNewPanel=function(e){e===void 0&&(e=null);var i=this.createNewPanel(e);return this.addPanel(i)?i:null},t.prototype.indexOf=function(e){return this.elements.indexOf(e)},t.prototype.createNewPanel=function(e){var i=V.createClass("panel");return i.name=e,i},t.prototype.removeElement=function(e){var i=this.elements.indexOf(e);if(i<0){for(var n=0;n<this.elements.length;n++)if(this.elements[n].removeElement(e))return!0;return!1}return this.elements.splice(i,1),this.updateColumns(),!0},t.prototype.removeQuestion=function(e){this.removeElement(e)},t.prototype.runCondition=function(e){if(!(this.isDesignMode||this.isLoadingFromJson)){var i=this.elements.slice(),n=this.getIsPageVisible();this.isRunningConditions=!0;for(var o=0;o<i.length;o++)i[o].runCondition(e);this.runConditionCore(e);var s=this.getIsPageVisible();this.isRunningConditions=!1,n!==s&&this.childVisibilityChanged()}},t.prototype.onAnyValueChanged=function(e,i){for(var n=this.elements,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,i)},t.prototype.checkBindings=function(e,i){for(var n=this.elements,o=0;o<n.length;o++)n[o].checkBindings(e,i)},t.prototype.needResponsiveWidth=function(){var e=!1;return this.elements.forEach(function(i){i.needResponsiveWidth()&&(e=!0)}),this.rows.forEach(function(i){i.elements.length>1&&(e=!0)}),e},Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.cssClasses.panel.header},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.cssClasses.panel.description},enumerable:!1,configurable:!0}),t.prototype.getQuestionErrorLocation=function(){return this.questionErrorLocation!=="default"?this.questionErrorLocation:this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},t.prototype.getTitleOwner=function(){return this},Object.defineProperty(t.prototype,"no",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){return this.cssClasses.panel.number},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){return this.cssClasses.panel.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.getCssError(this.cssClasses)},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){return new I().append(e.error.root).toString()},t.prototype.getSerializableColumnsValue=function(){if(this.getPropertyValueWithoutDefault("gridLayoutColumns")!==void 0){for(var e=-1,i=this.gridLayoutColumns.length-1;i>=0;i--)if(!this.gridLayoutColumns[i].isEmpty()){e=i;break}return this.gridLayoutColumns.slice(0,e+1)}},t.prototype.afterRender=function(e){this.afterRenderCore(e)},t.prototype.dispose=function(){if(r.prototype.dispose.call(this),this.rows){for(var e=0;e<this.rows.length;e++)this.rows[e].dispose();this.rows.splice(0,this.rows.length)}this.disposeElements(),this.elements.splice(0,this.elements.length)},t.prototype.disposeElements=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].dispose()},c([p({defaultValue:!0})],t.prototype,"showTitle",void 0),c([p({defaultValue:!0})],t.prototype,"showDescription",void 0),c([p({localizable:!0})],t.prototype,"requiredErrorText",void 0),c([p()],t.prototype,"questionOrder",void 0),c([p({returnValue:""})],t.prototype,"questionStartIndex",void 0),c([p()],t.prototype,"visibleIf",void 0),c([p()],t.prototype,"id",void 0),c([p()],t.prototype,"isRequired",void 0),c([p()],t.prototype,"requiredIf",void 0),c([p({onSet:function(e){return e.toLowerCase()}})],t.prototype,"questionTitleLocation",void 0),c([p()],t.prototype,"questionTitleWidth",void 0),c([p()],t.prototype,"visible",void 0),c([p()],t.prototype,"enableIf",void 0),c([p()],t.prototype,"questionErrorLocation",void 0),t})(ae),bt=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.forcusFirstQuestionOnExpand=!0,e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="width"&&this.parent&&this.parent.elementWidthChanged(this),["indent","innerIndent","rightIndent"].indexOf(e)>-1&&this.resetIndents(),e==="colSpan"&&this.parent&&this.parent.updateColumns(),(e==="showNumber"||e==="showQuestionNumbers")&&this.notifySurveyOnVisibilityChanged()},t.prototype.getType=function(){return"panel"},Object.defineProperty(t.prototype,"contentId",{get:function(){return this.id+"_content"},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return e===void 0&&(e=!1),e&&this.isPanel?this.parent?this.parent.getSurvey(e):null:r.prototype.getSurvey.call(this,e)},Object.defineProperty(t.prototype,"isPanel",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getOwner=function(){return this.parent},Object.defineProperty(t.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.moveTo=function(e,i){return i===void 0&&(i=null),this.moveToBase(this.parent,e,i)},t.prototype.getPanelInDesignMode=function(){return this},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(e){var i=this.getRecursiveNo();return i?(i[i.length-1]!=="."&&this.canAddDot(e)&&(i+="."),i+e):r.prototype.addNoFromChild.call(this,e)},t.prototype.getRecursiveNo=function(){return this.recursiveNoCallback?this.recursiveNoCallback():this.isQuestionIndexRecursive()?this.calcNo():""},t.prototype.canAddDot=function(e){return!!e&&new RegExp("^[\\p{L}\\d]","u").test(e[0])},t.prototype.getPageVisibleIndex=function(){var e;return((e=this.page)===null||e===void 0?void 0:e.visibleIndex)||-1},t.prototype.getQuestionStartIndex=function(){var e=this.questionStartIndex;return e&&this.isQuestionIndexOnPanel&&this.isComplexIndex(e)?this.getQuestionStartIndexVsVisibleIndex(e,this.visibleIndex):e||r.prototype.getQuestionStartIndex.call(this)},Object.defineProperty(t.prototype,"no",{get:function(){var e=this;return this.getPropertyValue("no",void 0,function(){return e.calcNo()})},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){var e=this.hasTitle?w.getNumberByIndex(this.visibleIndex,this.getStartIndex()):"";return this.onGetNoCallback?this.onGetNoCallback(e):(this.parent&&(e=this.parent.addNoFromChild(e)),this.survey&&(e=this.survey.getUpdatedPanelNo(this,e)),e||"")},t.prototype.notifyStateChanged=function(e){this.isLoadingFromJson||this.locTitle.strChanged(),r.prototype.notifyStateChanged.call(this,e)},t.prototype.createLocTitleProperty=function(){var e=this,i=r.prototype.createLocTitleProperty.call(this);return i.onGetTextCallback=function(n){return!n&&e.state!=="default"&&(n=e.name),n},i},t.prototype.beforeSetVisibleIndex=function(e){if(this.isPage||!this.parent)return r.prototype.beforeSetVisibleIndex.call(this,e);var i=-1;return(this.showNumber||this.isQuestionIndexRecursive())&&(this.isDesignMode||!this.locTitle.isEmpty||this.hasParentInQuestionIndex())&&(i=e),this.setPropertyValue("visibleIndex",i),this.resetPropertyValue("no"),i<0?0:1},t.prototype.getPanelStartIndex=function(e){return this.showQuestionNumbers==="off"?-1:this.isQuestionIndexOnPanel?0:e},Object.defineProperty(t.prototype,"isQuestionIndexOnPanel",{get:function(){return this.showQuestionNumbers==="onpanel"||this.isQuestionIndexRecursive()},enumerable:!1,configurable:!0}),t.prototype.isQuestionIndexRecursive=function(){var e=this.showQuestionNumbers;return e!=="default"?e==="recursive":r.prototype.isQuestionIndexRecursive.call(this)},t.prototype.hasParentInQuestionIndex=function(){if(!this.isQuestionIndexOnPanel)return!1;var e=this.questionStartIndex,i=e.indexOf(".");return i>-1&&i<e.length-1},t.prototype.isContinueNumbering=function(){return this.showQuestionNumbers!=="off"&&!this.isQuestionIndexOnPanel},t.prototype.notifySurveyOnVisibilityChanged=function(){this.survey!=null&&!this.isLoadingFromJson&&this.survey.panelVisibilityChanged(this,this.isVisible)},t.prototype.getRenderedTitle=function(e){if(this.isPanel&&!e){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return r.prototype.getRenderedTitle.call(this,e)},t.prototype.calcPaddingLeft=function(){return this.getIndentSize(this.indent)},t.prototype.calcPaddingRight=function(){return this.getIndentSize(this.rightIndent)},t.prototype.resetIndents=function(){this.resetPropertyValue("innerPaddingLeft"),r.prototype.resetIndents.call(this)},t.prototype.getIndentSize=function(e){if(this.survey){if(e<1)return"";var i=this.survey.css;return!i||!i.question||!i.question.indent?"":e*i.question.indent+"px"}},t.prototype.clearOnDeletingContainer=function(){this.elements.forEach(function(e){(e instanceof ie||e instanceof t)&&e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"footerActions",{get:function(){return this.getArrayPropertyValue("footerActions")},enumerable:!1,configurable:!0}),t.prototype.getFooterToolbar=function(){var e=this,i,n;if(!this.footerToolbarValue){var o=this.footerActions;this.hasEditButton&&o.push({id:"cancel-preview",locTitle:this.survey.locEditText,innerCss:this.survey.cssNavigationEdit,component:"sv-nav-btn",action:function(){e.cancelPreview()}}),this.onGetFooterActionsCallback?o=this.onGetFooterActionsCallback():o=(i=this.survey)===null||i===void 0?void 0:i.getUpdatedPanelFooterActions(this,o),this.footerToolbarValue=this.createActionContainer(this.allowAdaptiveActions);var s=this.onGetFooterToolbarCssCallback?this.onGetFooterToolbarCssCallback():"";s||(s=(n=this.cssClasses.panel)===null||n===void 0?void 0:n.footer),s&&(this.footerToolbarValue.containerCss=s),this.footerToolbarValue.setItems(o),this.footerToolbarValue.flushUpdates()}return this.footerToolbarValue},Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.cancelPreview=function(){this.hasEditButton&&this.survey.cancelPreviewByPage(this)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.getCssPanelTitle()},enumerable:!1,configurable:!0}),t.prototype.getCssPanelTitle=function(){return this.getCssTitle(this.cssClasses.panel)},t.prototype.getCssTitleExpandableSvg=function(){return this.state==="default"?null:this.cssClasses.panel.titleExpandableSvg},Object.defineProperty(t.prototype,"showErrorsAbovePanel",{get:function(){return!this.showPanelAsPage},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){if(this.isPage)return r.prototype.getCssError.call(this,e);var i=new I().append(r.prototype.getCssError.call(this,e)).append(e.panel.errorsContainer);return i.append("panel-error-root",i.isEmpty()).toString()},t.prototype.onVisibleChanged=function(){r.prototype.onVisibleChanged.call(this),this.notifySurveyOnVisibilityChanged()},t.prototype.needResponsiveWidth=function(){return this.startWithNewLine?r.prototype.needResponsiveWidth.call(this):!0},t.prototype.focusIn=function(){this.survey&&this.survey.whenPanelFocusIn(this)},t.prototype.getHasFrameV2=function(){return r.prototype.getHasFrameV2.call(this)&&!this.showPanelAsPage},t.prototype.getIsNested=function(){return r.prototype.getIsNested.call(this)&&this.parent!==void 0},Object.defineProperty(t.prototype,"showPanelAsPage",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.expand=function(e){e===void 0&&(e=!0),this.forcusFirstQuestionOnExpand=e,r.prototype.expand.call(this)},t.prototype.onElementExpanded=function(e){var i=this;if(this.forcusFirstQuestionOnExpand&&this.survey!=null&&!this.isLoadingFromJson){var n=this.getFirstQuestionToFocus(!1);n&&setTimeout(function(){!i.isDisposed&&i.survey&&i.survey.scrollElementToTop(n,n,null,n.inputId,!1,{behavior:"smooth"})},e?0:15)}},t.prototype.getCssRoot=function(e){return new I().append(r.prototype.getCssRoot.call(this,e)).append(e.container).append(e.asPage,this.showPanelAsPage).append(e.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getContainerCss=function(){return this.getCssRoot(this.cssClasses.panel)},t.prototype.afterRenderCore=function(e){var i;r.prototype.afterRenderCore.call(this,e),this.isPanel&&((i=this.survey)===null||i===void 0||i.afterRenderPanel(this,e))},c([p()],t.prototype,"showNumber",void 0),c([p()],t.prototype,"showQuestionNumbers",void 0),c([p()],t.prototype,"innerIndent",void 0),c([p()],t.prototype,"startWithNewLine",void 0),c([p()],t.prototype,"allowAdaptiveActions",void 0),c([p({calcFunc:function(e){return e.getIndentSize(e.innerIndent)}})],t.prototype,"innerPaddingLeft",void 0),t})(nn);V.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"readOnly:boolean",overridingProperty:"enableIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"questionTitleWidth",visibleIf:function(r){return!!r&&r.availableQuestionTitleWidth()}},{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"gridLayoutColumns:panellayoutcolumns",className:"panellayoutcolumn",isArray:!0,onSerializeValue:function(r){return r.getSerializableColumnsValue()},visibleIf:function(r){return!!r&&!!r.survey&&r.survey.gridLayoutEnabled}},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"questionOrder",alternativeName:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"questionErrorLocation",default:"default",choices:["default","top","bottom"]}],function(){return new nn}),V.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},{name:"width"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"maxWidth",defaultFunc:function(){return C.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(r){return r.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(r){return!!r.survey&&r.survey.gridLayoutEnabled}},{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3],visible:!1},{name:"page",isSerializable:!1,visibleIf:function(r){var t=r?r.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(r){var t=r?r.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"showNumber:boolean"},{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","recursive","off"]},{name:"questionStartIndex",visibleIf:function(r){return r.isPanel}},{name:"allowAdaptiveActions:boolean",default:!0,visible:!1}],function(){return new bt},"panelbase"),De.Instance.registerElement("panel",function(r){return new bt(r)});var rn=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.timeSpent=0,e._isReadyForClean=!0,e}return t.prototype.getType=function(){return"page"},t.prototype.toString=function(){return this.name},Object.defineProperty(t.prototype,"isPage",{get:function(){return!this.isPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!!this.parent},enumerable:!1,configurable:!0}),t.prototype.getOwner=function(){return this.survey},Object.defineProperty(t.prototype,"showPanelAsPage",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return this.isPanel&&this.survey&&this.survey.state==="preview"&&!!this.parent&&!this.parent.isPanel},enumerable:!1,configurable:!0}),t.prototype.getElementsForRows=function(){var e;if(!this.isStartPage){var i=(e=this.survey)===null||e===void 0?void 0:e.currentSingleElement;if(i)return i.page===this?[i]:[]}return r.prototype.getElementsForRows.call(this)},t.prototype.disposeElements=function(){this.isPageContainer||r.prototype.disposeElements.call(this)},t.prototype.onRemoveElement=function(e){this.isPageContainer?(e.parent=null,this.unregisterElementPropertiesChanged(e)):r.prototype.onRemoveElement.call(this,e)},t.prototype.getTemplate=function(){return this.isPanel?"panel":r.prototype.getTemplate.call(this)},t.prototype.getPanelInDesignMode=function(){return null},Object.defineProperty(t.prototype,"no",{get:function(){if(!this.canShowPageNumber()||!this.survey)return"";var e=this.isStartPage?"":this.num+". ";return this.survey.getUpdatedPageNo(this,e)},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(e){return e},Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){return this.isPanel?this.cssClasses.panel.number:this.cssClasses.page.number},enumerable:!1,configurable:!0}),t.prototype.getCssTitleExpandableSvg=function(){return null},Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.canShowPageNumber=function(){return this.survey&&this.survey.showPageNumbers},t.prototype.canShowTitle=function(e){return!e||e.showPageTitles},t.prototype.setTitleValue=function(e){r.prototype.setTitleValue.call(this,e),this.navigationLocStrChanged()},t.prototype.getDefaultTitleTagName=function(){return C.titleTags.page},Object.defineProperty(t.prototype,"navigationTitle",{get:function(){return this.getLocStringText(this.locNavigationTitle)},set:function(e){this.setLocStringText(this.locNavigationTitle,e)},enumerable:!1,configurable:!0}),t.prototype.navigationLocStrChanged=function(){this.isLocStrEmpty("navigationTitle")&&this.locTitle.strChanged(),this.locStrChanged("navigationTitle"),this.locStrChanged("navigationDescription")},t.prototype.getMarkdownHtml=function(e,i,n){var o=r.prototype.getMarkdownHtml.call(this,e,i,n);return i==="navigationTitle"&&this.canShowPageNumber()&&o?this.num+". "+o:o},t.prototype.removeFromParent=function(){this.survey&&this.removeSelfFromList(this.survey.pages)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},set:function(e){this.setPropertyValue("visibleIndex",e)},enumerable:!1,configurable:!0}),t.prototype.canRenderFirstRows=function(){return!this.isDesignMode||this.visibleIndex==0},t.prototype.isQuestionIndexRecursive=function(){var e=r.prototype.isQuestionIndexRecursive.call(this);return e&&this.isComplexIndex(this.getStartIndex())},t.prototype.getPanelStartIndex=function(e){return this.isQuestionIndexRecursive()?0:e},t.prototype.getPageVisibleIndex=function(){return this.visibleIndex},t.prototype.getQuestionStartIndex=function(){var e=this.getStartIndex();return this.isQuestionIndexRecursive()?this.getQuestionStartIndexVsVisibleIndex(e,this.num-1):e},Object.defineProperty(t.prototype,"isStartPage",{get:function(){return this.survey&&this.survey.isPageStarted(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStarted",{get:function(){return this.isStartPage},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){if(this.isPanel)return r.prototype.calcCssClasses.call(this,e);var i={page:{},error:{},pageTitle:"",pageDescription:"",row:"",rowMultiple:"",pageRow:"",rowCompact:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowReplace:""};return this.copyCssClasses(i.page,e.page),this.copyCssClasses(i.error,e.error),e.pageTitle&&(i.pageTitle=e.pageTitle),e.pageDescription&&(i.pageDescription=e.pageDescription),e.row&&(i.row=e.row),e.pageRow&&(i.pageRow=e.pageRow),e.rowMultiple&&(i.rowMultiple=e.rowMultiple),e.rowCompact&&(i.rowCompact=e.rowCompact),e.rowEnter&&(i.rowEnter=e.rowEnter),e.rowDelayedEnter&&(i.rowDelayedEnter=e.rowDelayedEnter),e.rowLeave&&(i.rowLeave=e.rowLeave),e.rowReplace&&(i.rowReplace=e.rowReplace),this.survey&&this.survey.updatePageCssClasses(this,i),i},t.prototype.getCssPanelTitle=function(){return this.isPanel?r.prototype.getCssPanelTitle.call(this):this.cssClasses.page?new I().append(this.cssClasses.page.title).toString():""},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return this.isPanel||!this.cssClasses.page||!this.survey?"":new I().append(this.cssClasses.page.root).append(this.cssClasses.page.emptyHeaderRoot,!this.survey.renderedHasHeader&&!(this.survey.isShowProgressBarOnTop&&!this.survey.isStaring)).toString()},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){return this.isPanel?r.prototype.getCssError.call(this,e):new I().append(r.prototype.getCssError.call(this,e)).append(e.page.errorsContainer).toString()},Object.defineProperty(t.prototype,"navigationButtonsVisibility",{get:function(){var e=this.showNavigationButtons;return e==null?"inherit":e?"show":"hide"},set:function(e){this.showNavigationButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons",void 0)},set:function(e){this.setShowNavigationButtonsProperty(e)},enumerable:!1,configurable:!0}),t.prototype.setShowNavigationButtonsProperty=function(e){typeof e=="string"&&(e=e.toLowerCase()),e===!0||e===!1?this.setPropertyValue("showNavigationButtons",e):e==="show"?this.setPropertyValue("showNavigationButtons",!0):e==="hide"?this.setPropertyValue("showNavigationButtons",!1):this.setPropertyValue("showNavigationButtons",void 0)},Object.defineProperty(t.prototype,"isActive",{get:function(){return!!this.survey&&this.survey.currentPage===this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasShown",{get:function(){return this.wasRendered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasShown",{get:function(){return this.wasRendered},enumerable:!1,configurable:!0}),t.prototype.setWasShown=function(e){e||this.resetWasRendered()},t.prototype.onFirstRenderingCore=function(){var e;if(r.prototype.onFirstRenderingCore.call(this),!this.isDesignMode){for(var i=this.elements,n=0;n<i.length;n++)i[n].isPanel&&i[n].randomizeElements(this.areQuestionsRandomized);if(this.randomizeElements(this.areQuestionsRandomized)){var o=(e=this.survey)===null||e===void 0?void 0:e.currentSingleElement;o?.page===this&&(this.survey.currentSingleElement=this.getFirstVisibleElement())}}},t.prototype.scrollToTop=function(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id,!1,{block:"start"})},t.prototype.getAllPanels=function(e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var n=new Array;return this.addPanelsIntoList(n,e,i),n},t.prototype.getPanels=function(e,i){return e===void 0&&(e=!1),i===void 0&&(i=!1),this.getAllPanels(e,i)},Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.timeLimit},set:function(e){this.timeLimit=e},enumerable:!1,configurable:!0}),t.prototype.getMaxTimeToFinish=function(){if(this.timeLimit!==0)return this.timeLimit;var e=this.survey?this.survey.timeLimitPerPage:0;return e>0?e:0},t.prototype.onNumChanged=function(e){},t.prototype.onVisibleChanged=function(){this.isRandomizing||(r.prototype.onVisibleChanged.call(this),this.survey!=null&&this.survey.pageVisibilityChanged(this,this.isVisible))},t.prototype.ensureRowsVisibility=function(){r.prototype.ensureRowsVisibility.call(this),this.getPanels().forEach(function(e){return e.ensureRowsVisibility()})},Object.defineProperty(t.prototype,"isReadyForClean",{get:function(){return this._isReadyForClean},set:function(e){var i=this._isReadyForClean;this._isReadyForClean=e,this._isReadyForClean!==i&&this.isReadyForCleanChangedCallback&&this.isReadyForCleanChangedCallback()},enumerable:!1,configurable:!0}),t.prototype.enableOnElementRerenderedEvent=function(){r.prototype.enableOnElementRerenderedEvent.call(this),this.isReadyForClean=!1},t.prototype.disableOnElementRerenderedEvent=function(){r.prototype.disableOnElementRerenderedEvent.call(this),this.isReadyForClean=!0},c([p({localizable:!0})],t.prototype,"navigationDescription",void 0),c([p({defaultValue:!1})],t.prototype,"passed",void 0),c([p({defaultValue:-1,onSet:function(e,i){return i.onNumChanged(e)}})],t.prototype,"num",void 0),c([p({defaultValue:0})],t.prototype,"timeLimit",void 0),t})(bt);V.addClass("page",[{name:"showNavigationButtons:boolean",defaultFunc:function(){},onSetValue:function(r,t){r&&r.setShowNavigationButtonsProperty(t)},alternativeName:"navigationButtonsVisibility"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,visibleIf:function(r){return!!r.survey&&r.survey.showTimer}},{name:"navigationTitle",serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(r){return!!r.survey&&r.survey.progressBarType==="buttons"},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"state",visible:!1},{name:"isRequired",visible:!1},{name:"startWithNewLine",visible:!1},{name:"width",visible:!1},{name:"minWidth",visible:!1},{name:"maxWidth",visible:!1},{name:"colSpan",visible:!1,isSerializable:!1},{name:"effectiveColSpan:number",visible:!1,isSerializable:!1},{name:"innerIndent",visible:!1},{name:"indent",visible:!1},{name:"page",visible:!1,isSerializable:!1},{name:"showNumber",visible:!1},{name:"showQuestionNumbers",visible:!1},{name:"allowAdaptiveActions",visible:!1},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText",visible:!1}],function(){return new rn},"panel");var yo=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.survey=e,i.onResize=i.addEvent(),i}return t.prototype.isListElementClickable=function(e){return!this.survey.onServerValidateQuestions||this.survey.onServerValidateQuestions.isEmpty||this.survey.checkErrorsMode==="onComplete"?!0:e<=this.survey.currentPageNo+1},t.prototype.getRootCss=function(e){e===void 0&&(e="center");var i=this.survey.css.progressButtonsContainerCenter;return this.survey.css.progressButtonsRoot&&(i+=" "+this.survey.css.progressButtonsRoot+" "+this.survey.css.progressButtonsRoot+"--"+(["footer","contentBottom"].indexOf(e)!==-1?"bottom":"top"),i+=" "+this.survey.css.progressButtonsRoot+"--"+(this.showItemTitles?"with-titles":"no-titles")),this.showItemNumbers&&this.survey.css.progressButtonsNumbered&&(i+=" "+this.survey.css.progressButtonsNumbered),this.isFitToSurveyWidth&&(i+=" "+this.survey.css.progressButtonsFitSurveyWidth),i},t.prototype.getListElementCss=function(e){if(!(e>=this.survey.visiblePages.length))return new I().append(this.survey.css.progressButtonsListElementPassed,this.survey.visiblePages[e].passed).append(this.survey.css.progressButtonsListElementCurrent,this.survey.currentPageNo===e).append(this.survey.css.progressButtonsListElementNonClickable,!this.isListElementClickable(e)).toString()},t.prototype.getScrollButtonCss=function(e,i){return new I().append(this.survey.css.progressButtonsImageButtonLeft,i).append(this.survey.css.progressButtonsImageButtonRight,!i).append(this.survey.css.progressButtonsImageButtonHidden,!e).toString()},t.prototype.clickListElement=function(e){e instanceof rn||(e=this.survey.visiblePages[e]),this.survey.tryNavigateToPage(e)},t.prototype.isListContainerHasScroller=function(e){var i=e.querySelector("."+this.survey.css.progressButtonsListContainer);return i?i.scrollWidth>i.offsetWidth:!1},t.prototype.isCanShowItemTitles=function(e){var i=e.querySelector("ul");if(!i||i.children.length<2)return!0;if(i.clientWidth>i.parentElement.clientWidth)return!1;for(var n=i.children[0].clientWidth,o=0;o<i.children.length;o++)if(Math.abs(i.children[o].clientWidth-n)>5)return!1;return!0},Object.defineProperty(t.prototype,"isFitToSurveyWidth",{get:function(){return He.currentType!=="default"?!1:this.survey.progressBarInheritWidthFrom==="survey"&&this.survey.widthMode=="static"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressWidth",{get:function(){return this.isFitToSurveyWidth?this.survey.renderedWidth:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemNumbers",{get:function(){return He.currentType!=="default"?!1:this.survey.progressBarShowPageNumbers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemTitles",{get:function(){return He.currentType!=="default"?!0:this.survey.progressBarShowPageTitles},enumerable:!1,configurable:!0}),t.prototype.getItemNumber=function(e){var i="";return this.showItemNumbers&&(i+=this.survey.visiblePages.indexOf(e)+1),i},Object.defineProperty(t.prototype,"headerText",{get:function(){return this.survey.currentPage?this.survey.currentPage.renderedNavigationTitle:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerText",{get:function(){return this.progressText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this;return this.getPropertyValue("progressText",void 0,function(){return e.survey.getProgressText()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return te("progressbar",this.survey.getLocale())},enumerable:!1,configurable:!0}),t.prototype.resetProgressText=function(){this.resetPropertyValue("progressText")},t.prototype.processResponsiveness=function(e){this.onResize.fire(this,{width:e})},t})(U),Wl=(function(){function r(t,e,i){var n=this;this.model=t,this.element=e,this.viewModel=i,this.criticalProperties=["progressBarType","progressBarShowPageTitles"],this.canShowItemTitles=!0,this.processResponsiveness=function(o,s){if(n.viewModel.onUpdateScroller(o.isListContainerHasScroller(n.element)),!!o.showItemTitles){if(o.survey.isMobile){n.canShowItemTitles=!1,n.viewModel.onResize(n.canShowItemTitles);return}n.canShowItemTitles=o.isCanShowItemTitles(n.element),n.viewModel.onResize(n.canShowItemTitles)}},this.model.survey.registerFunctionOnPropertiesValueChanged(this.criticalProperties,function(){return n.forceUpdate()},"ProgressButtonsResponsivityManager"+this.viewModel.container),this.model.onResize.add(this.processResponsiveness),this.forceUpdate()}return r.prototype.forceUpdate=function(){this.viewModel.onUpdateSettings(),this.processResponsiveness(this.model,{})},r.prototype.dispose=function(){this.model.onResize.remove(this.processResponsiveness),this.model.survey.unRegisterFunctionOnPropertiesValueChanged(this.criticalProperties,"ProgressButtonsResponsivityManager"+this.viewModel.container),this.element=void 0,this.model=void 0},r})();function mo(r,t){return r.isDesignMode||t.focusFirstQuestion(),!0}function vo(r){if(r.parentQuestion)return vo(r.parentQuestion);for(var t=r.parent;t&&t.getType()!=="page"&&t.parent;)t=t.parent;return t&&t.getType()==="page"?t:null}function bo(r,t){var e=Co(r,t),i={items:e,searchEnabled:!1,locOwner:r,listRole:"menu",listItemRole:"menuitemradio",listAriaLabel:te("toc",r.getLocale())},n=new ct(i);n.allowSelection=!1;var o=function(a,l){n.selectedItem=!!a&&n.actions.filter(function(u){return u.id===a.name})[0]||l};o(r.currentPage,e[0]),r.onCurrentPageChanged.add(function(a,l){o(r.currentPage)}),r.onFocusInQuestion.add(function(a,l){o(vo(l.question))});var s=function(){n.setItems(Co(r,t))};return r.registerFunctionOnPropertyValueChanged("pages",s,"toc"),r.onEndLoadingFromJson.add(s),n}function Co(r,t){var e=r.pages,i=(e||[]).map(function(n){return new G({id:n.name,locTitle:n.locNavigationTitle,action:function(){if(D.activeElementBlur(),t&&t(),n.isPage)return r.tryNavigateToPage(n);if(n.isPanel)return mo(r,n)},visible:new $(function(){return n.isVisible&&!n.isStartPage})})});return i}function wo(r,t){t===void 0&&(t=!1);var e=ze.RootStyle;return t?e+" "+ze.RootStyle+"--mobile":(e+=" "+ze.RootStyle+"--"+(r.tocLocation||"").toLowerCase(),ze.StickyPosition&&(e+=" "+ze.RootStyle+"--sticky"),e)}var ze=(function(){function r(t){var e=this;this.survey=t,this.icon="icon-navmenu_24x24",this.togglePopup=function(){e.popupModel.toggleVisibility()},this.listModel=bo(t,function(){e.popupModel.isVisible=!1}),this.popupModel=new pt("sv-list",{model:this.listModel}),this.popupModel.overlayDisplayMode="tablet-dropdown-overlay",this.popupModel.displayMode=new $(function(){return e.isMobile?"overlay":"popup"}),r.StickyPosition&&(t.onAfterRenderSurvey.add(function(i,n){return e.initStickyTOCSubscriptions(n.htmlElement)}),this.initStickyTOCSubscriptions(t.rootElement))}return r.prototype.initStickyTOCSubscriptions=function(t){var e=this;r.StickyPosition&&t&&(t.addEventListener("scroll",function(i){e.updateStickyTOCSize(t)}),this.updateStickyTOCSize(t))},r.prototype.updateStickyTOCSize=function(t){if(t){var e=t.querySelector("."+r.RootStyle);if(e&&(e.style.height="",!this.isMobile&&r.StickyPosition&&t)){var i=t.getBoundingClientRect().height,n=this.survey.findLayoutElement("advanced-header"),o=n&&n.data,s=!o||o.hasBackground,a=this.survey.headerView==="advanced"?".sv-header":".sv_custom_header+div div."+(this.survey.css.title||"sd-title"),l=t.querySelector(a),u=l&&s?l.getBoundingClientRect().height:0,f=t.querySelector(".sv-scroll__scroller")||t,y=f.scrollTop>u?0:u-f.scrollTop;e.style.height=i-y-1+"px"}}},Object.defineProperty(r.prototype,"isMobile",{get:function(){return this.survey.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"containerCss",{get:function(){return wo(this.survey,this.isMobile)},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){var t=this.survey.unRegisterFunctionOnPropertyValueChanged("pages","toc")[0];this.survey.onEndLoadingFromJson.remove(t),this.survey.onPageAdded.remove(t),this.popupModel.dispose(),this.listModel.dispose()},r.RootStyle="sv_progress-toc",r.StickyPosition=!0,r})(),Gl=(function(r){P(t,r);function t(e,i,n){var o=r.call(this)||this;return o.survey=e,o.valuesHash=i,o.variablesHash=n,o}return t.prototype.getObj=function(){return this.survey},t.prototype.getValue=function(e){var i=e.path;if(i.length===1){var n=i[0].name,o=this.getBuiltInVariableValue(n);if(n==="locale"&&(o=this.survey.locale||oe.defaultLocale),o!==void 0)return{value:o,isFound:!0}}if(e.isProperty&&i.length>1&&i[0].name.toLocaleLowerCase()===C.expressionVariables.survey)return new Oe(this.survey).getValue({path:i.slice(1),isRoot:!1,index:-1});var s=new fe(this.variablesHash).getValue(e);return s&&s.isFound||(s=r.prototype.getValue.call(this,e),s&&s.isFound)?s:new fe(this.valuesHash).getValue(e)},t.prototype.updateValueByItem=function(e,i){var n=C.expressionVariables.unwrapPostfix,o=e.endsWith(n);o&&(e=e.substring(0,e.length-n.length));var s=this.survey.getQuestionByValueName(e,!0);s&&(i.isFound=!0,i.obj=s,i.context=s.getValueGetterContext(o))},t.prototype.isSearchNameRevert=function(){return!0},t.prototype.getBuiltInVariableValue=function(e){var i=this.survey;if(e=e.toLocaleLowerCase(),e==="pageno"){var n=i.currentPage;return n!=null?i.visiblePages.indexOf(n)+1:0}if(e==="pagecount")return i.visiblePageCount;if(e==="correctedanswers"||e==="correctanswers"||e==="correctedanswercount")return i.getCorrectedAnswerCount();if(e==="incorrectedanswers"||e==="incorrectanswers"||e==="incorrectedanswercount")return i.getInCorrectedAnswerCount();if(e==="questioncount")return i.getQuizQuestionCount()},t})(Ne),Me=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;return n.valuesHash={},n.variablesHash={},n.onEndLoadingFromJson=n.addEvent(),n.onTriggerExecuted=n.addEvent(),n.onCompleting=n.addAsyncEvent(),n.onComplete=n.addEvent(),n.onShowingPreview=n.addEvent(),n.onNavigateToUrl=n.addEvent(),n.onStarted=n.addEvent(),n.onPartialSend=n.addEvent(),n.onCurrentPageChanging=n.addAsyncEvent(),n.onCurrentPageChanged=n.addEvent(),n.onValueChanging=n.addEvent(),n.onValueChanged=n.addEvent(),n.onVariableChanged=n.addEvent(),n.onQuestionVisibleChanged=n.addEvent(),n.onVisibleChanged=n.onQuestionVisibleChanged,n.onPageVisibleChanged=n.addEvent(),n.onPanelVisibleChanged=n.addEvent(),n.onQuestionCreated=n.addEvent(),n.onQuestionAdded=n.addEvent(),n.onQuestionRemoved=n.addEvent(),n.onPanelAdded=n.addEvent(),n.onPanelRemoved=n.addEvent(),n.onPageAdded=n.addEvent(),n.onCreateRegexValidator=n.addEvent(),n.onValidateQuestion=n.addEvent(),n.onSettingQuestionErrors=n.addEvent(),n.onServerValidateQuestions=n.addEvent(),n.onValidatePanel=n.addEvent(),n.onErrorCustomText=n.addEvent(),n.onValidatePage=n.addEvent(),n.onValidatedErrorsOnCurrentPage=n.onValidatePage,n.onProcessHtml=n.addEvent(function(){return n.locStrsChanged()}),n.onGetQuestionDisplayValue=n.addEvent(),n.onGetQuestionTitle=n.addEvent(function(){return n.locStrsChanged()}),n.onGetTitleTagName=n.addEvent(),n.onGetQuestionNumber=n.addEvent(function(){return n.resetVisibleIndexes()}),n.onGetQuestionNo=n.onGetQuestionNumber,n.onGetPanelNumber=n.addEvent(function(){return n.resetVisibleIndexes()}),n.onGetPageNumber=n.addEvent(),n.onGetProgressText=n.addEvent(function(){return n.updateProgressText()}),n.onProgressText=n.onGetProgressText,n.onTextMarkdown=n.addEvent(function(){return n.locStrsChanged()}),n.onTextRenderAs=n.addEvent(),n.onSendResult=n.addEvent(),n.onGetResult=n.addEvent(),n.onOpenFileChooser=n.addEvent(),n.onUploadFiles=n.addEvent(),n.onDownloadFile=n.addEvent(),n.onClearFiles=n.addEvent(),n.onChoicesLoaded=n.addEvent(),n.onLoadChoicesFromServer=n.onChoicesLoaded,n.onLoadedSurveyFromService=n.addEvent(),n.onProcessDynamicText=n.addEvent(),n.onProcessTextValue=n.onProcessDynamicText,n.onUpdateQuestionCssClasses=n.addEvent(function(){return n.currentPageUpdateElementCss()}),n.onUpdatePanelCssClasses=n.addEvent(function(){return n.currentPageUpdateElementCss()}),n.onUpdatePageCssClasses=n.addEvent(function(){return n.currentPageUpdateElementCss()}),n.onUpdateChoiceItemCss=n.addEvent(),n.onAfterRenderSurvey=n.addEvent(),n.onAfterRenderHeader=n.addEvent(),n.onAfterRenderPage=n.addEvent(),n.onAfterRenderQuestion=n.addEvent(),n.onAfterRenderQuestionInput=n.addEvent(),n.onAfterRenderPanel=n.addEvent(),n.onFocusInQuestion=n.addEvent(),n.onFocusInPanel=n.addEvent(),n.onShowingChoiceItem=n.addEvent(function(){return n.rebuildQuestionChoices()}),n.onChoicesLazyLoad=n.addEvent(),n.onChoicesSearch=n.addEvent(),n.onGetChoiceDisplayValue=n.addEvent(),n.onMatrixRowAdded=n.addEvent(),n.onMatrixRowAdding=n.addEvent(),n.onMatrixBeforeRowAdded=n.onMatrixRowAdding,n.onMatrixRowRemoving=n.addEvent(),n.onMatrixRowRemoved=n.addEvent(),n.onMatrixRenderRemoveButton=n.addEvent(),n.onMatrixAllowRemoveRow=n.onMatrixRenderRemoveButton,n.onMatrixDetailPanelVisibleChanged=n.addEvent(),n.onMatrixCellCreating=n.addEvent(),n.onMatrixCellCreated=n.addEvent(),n.onAfterRenderMatrixCell=n.addEvent(),n.onMatrixAfterCellRender=n.onAfterRenderMatrixCell,n.onMatrixCellValueChanged=n.addEvent(),n.onMatrixCellValueChanging=n.addEvent(),n.onMatrixCellValidate=n.addEvent(),n.onMatrixColumnAdded=n.addEvent(),n.onMultipleTextItemAdded=n.addEvent(),n.onDynamicPanelAdded=n.addEvent(),n.onDynamicPanelRemoved=n.addEvent(),n.onDynamicPanelRemoving=n.addEvent(),n.onTimerTick=n.addEvent(),n.onTimer=n.onTimerTick,n.onTimerPanelInfoText=n.addEvent(),n.onDynamicPanelValueChanged=n.addEvent(),n.onDynamicPanelItemValueChanged=n.onDynamicPanelValueChanged,n.onDynamicPanelValueChanging=n.addEvent(),n.onGetDynamicPanelTabTitle=n.addEvent(),n.onDynamicPanelCurrentIndexChanged=n.addEvent(),n.onCheckAnswerCorrect=n.addEvent(),n.onIsAnswerCorrect=n.onCheckAnswerCorrect,n.onDragDropAllow=n.addEvent(),n.onMatrixRowDragOver=n.addEvent(),n.onExpressionRunning=n.addEvent(),n.onScrollToTop=n.addEvent(),n.onScrollingElementToTop=n.onScrollToTop,n.onLocaleChangedEvent=n.addEvent(),n.onGetQuestionTitleActions=n.addEvent(),n.onGetPanelTitleActions=n.addEvent(),n.onGetPageTitleActions=n.addEvent(),n.onGetPanelFooterActions=n.addEvent(),n.onGetMatrixRowActions=n.addEvent(),n.onElementContentVisibilityChanged=n.addEvent(),n.onUIStateChanged=n.addEvent(),n.onGetExpressionDisplayValue=n.addEvent(),n.onCheckSingleInputPerPageMode=n.addEvent(),n.onGetLoopQuestions=n.addEvent(),n.onPopupVisibleChanged=n.addEvent(),n.onOpenDropdownMenu=n.addEvent(),n.onElementWrapperComponentName=n.addEvent(),n.onElementWrapperComponentData=n.addEvent(),n.onCreateCustomChoiceItem=n.addEvent(),n.jsonErrors=null,n.cssValue=null,n.showHeaderOnCompletePage="auto",n._isLazyRenderingSuspended=!1,n.hideRequiredErrors=!1,n.cssVariables={},n._isMobile=!1,n._isCompact=!1,n.setValueOnExpressionCounter=0,n._isDesignMode=!1,n.validationAllowSwitchPages=!1,n.validationAllowComplete=!1,n.isNavigationButtonPressed=!1,n.mouseDownPage=null,n.isSmoothScrollEnabled=!1,n.onResize=new se,n.isCurrentPageRendering=!0,n.isCurrentPageRendered=void 0,n.skeletonHeight=void 0,n.isTriggerIsRunning=!1,n.triggerKeys=null,n.isValueChangedOnRunningCondition=!1,n.conditionRunnerCounter=0,n.conditionUpdateVisibleIndexes=!1,n.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,n.isEndLoadingFromJson=null,n.nofifyQuesitonHash={},n.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},n.setValueFromTriggerCounter=0,n.isMovingPage=!1,n.needRenderIcons=!0,n.skippedPages=[],n.skeletonComponentName="sv-skeleton",n.taskManager=new Ul,n.questionErrorComponent="sv-question-error",n.createNewArray("pages",function(o){o.isReadyForCleanChangedCallback&&o.isReadyForCleanChangedCallback(),n.doOnPageAdded(o)},function(o){o.isReadyForClean?n.doOnPageRemoved(o):o.isReadyForCleanChangedCallback=function(){n.doOnPageRemoved(o),o.isReadyForCleanChangedCallback=void 0}}),n.locTitle.onStringChanged.add(function(){return n.resetPropertyValue("titleIsEmpty")}),e&&((typeof e=="string"||e instanceof String)&&(e=JSON.parse(e)),e&&e.clientId&&(n.clientId=e.clientId),n.fromJSON(e),n.surveyId&&n.loadSurveyFromService(n.surveyId,n.clientId)),i&&n.render(i),n.updateCss(),n.setCalculatedWidthModeUpdater(),n}return Object.defineProperty(t.prototype,"platformName",{get:function(){return t.platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentSuffix",{get:function(){return C.commentSuffix},set:function(e){C.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPrefix",{get:function(){return this.commentSuffix},set:function(e){this.commentSuffix=e},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="questionsOnPageMode"&&this.onQuestionsOnPageModeChanged(i),e==="locale"&&this.onSurveyLocaleChanged(),e==="firstPageIsStartPage"&&this.onFirstPageIsStartedChanged(),e==="readOnly"&&this.onReadOnlyChanged(),e==="progressBarType"&&this.updateProgressText();var o=["questionStartIndex","requiredMark","questionTitlePattern"];o.indexOf(e)>-1&&this.resetVisibleIndexes();var s=["isLoading","isCompleted","isCompletedBefore","readOnly","isStartedState","currentPage","isShowingPreview"];s.indexOf(e)>-1&&this.updateState();var a=["state","currentPage","showPreviewBeforeComplete"];a.indexOf(e)>-1&&this.onStateAndCurrentPageChanged(),(e==="logo"||e==="logoPosition")&&this.resetHasLogo(),e==="backgroundImage"&&this.resetPropertyValue("renderBackgroundImage");var l=["backgroundImage","backgroundOpacity","backgroundImageFit","fitToContainer","backgroundImageAttachment"];l.indexOf(e)>-1&&this.resetPropertyValue("backgroundImageStyle"),(e==="showPrevButton"||e==="showCompleteButton")&&this.updateButtonsVisibility()},t.prototype.currentPageUpdateElementCss=function(){this.currentPage&&this.currentPage.updateElementCss()},Object.defineProperty(t.prototype,"tocModel",{get:function(){return this.tocModelValue||(this.tocModelValue=new ze(this)),this.tocModelValue},enumerable:!1,configurable:!0}),t.prototype.processClosedPopup=function(e,i){throw new Error("Method not implemented.")},t.prototype.createTryAgainAction=function(){var e=this;return{id:"save-again",title:this.getLocalizationString("saveAgainButton"),action:function(){e.isCompleted?e.saveDataOnComplete():e.doComplete()}}},t.prototype.getOrCreateHtmlLocString=function(e,i,n){var o=this;return this.getOrCreateLocStr(e,!1,i,function(s){n&&(s.onGetTextCallback=function(a){return o.processHtml(a,n)})})},t.prototype.getType=function(){return"survey"},Object.defineProperty(t.prototype,"pages",{get:function(){return this.getPropertyValue("pages")},enumerable:!1,configurable:!0}),t.prototype.render=function(e){this.renderCallback&&this.renderCallback()},t.prototype.updateSurvey=function(e,i){var n=function(){if(s=="model"||s=="children")return"continue";if(s.indexOf("on")==0&&o[s]&&o[s].add){var a=e[s],l=function(u,f){a(u,f)};o[s].add(l)}else o[s]=e[s]},o=this;for(var s in e)n();e&&e.data&&this.onValueChanged.add(function(a,l){e.data[l.name]=l.value})},t.prototype.getCss=function(){return this.css},t.prototype.updateCompletedPageCss=function(){this.containerCss=this.css.container,this.completedCss=new I().append(this.css.body).append(this.css.completedPage).toString(),this.completedBeforeCss=new I().append(this.css.body).append(this.css.completedBeforePage).toString(),this.loadingBodyCss=new I().append(this.css.body).append(this.css.bodyLoading).toString()},t.prototype.updateCss=function(){this.rootCss=this.getRootCss(),this.updateNavigationCss(),this.updateCompletedPageCss(),this.updateWrapperFormCss()},Object.defineProperty(t.prototype,"css",{get:function(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,He.getCss())),this.cssValue},set:function(e){this.setCss(e)},enumerable:!1,configurable:!0}),t.prototype.setCss=function(e,i){i===void 0&&(i=!0),i?this.mergeValues(e,this.css):this.cssValue=e,this.updateElementCss(!1)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.css.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyCss",{get:function(){return new I().append(this.css.body).append(this.css.bodyWithTimer,this.showTimer&&this.state==="running").append(this.css.body+"--"+this.calculatedWidthMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyContainerCss",{get:function(){return this.css.bodyContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationComplete",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.complete)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPreview",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.preview)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationEdit",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPrev",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.prev)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationStart",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationNext",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.next)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssSurveyNavigationButton",{get:function(){return new I().append(this.css.navigationButton).append(this.css.bodyNavigationButton).toString()},enumerable:!1,configurable:!0}),t.prototype.insertAdvancedHeader=function(e){e.survey=this,this.layoutElements.push({id:"advanced-header",container:"header",component:"sv-header",index:-100,data:e,processResponsiveness:function(i){return e.processResponsiveness()}})},Object.defineProperty(t.prototype,"lazyRenderEnabled",{get:function(){return this.lazyRenderEnabledValue===!0},set:function(e){if(this.lazyRenderEnabled!==e){this.lazyRenderEnabledValue=e;var i=this.currentPage;i&&i.updateRows()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyRendering",{get:function(){return this.lazyRenderEnabled},set:function(e){this.lazyRenderEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRendering",{get:function(){return this.lazyRenderEnabled||C.lazyRender.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyRenderFirstBatchSize",{get:function(){return this.lazyRenderFirstBatchSizeValue||C.lazyRender.firstBatchSize},set:function(e){this.lazyRenderFirstBatchSizeValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRenderingSuspended",{get:function(){return this._isLazyRenderingSuspended},enumerable:!1,configurable:!0}),t.prototype.suspendLazyRendering=function(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!0)},t.prototype.releaseLazyRendering=function(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!1)},t.prototype.updateLazyRenderingRowsOnRemovingElements=function(){var e,i;if(this.isLazyRendering){var n=this.currentPage;if(n){var o=(i=this.rootElement||((e=this.creator)===null||e===void 0?void 0:e.rootElement))===null||i===void 0?void 0:i.querySelector("#".concat(n.id));Qt(o)}}},Object.defineProperty(t.prototype,"triggers",{get:function(){var e=this;return this.getArrayPropertyValue("triggers",function(i){i.setOwner(e)})},set:function(e){this.setArrayPropertyValue("triggers",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedValues",{get:function(){var e=this;return this.getArrayPropertyValue("calculatedValues",function(i){i.setOwner(e)})},set:function(e){this.setArrayPropertyValue("calculatedValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusFirstQuestionAutomatic",{get:function(){return this.autoFocusFirstQuestion},set:function(e){this.autoFocusFirstQuestion=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.autoFocusFirstError},set:function(e){this.autoFocusFirstError=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons")},set:function(e){e==="both"&&(e="topBottom");var i=["top","bottom","topBottom"].indexOf(e)>-1,n=e===!0||i;this.setPropertyValue("showNavigationButtons",n),i&&(this.navigationButtonsLocation=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompletedPage",{get:function(){return this.showCompletePage},set:function(e){this.showCompletePage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrlOnCondition",{get:function(){var e=this;return this.getArrayPropertyValue("navigateToUrlOnCondition",function(i){i.locOwner=e})},set:function(e){this.setArrayPropertyValue("navigateToUrlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.getNavigateToUrl=function(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),i=e?e.url:this.navigateToUrl;return i&&(i=this.processText(i,!1)),i},t.prototype.navigateTo=function(){var e=this.getNavigateToUrl(),i={url:e,allow:!0};this.onNavigateToUrl.fire(this,i),!(!i.url||!i.allow)&&ul(i.url)},Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},set:function(e){this.requiredMark=e},enumerable:!1,configurable:!0}),t.prototype.beforeSettingQuestionErrors=function(e,i){this.makeRequiredErrorsInvisible(i),this.onSettingQuestionErrors.fire(this,{question:e,errors:i})},t.prototype.makeRequiredErrorsInvisible=function(e){if(this.hideRequiredErrors)for(var i=0;i<e.length;i++){var n=e[i].getErrorType();(n=="required"||n=="requireoneanswer")&&(e[i].visible=!1)}},t.prototype.getQuestionStartIndex=function(e){if(e>=0&&e<this.visiblePages.length)for(var i=e;i>=0;i--){var n=this.visiblePages[i];if(n.questionStartIndex)return n.questionStartIndex}return this.questionStartIndex},Object.defineProperty(t.prototype,"maxOthersLength",{get:function(){return this.maxCommentLength},set:function(e){this.maxCommentLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"goNextPageAutomatic",{get:function(){return this.autoAdvanceEnabled},set:function(e){this.autoAdvanceEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowCompleteSurveyAutomatic",{get:function(){return this.autoAdvanceAllowComplete},set:function(e){this.autoAdvanceAllowComplete=e},enumerable:!1,configurable:!0}),t.prototype.getValidateVisitedEmptyFields=function(){return this.validateVisitedEmptyFields&&this.isValidateOnValueChange},t.prototype.clearIncorrectValues=function(e){e===void 0&&(e=!1);for(var i=0;i<this.pages.length;i++)this.pages[i].clearIncorrectValues();if(e){var n=this.data,o=!1;for(var s in n)if(!this.getQuestionByValueName(s)&&!(this.iscorrectValueWithPostPrefix(s,C.commentSuffix)||this.iscorrectValueWithPostPrefix(s,C.matrix.totalsSuffix))){var a=this.getCalculatedValueByName(s);a&&a.includeIntoResult||(o=!0,delete n[s])}o&&(this.data=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,i){return e.indexOf(i)!==e.length-i.length?!1:!!this.getQuestionByValueName(e.substring(0,e.indexOf(i)))},Object.defineProperty(t.prototype,"locale",{get:function(){return this.getPropertyValueWithoutDefault("locale")||oe.currentLocale},set:function(e){e===oe.defaultLocale&&!oe.currentLocale&&(e=""),this.setPropertyValue("locale",e)},enumerable:!1,configurable:!0}),t.prototype.onSurveyLocaleChanged=function(){this.notifyElementsOnAnyValueOrVariableChanged("locale"),this.localeChanged(),this.onLocaleChangedEvent.fire(this,this.locale)},Object.defineProperty(t.prototype,"localeDir",{get:function(){return oe.localeDirections[this.locale]},enumerable:!1,configurable:!0}),t.prototype.getUsedLocales=function(){var e=new Array;this.addUsedLocales(e);var i=e.indexOf("default");if(i>-1){var n=oe.defaultLocale,o=e.indexOf(n);o>-1&&e.splice(o,1),i=e.indexOf("default"),e[i]=n}return e},t.prototype.localeChanged=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()},t.prototype.getLocale=function(){return this.locale},t.prototype.locStrsChanged=function(){var e;if(!this.isClearingUnsedValues&&(r.prototype.locStrsChanged.call(this),!!this.currentPage)){if(this.isDesignMode)this.pages.forEach(function(s){return s.locStrsChanged()});else{var i=this.activePage;i&&i.locStrsChanged();for(var n=this.visiblePages,o=0;o<n.length;o++)n[o].navigationLocStrChanged()}this.isStartPageActive||this.updateProgressText(),(e=this.navigationBarValue)===null||e===void 0||e.locStrsChanged()}},t.prototype.getAllChildren=function(){var e=r.prototype.getAllChildren.call(this);return e.push.apply(e,this.pages),e.push.apply(e,this.calculatedValues),e.push.apply(e,this.triggers),e.push.apply(e,this.completedHtmlOnCondition),e.push.apply(e,this.navigateToUrlOnCondition),e},t.prototype.getMarkdownHtml=function(e,i,n){return this.getSurveyMarkdownHtml(this,e,i,n)},t.prototype.getRenderer=function(e){return this.getRendererForString(this,e)},t.prototype.getRendererContext=function(e){return this.getRendererContextForString(this,e)},t.prototype.getRendererForString=function(e,i,n){var o=this.getBuiltInRendererForString(e,i,n);o=this.elementWrapperComponentNameCore(o,e,"string",i);var s={element:e,name:i,renderAs:o};return this.onTextRenderAs.fire(this,s),s.renderAs},t.prototype.getRendererContextForString=function(e,i,n){return this.elementWrapperDataCore(i,e,"string")},t.prototype.getExpressionDisplayValue=function(e,i,n){var o={question:e,value:i,displayValue:n};return this.onGetExpressionDisplayValue.fire(this,o),o.displayValue},t.prototype.getBuiltInRendererForString=function(e,i,n){if(this.isDesignMode)return me.editableRenderer},t.prototype.getProcessedText=function(e,i){return this.processText(e,!0,i)},t.prototype.getLocString=function(e){return this.getLocalizationString(e)},t.prototype.getErrorCustomText=function(e,i){return this.getSurveyErrorCustomText(this,e,i)},t.prototype.createRegexValidator=function(e,i,n,o){var s={question:e,validator:i,pattern:n,flags:o};return this.onCreateRegexValidator.fire(this,s),new RegExp(s.pattern,s.flags)},t.prototype.getSurveyErrorCustomText=function(e,i,n){var o={text:i,name:n.getErrorType(),obj:e,error:n};return this.onErrorCustomText.fire(this,o),o.text},t.prototype.getQuestionDisplayValue=function(e,i){var n={question:e,displayValue:i};return this.onGetQuestionDisplayValue.fire(this,n),n.displayValue},Object.defineProperty(t.prototype,"renderedLogoWidth",{get:function(){return this.logoWidth?_e(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoWidth",{get:function(){return this.logoWidth?jt(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLogoHeight",{get:function(){return this.logoHeight?_e(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoHeight",{get:function(){return this.logoHeight?jt(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasLogo",{get:function(){var e=this;return this.getPropertyValue("hasLogo",void 0,function(){return!!e.logo&&e.logoPosition!=="none"})},enumerable:!1,configurable:!0}),t.prototype.resetHasLogo=function(){this.resetPropertyValue("hasLogo")},Object.defineProperty(t.prototype,"isLogoBefore",{get:function(){return this.isDesignMode?!1:this.renderedHasLogo&&(this.logoPosition==="left"||this.logoPosition==="top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogoAfter",{get:function(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&(this.logoPosition==="right"||this.logoPosition==="bottom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoClassNames",{get:function(){var e={left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"};return new I().append(this.css.logo).append(e[this.logoPosition]).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleIsEmpty",{get:function(){var e=this;return this.getPropertyValue("titleIsEmpty",void 0,function(){return e.locTitle.isEmpty})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasTitle",{get:function(){return this.isDesignMode?this.isPropertyVisible("title"):!this.titleIsEmpty&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasDescription",{get:function(){return this.isDesignMode?this.isPropertyVisible("description"):!!this.hasDescription&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.renderedHasTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasLogo",{get:function(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasHeader",{get:function(){return this.renderedHasTitle||this.renderedHasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"themeVariables",{get:function(){return Object.assign({},this.cssVariables)},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(e){e===void 0&&(e=!0),this._isMobile!==e&&(this._isMobile=e,this.updateCss(),this.getAllQuestions().forEach(function(i){return i.setIsMobile(e)}))},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompact",{get:function(){return this._isCompact},set:function(e){e!==this._isCompact&&(this._isCompact=e,this.updateElementCss(),this.triggerResponsiveness(!0))},enumerable:!1,configurable:!0}),t.prototype.isLogoImageChoosen=function(){return this.locLogo.renderedHtml},Object.defineProperty(t.prototype,"titleMaxWidth",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderBackgroundImage",{get:function(){var e=this;return this.getPropertyValue("renderBackgroundImage",void 0,function(){return Ai(e.backgroundImage)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImageStyle",{get:function(){var e=this;return this.getPropertyValue("backgroundImageStyle",void 0,function(){return e.calcBackgroundImageStyle()})},enumerable:!1,configurable:!0}),t.prototype.calcBackgroundImageStyle=function(){return{opacity:this.backgroundOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.backgroundImageFit,backgroundAttachment:this.fitToContainer?void 0:this.backgroundImageAttachment}},t.prototype.updateWrapperFormCss=function(){this.wrapperFormCss=new I().append(this.css.rootWrapper).append(this.css.rootWrapperHasImage,!!this.backgroundImage).append(this.css.rootWrapperFixed,!this.formScrollDisabled).toString()},Object.defineProperty(t.prototype,"completedHtml",{get:function(){return this.getLocStringText(this.locCompletedHtml)},set:function(e){this.setLocStringText(this.locCompletedHtml,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedHtml",{get:function(){return this.getOrCreateHtmlLocString("completedHtml","completingSurvey")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedHtmlOnCondition",{get:function(){var e=this;return this.getArrayPropertyValue("completedHtmlOnCondition",function(i){i.locOwner=e})},set:function(e){this.setArrayPropertyValue("completedHtmlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.runExpression=function(e,i){if(!e)return null;var n=this.getFilteredProperties(),o=this.createExpressionRunner(e),s=void 0;return o.onRunComplete=function(a){s=a,i&&i(a)},o.runContext(this.getValueGetterContext(),n)||s},t.prototype.beforeExpressionRunning=function(e,i,n){var o={element:e,propertyName:i,expression:n,allow:!0};return this.onExpressionRunning.fire(this,o),o.allow?o.expression:""},Object.defineProperty(t.prototype,"isSettingValueOnExpression",{get:function(){return this.setValueOnExpressionCounter>0},enumerable:!1,configurable:!0}),t.prototype.startSetValueOnExpression=function(){this.setValueOnExpressionCounter++},t.prototype.finishSetValueOnExpression=function(){this.setValueOnExpressionCounter--},t.prototype.runCondition=function(e){if(!e)return!1;var i=this.getFilteredProperties();return new ge(e).runContext(this.getValueGetterContext(),i)},t.prototype.runTriggers=function(){this.checkTriggers(this.getFilteredValues(),!1)},Object.defineProperty(t.prototype,"renderedCompletedHtml",{get:function(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml},enumerable:!1,configurable:!0}),t.prototype.getExpressionItemOnRunCondition=function(e){if(e.length==0)return null;for(var i=this.getFilteredProperties(),n=0;n<e.length;n++)if(e[n].runCondition(i))return e[n];return null},Object.defineProperty(t.prototype,"completedBeforeHtml",{get:function(){return this.getLocStringText(this.locCompletedBeforeHtml)},set:function(e){this.setLocStringText(this.locCompletedBeforeHtml,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedBeforeHtml",{get:function(){return this.getOrCreateHtmlLocString("completedBeforeHtml","completingSurveyBefore","completed-before")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingHtml",{get:function(){return this.getLocStringText(this.locLoadingHtml)},set:function(e){this.setLocStringText(this.locLoadingHtml,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLoadingHtml",{get:function(){return this.getOrCreateHtmlLocString("loadingHtml","loadingSurvey","loading")},enumerable:!1,configurable:!0}),t.prototype.getNavigationCss=function(e,i){return new I().append(e).append(i).toString()},Object.defineProperty(t.prototype,"navigationBar",{get:function(){return this.navigationBarValue||(this.navigationBarValue=this.createNavigationBar(),this.navigationBarValue.locOwner=this,this.updateNavigationCss(),this.navigationBarValue.flushUpdates()),this.navigationBarValue},enumerable:!1,configurable:!0}),t.prototype.createNavigationBar=function(){if(this.createNavigationBarCallback)return this.createNavigationBarCallback();var e=new be;return e.setItems(this.createNavigationActions()),e},t.prototype.addNavigationItem=function(e){var i=this;e.component||(e.component="sv-nav-btn"),e.innerCss||(e.innerCss=this.cssSurveyNavigationButton);var n=e.action;return e.action=function(){i.waitAndExecute(function(){return n()})},this.navigationBar.addAction(e)},t.prototype.removeNavigationItem=function(e){var i;(i=this.navigationBarValue)===null||i===void 0||i.removeActionById(e)},t.prototype.createNavigationActions=function(){var e=this,i="sv-nav-btn",n=new G({id:"sv-nav-start",visible:new $(function(){return e.isStartPageActive}),visibleIndex:10,locTitle:this.locStartSurveyText,action:function(){return e.start()},component:i}),o=new G({id:"sv-nav-prev",visible:new $(function(){return e.isShowPrevButton}),enabled:new $(function(){return!e.isNavigationBlocked}),visibleIndex:20,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPagePrevText,action:function(){return e.performPrevious()},component:i}),s=new G({id:"sv-nav-next",visible:new $(function(){return e.isShowNextButton}),enabled:new $(function(){return!e.isNavigationBlocked}),visibleIndex:30,data:{mouseDown:function(){return e.nextPageMouseDown()}},locTitle:this.locPageNextText,action:function(){return e.nextPageUIClick()},component:i}),a=new G({id:"sv-nav-preview",visible:new $(function(){return e.isPreviewButtonVisible}),enabled:new $(function(){return!e.isNavigationBlocked}),visibleIndex:40,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPreviewText,action:function(){return e.showPreview()},component:i}),l=new G({id:"sv-nav-complete",visible:new $(function(){return e.isCompleteButtonVisible}),enabled:new $(function(){return!e.isNavigationBlocked}),visibleIndex:50,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locCompleteText,action:function(){return e.taskManager.waitAndExecute(function(){return e.tryComplete()})},component:i});return this._updateNavigationItemCssCallback=function(){n.innerCss=e.cssNavigationStart,o.innerCss=e.cssNavigationPrev,s.innerCss=e.cssNavigationNext,a.innerCss=e.cssNavigationPreview,l.innerCss=e.cssNavigationComplete},[n,o,s,a,l]},t.prototype.updateNavigationCss=function(){var e=this.navigationBarValue;e&&(e.cssClasses=this.css.actionBar,e.containerCss=this.css.footer,this._updateNavigationItemCssCallback&&this._updateNavigationItemCssCallback())},t.prototype.getElementTitleTagName=function(e,i){if(this.onGetTitleTagName.isEmpty)return i;var n={element:e,tagName:i};return this.onGetTitleTagName.fire(this,n),n.tagName},t.prototype.getQuestionTitlePatternOptions=function(){var e=new Array,i=this.getLocalizationString("questionTitlePatternText"),n=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:n+" "+i+" "+this.requiredMark}),e.push({value:"numRequireTitle",text:n+" "+this.requiredMark+" "+i}),e.push({value:"numTitle",text:n+" "+i}),e},Object.defineProperty(t.prototype,"questionTitleTemplate",{get:function(){return this.getLocStringText(this.locQuestionTitleTemplate)},set:function(e){this.setLocStringText(this.locQuestionTitleTemplate,e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredMark=this.getNewQuestionTitleElement(e,"require",this.requiredMark,"*")},enumerable:!1,configurable:!0}),t.prototype.getNewTitlePattern=function(e){if(e){for(var i=[];e.indexOf("{")>-1;){e=e.substring(e.indexOf("{")+1);var n=e.indexOf("}");if(n<0)break;i.push(e.substring(0,n)),e=e.substring(n+1)}if(i.length>1){if(i[0]=="require")return"requireNumTitle";if(i[1]=="require"&&i.length==3)return"numRequireTitle";if(i.indexOf("require")<0)return"numTitle"}if(i.length==1&&i[0]=="title")return"numTitle"}return"numTitleRequire"},t.prototype.getNewQuestionTitleElement=function(e,i,n,o){if(i="{"+i+"}",!e||e.indexOf(i)<0)return n;for(var s=e.indexOf(i),a="",l="",u=s-1;u>=0&&e[u]!="}";u--);for(u<s-1&&(a=e.substring(u+1,s)),s+=i.length,u=s;u<e.length&&e[u]!="{";u++);for(u>s&&(l=e.substring(s,u)),u=0;u<a.length&&a.charCodeAt(u)<33;)u++;for(a=a.substring(u),u=l.length-1;u>=0&&l.charCodeAt(u)<33;)u--;if(l=l.substring(0,u+1),!a&&!l)return n;var f=n||o;return a+f+l},Object.defineProperty(t.prototype,"locQuestionTitleTemplate",{get:function(){return this.getOrCreateLocStr("questionTitleTemplate",!0)},enumerable:!1,configurable:!0}),t.prototype.getUpdatedQuestionTitle=function(e,i){if(this.onGetQuestionTitle.isEmpty)return i;var n={question:e,title:i};return this.onGetQuestionTitle.fire(this,n),n.title},t.prototype.getUpdatedQuestionNo=function(e,i){if(this.onGetQuestionNumber.isEmpty)return i;var n={question:e,number:i,no:i};return this.onGetQuestionNumber.fire(this,n),n.no===i?n.number:n.no},t.prototype.getUpdatedPanelNo=function(e,i){if(this.onGetPanelNumber.isEmpty)return i;var n={panel:e,number:i};return this.onGetPanelNumber.fire(this,n),n.number},t.prototype.getUpdatedPageNo=function(e,i){if(this.onGetPageNumber.isEmpty)return i;var n={page:e,number:i};return this.onGetPageNumber.fire(this,n),n.number},Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){e===!0&&(e="on"),e===!1&&(e="off"),e=e.toLowerCase(),e=e==="onpage"?"onPage":e,e!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBar",{get:function(){return this.progressBarValue||(this.progressBarValue=new yo(this)),this.progressBarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showProgressBar",{get:function(){return this.getPropertyValue("showProgressBar")},set:function(e){this.setShowProgressBar(e)},enumerable:!1,configurable:!0}),t.prototype.setShowProgressBar=function(e){e==="off"&&(e=!1),e===!0||e===!1?this.setPropertyValue("showProgressBar",e):(this.setPropertyValue("showProgressBar",!0),this.progressBarLocation=e)},Object.defineProperty(t.prototype,"progressBarComponentName",{get:function(){var e=this.progressBarType;return!C.legacyProgressBarView&&He.currentType==="default"&&Te(e,"pages")&&(e="buttons"),"progress-"+e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnTop",{get:function(){return!this.canShowProgressBar()||!this.showProgressBar?!1:["auto","aboveheader","belowheader","topbottom","top","both"].indexOf(this.progressBarLocation)!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnBottom",{get:function(){return!this.canShowProgressBar()||!this.showProgressBar?!1:this.progressBarLocation==="bottom"||this.progressBarLocation==="both"||this.progressBarLocation==="topbottom"},enumerable:!1,configurable:!0}),t.prototype.getProgressTypeComponent=function(){return"sv-progress-"+this.progressBarType.toLowerCase()},t.prototype.getProgressCssClasses=function(e){return e===void 0&&(e=""),new I().append(this.css.progress).append(this.css.progressTop,this.isShowProgressBarOnTop&&(!e||e=="header")).append(this.css.progressBottom,this.isShowProgressBarOnBottom&&(!e||e=="footer")).toString()},t.prototype.canShowProgressBar=function(){return!this.isShowingPreview||!this.showPreviewBeforeComplete||this.previewMode!="allQuestions"},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.startPage&&this.startPage.updateElementCss(e);for(var i=this.visiblePages,n=0;n<i.length;n++)i[n].updateElementCss(e);this.updateCss()},Object.defineProperty(t.prototype,"mode",{get:function(){return this.readOnly?"display":"edit"},set:function(e){e=e.toLowerCase(),e!=this.mode&&(e!="edit"&&e!="display"||(this.readOnly=e=="display"))},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var e=0;e<this.pages.length;e++){var i=this.pages[e];i.setPropertyValue("isReadOnly",i.isReadOnly)}this.updateButtonsVisibility(),this.updateCss()},Object.defineProperty(t.prototype,"data",{get:function(){for(var e={},i=this.getValuesKeys(),n=0;n<i.length;n++){var o=i[n],s=this.getDataValueCore(this.valuesHash,o);s!==void 0&&(e[o]=s)}return this.setCalculatedValuesIntoResult(e),e},set:function(e){this.valuesHash={},this.setDataCore(e,!e)},enumerable:!1,configurable:!0}),t.prototype.mergeData=function(e){if(e){var i=this.data;this.mergeValues(e,i),this.setDataCore(i)}},Object.defineProperty(t.prototype,"uiState",{get:function(){var e={};this.lastActiveQuestion&&(e.activeElementName=this.lastActiveQuestion.rootParentQuestion.name);var i=function(n,o){o.forEach(function(s){var a=s.uiState;a&&(e[n]=e[n]||{},e[n][s.name]=a)})};return i("pages",this.pages),i("panels",this.getAllPanels()),i("questions",this.getAllQuestions()),e},set:function(e){var i;if(!(typeof e!="object"||!e)){var n=function(o,s){for(var a in o||{}){var l=s(a);l&&(l.uiState=o[a])}};n(e.pages,this.getPageByName.bind(this)),n(e.panels,this.getPanelByName.bind(this)),n(e.questions,this.getQuestionByName.bind(this)),e.activeElementName&&((i=this.getQuestionByName(e.activeElementName))===null||i===void 0||i.focus())}},enumerable:!1,configurable:!0}),t.prototype.setDataCore=function(e,i){if(i===void 0&&(i=!1),i&&(this.valuesHash={}),e)for(var n in e){var o=typeof n=="string"?n.trim():n;this.setDataValueCore(this.valuesHash,o,e[n])}this.isSettingDataValue=!0,this.updateAllQuestionsValue(i),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isSettingDataValue=!1,this.runConditions(),this.updateAllQuestionsValue(i)},t.prototype.isSettingData=function(){return this.isSettingDataValue===!0},Object.defineProperty(t.prototype,"isSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getData=function(e){var i=e||{includePages:!1,includePanels:!1};return!i.includePages&&!i.includePanels?this.data:this.getStructuredData(!!i.includePages,i.includePanels?100:i.includePages?1:0)},t.prototype.getStructuredData=function(e,i){if(e===void 0&&(e=!0),i===void 0&&(i=-1),i===0)return this.data;var n={};return this.pages.forEach(function(o){if(e){var s={};o.collectValues(s,i-1)&&(n[o.name]=s)}else o.collectValues(n,i)}),n},t.prototype.setStructuredData=function(e,i){if(i===void 0&&(i=!1),!!e){var n={};for(var o in e){var s=this.getQuestionByValueName(o);if(s)n[o]=e[o];else{var a=this.getPageByName(o);a||(a=this.getPanelByName(o)),a&&this.collectDataFromPanel(a,n,e[o])}}i?this.mergeData(n):this.data=n}},t.prototype.collectDataFromPanel=function(e,i,n){for(var o in n){var s=e.getElementByName(o);s&&(s.isPanel?this.collectDataFromPanel(s,i,n[o]):i[o]=n[o])}},Object.defineProperty(t.prototype,"editingObj",{get:function(){return this.editingObjValue},set:function(e){var i=this;if(this.editingObj!=e&&(this.unConnectEditingObj(),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var n=this.getAllQuestions(),o=0;o<n.length;o++)n[o].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=function(s,a){V.hasOriginalProperty(i.editingObj,a.name)&&(a.name==="locale"&&i.setDataCore({}),i.updateOnSetValue(a.name,i.editingObj[a.name],a.oldValue))},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}},enumerable:!1,configurable:!0}),t.prototype.unConnectEditingObj=function(){this.editingObj&&!this.editingObj.isDisposed&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},Object.defineProperty(t.prototype,"isEditingSurveyElement",{get:function(){return!!this.editingObj},enumerable:!1,configurable:!0}),t.prototype.setCalculatedValuesIntoResult=function(e){for(var i=0;i<this.calculatedValues.length;i++){var n=this.calculatedValues[i];n.includeIntoResult&&n.name&&this.getVariable(n.name)!==void 0&&(e[n.name]=this.getVariable(n.name))}},t.prototype.getPlainData=function(e){var i=this;e||(e={includeEmpty:!0,includeQuestionTypes:!1,includeValues:!1});var n=[],o=[];if(this.getAllQuestions().forEach(function(f){var y=f.getPlainData(e);y&&(n.push(y),o.push(f.valueName||f.name))}),e.includeValues)for(var s=this.getValuesKeys(),a=0;a<s.length;a++){var l=s[a];if(o.indexOf(l)==-1){var u=this.getDataValueCore(this.valuesHash,l);u&&n.push({name:l,title:l,value:u,displayValue:u,isNode:!1,getString:function(f){return i.getValueAsString(f)}})}}return n},t.prototype.getFilteredValues=function(){var e={};for(var i in this.variablesHash)e[i]=this.variablesHash[i];if(this.addCalculatedValuesIntoFilteredValues(e),!this.isDesignMode){for(var n=this.getValuesKeys(),o=0;o<n.length;o++){var i=n[o];e[i]=this.getDataValueCore(this.valuesHash,i)}this.getAllQuestions().forEach(function(s){s.hasFilteredValue&&(e[s.getFilteredName()]=s.getFilteredValue(!0))})}return e},t.prototype.addCalculatedValuesIntoFilteredValues=function(e){for(var i=this.calculatedValues,n=0;n<i.length;n++)e[i[n].name]=i[n].value},t.prototype.getFilteredProperties=function(){return{survey:this}},t.prototype.getValuesKeys=function(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=V.getPropertiesByObj(this.editingObj),i=[],n=0;n<e.length;n++)i.push(e[n].name);return i},t.prototype.getDataValueCore=function(e,i){return this.editingObj?V.getObjPropertyValue(this.editingObj,i):this.getDataFromValueHash(e,i)},t.prototype.setDataValueCore=function(e,i,n){this.editingObj?V.setObjPropertyValue(this.editingObj,i,n):this.setDataToValueHash(e,i,n)},t.prototype.deleteDataValueCore=function(e,i){this.editingObj?this.editingObj[i]=null:this.deleteDataFromValueHash(e,i)},t.prototype.getDataFromValueHash=function(e,i){return this.valueHashGetDataCallback?this.valueHashGetDataCallback(e,i):e[i]},t.prototype.setDataToValueHash=function(e,i,n){this.valueHashSetDataCallback?this.valueHashSetDataCallback(e,i,n):e[i]=n},t.prototype.deleteDataFromValueHash=function(e,i){this.valueHashDeleteDataCallback?this.valueHashDeleteDataCallback(e,i):delete e[i]},Object.defineProperty(t.prototype,"comments",{get:function(){for(var e={},i=this.getValuesKeys(),n=0;n<i.length;n++){var o=i[n];o.indexOf(this.commentSuffix)>0&&(e[o]=this.getDataValueCore(this.valuesHash,o))}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;if(this.pageContainerValue&&(this.isShowingPreview||this.isSinglePage))return[this.pageContainerValue];for(var e=new Array,i=0;i<this.pages.length;i++)this.isPageInVisibleList(this.pages[i])&&e.push(this.pages[i]);return e},enumerable:!1,configurable:!0}),t.prototype.isPageInVisibleList=function(e){return this.isDesignMode||e.isVisible&&!e.isStartPage},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.pages.length==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PageCount",{get:function(){return this.pageCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startPage",{get:function(){var e=this.firstPageIsStartPage&&this.pages.length>1?this.pages[0]:null;return e&&e.onFirstRendering(),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedPage",{get:function(){return this.startPage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this.getPropertyValue("currentPage",null)},set:function(e){var i=this;if(!this.isLoadingFromJson){var n=this.getPageByObject(e);if(!(e&&!n)&&!(!n&&this.isCurrentPageAvailable)){var o=this.visiblePages;if(!(n!=null&&o.indexOf(n)<0)&&n!=this.currentPage){var s=this.currentSingleElement;if(!this.isShowingPreview&&s&&n!==s.page){this.currentSingleElement=n.getFirstVisibleElement();return}var a=this.currentPage,l=this.createPageChangeEventOptions(n,a),u=function(){i.setPropertyValue("currentPage",n),n&&(n.onFirstRendering(),n.updateCustomWidgets()),i.locStrsChanged(),i.isShowingPreview||i.currentPageChanged(n,a)};this.isShowingPreview||s?u():this.currentPageChanging(l,u)}}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentElementName",{get:function(){var e;return((e=this.currentElement)===null||e===void 0?void 0:e.name)||""},set:function(e){e&&(this.currentElement=this.getElementByName(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentElement",{get:function(){return this.currentSingleElement||this.currentPage},set:function(e){if(e)if(e.isPage)this.currentPage=e;else{var i=e.page;i&&!this.isSingleVisibleQuestion?this.currentPage=i:this.currentSingleElement=e}},enumerable:!1,configurable:!0}),t.prototype.getElementByName=function(e){return e?this.getPageByName(e)||this.getPanelByName(e)||this.getQuestionByName(e):null},t.prototype.tryNavigateToPage=function(e){if(!this.performValidationOnPageChanging(e))return!1;var i=this.visiblePages.indexOf(e),n=i<this.currentPageNo||!this.doServerValidation(!1,!1,e);return n&&(this.currentPage=e),n},t.prototype.performValidationOnPageChanging=function(e){if(this.isDesignMode)return!1;if(this.canGoTroughValidation())return!0;var i=this.visiblePages.indexOf(e);if(i<0||i>=this.visiblePageCount||i===this.currentPageNo)return!1;if(i<this.currentPageNo||this.checkErrorsMode==="onComplete"||this.validationAllowSwitchPages)return!0;if(!this.validateCurrentPage())return!1;for(var n=this.currentPageNo+1;n<i;n++){var o=this.visiblePages[n];if(!o.validate(!0,!0))return!1;o.passed=!0}return!0},t.prototype.updateCurrentPage=function(){this.isCurrentPageAvailable||(this.currentPage=this.firstVisiblePage)},Object.defineProperty(t.prototype,"isCurrentPageAvailable",{get:function(){var e=this.currentPage;return!!e&&this.isPageInVisibleList(e)&&this.isPageExistsInSurvey(e)},enumerable:!1,configurable:!0}),t.prototype.isPageExistsInSurvey=function(e){return this.pages.indexOf(e)>-1?!0:!!this.onContainsPageCallback&&this.onContainsPageCallback(e)},Object.defineProperty(t.prototype,"activePage",{get:function(){return this.getPropertyValue("activePage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartPageActive",{get:function(){return this.state==="starting"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowStartingPage",{get:function(){return this.isStartPageActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPage",{get:function(){return this.state=="running"||this.state=="preview"||this.isStartPageActive},enumerable:!1,configurable:!0}),t.prototype.updateActivePage=function(){var e=this.isStartPageActive?this.startPage:this.currentPage;e!==this.activePage&&this.setPropertyValue("activePage",e)},t.prototype.onStateAndCurrentPageChanged=function(){this.updateActivePage(),this.updateButtonsVisibility()},t.prototype.getPageByObject=function(e){if(!e)return null;if(e.getType&&e.getType()=="page")return e;if(typeof e=="string"||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var i=Number(e),n=this.visiblePages;return e<0||e>=n.length?null:n[i]}return e},Object.defineProperty(t.prototype,"currentPageNo",{get:function(){return this.visiblePages.indexOf(this.currentPage)},set:function(e){var i=this.visiblePages;e<0||e>=i.length||(this.currentPage=i[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.questionOrder},set:function(e){this.questionOrder=e},enumerable:!1,configurable:!0}),t.prototype.focusFirstQuestion=function(){if(!this.focusingQuestionInfo){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}},t.prototype.scrollToTopOnPageChange=function(e){e===void 0&&(e=!0);var i=this.activePage;i&&(e&&i.scrollToTop(),this.isCurrentPageRendering&&this.autoFocusFirstQuestion&&!this.focusingQuestionInfo&&(i.focusFirstQuestion(),this.isCurrentPageRendering=!1))},Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state","empty")},enumerable:!1,configurable:!0}),t.prototype.updateState=function(){this.setPropertyValue("state",this.calcState())},t.prototype.calcState=function(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"},Object.defineProperty(t.prototype,"isShowingPreview",{get:function(){return this.getPropertyValue("isShowingPreview",!1)},set:function(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())},enumerable:!1,configurable:!0}),t.prototype.beginLoading=function(){this.isLoading=!0},t.prototype.endLoading=function(){this.isLoading=!1},Object.defineProperty(t.prototype,"completedState",{get:function(){return this.getPropertyValue("completedState","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedStateText",{get:function(){return this.getPropertyValue("completedStateText","")},enumerable:!1,configurable:!0}),t.prototype.setCompletedState=function(e,i){this.setPropertyValue("completedState",e),i||(e=="saving"&&(i=this.getLocalizationString("savingData")),e=="error"&&(i=this.getLocalizationString("savingDataError")),e=="success"&&(i=this.getLocalizationString("savingDataSuccess"))),this.setPropertyValue("completedStateText",i),this.state==="completed"&&this.showCompletePage&&this.completedState&&this.notify(this.completedStateText,this.completedState,e==="error")},Object.defineProperty(t.prototype,"notifier",{get:function(){return this.notifierValue||(this.notifierValue=new po(this.css.saveData),this.notifierValue.addAction(this.createTryAgainAction(),"error")),this.notifierValue},enumerable:!1,configurable:!0}),t.prototype.notify=function(e,i,n){n===void 0&&(n=!1),this.notifier.showActions=n,this.notifier.notify(e,i,n)},t.prototype.clear=function(e,i){e===void 0&&(e=!0),i===void 0&&(i=!0),this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.completedByTriggers=void 0,this.skippedPages=[],this.lastActiveQuestion=void 0,e&&this.setDataCore(null,!0),this.timerModel.spent=0;for(var n=0;n<this.pages.length;n++)this.pages[n].timeSpent=0,this.pages[n].setWasShown(!1),this.pages[n].passed=!1;if(this.onFirstPageIsStartedChanged(),i&&(this.currentPage=this.firstVisiblePage,this.currentSingleElement)){var o=this.getSingleElements();this.currentSingleElement=o.length>0?o[0]:void 0}e&&this.updateValuesWithDefaults()},t.prototype.mergeValues=function(e,i){dt(e,i)},t.prototype.updateValuesWithDefaults=function(){if(!(this.isDesignMode||this.isLoading))for(var e=0;e<this.pages.length;e++)for(var i=this.pages[e].questions,n=0;n<i.length;n++)i[n].updateValueWithDefaults()},t.prototype.updateCustomWidgets=function(e){e&&e.updateCustomWidgets()},t.prototype.currentPageChanging=function(e,i){var n=this;e.allow=!0,e.allowChanging=!0;var o=function(){var s=e.allowChanging&&e.allow;s&&(e.newCurrentPage!==e.oldCurrentPage&&(n.isCurrentPageRendering=!0),i()),e.message&&n.notify(e.message,e.allow?"success":"error"),n.isNavigationBlocked=!1};this.onCurrentPageChanging.fire(this,e,function(){return o()},function(){return n.isNavigationBlocked=!0})},t.prototype.currentPageChanged=function(e,i){if(this.notifyQuestionsOnHidingContent(i),i&&!i.isDisposed&&!i.passed&&i.validate(!1)&&(i.passed=!0),this.isCurrentPageRendered===!0&&(this.isCurrentPageRendered=!1),!this.currentSingleElement){var n=this.createPageChangeEventOptions(e,i);this.onCurrentPageChanged.fire(this,n)}},t.prototype.notifyQuestionsOnHidingContent=function(e){e&&!e.isDisposed&&e.questions.forEach(function(i){return i.onHidingContent()})},t.prototype.createPageChangeEventOptions=function(e,i,n,o){var s=e&&i?e.visibleIndex-i.visibleIndex:0,a=s;return a===0&&o&&n&&(a=e.elements.indexOf(n)-e.elements.indexOf(o)),{oldCurrentQuestion:o,newCurrentQuestion:n,oldCurrentPage:i,newCurrentPage:e,isNextPage:s===1,isPrevPage:s===-1,isGoingForward:a>0,isGoingBackward:a<0,isAfterPreview:this.changeCurrentPageFromPreview===!0}},t.prototype.getProgress=function(){if(this.currentPage==null)return 0;if(this.progressBarType!=="pages"){var e=this.getProgressInfo();return this.progressBarType==="requiredQuestions"?e.requiredQuestionCount>=1?Math.ceil(e.requiredAnsweredQuestionCount*100/e.requiredQuestionCount):100:e.questionCount>=1?Math.ceil(e.answeredQuestionCount*100/e.questionCount):100}var i=this.visiblePages,n=i.indexOf(this.currentPage);return Math.ceil(n*100/i.length)},Object.defineProperty(t.prototype,"isNavigationButtonsShowing",{get:function(){if(this.isDesignMode)return"none";var e=this.activePage;return!e||e.showNavigationButtons===!1?"none":e.showNavigationButtons===!0?this.showNavigationButtons?this.navigationButtonsLocation:"bottom":this.showNavigationButtons?this.navigationButtonsLocation:"none"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnTop",{get:function(){return this.getIsNavigationButtonsShowingOn("top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnBottom",{get:function(){return this.getIsNavigationButtonsShowingOn("bottom")},enumerable:!1,configurable:!0}),t.prototype.getIsNavigationButtonsShowingOn=function(e){var i=this.isNavigationButtonsShowing;return i=="both"||i=="topBottom"||i==e},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return!this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return this.readOnly&&!this.isDesignMode||this.state=="preview"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateValueTextOnTyping",{get:function(){return this.textUpdateMode=="onTyping"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDesignMode",{get:function(){return this._isDesignMode},enumerable:!1,configurable:!0}),t.prototype.setDesignMode=function(e){!!this._isDesignMode!=!!e&&(this._isDesignMode=!!e,this.onQuestionsOnPageModeChanged("standard"))},Object.defineProperty(t.prototype,"showInvisibleElements",{get:function(){return this.getPropertyValue("showInvisibleElements",!1)},set:function(e){var i=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),!this.isLoadingFromJson&&(this.runConditions(),this.updateAllElementsVisibility(i))},enumerable:!1,configurable:!0}),t.prototype.updateAllElementsVisibility=function(e){for(var i=0;i<this.pages.length;i++){var n=this.pages[i];n.updateElementVisibility(),e.indexOf(n)>-1!=n.isVisible&&this.onPageVisibleChanged.fire(this,{page:n,visible:n.isVisible})}},Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return this.isDesignMode||this.showInvisibleElements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areEmptyElementsHidden",{get:function(){return this.isShowingPreview&&this.showPreviewBeforeComplete&&this.previewMode=="answeredQuestions"&&this.isAnyQuestionAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAnyQuestionAnswered",{get:function(){for(var e=this.getAllQuestions(!0),i=0;i<e.length;i++)if(!e[i].isEmpty())return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCookie",{get:function(){if(!this.cookieName)return!1;var e=D.getCookie();return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!1,configurable:!0}),t.prototype.setCookie=function(){this.cookieName&&D.setCookie(this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},t.prototype.deleteCookie=function(){this.cookieName&&D.setCookie(this.cookieName+"=;")},Object.defineProperty(t.prototype,"ignoreValidation",{get:function(){return!this.validationEnabled},set:function(e){this.validationEnabled=!e},enumerable:!1,configurable:!0}),t.prototype.nextPage=function(){return this.currentSingleElement?this.performNext():this.isLastPage?!1:this.doCurrentPageComplete(!1)},t.prototype.performNext=function(){var e=this,i=this.currentSingleElement;if(!i)return this.nextPage();if(this.resetNavigationButton(),this.isSingleVisibleInput){if(!i.validateSingleInput())return!1;if(i.nextSingleInput())return this.updateButtonsVisibility(),!0}if(!this.validationEnabled)return this.performNextAfterValidation(i),!0;var n=this.validateElements([i],!0,!1,function(o){o||e.performNextAfterValidation(i)});return n===!0},t.prototype.performNextAfterValidation=function(e){this.sendPartialResult();var i=this.getSingleElements(),n=i.indexOf(e);if(n<0||n===i.length-1)return!1;var o={};e.isQuestion?o[e.name]=e.value:e.isPanel&&(o=e.getValue()),this.checkTriggers(o,!0,!1,!0,e.name),e===this.currentSingleElement&&(this.currentSingleElement=i[n+1])},t.prototype.performPrevious=function(){return this.prevPage()},t.prototype.validateOnNavigate=function(e,i){var n=this,o=this.canGoTroughValidation()||e&&this.validationAllowComplete||!e&&(this.validationAllowSwitchPages||this.isValidateOnComplete)||i&&this.isValidateOnComplete,s=function(){i?n.showPreviewCore():n.doCurrentPageCompleteCore(e)};if(o)return s(),!0;var a=function(l){l||s()};return this.isValidateOnComplete?this.isLastPage?this.validate(!0,this.autoFocusFirstError,a,!0)!==!0:(s(),!0):this.validateCurrentPage(a)!==!1},t.prototype.canGoTroughValidation=function(){return!this.isEditMode||!this.validationEnabled},Object.defineProperty(t.prototype,"isCurrentPageHasErrors",{get:function(){return this.validateActivePage()===!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentPageValid",{get:function(){return this.validateActivePage()},enumerable:!1,configurable:!0}),t.prototype.hasCurrentPageErrors=function(e){return this.hasPageErrors(void 0,e)},t.prototype.validateCurrentPage=function(e){return this.validatePage(void 0,e)},t.prototype.hasPageErrors=function(e,i){var n=this.validatePage(e,i);return n===void 0?n:!n},t.prototype.validatePage=function(e,i){return e||(e=this.activePage),e?this.validatePageCore(e,!0,i):!0},t.prototype.hasErrors=function(e,i,n){e===void 0&&(e=!0),i===void 0&&(i=!1);var o=this.validate(e,i,n);return o===void 0?o:!o},t.prototype.validate=function(e,i,n,o){return e===void 0&&(e=!0),i===void 0&&(i=!1),this.validateElements(this.visiblePages,e,i,n,o)},t.prototype.validateElements=function(e,i,n,o,s){i===void 0&&(i=!0),n===void 0&&(n=!1),o&&(i=!0);for(var a=o?function(b){o(!b)}:void 0,l=new Ze({fireCallback:i,focusOnFirstError:n,callbackResult:a,changeCurrentPage:!!s}),u=0,f=e;u<f.length;u++){var y=f[u];y.validateElement(l)}return l.finish(),l.runningResult},t.prototype.ensureUniqueNames=function(e){if(e===void 0&&(e=null),e==null)for(var i=0;i<this.pages.length;i++)this.ensureUniqueName(this.pages[i]);else this.ensureUniqueName(e)},t.prototype.ensureUniqueName=function(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var i=e.elements,n=0;n<i.length;n++)this.ensureUniqueNames(i[n]);else this.ensureUniqueQuestionName(e)},t.prototype.ensureUniquePageName=function(e){var i=this;return this.ensureUniqueElementName(e,function(n){return i.getPageByName(n)})},t.prototype.ensureUniquePanelName=function(e){var i=this;return this.ensureUniqueElementName(e,function(n){return i.getPanelByName(n)})},t.prototype.ensureUniqueQuestionName=function(e){var i=this;return this.ensureUniqueElementName(e,function(n){return i.getQuestionByName(n)})},t.prototype.ensureUniqueElementName=function(e,i){var n=i(e.name);if(!(!n||n==e)){for(var o=this.getNewName(e.name);i(o);)var o=this.getNewName(e.name);e.name=o}},t.prototype.getNewName=function(e){for(var i=e.length;i>0&&e[i-1]>="0"&&e[i-1]<="9";)i--;var n=e.substring(0,i),o=0;return i<e.length&&(o=parseInt(e.substring(i))),o++,n+o},t.prototype.validateActivePage=function(e){return this.validatePageCore(this.activePage,e)},t.prototype.validatePageCore=function(e,i,n){if(i===void 0&&(i=this.focusOnFirstError),!e)return!0;var o=void 0;n&&(o=function(a){n(!a)});var s=e.validate(!0,i,o);return this.fireValidatedErrorsOnPage(e),s},t.prototype.fireValidatedErrorsOnPage=function(e){if(!(this.onValidatePage.isEmpty||!e)){for(var i=this.getNestedQuestionsByQuestionArray(e.questions,!0),n=new Array,o=new Array,s=0;s<i.length;s++){var a=i[s];if(a.errors.length>0){n.push(a);for(var l=0;l<a.errors.length;l++)o.push(a.errors[l])}}this.onValidatePage.fire(this,{questions:n,errors:o,page:e})}},t.prototype.prevPage=function(){if(this.isFirstPage||this.state==="starting")return!1;this.resetNavigationButton();var e=this.currentSingleElement;if(this.doSkipOnPrevPage(e))return!0;if(e)return this.prevPageSingleElement(e);var i=this.visiblePages,n=i.indexOf(this.currentPage);return this.currentPage=i[n-1],!0},t.prototype.doSkipOnPrevPage=function(e){var i=e||this.currentPage,n=this.skippedPages.find(function(a){return a.to===i}),o=void 0;if(n){this.skippedPages.splice(this.skippedPages.indexOf(n),1);var s=n.from;!s.isDisposed&&s.isVisible&&(o=s)}return o&&(e?this.currentSingleElement=o:this.currentPage=o),!!o},t.prototype.prevPageSingleElement=function(e){if(this.isSingleVisibleInput&&e.prevSingleInput())return this.updateButtonsVisibility(),!0;var i=this.getSingleElements(),n=i.indexOf(e);return n===0?!1:(this.currentSingleElement=i[n-1],!0)},t.prototype.tryComplete=function(){return this.isValidateOnComplete&&this.cancelPreview(),this.doCurrentPageComplete(!0),this.isCompleted},t.prototype.completeLastPage=function(){return this.tryComplete()},t.prototype.navigationMouseDown=function(){return this.isNavigationButtonPressed=!0,!0},t.prototype.resetNavigationButton=function(){this.isNavigationButtonPressed=!1},t.prototype.nextPageUIClick=function(){return this.mouseDownPage&&this.mouseDownPage!==this.activePage?!1:(this.mouseDownPage=null,this.performNext())},t.prototype.nextPageMouseDown=function(){return this.mouseDownPage=this.activePage,this.navigationMouseDown()},t.prototype.showPreview=function(){return this.resetNavigationButton(),!this.isValidateOnComplete&&this.doServerValidation(!0,!0)||!this.validateOnNavigate(!0,!0)?!1:this.isShowingPreview},t.prototype.showPreviewCore=function(){var e={allowShowPreview:!0,allow:!0};this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview&&e.allow},t.prototype.cancelPreview=function(e){var i;if(e===void 0&&(e=null),!!this.isShowingPreview){this.gotoPageFromPreview=e,this.isShowingPreview=!1;var n=(i=this.currentSingleElement)===null||i===void 0?void 0:i.page;n&&(n.updateRows(),this.currentPage=n)}},t.prototype.cancelPreviewByPage=function(e){this.cancelPreview(e)},t.prototype.doCurrentPageComplete=function(e){return this.isValidatingOnServer?!1:(this.resetNavigationButton(),this.validateOnNavigate(e)===!0)},t.prototype.doCurrentPageCompleteCore=function(e){return this.doServerValidation(e)?!1:e?(this.currentPage&&(this.currentPage.passed=!0),this.doComplete(this.canBeCompletedByTrigger,this.completedTrigger)):(this.doNextPage(),!0)},Object.defineProperty(t.prototype,"isSinglePage",{get:function(){return this.questionsOnPageMode=="singlePage"},set:function(e){this.questionsOnPageMode=e?"singlePage":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSingleVisibleQuestion",{get:function(){return!this.isDesignMode&&(this.isSingleVisibleQuestionVal(this.questionsOnPageMode)||this.isSingleVisibleInput)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSingleVisibleInput",{get:function(){return!this.isDesignMode&&this.questionsOnPageMode=="inputPerPage"},enumerable:!1,configurable:!0}),t.prototype.isSingleVisibleQuestionVal=function(e){return e==="questionPerPage"||e==="questionOnPage"},Object.defineProperty(t.prototype,"firstPageIsStarted",{get:function(){return this.firstPageIsStartPage},set:function(e){this.firstPageIsStartPage=e},enumerable:!1,configurable:!0}),t.prototype.isPageStarted=function(e){return this.firstPageIsStartPage&&this.pages.length>1&&this.pages[0]===e},t.prototype.setShowPreviewBeforeComplete=function(e){e===void 0||e==="noPreview"||e===!1?this.setPropertyValue("showPreviewBeforeComplete",!1):(this.setPropertyValue("showPreviewBeforeComplete",!0),e==="showAllQuestions"&&(this.previewMode="allQuestions"),e==="showAnsweredQuestions"&&(this.previewMode="answeredQuestions"))},t.prototype.onFirstPageIsStartedChanged=function(){this.isStartedState=this.firstPageIsStartPage&&this.pages.length>1,this.pageVisibilityChanged(this.pages[0],!this.isStartedState)},t.prototype.onShowingPreviewChanged=function(){this.updatePagesContainer()},t.prototype.createRootPage=function(e,i){var n=V.createClass("page");return n.name=e,n.isPageContainer=!0,i.forEach(function(o){o.isStartPage||n.addElement(o)}),n},t.prototype.disposeContainerPage=function(){var e=this.pageContainerValue,i=[].concat(e.elements);i.forEach(function(n){return e.removeElement(n)}),e.dispose(),this.pageContainerValue=void 0},t.prototype.updatePagesContainer=function(){if(!this.isDesignMode){this.getAllQuestions().forEach(function(l){return l.updateElementVisibility()}),this.setPropertyValue("currentPage",void 0);var e="single-page",i="preview-page",n=void 0;if(this.isSinglePage){var o=this.pageContainerValue;o&&o.name===i?(n=o.elements[0],this.disposeContainerPage()):n=this.createRootPage(e,this.pages)}this.isShowingPreview&&(n=this.createRootPage(i,n?[n]:this.pages)),n&&(n.setSurveyImpl(this),this.pageContainerValue=n,this.currentPage=n,this.currentSingleElementValue&&this.visiblePages.forEach(function(l){return l.updateRows()}));var s=!1;if(!this.isSinglePage&&!this.isShowingPreview){this.disposeContainerPage();var a=this.gotoPageFromPreview;this.gotoPageFromPreview=null,w.isValueEmpty(a)&&this.visiblePageCount>0&&(a=this.visiblePages[this.visiblePageCount-1]),a&&(s=!0,this.changeCurrentPageFromPreview=!0,this.currentPage=a,this.changeCurrentPageFromPreview=!1)}!this.currentPage&&this.visiblePageCount>0&&!s&&(this.currentPage=this.visiblePages[0]),this.isShowingPreview&&this.pages.forEach(function(l){l.onFirstRendering()}),this.pages.forEach(function(l){l.wasRendered&&l.updateElementCss(!0)}),this.updateButtonsVisibility()}},t.prototype.getSingleElements=function(e){for(var i=new Array,n=this.pages,o=this.isSingleVisibleInput,s=function(){var l=n[a];if(!l.isStartPage&&l.isVisible){var u=[];o?l.addQuestionsToList(u,!0):l.elements.forEach(function(f){return u.push(f)}),u.forEach(function(f){(f===e||f.isVisible)&&i.push(f)})}},a=0;a<n.length;a++)s();return i},Object.defineProperty(t.prototype,"currentSingleElement",{get:function(){return this.isShowingPreview?void 0:this.currentSingleElementValue},set:function(e){var i=this;if(e&&e.isQuestion&&this.isSingleVisibleQuestionVal(this.questionsOnPageMode))for(;e.parent&&e.parent.isPanel;)e=e.parent;var n=this.currentSingleElement;if(e!==n&&!this.isCompleted){var o=e?.isQuestion?e:void 0,s=n?.isQuestion?n:void 0,a=e?.page,l=a&&n?this.createPageChangeEventOptions(a,n.page,o,s):void 0,u=function(){i.currentSingleElementValue=e,e?(i.isSingleVisibleInput&&e.isQuestion&&e.onSetAsSingleInput(),a.updateRows(),a!==i.currentPage?i.currentPage=a:o&&i.autoFocusFirstQuestion&&o.focus(),i.updateButtonsVisibility(),l&&i.onCurrentPageChanged.fire(i,l)):i.visiblePages.forEach(function(f){return f.updateRows()})};l?this.currentPageChanging(l,u):u()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleQuestion",{get:function(){var e=this.currentSingleElement;return e&&e.isQuestion?e:void 0},set:function(e){this.currentSingleElement=e},enumerable:!1,configurable:!0}),t.prototype.supportsNestedSingleInput=function(e){var i={question:e,enabled:!0};return this.onCheckSingleInputPerPageMode.fire(this,i),i.enabled},t.prototype.updateNestedSingleQuestions=function(e,i){var n={question:e,nestedQuestions:i};this.onGetLoopQuestions.fire(this,n)},t.prototype.changeCurrentSingleElementOnVisibilityChanged=function(){var e=this.currentSingleElement;if(!(!e||e.isVisible)){var i=this.getSingleElements(e),n=i.indexOf(e),o=n>0?i[n-1]:n<i.length-1?i[n+1]:void 0;this.currentSingleElement=o}},t.prototype.onQuestionsOnPageModeChanged=function(e){if(!(this.isShowingPreview||this.isDesignMode)&&(this.skippedPages=[],this.currentSingleElement=void 0,e==="singlePage"&&this.updatePagesContainer(),e==="inputPerPage"&&this.getAllQuestions().forEach(function(n){return n.resetSingleInput()}),this.isSinglePage&&this.updatePagesContainer(),this.setupSingleInputNavigationActions(),this.isSingleVisibleQuestion)){var i=this.getSingleElements();i.length>0&&(this.currentSingleElement=i[0])}},t.prototype.setupSingleInputNavigationActions=function(){var e=this,i="sv-singleinput-add";if(this.isSingleVisibleInput){var n=function(){e.currentSingleQuestion.singleInputAddItem(!0),e.resetNavigationButton()};this.addNavigationItem({id:i,visible:!1,action:function(){return n()}})}else this.removeNavigationItem(i)},t.prototype.getPageStartIndex=function(){return this.firstPageIsStartPage&&this.pages.length>0?1:0},Object.defineProperty(t.prototype,"isFirstPage",{get:function(){return this.getPropertyValue("isFirstPage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastPage",{get:function(){return this.getPropertyValue("isLastPage")},enumerable:!1,configurable:!0}),t.prototype.updateNavigationElements=function(){this.updateButtonsVisibility()},t.prototype.updateButtonsVisibility=function(){this.updateIsFirstLastPageState(),this.setPropertyValue("isShowPrevButton",this.calcIsShowPrevButton()),this.setPropertyValue("isShowNextButton",this.calcIsShowNextButton()),this.setPropertyValue("isCompleteButtonVisible",this.calcIsCompleteButtonVisible()),this.setPropertyValue("isPreviewButtonVisible",this.calcIsPreviewButtonVisible()),this.setPropertyValue("isCancelPreviewButtonVisible",this.calcIsCancelPreviewButtonVisible()),this.updateSingleInputActions()},t.prototype.updateSingleInputActions=function(){if(!this.isSingleVisibleInput)return;var e=this.currentSingleQuestion;if(!e)return;function i(n){n&&(n.title=e.getSingleInputAddText(),n.visible=!!n.title)}i(this.navigationBar.getActionById("sv-singleinput-add"))},Object.defineProperty(t.prototype,"isShowPrevButton",{get:function(){return this.getPropertyValue("isShowPrevButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowNextButton",{get:function(){return this.getPropertyValue("isShowNextButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleteButtonVisible",{get:function(){return this.getPropertyValue("isCompleteButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPreviewButtonVisible",{get:function(){return this.getPropertyValue("isPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelPreviewButtonVisible",{get:function(){return this.getPropertyValue("isCancelPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirstElement",{get:function(){return this.getPropertyValue("isFirstElement")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastElement",{get:function(){return this.getPropertyValue("isLastElement")},enumerable:!1,configurable:!0}),t.prototype.updateIsFirstLastPageState=function(){var e=this.currentPage,i=void 0,n=void 0,o=this.currentSingleElement;if(o){var s=!0,a=!0;if(this.isSingleVisibleInput){var l=o.getSingleInputElementPos();l!==0&&(s=l===-1,a=l===1)}var u=this.getSingleElements(),f=u.indexOf(o);f>=0&&(i=s&&f===0,n=a&&f===u.length-1)}this.setPropertyValue("isFirstPage",!!e&&e===this.firstVisiblePage&&(!o||i===!0)),this.setPropertyValue("isLastPage",!!e&&e===this.lastVisiblePage&&(!o||n===!0)),this.setPropertyValue("isFirstElement",i),this.setPropertyValue("isLastElement",n)},Object.defineProperty(t.prototype,"isLastPageOrElement",{get:function(){return this.isLastElement!==void 0?this.isLastElement:this.isLastPage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirstPageOrElement",{get:function(){return this.isFirstElement!==void 0?this.isFirstElement:this.isFirstPage},enumerable:!1,configurable:!0}),t.prototype.calcIsShowPrevButton=function(){if(this.isFirstPageOrElement||!this.showPrevButton||this.state!=="running")return!1;if(this.isFirstElement!==void 0)return!0;var e=this.visiblePages[this.currentPageNo-1];return e&&e.getMaxTimeToFinish()<=0},t.prototype.calcIsShowNextButton=function(){return this.state==="running"&&!this.isLastPageOrElement&&!this.canBeCompletedByTrigger},t.prototype.calcIsCompleteButtonVisible=function(){var e=this.state;return this.isEditMode&&(this.state==="running"&&(this.isLastPageOrElement&&!this.showPreviewBeforeComplete||this.canBeCompletedByTrigger)||e==="preview")&&this.showCompleteButton},t.prototype.calcIsPreviewButtonVisible=function(){return this.isEditMode&&this.showPreviewBeforeComplete&&this.state=="running"&&this.isLastPageOrElement},t.prototype.calcIsCancelPreviewButtonVisible=function(){return this.isEditMode&&this.showPreviewBeforeComplete&&this.state=="preview"},Object.defineProperty(t.prototype,"firstVisiblePage",{get:function(){if(this.visiblePageCount===1)return this.visiblePages[0];for(var e=this.pages,i=0;i<e.length;i++)if(this.isPageInVisibleList(e[i]))return e[i];return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastVisiblePage",{get:function(){if(this.visiblePageCount===1)return this.visiblePages[0];for(var e=this.pages,i=e.length-1;i>=0;i--)if(this.isPageInVisibleList(e[i]))return e[i];return null},enumerable:!1,configurable:!0}),t.prototype.doComplete=function(e,i){var n=this;if(e===void 0&&(e=!1),!this.isCompleted)return this.checkOnCompletingEvent(e,i,function(o){o?(n.checkOnPageTriggers(!0),n.stopTimer(),n.notifyQuestionsOnHidingContent(n.currentPage),n.isCompleted=!0,n.clearUnusedValues(),n.saveDataOnComplete(e,i),n.setCookie(),n.cancelPreview()):n.isCompleted=!1})},t.prototype.saveDataOnComplete=function(e,i){var n=this;e===void 0&&(e=!1);var o=this.hasCookie,s=function(b){f=!0,n.setCompletedState("saving",b)},a=function(b){n.setCompletedState("error",b)},l=function(b){n.setCompletedState("success",b),n.navigateTo()},u=function(b){n.setCompletedState("","")},f=!1,y={isCompleteOnTrigger:e,completeTrigger:i,showSaveInProgress:s,showSaveError:a,showSaveSuccess:l,clearSaveMessages:u,showDataSaving:s,showDataSavingError:a,showDataSavingSuccess:l,showDataSavingClear:u};this.onComplete.fire(this,y),!o&&this.surveyPostId&&this.sendResult(),f||this.navigateTo()},t.prototype.checkOnCompletingEvent=function(e,i,n){var o=this,s=void 0,a={allowComplete:!0,allow:!0,isCompleteOnTrigger:e,completeTrigger:i},l=function(){o.isNavigationBlocked=!1;var u=a.allowComplete&&a.allow;a.message&&o.notify(a.message,u?"success":"error"),s=u,n(u)};return this.onCompleting.fire(this,a,l,function(){return o.isNavigationBlocked=!0}),s},t.prototype.start=function(){return!this.firstPageIsStartPage||(this.isCurrentPageRendering=!0,!this.validatePageCore(this.startPage,!0))?!1:(this.isStartedState=!1,this.notifyQuestionsOnHidingContent(this.pages[0]),this.startTimerFromUI(),this.onStarted.fire(this,{}),this.updateVisibleIndexes(),this.currentPageNo=0,this.currentPage&&this.currentPage.locStrsChanged(),!0)},Object.defineProperty(t.prototype,"isValidatingOnServer",{get:function(){return this.getPropertyValue("isValidatingOnServer",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsValidatingOnServer=function(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())},t.prototype.createServerValidationOptions=function(e,i,n){var o=this,s={data:{},errors:{},survey:this,complete:function(){o.completeServerValidation(s,i,n)}};if(e&&this.isValidateOnComplete)s.data=this.data;else for(var a=this.activePage.questions,l=0;l<a.length;l++){var u=a[l];if(u.visible){var f=this.getValue(u.getValueName());this.isValueEmpty(f)||(s.data[u.getValueName()]=f)}}return s},t.prototype.onIsValidatingOnServerChanged=function(){},t.prototype.doServerValidation=function(e,i,n){var o=this;if(i===void 0&&(i=!1),!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty||!e&&this.isValidateOnComplete)return!1;this.setIsValidatingOnServer(!0);var s=typeof this.onServerValidateQuestions=="function";return this.serverValidationEventCount=s?1:this.onServerValidateQuestions.length,s?this.onServerValidateQuestions(this,this.createServerValidationOptions(e,i,n)):this.onServerValidateQuestions.fireByCreatingOptions(this,function(){return o.createServerValidationOptions(e,i,n)}),!0},t.prototype.completeServerValidation=function(e,i,n){if(!(this.serverValidationEventCount>1&&(this.serverValidationEventCount--,e&&e.errors&&Object.keys(e.errors).length===0))&&(this.serverValidationEventCount=0,this.setIsValidatingOnServer(!1),!(!e&&!e.survey))){var o=e.survey,s=!0;if(e.errors){var a=this.autoFocusFirstError;for(var l in e.errors){var u=o.getQuestionByName(l);u&&u.errors&&(s=!1,u.addError(new ce(e.errors[l],this)),a&&(a=!1,u.page&&(this.currentPage=u.page),u.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}s&&(i?this.showPreviewCore():n?this.currentPage=n:o.isLastPage?o.doComplete():o.doNextPage())}},t.prototype.doNextPage=function(){var e=this.currentPage;if(this.checkOnPageTriggers(!1),this.sendPartialResult(),this.isCompleted)this.doComplete(!0);else if(e===this.currentPage){var i=this.visiblePages,n=i.indexOf(this.currentPage);this.currentPage=i[n+1]}},t.prototype.setCompleted=function(e){this.doComplete(!0,e)},t.prototype.sendPartialResult=function(){this.partialSendEnabled&&!this.isCompleted&&this.sendResult(this.surveyPostId,this.clientId,!0)},t.prototype.canBeCompleted=function(e,i){var n;if(C.triggers.changeNavigationButtonsOnComplete){var o=this.canBeCompletedByTrigger;this.completedByTriggers||(this.completedByTriggers={}),i?this.completedByTriggers[e.id]={trigger:e,pageId:(n=this.currentPage)===null||n===void 0?void 0:n.id}:delete this.completedByTriggers[e.id],o!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility()}},Object.defineProperty(t.prototype,"canBeCompletedByTrigger",{get:function(){var e;if(!this.completedByTriggers)return!1;var i=Object.keys(this.completedByTriggers);if(i.length===0)return!1;var n=(e=this.currentPage)===null||e===void 0?void 0:e.id;if(!n)return!0;for(var o=0;o<i.length;o++)if(n===this.completedByTriggers[i[o]].pageId)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedTrigger",{get:function(){if(this.canBeCompletedByTrigger){var e=Object.keys(this.completedByTriggers)[0];return this.completedByTriggers[e].trigger}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedHtml",{get:function(){var e=this.renderedCompletedHtml;return e?this.processHtml(e,"completed"):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedBeforeHtml",{get:function(){return this.locCompletedBeforeHtml.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedLoadingHtml",{get:function(){return this.locLoadingHtml.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getProgressInfo=function(){var e=this.isDesignMode?this.pages:this.visiblePages;return ae.getProgressInfoByElements(e,!1)},Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return te("progressbar",this.getLocale())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){return this.progressBar.progressText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressValue",{get:function(){var e=this;return this.getPropertyValue("progressValue",void 0,function(){return e.getProgress()})},enumerable:!1,configurable:!0}),t.prototype.updateProgressText=function(e){e===void 0&&(e=!1),!this.isShowingPreview&&(e&&this.progressBarType=="pages"&&this.onGetProgressText.isEmpty||(this.progressBarValue&&this.progressBarValue.resetProgressText(),this.resetPropertyValue("progressValue")))},t.prototype.getProgressText=function(){if(!this.isDesignMode&&this.currentPage==null)return"";var e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""},i=this.progressBarType.toLowerCase();if(i==="questions"||i==="requiredquestions"||i==="correctquestions"||!this.onGetProgressText.isEmpty){var n=this.getProgressInfo();e.questionCount=n.questionCount,e.answeredQuestionCount=n.answeredQuestionCount,e.requiredQuestionCount=n.requiredQuestionCount,e.requiredAnsweredQuestionCount=n.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onGetProgressText.fire(this,e),e.text},t.prototype.getProgressTextCore=function(e){var i=this.progressBarType.toLowerCase();if(i==="questions")return this.getLocalizationFormatString("questionsProgressText",e.answeredQuestionCount,e.questionCount);if(i==="requiredquestions")return this.getLocalizationFormatString("questionsProgressText",e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if(i==="correctquestions"){var n=this.getCorrectedAnswerCount();return this.getLocalizationFormatString("questionsProgressText",n,e.questionCount)}var o=this.isDesignMode?this.pages:this.visiblePages,s=o.indexOf(this.currentPage)+1;return this.getLocalizationFormatString("progressText",s,o.length)},t.prototype.getRootCss=function(){return new I().append(this.css.root).append(this.css.rootProgress+"--"+this.progressBarType).append(this.css.rootMobile,this.isMobile).append(this.css.rootAnimationDisabled,!C.animationEnabled).append(this.css.rootReadOnly,this.readOnly&&!this.isDesignMode).append(this.css.rootCompact,this.isCompact).append(this.css.rootFitToContainer,this.fitToContainer).toString()},t.prototype.afterRenderSurvey=function(e){var i=this;if(k.isAvailable()){this.destroyResizeObserver(),Array.isArray(e)&&(e=ae.GetFirstNonTextElement(e));var n=e,o=this.css.variables;if(o){var s=Number.parseFloat(D.getComputedStyle(n).getPropertyValue(o.mobileWidth));if(s){var a=!1;this.resizeObserver=new ResizeObserver(function(l){k.requestAnimationFrame(function(){a||!Bi(n)?a=!1:a=i.processResponsiveness(n.offsetWidth,s,n.offsetHeight)})}),this.resizeObserver.observe(n)}}this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e}),this.rootElement=e,this.scrollerElement=e.getElementsByClassName("sv-scroll__scroller")[0],this.addScrollEventListener()}},t.prototype.beforeDestroySurveyElement=function(){this.destroyResizeObserver(),this.removeScrollEventListener(),this.rootElement=void 0,this.scrollerElement=void 0},t.prototype.processResponsiveness=function(e,i,n){var o=e<i,s=this.isMobile!==o;this.setIsMobile(o),this.layoutElements.forEach(function(l){return l.processResponsiveness&&l.processResponsiveness(e)});var a={height:n,width:e};return this.onResize.fire(this,a),s},t.prototype.triggerResponsiveness=function(e){this.getAllQuestions().forEach(function(i){i.triggerResponsiveness(e)})},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},t.prototype.updateQuestionCssClasses=function(e,i){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:i})},t.prototype.updatePanelCssClasses=function(e,i){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:i})},t.prototype.updatePageCssClasses=function(e,i){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:i})},t.prototype.updateChoiceItemCss=function(e,i){i.question=e,this.onUpdateChoiceItemCss.fire(this,i)},t.prototype.afterRenderPage=function(e){var i=this;if(!this.isDesignMode&&!this.focusingQuestionInfo){var n=this.isCurrentPageRendered===!1;setTimeout(function(){return i.scrollToTopOnPageChange(n)},1)}this.focusQuestionInfo(),this.isCurrentPageRendered=!0,!this.onAfterRenderPage.isEmpty&&this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})},t.prototype.afterRenderHeader=function(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})},t.prototype.afterRenderQuestion=function(e,i){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:i})},t.prototype.afterRenderQuestionInput=function(e,i){if(!this.onAfterRenderQuestionInput.isEmpty){var n=e.inputId,o=Qe(i);if(o){if(n&&(!i||i.id!==n)&&typeof o<"u"){var s=o.getElementById(n);s&&(i=s)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:i})}}},t.prototype.afterRenderPanel=function(e,i){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:i})},Object.defineProperty(t.prototype,"lastActiveQuestion",{get:function(){return this.lastActiveQuestionValue},set:function(e){this.lastActiveQuestionValue=e,this.doUIStateChanged("activeElementName",e)},enumerable:!1,configurable:!0}),t.prototype.whenQuestionFocusIn=function(e){this.lastActiveQuestion=e,this.onFocusInQuestion.fire(this,{question:e})},t.prototype.whenPanelFocusIn=function(e){this.onFocusInPanel.fire(this,{panel:e})},t.prototype.rebuildQuestionChoices=function(){this.getAllQuestions().forEach(function(e){return e.surveyChoiceItemVisibilityChange()})},t.prototype.canChangeChoiceItemsVisibility=function(){return!this.onShowingChoiceItem.isEmpty},t.prototype.getChoiceItemVisibility=function(e,i,n){var o={question:e,item:i,visible:n};return this.onShowingChoiceItem.fire(this,o),o.visible},t.prototype.loadQuestionChoices=function(e){this.onChoicesLazyLoad.isEmpty?e.setItems([],0):this.onChoicesLazyLoad.fire(this,e)},t.prototype.getChoiceDisplayValue=function(e){this.onGetChoiceDisplayValue.isEmpty?e.setItems(null):this.onGetChoiceDisplayValue.fire(this,e)},t.prototype.matrixBeforeRowAdded=function(e){this.onMatrixRowAdding.fire(this,e)},t.prototype.matrixRowAdded=function(e,i){this.onMatrixRowAdded.fire(this,{question:e,row:i})},t.prototype.matrixColumnAdded=function(e,i){this.onMatrixColumnAdded.fire(this,{question:e,column:i})},t.prototype.multipleTextItemAdded=function(e,i){this.onMultipleTextItemAdded.fire(this,{question:e,item:i})},t.prototype.getQuestionByValueNameFromArray=function(e,i,n){var o=this.getQuestionsByValueName(e);if(o){for(var s=0;s<o.length;s++){var a=o[s].getQuestionFromArray(i,n);if(a)return a}return null}},t.prototype.matrixRowRemoved=function(e,i,n){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:i,row:n})},t.prototype.matrixRowRemoving=function(e,i,n){var o={question:e,rowIndex:i,row:n,allow:!0};return this.onMatrixRowRemoving.fire(this,o),o.allow},t.prototype.matrixAllowRemoveRow=function(e,i,n){var o={question:e,rowIndex:i,row:n,allow:!0};return this.onMatrixRenderRemoveButton.fire(this,o),o.allow},t.prototype.matrixDetailPanelVisibleChanged=function(e,i,n,o){var s={question:e,rowIndex:i,row:n,visible:o,detailPanel:n.detailPanel};this.onMatrixDetailPanelVisibleChanged.fire(this,s)},t.prototype.matrixCellCreating=function(e,i){i.question=e,this.onMatrixCellCreating.fire(this,i)},t.prototype.matrixCellCreated=function(e,i){i.question=e,this.onMatrixCellCreated.fire(this,i)},t.prototype.matrixAfterCellRender=function(e){var i,n=this.onAfterRenderMatrixCell;n.isEmpty||(e.question=(i=e.cellQuestion)===null||i===void 0?void 0:i.parentQuestion,n.fire(this,e))},t.prototype.matrixCellValueChanged=function(e,i){i.question=e,this.onMatrixCellValueChanged.fire(this,i)},t.prototype.matrixCellValueChanging=function(e,i){i.question=e,this.onMatrixCellValueChanging.fire(this,i)},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return this.checkErrorsMode==="onValueChanging"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChanged",{get:function(){return this.checkErrorsMode==="onValueChanged"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChange",{get:function(){return this.isValidateOnValueChanged||this.isValidateOnValueChanging},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnComplete",{get:function(){return this.checkErrorsMode==="onComplete"||this.validationAllowSwitchPages&&!this.validationAllowComplete},enumerable:!1,configurable:!0}),t.prototype.matrixCellValidate=function(e,i){return i.question=e,this.onMatrixCellValidate.fire(this,i),i.error?new ce(i.error,this):null},t.prototype.dynamicPanelAdded=function(e,i,n,o){!this.isLoadingFromJson&&o&&this.updateVisibleIndexes(e.page),this.onDynamicPanelAdded.fire(this,{question:e,panel:n,panelIndex:i})},t.prototype.dynamicPanelRemoved=function(e,i,n,o){for(var s=n?n.questions:[],a=0;a<s.length;a++)s[a].clearOnDeletingContainer();o&&this.updateVisibleIndexes(e.page),this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:i,panel:n})},t.prototype.dynamicPanelRemoving=function(e,i,n){var o={question:e,panelIndex:i,panel:n,allow:!0};return this.onDynamicPanelRemoving.fire(this,o),o.allow},t.prototype.dynamicPanelGetTabTitle=function(e,i){i.question=e,this.onGetDynamicPanelTabTitle.fire(this,i)},t.prototype.dynamicPanelCurrentIndexChanged=function(e,i){i.question=e,this.onDynamicPanelCurrentIndexChanged.fire(this,i),this.doUIStateChanged("activePanelIndex",e)},t.prototype.dragAndDropAllow=function(e){return this.onDragDropAllow.fire(this,e),e.allow},t.prototype.elementContentVisibilityChanged=function(e){this.currentPage&&this.currentPage.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e}),this.doUIStateChanged("collapsed",e)},t.prototype.doUIStateChanged=function(e,i){this.onUIStateChanged.isEmpty||this.onUIStateChanged.fire(this,{changedProperty:e,element:i})},t.prototype.getUpdatedPanelFooterActions=function(e,i,n){var o={question:n,panel:e,actions:i};return this.onGetPanelFooterActions.fire(this,o),o.actions},t.prototype.getUpdatedElementTitleActions=function(e,i){return e.isPage?this.getUpdatedPageTitleActions(e,i):e.isPanel?this.getUpdatedPanelTitleActions(e,i):this.getUpdatedQuestionTitleActions(e,i)},t.prototype.getTitleActionsResult=function(e,i){return e!=i.actions?i.actions:e!=i.titleActions?i.titleActions:e},t.prototype.getUpdatedQuestionTitleActions=function(e,i){var n={question:e,actions:i,titleActions:i};return this.onGetQuestionTitleActions.fire(this,n),this.getTitleActionsResult(i,n)},t.prototype.getUpdatedPanelTitleActions=function(e,i){var n={panel:e,actions:i,titleActions:i};return this.onGetPanelTitleActions.fire(this,n),this.getTitleActionsResult(i,n)},t.prototype.getUpdatedPageTitleActions=function(e,i){var n={page:e,actions:i,titleActions:i};return this.onGetPageTitleActions.fire(this,n),this.getTitleActionsResult(i,n)},t.prototype.getUpdatedMatrixRowActions=function(e,i,n){var o={question:e,actions:n,row:i};return this.onGetMatrixRowActions.fire(this,o),o.actions},t.prototype.scrollElementToTop=function(e,i,n,o,s,a,l,u){var f=this,y={element:e,question:i,page:n,elementId:o,cancel:!1,allow:!0};if(this.onScrollToTop.fire(this,y),!y.cancel&&y.allow){var b=this.getPageByElement(e),E=C.environment.rootElement,S=this.rootElement||l||E;if(this.isLazyRendering&&b){var O=1;this.skeletonHeight&&S&&typeof S.getBoundingClientRect=="function"&&(O=S.getBoundingClientRect().height/this.skeletonHeight-1),b.forceRenderElement(e,function(){var Q=S?.querySelector("#".concat(y.elementId));f.suspendLazyRendering(),ae.ScrollElementToTop(Q,s,a,function(){f.releaseLazyRendering();var ee=S.querySelector("#".concat(b.id));Qt(ee),u&&u()})},O)}else if(e.isPage&&!this.isSinglePage&&!this.isDesignMode&&this.rootElement){var R=S.querySelector(pe(this.css.rootWrapper));ae.ScrollElementToViewCore(R,!1,s,a,u)}else{var A=S?.querySelector("#".concat(y.elementId));this.suspendLazyRendering(),ae.ScrollElementToTop(A,s,a,function(){f.releaseLazyRendering(),Qt(A),u&&u()})}}},t.prototype.chooseFiles=function(e,i,n){this.onOpenFileChooser.isEmpty?Tr(e,i):this.onOpenFileChooser.fire(this,{input:e,element:n&&n.element||this.survey,elementType:n&&n.elementType,item:n&&n.item,propertyName:n&&n.propertyName,callback:i,context:n})},t.prototype.uploadFiles=function(e,i,n,o,s){var a=this;this.onUploadFiles.isEmpty?o("error",this.getLocString("noUploadFilesHandler")):this.taskManager.runTask("file",function(l){a.onUploadFiles.fire(a,{question:e,name:i,sourceType:s,files:n||[],callback:function(u,f){o(u,f),l()}})}),this.surveyPostId&&this.uploadFilesCore(i,n,o)},t.prototype.downloadFile=function(e,i,n,o){this.onDownloadFile.isEmpty&&o&&o("skipped",n.content||n),this.onDownloadFile.fire(this,{question:e,name:i,content:n.content||n,fileValue:n,callback:o})},t.prototype.clearFiles=function(e,i,n,o,s){this.onClearFiles.isEmpty&&s&&s("success",n),this.onClearFiles.fire(this,{question:e,name:i,value:n,fileName:o,callback:s})},t.prototype.updateChoicesFromServer=function(e,i,n){var o={question:e,choices:i,serverResult:n};return this.onChoicesLoaded.fire(this,o),o.choices},t.prototype.loadedChoicesFromServer=function(e){this.locStrsChanged()},t.prototype.uploadFilesCore=function(e,i,n){this.reportWarningOnUsingService()},t.prototype.getPage=function(e){return this.pages[e]},t.prototype.addPage=function(e,i){i===void 0&&(i=-1),e!=null&&(i<0||i>=this.pages.length?this.pages.push(e):this.pages.splice(i,0,e))},t.prototype.addNewPage=function(e,i){e===void 0&&(e=null),i===void 0&&(i=-1);var n=this.createNewPage(e);return this.addPage(n,i),n},t.prototype.removePage=function(e){var i=this.pages.indexOf(e);i<0||(this.pages.splice(i,1),this.currentPage==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null))},t.prototype.getQuestionByName=function(e,i){i===void 0&&(i=!1);var n=this.getQuestionsFromHash(this.questionHashes.names,this.questionHashes.namesInsensitive,e,i);return n?n[0]:null},t.prototype.findQuestionByName=function(e){return this.getQuestionByName(e)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getQuestionByValueName=function(e,i){i===void 0&&(i=!1);var n=this.getQuestionsByValueName(e,i);return n?n[0]:null},t.prototype.getQuestionsByValueName=function(e,i){return i===void 0&&(i=!1),this.getQuestionsFromHash(this.questionHashes.valueNames,this.questionHashes.valueNamesInsensitive,e,i)},t.prototype.getCalculatedValueByName=function(e){for(var i=0;i<this.calculatedValues.length;i++)if(e==this.calculatedValues[i].name)return this.calculatedValues[i];return null},t.prototype.getQuestionsFromHash=function(e,i,n,o){if(!n)return null;var s=e[n];return s||o&&(n=n.toLowerCase(),s=i[n],s)?s:null},t.prototype.getQuestionsByNames=function(e,i){i===void 0&&(i=!1);var n=[];if(!e)return n;for(var o=0;o<e.length;o++)if(e[o]){var s=this.getQuestionByName(e[o],i);s&&n.push(s)}return n},t.prototype.getPageByElement=function(e){for(var i=0;i<this.pages.length;i++){var n=this.pages[i];if(n.containsElement(e))return n}return null},t.prototype.getPageByQuestion=function(e){return this.getPageByElement(e)},t.prototype.getPageByName=function(e){for(var i=0;i<this.pages.length;i++)if(this.pages[i].name==e)return this.pages[i];return null},t.prototype.getPagesByNames=function(e){var i=[];if(!e)return i;for(var n=0;n<e.length;n++)if(e[n]){var o=this.getPageByName(e[n]);o&&i.push(o)}return i},t.prototype.getAllQuestions=function(e,i,n){if(e===void 0&&(e=!1),i===void 0&&(i=!1),n===void 0&&(n=!1),n){i=!1;var o=e?this.visiblePages:this.pages;o.forEach(function(l){return l.onFirstRendering()})}for(var s=[],a=0;a<this.pages.length;a++)this.pages[a].addQuestionsToList(s,e,i);return n?this.getNestedQuestionsByQuestionArray(s,e):s},t.prototype.getNestedQuestionsByQuestionArray=function(e,i){var n=[];return e.forEach(function(o){o.getNestedQuestions(i,!0,!0).forEach(function(s){return n.push(s)})}),n},t.prototype.getQuizQuestions=function(){for(var e=new Array,i=this.getPageStartIndex(),n=i;n<this.pages.length;n++)if(this.pages[n].isVisible)for(var o=this.pages[n].questions,s=0;s<o.length;s++){var a=o[s];a.quizQuestionCount>0&&e.push(a)}return e},t.prototype.getPanelByName=function(e,i){i===void 0&&(i=!1);var n=this.getAllPanels();i&&(e=e.toLowerCase());for(var o=0;o<n.length;o++){var s=n[o].name;if(i&&(s=s.toLowerCase()),s==e)return n[o]}return null},t.prototype.getAllPanels=function(e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);for(var n=new Array,o=0;o<this.pages.length;o++)this.pages[o].addPanelsIntoList(n,e,i);return n},t.prototype.createNewPage=function(e){var i=V.createClass("page");return i.name=e,i},t.prototype.getValueChangeReason=function(){return this.isSettingValueOnExpression?"expression":this.isSettingValueFromTrigger?"trigger":void 0},t.prototype.questionOnValueChanging=function(e,i,n){if(this.editingObj){var o=V.findProperty(this.editingObj.getType(),e);o&&(i=o.settingValue(this.editingObj,i))}if(this.onValueChanging.isEmpty)return i;var s={name:e,question:this.getQuestionByValueName(n||e),value:this.getUnbindValue(i),oldValue:this.getValue(e),reason:this.getValueChangeReason()};return this.onValueChanging.fire(this,s),s.value},t.prototype.getLocNotification=function(e,i,n){return e===!1&&w.isTwoValueEquals(i,n,!1,!0,!1)?!0:e},t.prototype.updateQuestionValue=function(e,i){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var o=0;o<n.length;o++){var s=n[o].value;(s===i&&Array.isArray(s)&&this.editingObj||!this.isTwoValueEquals(s,i))&&n[o].updateValueFromSurvey(i,!1)}}},t.prototype.validateQuestionOnValueChanged=function(e){!this.isNavigationButtonPressed&&(this.isValidateOnValueChanged||e.getAllErrors().length>0)&&this.validateQuestionOnValueChangedCore(e)},t.prototype.validateQuestionOnValueChangedCore=function(e){var i=e.getAllErrors().length,n=e.validate(!0,!1,!this.isValidateOnValueChanging);return e.page&&this.isValidateOnValueChange&&(i>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),n},t.prototype.validateOnValueChanging=function(e,i){if(this.isLoadingFromJson)return!1;var n=this.getQuestionsByValueName(e);if(!n)return!1;for(var o=!0,s=0;s<n.length;s++){var a=n[s];this.isTwoValueEquals(a.valueForSurvey,i)||(a.value=i),o=this.validateQuestionOnValueChangedCore(a)&&o&&a.errors.length==0}return o},t.prototype.fireOnValueChanged=function(e,i,n){this.onValueChanged.fire(this,{name:e,question:n,value:i,reason:this.getValueChangeReason()})},t.prototype.notifyQuestionOnValueChanged=function(e,i,n){if(!this.isLoadingFromJson){var o=this.getQuestionsByValueName(e);if(o)for(var s=0;s<o.length;s++){var a=o[s];this.validateQuestionOnValueChanged(a),a.onSurveyValueChanged(i)}this.updateProgressText(!0),this.fireOnValueChanged(e,i,n?this.getQuestionByName(n):void 0),!this.isDisposed&&(this.checkElementsBindings(e,i),this.notifyElementsOnAnyValueOrVariableChanged(e,n))}},t.prototype.checkElementsBindings=function(e,i){this.isRunningElementsBindings=!0;for(var n=0;n<this.pages.length;n++)this.pages[n].checkBindings(e,i);this.isRunningElementsBindings=!1,this.updateVisibleIndexAfterBindings&&(this.updateVisibleIndexes(),this.updateVisibleIndexAfterBindings=!1)},t.prototype.notifyElementsOnAnyValueOrVariableChanged=function(e,i){if(this.isEndLoadingFromJson!=="processing"){if(this.isRunningConditions){this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;return}for(var n=0;n<this.pages.length;n++)this.pages[n].onAnyValueChanged(e,i);this.isEndLoadingFromJson||this.locStrsChanged()}},t.prototype.updateAllQuestionsValue=function(e){for(var i=this.getAllQuestions(),n=0;n<i.length;n++){var o=i[n],s=o.getValueName();o.updateValueFromSurvey(this.getValue(s),e),o.requireUpdateCommentValue&&o.updateCommentFromSurvey(this.getComment(s))}},t.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),i=0;i<e.length;i++)e[i].onSurveyValueChanged(this.getValue(e[i].getValueName()))},t.prototype.checkOnPageTriggers=function(e){for(var i=this.getCurrentPageQuestions(!0),n={},o=0;o<i.length;o++){var s=i[o],a=s.getValueName();n[a]=this.getValue(a)}this.addCalculatedValuesIntoFilteredValues(n),this.checkTriggers(n,!0,e)},t.prototype.getCurrentPageQuestions=function(e){e===void 0&&(e=!1);var i=[],n=this.currentPage;if(!n)return i;for(var o=0;o<n.questions.length;o++){var s=n.questions[o];!e&&!s.visible||!s.name||i.push(s)}return i},t.prototype.checkTriggers=function(e,i,n,o,s){if(n===void 0&&(n=!1),o===void 0&&(o=!1),!(this.isCompleted||this.triggers.length==0||this.isDisplayMode)){if(this.isTriggerIsRunning){for(var a in e)this.triggerKeys[a]=e[a];return}var l=!1;if(!n&&s&&this.hasRequiredValidQuestionTrigger){var u=this.getQuestionByValueName(s);l=u&&!u.validate(!1)}this.isTriggerIsRunning=!0,this.triggerKeys=e;for(var f=this.getFilteredProperties(),y={isOnNextPage:i,isOnComplete:n,isOnNavigation:o,keys:this.triggerKeys,properties:f},b=w.createCopy(this.triggerKeys),E=3,S=0;S<E&&(this.runSurveyTriggers(y,l),!(this.isCompleted||w.isTwoValueEquals(b,this.triggerKeys)));S++)this.triggerKeys=w.createDiff(this.triggerKeys,b),b=w.createCopy(this.triggerKeys);var O=this.canBeCompletedByTrigger;O!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility(),this.isTriggerIsRunning=!1}},t.prototype.runSurveyTriggers=function(e,i){for(var n=0;n<this.triggers.length;n++){var o=this.triggers[n];i&&o.requireValidQuestion||(e.keys=this.triggerKeys,o.checkExpression(e))}},t.prototype.checkTriggersAndRunConditions=function(e,i,n){var o={};o[e]={newValue:i,oldValue:n},this.runConditionOnValueChanged(e,i),this.checkTriggers(o,!1,!1,!1,e)},Object.defineProperty(t.prototype,"hasRequiredValidQuestionTrigger",{get:function(){for(var e=0;e<this.triggers.length;e++)if(this.triggers[e].requireValidQuestion)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.doElementsOnLoad=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()},Object.defineProperty(t.prototype,"isRunningConditions",{get:function(){return this.isRunningConditionsValue},enumerable:!1,configurable:!0}),t.prototype.runExpressions=function(){this.runConditions()},t.prototype.runConditions=function(){if(!(this.isCompleted||this.isEndLoadingFromJson==="processing"||this.isRunningConditions)){this.isRunningConditionsValue=!0;var e=this.getFilteredProperties();this.runConditionsCore(e),this.isRunningConditionsValue=!1,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<C.maxConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}},t.prototype.runConditionOnValueChanged=function(e,i){this.questionTriggersKeys||(this.questionTriggersKeys={}),this.questionTriggersKeys[e]=i,this.isRunningConditions?this.isValueChangedOnRunningCondition=!0:(this.runConditions(),this.runQuestionsTriggers(e,i),this.questionTriggersKeys=void 0)},t.prototype.runConditionsCore=function(e){for(var i=this.pages,n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].resetCalculation();for(var n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].doCalculation(this.calculatedValues,e);r.prototype.runConditionCore.call(this,e);for(var o=0;o<i.length;o++)i[o].runCondition(e)},t.prototype.runQuestionsTriggers=function(e,i){var n=this;if(!(this.isDisplayMode||this.isDesignMode)){var o=this.getAllQuestions();o.forEach(function(s){s.runTriggers(e,i,n.questionTriggersKeys)})}},t.prototype.sendResult=function(e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),this.isEditMode&&(n&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),e&&(i&&(this.clientId=i),!(n&&!this.clientId)&&this.reportWarningOnUsingService()))},t.prototype.getResult=function(e,i){this.reportWarningOnUsingService()},t.prototype.loadSurveyFromService=function(e,i){e===void 0&&(e=null),i===void 0&&(i=null),e&&(this.surveyId=e),i&&(this.clientId=i),this.reportWarningOnUsingService()},t.prototype.reportWarningOnUsingService=function(){Ee.warn("Self-hosted Form Library no longer supports integration with SurveyJS Demo Service. Learn more: https://surveyjs.io/stay-updated/release-notes/v2.0.0#form-library-removes-apis-for-integration-with-surveyjs-demo-service")},t.prototype.loadSurveyFromServiceJson=function(e){e&&(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))},t.prototype.onLoadingSurveyFromService=function(){},t.prototype.onLoadSurveyFromService=function(){},t.prototype.resetVisibleIndexes=function(){for(var e=this.getAllQuestions(!0),i=0;i<e.length;i++)e[i].setVisibleIndex(-1);this.updateVisibleIndexes()},t.prototype.updateVisibleIndexes=function(e){if(!(this.isLoadingFromJson||this.isEndLoadingFromJson)){if(this.isRunningConditions&&this.onQuestionVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty){this.conditionUpdateVisibleIndexes=!0;return}if(this.isRunningElementsBindings){this.updateVisibleIndexAfterBindings=!0;return}this.updatePageVisibleIndexes(),this.updatePageElementsVisibleIndexes(e),this.updateProgressText(!0)}},t.prototype.updatePageElementsVisibleIndexes=function(e){if(this.showQuestionNumbers=="onPage")for(var i=e?[e]:this.visiblePages,n=0;n<i.length;n++)i[n].setVisibleIndex(0);else for(var o=this.getStartVisibleIndex(),s=this.pages,a=0;a<s.length;a++)o+=s[a].setVisibleIndex(o)},t.prototype.getStartVisibleIndex=function(){var e=this.showQuestionNumbers;return e==="on"||e==="recursive"?0:-1},t.prototype.updatePageVisibleIndexes=function(){this.updateButtonsVisibility();var e=0,i=1;this.pages.forEach(function(a){});for(var n=0;n<this.pages.length;n++){var o=this.pages[n],s=o.isVisible&&(n>0||!o.isStartPage);o.questionStartIndex&&(i=1),o.visibleIndex=s?e++:-1,o.num=s?i++:-1}},t.prototype.fromJSON=function(e,i){if(e){this.resetHasLogo(),this.resetPropertyValue("titleIsEmpty"),this.questionHashesClear(),this.jsonErrors=null,this.sjsVersion=void 0;var n=new le;n.toObject(e,this,i),n.errors.length>0&&(this.jsonErrors=n.errors),this.onStateAndCurrentPageChanged(),this.endLoading(),this.updateState(),this.sjsVersion&&C.version&&w.compareVerions(this.sjsVersion,C.version)>0&&Ee.warn("The version of the survey JSON schema (v"+this.sjsVersion+") is newer than your current Form Library version ("+C.version+"). Please update the Form Library to make sure that all survey features work as expected.")}},t.prototype.toJSON=function(e){var i=r.prototype.toJSON.call(this,e);if(e?.storeLocaleStrings==="stringsOnly"){var n=e.locales;Array.isArray(n)&&n.length===1&&(i.locale=n[0])}return i},t.prototype.mergeLocalizationJSON=function(e,i){var n=new t(e);n.locale&&(i=[n.locale]),this.mergeLocalizationObj(n,i)},t.prototype.isPropertyStoredInHash=function(e){return!0},t.prototype.startLoadingFromJson=function(e){r.prototype.startLoadingFromJson.call(this,e),e&&e.locale&&(this.locale=e.locale)},t.prototype.setJsonObject=function(e){this.fromJSON(e)},t.prototype.endLoadingFromJson=function(){this.isEndLoadingFromJson="processing",this.onFirstPageIsStartedChanged(),r.prototype.endLoadingFromJson.call(this),this.hasCookie&&(this.isCompletedBefore=!0),this.doElementsOnLoad(),this.onQuestionsOnPageModeChanged("standard"),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes(),this.updateCurrentPage(),this.setCalculatedWidthModeUpdater(),this.onEndLoadingFromJson.fire(this,{})},t.prototype.getProcessedTextValue=function(e){if(this.getProcessedTextValueCore(e),!this.onProcessDynamicText.isEmpty){var i=this.isValueEmpty(e.value);this.onProcessDynamicText.fire(this,e),e.isExists=e.isExists||i&&!this.isValueEmpty(e.value)}},t.prototype.getProcessedTextValueCore=function(e){var i=e.name.toLocaleLowerCase();if(["no","require","title"].indexOf(i)===-1){var n=new Re().getValueInfo({name:i,context:this.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});n.isFound&&(e.isExists=!0,e.value=n.value)}},t.prototype.clearUnusedValues=function(){this.isClearingUnsedValues=!0;for(var e=this.getAllQuestions(),i=0;i<e.length;i++)e[i].clearUnusedValues();this.clearInvisibleQuestionValues(),this.isClearingUnsedValues=!1},t.prototype.hasVisibleQuestionByValueName=function(e){var i=e,n=this.getQuestionsByValueName(i.getValueName());if(!Array.isArray(n)||n.length<2)return!1;for(var o=0;o<n.length;o++){var s=n[o];if(s!==i&&s.isVisible&&s.isParentVisible&&!s.parentQuestion&&s.parentQuestion===i.parentQuestion)return!0}return!1},t.prototype.questionsByValueName=function(e){var i=this.getQuestionsByValueName(e);return i||[]},t.prototype.clearInvisibleQuestionValues=function(){for(var e=this.clearInvisibleValues==="none"?"none":"onComplete",i=this.getAllQuestions(),n=0;n<i.length;n++)i[n].clearValueIfInvisible(e)},t.prototype.getVariable=function(e){if(!e)return null;e=e.toLowerCase();var i=this.getVariableCore(e);return dr(e,i,!0),i},t.prototype.getVariableCore=function(e){var i=this.variablesHash[e];return this.isValueEmpty(i)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)?new Re().getValue(e,new fe(this.variablesHash)):i},t.prototype.setVariable=function(e,i){if(e){var n=this.getVariable(e);this.valuesHash&&delete this.valuesHash[e],e=e.toLowerCase(),this.variablesHash[e]=i,this.notifyElementsOnAnyValueOrVariableChanged(e),w.isTwoValueEquals(n,i)||(this.checkTriggersAndRunConditions(e,i,n),this.onVariableChanged.fire(this,{name:e,value:i}))}},t.prototype.getVariableNames=function(){var e=[];for(var i in this.variablesHash)e.push(i);return e},t.prototype.getUnbindValue=function(e){return this.editingObj?e:w.getUnbindValue(e)},t.prototype.getValue=function(e){if(!e||e.length==0)return null;var i=this.getDataValueCore(this.valuesHash,e),n=this.getUnbindValue(i);return dr(e,n),n},t.prototype.setValue=function(e,i,n,o,s){n===void 0&&(n=!1),o===void 0&&(o=!0);var a=i;if(o&&(a=this.questionOnValueChanging(e,i)),!(this.isValidateOnValueChanging&&!this.validateOnValueChanging(e,a))&&!(!this.editingObj&&this.isValueEqual(e,a)&&this.isTwoValueEquals(a,i))){var l=this.getValue(e);this.isValueEmpyOnSetValue(e,a)?this.deleteDataValueCore(this.valuesHash,e):(a=this.getUnbindValue(a),this.setDataValueCore(this.valuesHash,e,a)),n=this.getLocNotification(n,a,l),this.updateOnSetValue(e,a,l,n,o,s)}},t.prototype.questionValueChanging=function(e,i){var n=e,o=n.parentQuestion;if(!o)return i;if(o.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanging.isEmpty){var s=o.getValueChangingOptions(n);if(s)return s.value=i,this.onDynamicPanelValueChanging.fire(this,s),s.value}return i},t.prototype.questionValueChanged=function(e,i){var n=e,o=n.parentQuestion;if(o&&o.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanged.isEmpty){var s=o.getValueChangingOptions(n);s&&(s.value=n.value,s.oldValue=i,this.onDynamicPanelValueChanged.fire(this,s))}},t.prototype.isValueEmpyOnSetValue=function(e,i){return this.isValueEmpty(i,!1)?!this.editingObj||i===null||i===void 0?!0:this.editingObj.getDefaultPropertyValue(e)===i:!1},t.prototype.updateOnSetValue=function(e,i,n,o,s,a){o===void 0&&(o=!1),s===void 0&&(s=!0),this.updateQuestionValue(e,i),!(o===!0||this.isDisposed||this.isRunningElementsBindings)&&(a=a||e,this.nofifyQuesitonHash[e]=!0,this.checkTriggersAndRunConditions(e,i,n),this.nofifyQuesitonHash[e]&&(s&&this.notifyQuestionOnValueChanged(e,i,a),o!=="text"&&this.tryGoNextPageAutomatic(e),delete this.nofifyQuesitonHash[e]))},t.prototype.isValueEqual=function(e,i){(i===""||i===void 0)&&(i=null);var n=this.getValue(e);return(n===""||n===void 0)&&(n=null),i===null||n===null?i===n:this.isTwoValueEquals(i,n)},t.prototype.doOnPageAdded=function(e){if(e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),!this.runningPages&&(this.isLoadingFromJson||(this.updateProgressText(),this.updateCurrentPage()),this.canFireAddPage())){var i={page:e};this.onPageAdded.fire(this,i)}},t.prototype.canFireAddPage=function(){return!this.isMovingPage},t.prototype.doOnPageRemoved=function(e){e.setSurveyImpl(null),!this.runningPages&&(e===this.currentPage&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements())},t.prototype.generateNewName=function(e,i){for(var n={},o=0;o<e.length;o++)n[e[o].name]=!0;for(var s=1;n[i+s];)s++;return i+s},t.prototype.getNewGeneratedName=function(e,i){return this.generateNewName(e,i)},t.prototype.tryGoNextPageAutomatic=function(e){var i=this;if(!(this.isEndLoadingFromJson||!this.autoAdvanceEnabled||!this.currentPage)){var n=this.getQuestionByValueName(e);if(!(!n||n&&(!n.visible||!n.supportAutoAdvance()))&&!(!n.validate(!1)&&!n.supportGoNextPageError())){if(this.currentSingleElement){var o=this.currentSingleElement,s=function(){o===i.currentSingleElement&&(i.isLastElement?i.autoAdvanceAllowComplete&&i.tryCompleteOrShowPreview():i.performNext())};Le.safeTimeOut(s,C.autoAdvanceDelay)}var a=this.getCurrentPageQuestions();if(!(a.indexOf(n)<0)){for(var l=0;l<a.length;l++)if(a[l].hasInput&&a[l].isEmpty())return;if(!(this.isLastPage&&(this.autoAdvanceEnabled!==!0||!this.autoAdvanceAllowComplete))&&this.validateActivePage(!1)){var u=this.currentPage,f=function(){u===i.currentPage&&(i.isLastPage?i.tryCompleteOrShowPreview():i.nextPage())};Le.safeTimeOut(f,C.autoAdvanceDelay)}}}}},t.prototype.tryCompleteOrShowPreview=function(){this.showPreviewBeforeComplete?this.showPreview():this.tryComplete()},t.prototype.getComment=function(e){var i=this.getValue(e+this.commentSuffix);return i||""},t.prototype.setComment=function(e,i,n){if(n===void 0&&(n=!1),i||(i=""),!this.isTwoValueEquals(i,this.getComment(e))){var o=e+this.commentSuffix;i=this.questionOnValueChanging(o,i,e),n=this.getLocNotification(n,i,this.getComment(e)),this.isValueEmpty(i)?this.deleteDataValueCore(this.valuesHash,o):this.setDataValueCore(this.valuesHash,o,i);var s=this.getQuestionsByValueName(e);if(s)for(var a=0;a<s.length;a++)s[a].updateCommentFromSurvey(i),this.validateQuestionOnValueChanged(s[a]);n||this.checkTriggersAndRunConditions(e,this.getValue(e),void 0),n!=="text"&&this.tryGoNextPageAutomatic(e);var l=this.getQuestionByValueName(e);l&&(this.fireOnValueChanged(o,i,l),l.comment=i,l.comment!=i&&(l.comment=i))}},t.prototype.clearValue=function(e){this.setValue(e,null),this.setComment(e,null)},Object.defineProperty(t.prototype,"clearValueOnDisableItems",{get:function(){return this.clearDisabledChoices},set:function(e){this.clearDisabledChoices=e},enumerable:!1,configurable:!0}),t.prototype.getQuestionClearIfInvisible=function(e){return this.isShowingPreview||this.runningPages?"none":e!=="default"?e:this.clearInvisibleValues},t.prototype.questionVisibilityChanged=function(e,i,n){n&&this.updateVisibleIndexes(e.page),i||this.changeCurrentSingleElementOnVisibilityChanged(),this.onQuestionVisibleChanged.fire(this,{question:e,name:e.name,visible:i})},t.prototype.pageVisibilityChanged=function(e,i){if(!this.isLoadingFromJson){(i&&!this.currentPage||e===this.currentPage)&&this.updateCurrentPage(),this.updateVisibleIndexes(),i||this.changeCurrentSingleElementOnVisibilityChanged();var n=this.currentSingleElement,o=this.currentPage;n&&o&&n.page!==o&&(this.currentSingleElement=o.getFirstVisibleElement()),this.onPageVisibleChanged.fire(this,{page:e,visible:i})}},t.prototype.panelVisibilityChanged=function(e,i){e.page&&(this.updateVisibleIndexes(e.page),i||this.changeCurrentSingleElementOnVisibilityChanged()),this.onPanelVisibleChanged.fire(this,{panel:e,visible:i})},t.prototype.questionCreated=function(e){this.onQuestionCreated.fire(this,{question:e})},t.prototype.questionAdded=function(e,i,n,o){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.isLoadingFromJson||(this.currentPage||this.updateCurrentPage(),this.updateVisibleIndexes(e.page),this.setCalculatedWidthModeUpdater()),this.canFireAddElement()&&this.onQuestionAdded.fire(this,{question:e,name:e.name,index:i,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.canFireAddElement=function(){return!this.isMovingQuestion},t.prototype.questionRemoved=function(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(e.page),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.questionRenamed=function(e,i,n){this.questionHashesRemoved(e,i,n),this.questionHashesAdded(e)},t.prototype.questionHashesClear=function(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}},t.prototype.questionHashesPanelAdded=function(e){if(!this.isLoadingFromJson)for(var i=e.questions,n=0;n<i.length;n++)this.questionHashesAdded(i[n])},t.prototype.questionHashesAdded=function(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())},t.prototype.questionHashesRemoved=function(e,i,n){i&&(this.questionHashRemovedCore(this.questionHashes.names,e,i),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,i.toLowerCase())),n&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,n),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,n.toLowerCase()))},t.prototype.questionHashAddedCore=function(e,i,n){var o=e[n];if(o){var o=e[n];o.indexOf(i)<0&&o.push(i)}else e[n]=[i]},t.prototype.questionHashRemovedCore=function(e,i,n){var o=e[n];if(o){var s=o.indexOf(i);s>-1&&o.splice(s,1),o.length==0&&delete e[n]}},t.prototype.panelAdded=function(e,i,n,o){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(e.page),this.canFireAddElement()&&this.onPanelAdded.fire(this,{panel:e,name:e.name,index:i,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.panelRemoved=function(e){this.updateVisibleIndexes(e.page),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.validateQuestion=function(e,i,n){if(!this.onValidateQuestion.isEmpty){var o={name:e.name,question:e,value:e.value,errors:i,error:null};this.onValidateQuestion.fire(this,o),o.error&&i.push(new ce(o.error,this))}n&&this.beforeSettingQuestionErrors(e,i)},t.prototype.validatePanel=function(e,i,n){if(e.isPanel&&!this.onValidatePanel.isEmpty){var o={name:e.name,panel:e,error:null,errors:i};this.onValidatePanel.fire(this,o),o.error&&i.push(new ce(o.error,this))}n&&this.makeRequiredErrorsInvisible(i)},t.prototype.processHtml=function(e,i){i||(i="");var n={html:e,reason:i};return this.onProcessHtml.fire(this,n),this.processText(n.html,!0)},t.prototype.getValueGetterContext=function(){return new Gl(this,this.valuesHash,this.variablesHash)},t.prototype.processText=function(e,i,n){return this.processTextEx({text:e,returnDisplayValue:i,doEncoding:!1,context:n}).text},t.prototype.processTextEx=function(e){return e.doEncoding===void 0&&(e.doEncoding=C.web.encodeUrlParams),e.runAtDesign||!this.isDesignMode?this.textPreProcessor.processTextEx(e):{text:e.text,hasAllValuesOnLastRun:!1}},Object.defineProperty(t.prototype,"textPreProcessor",{get:function(){var e=this;return this.textPreProcessorValue||(this.textPreProcessorValue=new yt(this),this.textPreProcessorValue.onProcess=function(i){e.getProcessedTextValue(i)}),this.textPreProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getSurveyMarkdownHtml=function(e,i,n,o){var s={element:e,text:i,name:n,item:o,html:null};return this.onTextMarkdown.fire(this,s),s.html},t.prototype.getCorrectedAnswerCount=function(){return this.getCorrectAnswerCount()},t.prototype.getCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!0)},t.prototype.getQuizQuestionCount=function(){for(var e=this.getQuizQuestions(),i=0,n=0;n<e.length;n++)i+=e[n].quizQuestionCount;return i},t.prototype.getInCorrectedAnswerCount=function(){return this.getIncorrectAnswerCount()},t.prototype.getInCorrectAnswerCount=function(){return this.getIncorrectAnswerCount()},t.prototype.getIncorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!1)},t.prototype.onCorrectQuestionAnswer=function(e,i){this.onIsAnswerCorrect.isEmpty||(i.question=e,this.onIsAnswerCorrect.fire(this,i))},t.prototype.getCorrectedAnswerCountCore=function(e){for(var i=this.getQuizQuestions(),n=0,o=0;o<i.length;o++){var s=i[o],a=s.correctAnswerCount;e?n+=a:n+=s.quizQuestionCount-a}return n},t.prototype.getCorrectedAnswers=function(){return this.getCorrectedAnswerCount()},t.prototype.getInCorrectedAnswers=function(){return this.getInCorrectedAnswerCount()},Object.defineProperty(t.prototype,"showTimerPanel",{get:function(){return this.showTimer?this.timerLocation:"none"},set:function(e){this.showTimer=e!=="none",this.showTimer&&(this.timerLocation=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnTop",{get:function(){return this.showTimer&&this.timerLocation==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnBottom",{get:function(){return this.showTimer&&this.timerLocation==="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoMode",{get:function(){return this.getTimerInfoVal(this.getPropertyValue("timerInfoMode"))},set:function(e){this.setPropertyValue("timerInfoMode",e)},enumerable:!1,configurable:!0}),t.prototype.getTimerInfoVal=function(e){return e==="all"?"combined":e},Object.defineProperty(t.prototype,"showTimerPanelMode",{get:function(){var e=this.timerInfoMode;return e==="combined"?"all":e},set:function(e){this.timerInfoMode=this.getTimerInfoVal(e)},enumerable:!1,configurable:!0}),t.prototype.updateGridColumns=function(){this.pages.forEach(function(e){return e.updateGridColumns()})},t.prototype.setCalculatedWidthModeUpdater=function(){var e=this;this.isLoadingFromJson||(this.calculatedWidthModeUpdater&&this.calculatedWidthModeUpdater.dispose(),this.calculatedWidthModeUpdater=new $(function(){return e.calculateWidthMode()}),this.calculatedWidthMode=this.calculatedWidthModeUpdater)},t.prototype.calculateWidthMode=function(){if(this.widthMode=="auto"){var e=!1;return this.isSingleVisibleInput||this.pages.forEach(function(i){i.needResponsiveWidth()&&(e=!0)}),e?"responsive":"static"}return this.widthMode},Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("calculatedWidthMode")=="static",i=this.getPropertyValue("width");if(this.isScaled&&this.responsiveStartWidth>1){var n=this.responsiveStartWidth;try{i=i||this.staticStartWidth,n=isNaN(i)?parseFloat(i.toString().replace("px","")):i}catch{}return(e?n:this.responsiveStartWidth)*this.widthScale/100+"px"}return i&&!isNaN(i)&&(i=i+"px"),e&&i||void 0},enumerable:!1,configurable:!0}),t.prototype.setStaticStartWidth=function(e){this.staticStartWidth=e},t.prototype.setResponsiveStartWidth=function(e){this.responsiveStartWidth=e},Object.defineProperty(t.prototype,"isScaled",{get:function(){return Math.abs(this.widthScale-100)>.001},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfo",{get:function(){return this.getTimerInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerClock",{get:function(){var e,i;if(this.currentPage){var n=this.getTimerInfo(),o=n.spent,s=n.limit,a=n.minorSpent,l=n.minorLimit;s>0?e=this.getDisplayClockTime(s-o):e=this.getDisplayClockTime(o),a!==void 0&&(l>0?i=this.getDisplayClockTime(l-a):i=this.getDisplayClockTime(a))}return{majorText:e,minorText:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoText",{get:function(){var e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var i=new me(this,!0);return i.text=e.text,i.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getTimerInfo=function(){var e=this.currentPage;if(!e)return{spent:0,limit:0};var i=e.timeSpent,n=this.timeSpent,o=e.getMaxTimeToFinish(),s=this.timeLimit;return this.timerInfoMode=="page"?{spent:i,limit:o}:this.timerInfoMode=="survey"?{spent:n,limit:s}:o>0&&s>0?{spent:i,limit:o,minorSpent:n,minorLimit:s}:o>0?{spent:i,limit:o,minorSpent:n}:s>0?{spent:n,limit:s,minorSpent:i}:{spent:i,minorSpent:n}},t.prototype.getTimerInfoText=function(){var e=this.currentPage;if(!e)return"";var i=this.getDisplayTime(e.timeSpent),n=this.getDisplayTime(this.timeSpent),o=e.getMaxTimeToFinish(),s=this.getDisplayTime(o),a=this.getDisplayTime(this.timeLimit);if(this.timerInfoMode=="page")return this.getTimerInfoPageText(e,i,s);if(this.timerInfoMode=="survey")return this.getTimerInfoSurveyText(n,a);if(this.timerInfoMode=="combined"){if(o<=0&&this.timeLimit<=0)return this.getLocalizationFormatString("timerSpentAll",i,n);if(o>0&&this.timeLimit>0)return this.getLocalizationFormatString("timerLimitAll",i,s,n,a);var l=this.getTimerInfoPageText(e,i,s),u=this.getTimerInfoSurveyText(n,a);return l+" "+u}return""},t.prototype.getTimerInfoPageText=function(e,i,n){return e&&e.getMaxTimeToFinish()>0?this.getLocalizationFormatString("timerLimitPage",i,n):this.getLocalizationFormatString("timerSpentPage",i,n)},t.prototype.getTimerInfoSurveyText=function(e,i){var n=this.timeLimit>0?"timerLimitSurvey":"timerSpentSurvey";return this.getLocalizationFormatString(n,e,i)},t.prototype.getDisplayClockTime=function(e){e<0&&(e=0);var i=Math.floor(e/60),n=e%60,o=n.toString();return n<10&&(o="0"+o),"".concat(i,":").concat(o)},t.prototype.getDisplayTime=function(e){var i=Math.floor(e/60),n=e%60,o="";return i>0&&(o+=i+" "+this.getLocalizationString("timerMin")),o&&n==0?o:(o&&(o+=" "),o+n+" "+this.getLocalizationString("timerSec"))},Object.defineProperty(t.prototype,"timerModel",{get:function(){var e=this;return this.timerModelValue||(this.timerModelValue=new co(this),this.timerModelValue.onTimerTick=function(i){e.doTimer(i)}),this.timerModelValue},enumerable:!1,configurable:!0}),t.prototype.startTimer=function(){this.isEditMode&&this.timerModel.start()},t.prototype.startTimerFromUI=function(){this.showTimer&&this.state==="running"&&this.startTimer()},t.prototype.stopTimer=function(){this.timerModel.stop()},Object.defineProperty(t.prototype,"timeSpent",{get:function(){return this.timerModel.spent},set:function(e){this.timerModel.spent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.timeLimit},set:function(e){this.timeLimit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinishPage",{get:function(){return this.timeLimitPerPage},set:function(e){this.timeLimitPerPage=e},enumerable:!1,configurable:!0}),t.prototype.doTimer=function(e){if(this.onTimerTick.fire(this,{}),this.timeLimit>0&&this.timeLimit<=this.timeSpent&&(this.timeSpent=this.timeLimit,this.tryComplete()),e){var i=e.getMaxTimeToFinish();i>0&&i==e.timeSpent&&(this.isLastPage?this.tryComplete():this.nextPage())}},Object.defineProperty(t.prototype,"inSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this},t.prototype.getTextProcessor=function(){return this},t.prototype.getObjects=function(e,i){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(i)),n},t.prototype.setTriggerValue=function(e,i,n){if(e)if(n)this.setVariable(e,i);else{this.startSetValueFromTrigger();var o=new Re().getValueInfo({name:e,context:this.getValueGetterContext(),createObjects:!0});o.isFound&&o.question?o.question.value=i:e.indexOf(".")<0&&this.setValue(e,i),this.finishSetValueFromTrigger()}},t.prototype.copyTriggerValue=function(e,i,n){if(!(!e||!i)){var o=new Re().getValueInfo({name:i,context:this.getValueGetterContext(),createObjects:!0,isText:n,isDisplayValue:n});o.isFound&&this.setTriggerValue(e,w.getUnbindValue(o.value),!1)}},t.prototype.triggerExecuted=function(e){this.onTriggerExecuted.fire(this,{trigger:e})},Object.defineProperty(t.prototype,"isSettingValueFromTrigger",{get:function(){return this.setValueFromTriggerCounter>0},enumerable:!1,configurable:!0}),t.prototype.startSetValueFromTrigger=function(){this.setValueFromTriggerCounter++},t.prototype.finishSetValueFromTrigger=function(){this.setValueFromTriggerCounter--},t.prototype.startMovingQuestion=function(){this.isMovingQuestion=!0},t.prototype.stopMovingQuestion=function(){this.isMovingQuestion=!1},Object.defineProperty(t.prototype,"isQuestionDragging",{get:function(){return this.isMovingQuestion},enumerable:!1,configurable:!0}),t.prototype.startMovingPage=function(){this.isMovingPage=!0},t.prototype.stopMovingPage=function(){this.isMovingPage=!1},t.prototype.focusQuestion=function(e){return this.focusQuestionByInstance(this.getQuestionByName(e,!0))},t.prototype.focusQuestionByInstance=function(e,i){var n;if(i===void 0&&(i=!1),!e||!e.isVisible||!e.page)return!1;var o=(n=this.focusingQuestionInfo)===null||n===void 0?void 0:n.question;if(o===e)return!1;this.focusingQuestionInfo={question:e,onError:i};var s=this.currentSingleElement;this.skippedPages.push({from:s||this.currentPage,to:s?e:e.page});var a=this.activePage!==e.page&&!e.page.isStartPage;return a&&(this.currentPage=e.page),this.isSingleVisibleQuestion&&!this.isDesignMode&&(this.currentSingleElement=e),a||this.focusQuestionInfo(),!0},t.prototype.focusQuestionInfo=function(){var e,i=(e=this.focusingQuestionInfo)===null||e===void 0?void 0:e.question;i&&!i.isDisposed&&i.focus(this.focusingQuestionInfo.onError),this.focusingQuestionInfo=void 0},t.prototype.questionEditFinishCallback=function(e,i){var n=this.enterKeyAction||C.enterKeyAction;if(n=="loseFocus"&&i.target.blur(),n=="moveToNextEditor"){var o=this.currentPage.questions,s=o.indexOf(e);s>-1&&s<o.length-1?o[s+1].focus():i.target.blur()}},t.prototype.elementWrapperComponentNameCore=function(e,i,n,o,s){if(this.onElementWrapperComponentName.isEmpty)return e;var a={componentName:e,element:i,wrapperName:n,reason:o,item:s};return this.onElementWrapperComponentName.fire(this,a),a.componentName},t.prototype.elementWrapperDataCore=function(e,i,n,o,s){if(this.onElementWrapperComponentData.isEmpty)return e;var a={data:e,element:i,wrapperName:n,reason:o,item:s};return this.onElementWrapperComponentData.fire(this,a),a.data},t.prototype.getElementWrapperComponentName=function(e,i){var n=i==="logo-image"?"sv-logo-image":t.TemplateRendererComponentName;return this.elementWrapperComponentNameCore(n,e,"component",i)},t.prototype.getQuestionContentWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"content-component")},t.prototype.getRowWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"row")},t.prototype.getItemValueWrapperComponentName=function(e,i){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,i,"itemvalue",void 0,e)},t.prototype.getElementWrapperComponentData=function(e,i){return this.elementWrapperDataCore(e,e,"component",i)},t.prototype.getRowWrapperComponentData=function(e){return this.elementWrapperDataCore(e,e,"row")},t.prototype.getItemValueWrapperComponentData=function(e,i){return this.elementWrapperDataCore(e,i,"itemvalue",void 0,e)},t.prototype.getMatrixCellTemplateData=function(e){var i=e.question;return this.elementWrapperDataCore(i,i,"cell")},t.prototype.searchText=function(e){e&&(e=e.toLowerCase());for(var i=[],n=0;n<this.pages.length;n++)this.pages[n].searchText(e,i);return i},t.prototype.getSkeletonComponentName=function(e){return this.skeletonComponentName},Object.defineProperty(t.prototype,"layoutElements",{get:function(){var e=this;return this.getPropertyValue("layoutElements",void 0,function(){return e.createLayoutElements()})},enumerable:!1,configurable:!0}),t.prototype.createLayoutElements=function(){var e=this,i=new Array;return i.push({id:"timerpanel",template:"survey-timerpanel",component:"sv-timerpanel",getData:function(){return e.timerModel}}),i.push({id:"progress-buttons",component:"sv-progress-buttons",getData:function(){return e.progressBar},processResponsiveness:function(n){return e.progressBar.processResponsiveness&&e.progressBar.processResponsiveness(n)}}),i.push({id:"progress-questions",component:"sv-progress-questions",data:this}),i.push({id:"progress-pages",component:"sv-progress-pages",data:this}),i.push({id:"progress-correctquestions",component:"sv-progress-correctquestions",data:this}),i.push({id:"progress-requiredquestions",component:"sv-progress-requiredquestions",data:this}),i.push({id:"toc-navigation",component:"sv-navigation-toc",getData:function(){return e.tocModel},processResponsiveness:function(n){return e.tocModel.updateStickyTOCSize(e.rootElement)}}),i.push({id:"buttons-navigation",component:"sv-action-bar",getData:function(){return e.navigationBar}}),i.push({id:"buttons-navigation-top",component:"sv-action-bar",getData:function(){return e.navigationBar}}),i},t.prototype.addLayoutElement=function(e){var i=this.removeLayoutElement(e.id);return this.layoutElements.push(e),i},t.prototype.findLayoutElement=function(e){var i=this.layoutElements.filter(function(n){return n.id===e})[0];return i},t.prototype.removeLayoutElement=function(e){var i=this.findLayoutElement(e);if(i){var n=this.layoutElements.indexOf(i);this.layoutElements.splice(n,1)}return i},t.prototype.getContainerContent=function(e){for(var i=new Array,n=0,o=this.layoutElements;n<o.length;n++){var s=o[n];if(this.mode!=="display"&&Te(s.id,"timerpanel"))e==="header"&&this.isTimerPanelShowingOnTop&&!this.isStartPageActive&&i.push(s),e==="footer"&&this.isTimerPanelShowingOnBottom&&!this.isStartPageActive&&i.push(s);else if(this.state==="running"&&Te(s.id,this.progressBarComponentName)){if(this.questionsOnPageMode!="singlePage"||this.progressBarType=="questions"){var a=this.findLayoutElement("advanced-header"),l=a&&a.data,u=!l||l.hasBackground;Te(this.progressBarLocation,"aboveHeader")&&(u=!1),Te(this.progressBarLocation,"belowHeader")&&(u=!0),this.showTOC&&!(l&&l.hasBackground)&&this.isShowProgressBarOnTop&&!this.isStartPageActive?e==="center"&&(u?delete s.index:s.index=-150,i.push(s)):(e==="header"&&!u&&(s.index=-150,this.isShowProgressBarOnTop&&!this.isStartPageActive&&i.push(s)),e==="center"&&u&&(s.index&&delete s.index,this.isShowProgressBarOnTop&&!this.isStartPageActive&&i.push(s))),e==="footer"&&this.isShowProgressBarOnBottom&&!this.isStartPageActive&&i.push(s)}}else if(Te(s.id,"buttons-navigation-top"))e==="contentTop"&&this.isNavigationButtonsShowingOnTop&&i.push(s);else if(Te(s.id,"buttons-navigation"))e==="contentBottom"&&this.isNavigationButtonsShowingOnBottom&&i.push(s);else if(this.state==="running"&&Te(s.id,"toc-navigation")&&this.showTOC)e==="left"&&["left","both"].indexOf(this.tocLocation)!==-1&&i.push(s),e==="right"&&["right","both"].indexOf(this.tocLocation)!==-1&&i.push(s);else if(Te(s.id,"advanced-header")){if(this.state==="running"||this.state==="starting"||this.showHeaderOnCompletePage===!0&&this.state==="completed"){var l=s&&s.data;this.showTOC&&!(l&&l.hasBackground)?e==="contentTop"&&i.push(s):s.container===e&&i.push(s)}}else(Array.isArray(s.container)&&s.container.indexOf(e)!==-1||s.container===e)&&i.push(s)}return i.sort(function(f,y){return(f.index||0)-(y.index||0)}),i.forEach(function(f){f.getData&&(f.data=f.getData())}),i},t.prototype.processPopupVisiblityChanged=function(e,i,n){n?this.onScrollCallback=function(){i.hide()}:this.onScrollCallback=void 0,this.onPopupVisibleChanged.fire(this,{question:e,popup:i,visible:n})},t.prototype.processOpenDropdownMenu=function(e,i){var n=Object.assign({question:e},i);this.onOpenDropdownMenu.fire(this,n),i.menuType=n.menuType},t.prototype.getCssTitleExpandableSvg=function(){return null},t.prototype.createCustomChoiceItem=function(e){this.onCreateCustomChoiceItem.fire(this,e)},t.prototype.applyTheme=function(e){var i=this;if(e){if(Object.keys(e).forEach(function(o){o!=="header"&&(o==="isPanelless"?i.isCompact=e[o]:i[o]=e[o])}),"header"in e&&!e.headerView&&(this.headerView="advanced"),this.headerView!=="basic"){this.removeLayoutElement("advanced-header");var n=new Zt;n.fromTheme(e),this.insertAdvancedHeader(n)}this.themeChanged(e)}},t.prototype.themeChanged=function(e){this.getAllQuestions().forEach(function(i){return i.themeChanged(e)})},t.prototype.waitAndExecute=function(e){this.taskManager.waitAndExecute(e)},t.prototype.dispose=function(){if(this.unConnectEditingObj(),this.removeScrollEventListener(),this.destroyResizeObserver(),this.rootElement=void 0,this.layoutElements){for(var e=0;e<this.layoutElements.length;e++)this.layoutElements[e].data&&this.layoutElements[e].data!==this&&this.layoutElements[e].data.dispose&&this.layoutElements[e].data.dispose();this.layoutElements.splice(0,this.layoutElements.length)}if(r.prototype.dispose.call(this),this.editingObj=null,!!this.pages){this.currentPage=null;for(var e=0;e<this.pages.length;e++)this.pages[e].setSurveyImpl(void 0),this.pages[e].dispose();this.pages.splice(0,this.pages.length),this.disposeCallback&&this.disposeCallback()}},t.prototype._isElementShouldBeSticky=function(e){var i;if(!e)return!1;var n=(i=this.scrollerElement)===null||i===void 0?void 0:i.querySelector(e);return n?!!this.scrollerElement&&this.scrollerElement.scrollTop>0&&n.getBoundingClientRect().y<=this.scrollerElement.getBoundingClientRect().y:!1},Object.defineProperty(t.prototype,"rootScrollDisabled",{get:function(){return!(this.fitToContainer&&this.formScrollDisabled)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formScrollDisabled",{get:function(){return!this.backgroundImage||this.backgroundImageAttachment!=="fixed"},enumerable:!1,configurable:!0}),t.prototype.onScroll=function(){this.rootElement&&(this._isElementShouldBeSticky(".sv-components-container-center")?this.rootElement.classList&&this.rootElement.classList.add("sv-root--sticky-top"):this.rootElement.classList&&this.rootElement.classList.remove("sv-root--sticky-top"),this.tocModel&&this.tocModel.updateStickyTOCSize(this.rootElement)),this.onScrollCallback&&this.onScrollCallback()},t.prototype.addScrollEventListener=function(){var e=this;this.scrollHandler=function(){e.onScroll()},this.rootElement.addEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].addEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.scrollHandler)},t.prototype.removeScrollEventListener=function(){this.rootElement&&this.scrollHandler&&(this.rootElement.removeEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].removeEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.scrollHandler))},t.TemplateRendererComponentName="sv-template-renderer",t.platform="unknown",c([p()],t.prototype,"sjsVersion",void 0),c([p()],t.prototype,"$schema",void 0),c([p()],t.prototype,"completedCss",void 0),c([p()],t.prototype,"completedBeforeCss",void 0),c([p()],t.prototype,"loadingBodyCss",void 0),c([p()],t.prototype,"containerCss",void 0),c([p({onSet:function(e,i){i.updateCss()}})],t.prototype,"fitToContainer",void 0),c([p({onSet:function(e,i){if(e==="basic")i.removeLayoutElement("advanced-header");else{var n=i.findLayoutElement("advanced-header");if(!n){var o=new Zt;i.insertAdvancedHeader(o)}}}})],t.prototype,"headerView",void 0),c([p()],t.prototype,"showBrandInfo",void 0),c([p()],t.prototype,"enterKeyAction",void 0),c([p()],t.prototype,"lazyRenderFirstBatchSizeValue",void 0),c([p()],t.prototype,"surveyId",void 0),c([p()],t.prototype,"surveyPostId",void 0),c([p()],t.prototype,"clientId",void 0),c([p()],t.prototype,"cookieName",void 0),c([p()],t.prototype,"partialSendEnabled",void 0),c([p()],t.prototype,"sendResultOnPageNext",void 0),c([p()],t.prototype,"surveyShowDataSaving",void 0),c([p()],t.prototype,"autoFocusFirstQuestion",void 0),c([p()],t.prototype,"autoFocusFirstError",void 0),c([p()],t.prototype,"navigationButtonsLocation",void 0),c([p()],t.prototype,"showPrevButton",void 0),c([p({defaultValue:!0})],t.prototype,"showCompleteButton",void 0),c([p()],t.prototype,"showTOC",void 0),c([p()],t.prototype,"tocLocation",void 0),c([p()],t.prototype,"showTitle",void 0),c([p()],t.prototype,"showPageTitles",void 0),c([p()],t.prototype,"showCompletePage",void 0),c([p()],t.prototype,"navigateToUrl",void 0),c([p()],t.prototype,"requiredMark",void 0),c([p({returnValue:""})],t.prototype,"questionStartIndex",void 0),c([p()],t.prototype,"storeOthersAsComment",void 0),c([p()],t.prototype,"maxTextLength",void 0),c([p()],t.prototype,"maxCommentLength",void 0),c([p()],t.prototype,"autoAdvanceEnabled",void 0),c([p()],t.prototype,"autoAdvanceAllowComplete",void 0),c([p()],t.prototype,"checkErrorsMode",void 0),c([p()],t.prototype,"validateVisitedEmptyFields",void 0),c([p()],t.prototype,"autoGrowComment",void 0),c([p()],t.prototype,"allowResizeComment",void 0),c([p()],t.prototype,"commentAreaRows",void 0),c([p()],t.prototype,"textUpdateMode",void 0),c([p({onSetting:function(e){return e===!0?"onComplete":e===!1?"none":e}})],t.prototype,"clearInvisibleValues",void 0),c([p()],t.prototype,"keepIncorrectValues",void 0),c([p({localizable:{defaultStr:"emptySurvey",markdown:!0}})],t.prototype,"emptySurveyText",void 0),c([p({localizable:!0})],t.prototype,"logo",void 0),c([p()],t.prototype,"logoWidth",void 0),c([p()],t.prototype,"logoHeight",void 0),c([p()],t.prototype,"logoPosition",void 0),c([p()],t.prototype,"logoFit",void 0),c([p({defaultValue:{}})],t.prototype,"cssVariables",void 0),c([p()],t.prototype,"_isMobile",void 0),c([p()],t.prototype,"_isCompact",void 0),c([p({onSet:function(e,i){i.updateCss()}})],t.prototype,"backgroundImage",void 0),c([p()],t.prototype,"backgroundImageFit",void 0),c([p({onSet:function(e,i){i.updateCss()}})],t.prototype,"backgroundImageAttachment",void 0),c([p()],t.prototype,"backgroundOpacity",void 0),c([p()],t.prototype,"wrapperFormCss",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"startSurveyText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"pagePrevText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"pageNextText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"completeText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"previewText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"editText",void 0),c([p({defaultValue:"numTitleRequire",onSetting:function(e){return e!=="numRequireTitle"&&e!=="requireNumTitle"&&e!="numTitle"?"numTitleRequire":e}})],t.prototype,"questionTitlePattern",void 0),c([p({onSet:function(e,i){return i.updateVisibleIndexes()}})],t.prototype,"showPageNumbers",void 0),c([p({onSetting:function(e){return e.toLowerCase()}})],t.prototype,"progressBarLocation",void 0),c([p({onSetting:function(e){return e==="correctquestion"?"correctQuestion":e==="requiredquestion"?"requiredQuestion":e}})],t.prototype,"progressBarType",void 0),c([p({getDefaultValue:function(e){return e.progressBarType==="buttons"}})],t.prototype,"progressBarShowPageTitles",void 0),c([p()],t.prototype,"progressBarShowPageNumbers",void 0),c([p()],t.prototype,"progressBarInheritWidthFrom",void 0),c([p({onSetting:function(e){return e.toLowerCase()}})],t.prototype,"questionErrorLocation",void 0),c([p()],t.prototype,"questionDescriptionLocation",void 0),c([p()],t.prototype,"readOnly",void 0),c([p({defaultValue:"entireItem"})],t.prototype,"matraixDragHandleArea",void 0),c([p()],t.prototype,"questionOrder",void 0),c([p({defaultValue:!1})],t.prototype,"isCompleted",void 0),c([p({defaultValue:!1})],t.prototype,"isStartedState",void 0),c([p({defaultValue:!1})],t.prototype,"isCompletedBefore",void 0),c([p({defaultValue:!1})],t.prototype,"isLoading",void 0),c([p({defaultValue:!1})],t.prototype,"isNavigationBlocked",void 0),c([p({defaultValue:!0})],t.prototype,"validationEnabled",void 0),c([p()],t.prototype,"questionsOnPageMode",void 0),c([p()],t.prototype,"firstPageIsStartPage",void 0),c([p()],t.prototype,"showPreviewBeforeComplete",void 0),c([p()],t.prototype,"previewMode",void 0),c([p()],t.prototype,"rootCss",void 0),c([p({defaultValue:!1})],t.prototype,"clearDisabledChoices",void 0),c([p()],t.prototype,"showTimer",void 0),c([p()],t.prototype,"timerLocation",void 0),c([p({onSet:function(e,i){i.updateGridColumns()}})],t.prototype,"gridLayoutEnabled",void 0),c([p()],t.prototype,"widthMode",void 0),c([p()],t.prototype,"calculatedWidthMode",void 0),c([p()],t.prototype,"width",void 0),c([p({defaultValue:100,onSet:function(e,i,n){i.pages.forEach(function(o){return o.updateRootStyle()})}})],t.prototype,"widthScale",void 0),c([p()],t.prototype,"staticStartWidth",void 0),c([p()],t.prototype,"responsiveStartWidth",void 0),c([p({defaultValue:0})],t.prototype,"timeLimit",void 0),c([p({defaultValue:0})],t.prototype,"timeLimitPerPage",void 0),t})(kt);function Te(r,t){return!r||!t?!1:r.toUpperCase()===t.toUpperCase()}V.addClass("survey",[{name:"locale",choices:function(){return oe.getLocales(!0)},onGetValue:function(r){return r.locale==oe.defaultLocale?null:r.locale}},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo:file",serializationProperty:"locLogo"},{name:"logoWidth",default:"auto",minValue:0},{name:"logoHeight",default:"40px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"autoFocusFirstQuestion:boolean",alternativeName:"focusFirstQuestionAutomatic"},{name:"autoFocusFirstError:boolean",default:!0,alternativeName:"focusOnFirstError"},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem",isArray:!0},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page",isArray:!0,onSerializeValue:function(r){return r.originalPages||r.pages}},{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(r){return null},onSetValue:function(r,t,e){r.pages.splice(0,r.pages.length);var i=r.addNewPage("");e.toObject({questions:t},i,e?.options)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue",isArray:!0},{name:"sjsVersion",visible:!1},{name:"$schema",visible:!1},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName",{name:"partialSendEnabled:boolean",alternativeName:"sendResultOnPageNext"},{name:"showNavigationButtons:boolean",default:!0},{name:"navigationButtonsLocation",default:"bottom",choices:["top","bottom","topBottom"]},{name:"showPrevButton:boolean",default:!0,visibleIf:function(r){return r.showNavigationButtons!=="none"}},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletePage:boolean",default:!0,alternativeName:"showCompletedPage"},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem",isArray:!0},{name:"questionOrder",alternativeName:"questionsOrder",default:"initial",choices:["initial","random"]},{name:"matrixDragHandleArea",visible:!1,default:"entireItem",choices:["entireItem","icon"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"off",acceptedValues:[!1,!0],choices:["on","onPage","recursive","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar:boolean",default:!1,onSetValue:function(r,t,e){r&&r.setShowProgressBar(t)}},{name:"progressBarLocation",default:"auto",choices:["auto","aboveheader","belowheader","bottom","topbottom"],visibleIf:function(r){return r.showProgressBar}},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions"],visibleIf:function(r){return r.showProgressBar}},{name:"progressBarShowPageTitles:switch",visibleIf:function(r){return r.showProgressBar&&r.progressBarType==="pages"}},{name:"progressBarShowPageNumbers:switch",visibleIf:function(r){return r.showProgressBar&&r.progressBarType==="pages"}},{name:"progressBarInheritWidthFrom",default:"container",choices:["container","survey"],visibleIf:function(r){return r.showProgressBar&&r.progressBarType==="pages"}},{name:"showTOC:switch",default:!1},{name:"tocLocation",default:"left",choices:["left","right"],dependsOn:["showTOC"],visibleIf:function(r){return!!r&&r.showTOC}},{name:"readOnly:boolean"},{name:"mode",visible:!1,isSerializable:!1},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxCommentLength:number",default:0,minValue:0,alternativeName:"maxOthersLength"},{name:"autoAdvanceEnabled:boolean",alternativeName:"goNextPageAutomatic",onSetValue:function(r,t){t!=="autogonext"&&(t=w.isTwoValueEquals(t,!0)),t==="autogonext"&&(t=!0),r.setPropertyValue("autoAdvanceEnabled",t)}},{name:"autoAdvanceAllowComplete:boolean",default:!0,alternativeName:"allowCompleteSurveyAutomatic",visibleIf:function(r){return r.autoAdvanceEnabled===!0}},{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onComplete"]},{name:"validateVisitedEmptyFields:boolean",dependsOn:"checkErrorsMode",visibleIf:function(r){return r.checkErrorsMode==="onValueChanged"}},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"autoGrowComment:boolean",default:!1},{name:"allowResizeComment:boolean",default:!0},{name:"commentAreaRows:number",minValue:1},{name:"startSurveyText",serializationProperty:"locStartSurveyText",visibleIf:function(r){return r.firstPageIsStartPage}},{name:"pagePrevText",serializationProperty:"locPagePrevText",visibleIf:function(r){return r.showNavigationButtons!=="none"&&r.showPrevButton}},{name:"pageNextText",serializationProperty:"locPageNextText",visibleIf:function(r){return r.showNavigationButtons!=="none"}},{name:"completeText",serializationProperty:"locCompleteText",visibleIf:function(r){return r.showNavigationButtons!=="none"}},{name:"previewText",serializationProperty:"locPreviewText",visibleIf:function(r){return r.showPreviewBeforeComplete}},{name:"editText",serializationProperty:"locEditText",visibleIf:function(r){return r.showPreviewBeforeComplete}},{name:"requiredMark",default:"*",alternativeName:"requiredText"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:function(r){return!r||r.showQuestionNumbers!=="off"}},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredMark"],choices:function(r){return r?r.getQuestionTitlePatternOptions():[]}},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStartPage:boolean",default:!1,alternativeName:"firstPageIsStarted"},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["standard","singlePage","questionPerPage","inputPerPage"]},{name:"showPreviewBeforeComplete:boolean",default:!1,onSetValue:function(r,t,e){r&&r.setShowPreviewBeforeComplete(t)}},{name:"previewMode",default:"allQuestions",choices:["allQuestions","answeredQuestions"],visibleIf:function(r){return r.showPreviewBeforeComplete}},{name:"showTimer:boolean"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,enableIf:function(r){return r.showTimer}},{name:"timeLimitPerPage:number",alternativeName:"maxTimeToFinishPage",default:0,minValue:0,enableIf:function(r){return r.showTimer}},{name:"timerLocation",default:"top",choices:["top","bottom"],enableIf:function(r){return r.showTimer}},{name:"timerInfoMode",alternativeName:"showTimerPanelMode",default:"combined",choices:["page","survey","combined"],enableIf:function(r){return r.showTimer}},{name:"showTimerPanel",visible:!1,isSerializable:!1},{name:"widthMode",default:"auto",choices:["auto","static","responsive"]},{name:"gridLayoutEnabled:boolean",default:!1},{name:"width",visibleIf:function(r){return r.widthMode==="static"}},{name:"fitToContainer:boolean",default:!0,visible:!1},{name:"headerView",default:"basic",choices:["basic","advanced"],visible:!1},{name:"backgroundImage:file",visible:!1},{name:"backgroundImageFit",default:"cover",choices:["auto","contain","cover"],visible:!1},{name:"backgroundImageAttachment",default:"scroll",choices:["scroll","fixed"],visible:!1},{name:"backgroundOpacity:number",minValue:0,maxValue:1,default:1,visible:!1},{name:"showBrandInfo:boolean",default:!1,visible:!1}]);var on="other",Ct=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"choiceitem"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.hasElements?this.detailElements:[],!0)},Object.defineProperty(t.prototype,"choiceOwner",{get:function(){return this.locOwner},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportElements",{get:function(){var e;return((e=this.choiceOwner)===null||e===void 0?void 0:e.supportElementsInChoice())===!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCommentShowing",{get:function(){return this.getPropertyValue("isCommentShowing",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsCommentShowing=function(e){this.setPropertyValue("isCommentShowing",e)},Object.defineProperty(t.prototype,"supportComment",{get:function(){var e=this.locOwner;return!e||!e.supportMultipleComment?!1:e.supportMultipleComment(this)},enumerable:!1,configurable:!0}),t.prototype.isPropertyStoredInHash=function(e){return e==="elements"?!this.hasElements:r.prototype.isPropertyStoredInHash.call(this,e)},t.prototype.canAddPpropertyToJSON=function(e){return e.name==="commentPlaceholder"?!!this.getLocalizableString("commentPlaceholder"):r.prototype.canAddPpropertyToJSON.call(this,e)},t.prototype.onLocOwnerChanged=function(){this.showCommentArea&&!this.supportComment&&(this.showCommentArea=!1),this.setPanelSurvey(this.panelValue)},Object.defineProperty(t.prototype,"onExpandPanelAtDesign",{get:function(){return this.onExpandPanelAtDesignValue||(this.onExpandPanelAtDesignValue=new se),this.onExpandPanelAtDesignValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanelShowing",{get:function(){return!this.panelValue||!this.choiceOwner?!1:this.hasElements&&this.choiceOwner.isItemSelected(this)===!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasElements",{get:function(){var e=this.panelValue;return!!e&&e.elements.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.panelValue||(this.panelValue=this.createPanel()),this.panelValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanelCreated",{get:function(){return!!this.panelValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this.panel.elements},enumerable:!1,configurable:!0}),t.prototype.panelFirstRendering=function(){this.hasElements&&this.isPanelShowing&&this.panel.onFirstRendering()},t.prototype.createPanel=function(){var e=V.createClass("panel");return e.renderWidth="100%",e.isInteractiveDesignElement=!1,e.showTitle=!1,e.isInternalNested=!0,e.choiceItem=this,this.setPanelSurvey(e),e},t.prototype.setPanelSurvey=function(e){var i;if(e&&!e.survey){e.selectedElementInDesign=this.choiceOwner;var n=(i=this.choiceOwner)===null||i===void 0?void 0:i.getSurvey();n&&(e.name="choicePanel"+e.uniqueId,e.parent=this.choiceOwner.parent,e.setSurveyImpl(n))}},t.prototype.dispose=function(){var e;r.prototype.dispose.call(this),(e=this.panelValue)===null||e===void 0||e.dispose(),this.panelValue=void 0},c([p({onSetting:function(e,i){return i.supportComment?e:!1}})],t.prototype,"showCommentArea",void 0),c([p()],t.prototype,"isCommentRequired",void 0),c([p({localizable:!0})],t.prototype,"commentPlaceholder",void 0),t})(q),sn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isRunningChoicesValue=!1,i.isFirstLoadChoicesFromUrl=!0,i.isUpdatingChoicesDependedQuestions=!1,i._renderedChoices=[],i.renderedChoicesAnimation=new Ae(i.getRenderedChoicesAnimationOptions(),function(n){i._renderedChoices=n,i.renderedChoicesChangedCallback&&i.renderedChoicesChangedCallback()},function(){return i._renderedChoices}),i.headItemsCount=0,i.footItemsCount=0,i.createItemValues("choices"),i.createNewArray("visibleChoices",function(){return i.updateRenderedChoices()},function(){return i.updateRenderedChoices()}),i}return Object.defineProperty(t.prototype,"waitingChoicesByURL",{get:function(){return!this.isChoicesLoaded&&this.hasChoicesUrl},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["choices","customChoices","choicesFromQuestion","choicesFromQuestionMode","choiceValuesFromQuestion","choiceTextsFromQuestion","showOtherItem","showNoneItem","showRefuseItem","showDontKnowItem","isUsingRestful","isMessagePanelVisible","choicesOrder"];o.indexOf(e)>-1&&(e!=="choices"||!this.filterItems())&&this.onVisibleChoicesChanged(),e==="hideIfChoicesEmpty"&&this.onVisibleChanged(),e==="selectedItemValues"&&this.onSelectedItemValuesChangedHandler(n),(e==="choicesVisibleIf"||e==="choicesEnableIf")&&this.filterItems()},t.prototype.getType=function(){return"selectbase"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.choices,!0)},t.prototype.dispose=function(){r.prototype.dispose.call(this);var e=this.getQuestionWithChoices();e&&e.removeDependedQuestion(this);var i=this.commentAreaModelValues;i&&Object.keys(i).forEach(function(n){i[n].dispose()}),this.doForPanels(void 0,function(n){return n.dispose()})},t.prototype.supportElementsInChoice=function(){return!1},t.prototype.getPanels=function(){if(!this.supportElementsInChoice())return r.prototype.getPanels.call(this);var e=new Array;return this.choices.forEach(function(i){i.isPanelCreated&&e.push(i.panel)}),e},t.prototype.getVisiblePanels=function(e){if(!this.supportElementsInChoice())return null;var i=new Array;return this.choices.forEach(function(n){n.isPanelCreated&&n.isPanelShowing===e&&i.push(n.panel)}),i},t.prototype.doForPanels=function(e,i){var n=e!==void 0?this.getVisiblePanels(e):this.getPanels();Array.isArray(n)&&n.forEach(i)},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){e.push(this),n&&this.supportElementsInChoice()&&this.choices.forEach(function(s){s.hasElements&&(!i||s.isPanelShowing)&&s.panel.questions.forEach(function(a){return a.addNestedQuestion(e,i,n,o)})})},t.prototype.getElementsInDesign=function(e){if(e===void 0&&(e=!1),!this.supportElementsInChoice())return[];var i=new Array;return this.choices.forEach(function(n){n.hasElements&&(e?i.push(n.panel):i.push.apply(i,n.elements))}),i},Object.defineProperty(t.prototype,"otherTextAreaModel",{get:function(){return this.getCommentTextAreaModel(this.otherItem)},enumerable:!1,configurable:!0}),t.prototype.getCommentTextAreaModel=function(e){var i=e?.value;if(i===void 0)return null;this.commentAreaModelValues||(this.commentAreaModelValues={});var n=this.commentAreaModelValues;return n[i]||(n[i]=new Ut(this.getOtherTextAreaOptions(e))),n[i]},t.prototype.getOtherTextAreaOptions=function(e){var i=this,n={question:this,id:function(){return i.getItemCommentId(e)},propertyNames:[this.getCommentPropertyValue(e)],className:function(){return i.cssClasses.comment},placeholder:function(){return i.getCommentPlaceholder(e)},isDisabledAttr:function(){return i.isInputReadOnly||!1},rows:function(){return i.commentAreaRows},maxLength:function(){return i.getOthersMaxLength()},autoGrow:function(){return i.survey&&i.survey.autoGrowComment},ariaRequired:function(){return i.ariaRequired||i.a11y_input_ariaRequired},ariaLabel:function(){return i.ariaLabel||i.a11y_input_ariaLabel},getTextValue:function(){return i.getCommentValueCore(e)},onTextAreaChange:function(o){i.onOtherValueChange(e,o)},onTextAreaInput:function(o){i.onOtherValueInput(e,o)}};return n},t.prototype.getCommentPlaceholder=function(e){if(e.commentPlaceholder)return e.commentPlaceholder;if(this.isOtherItemByValue(e))return this.otherPlaceholder;var i=this.commentPlaceholder;return new yt(e).processText(i,!0)},t.prototype.resetDependedQuestion=function(){this.choicesFromQuestion=""},Object.defineProperty(t.prototype,"otherId",{get:function(){return this.getItemCommentId(this.otherItem)},enumerable:!1,configurable:!0}),t.prototype.getItemCommentId=function(e){return this.id+"_"+e.uniqueId},t.prototype.getCommentElementsId=function(){return[this.commentId,this.otherId]},t.prototype.getItemValueType=function(){return"choiceitem"},t.prototype.createItemValue=function(e,i){var n=this.createChoiceItem(e);return n.locOwner=this,i&&(n.text=i),n},t.prototype.createChoiceItem=function(e){return V.createClass(this.getItemValueType(),{value:e})},t.prototype.validateElementCore=function(e){e.isOnValueChanged!==!0&&this.getClearIfInvisible()!=="none"&&this.clearIncorrectValues();var i=!0;return this.doForPanels(!0,function(n){i&&(i=n.validateElement(e))}),r.prototype.validateElementCore.call(this,e)&&i},Object.defineProperty(t.prototype,"isUsingCarryForward",{get:function(){return!!this.carryForwardQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"carryForwardQuestionType",{get:function(){return this.getPropertyValue("carryForwardQuestionType")},enumerable:!1,configurable:!0}),t.prototype.setCarryForwardQuestionType=function(e,i){var n=e?"select":i?"array":void 0;this.setPropertyValue("carryForwardQuestionType",n)},Object.defineProperty(t.prototype,"isUsingRestful",{get:function(){return this.getPropertyValueWithoutDefault("isUsingRestful")||!1},enumerable:!1,configurable:!0}),t.prototype.updateIsUsingRestful=function(){this.setPropertyValueDirectly("isUsingRestful",this.hasChoicesUrl)},t.prototype.supportGoNextPageError=function(){return!this.isOtherSelected||!!this.otherValue},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.choicesOrder!=="none"&&(this.updateVisibleChoices(),this.onVisibleChoicesChanged())},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.choicesFromUrl&&(q.locStrsChanged(this.choicesFromUrl),q.locStrsChanged(this.visibleChoices)),this.isUsingCarryForward&&q.locStrsChanged(this.visibleChoices)},t.prototype.updatePrevOtherErrorValue=function(e){var i=this.otherValue;e!==i&&(this.prevOtherErrorValue=i)},Object.defineProperty(t.prototype,"otherValue",{get:function(){return this.getStoreOthersAsComment()?this.getQuestionComment():this.otherValueCore},set:function(e){e=this.getTrimmedComment(e),!this.isSettingComment&&this.otherValue!==e&&(this.onUpdateCommentOnAutoOtherMode(e),this.updatePrevOtherErrorValue(e),this.isSettingComment=!0,this.getStoreOthersAsComment()?this.setNewComment(e):(this.otherValueCore=e,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.getValueOnSettingOther(e))),this.isSettingComment=!1,this.updateChoicesDependedQuestions())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherValueCore",{get:function(){return this.getPropertyValue("otherValue")},set:function(e){this.setPropertyValue("otherValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherItem",{get:function(){return this.otherItemValue||(this.otherItemValue=this.createBuiltInItem(on,"otherText","otherItemText",function(e){e.setPropertyValue("showCommentArea",!0),e.isCommentRequired=!0})),this.otherItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOtherSelected",{get:function(){return this.showOtherItem&&this.isOtherValue(this.renderedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNoneSelected",{get:function(){return this.showNoneItem&&this.getIsItemValue(this.renderedValue,this.noneItem)},enumerable:!1,configurable:!0}),t.prototype.supportMultipleComment=function(e){return!0},t.prototype.isCommentShowing=function(e){return e&&e.showCommentArea&&this.isItemSelected(e)},t.prototype.getCommentValue=function(e){return this.isCommentShowing(e)&&this.getCommentValueCore(e)||""},t.prototype.setCommentValue=function(e,i){this.isCommentShowing(e)&&this.setCommentValueCore(e,i)},Object.defineProperty(t.prototype,"commentPropertyValue",{get:function(){return"comment"},enumerable:!1,configurable:!0}),t.prototype.getCommentValueCore=function(e){return this.isOtherItemByValue(e)?this.otherValue:this.getPropertyValue(this.getCommentPropertyValue(e),this.getCommentValueByItem(e))||""},t.prototype.getCommentValueByItem=function(e){var i=this.value;return typeof i=="object"&&i[this.commentPropertyValue]||""},t.prototype.setCommentValueCore=function(e,i){this.isOtherItemByValue(e)?this.otherValue=i:(this.setCommentPropertyValue(e,i),this.isItemSelectedCore(e)&&(i?this.value={value:e.value,comment:i}:this.value=e.value))},t.prototype.setCommentPropertyValue=function(e,i){this.setPropertyValue(this.getCommentPropertyValue(e),i)},t.prototype.isOtherItemByValue=function(e){return this.isOtherValue(e.value)},t.prototype.getCommentPropertyValue=function(e){return this.isOtherItemByValue(e)?this.getStoreOthersAsComment()?"comment":"otherValue":"other_"+e.uniqueId},Object.defineProperty(t.prototype,"hasNone",{get:function(){return this.showNoneItem},set:function(e){this.showNoneItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneItem",{get:function(){return this.noneItemValue||(this.noneItemValue=this.createBuiltInNoneItem(C.noneItemValue,"noneText","noneItemText")),this.noneItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneText",{get:function(){return this.getLocStringText(this.locNoneText)},set:function(e){this.setLocStringText(this.locNoneText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoneText",{get:function(){return this.noneItem.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseItem",{get:function(){return this.refuseItemValue||(this.refuseItemValue=this.createBuiltInNoneItem(C.refuseItemValue,"refuseText","refuseItemText")),this.refuseItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseText",{get:function(){return this.getLocStringText(this.locRefuseText)},set:function(e){this.setLocStringText(this.locRefuseText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRefuseText",{get:function(){return this.refuseItem.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowItem",{get:function(){return this.dontKnowItemValue||(this.dontKnowItemValue=this.createBuiltInNoneItem(C.dontKnowItemValue,"dontKnowText","dontKnowItemText")),this.dontKnowItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowText",{get:function(){return this.getLocStringText(this.locDontKnowText)},set:function(e){this.setLocStringText(this.locDontKnowText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDontKnowText",{get:function(){return this.dontKnowItem.locText},enumerable:!1,configurable:!0}),t.prototype.createBuiltInNoneItem=function(e,i,n){return this.createBuiltInItem(e,i,n,function(o){return o.isExclusive=!0})},t.prototype.createBuiltInItem=function(e,i,n,o){var s=this.createChoiceItem(e),a=this.createLocalizableString(i,s,!0,n);return s.setLocText(a),o&&o(s),s.locOwner=this,s},t.prototype.surveyChoiceItemVisibilityChange=function(){this.filterItems()},t.prototype.addUsedLocales=function(e){r.prototype.addUsedLocales.call(this,e),this.doForPanels(void 0,function(i){i.addUsedLocales(e)})},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.runItemsEnableCondition(e),this.runItemsCondition(e),this.choices.forEach(function(i){i.runConditionCore(e)}),this.doForPanels(void 0,function(i){i.runCondition(e)})},t.prototype.isTextValue=function(){return!0},t.prototype.setDefaultIntoValue=function(e){!this.isValueEmpty(e)&&this.showOtherItem&&this.hasUnknownValue(e,!0)?this.setDefaultUnknownValue(e):r.prototype.setDefaultIntoValue.call(this,e)},t.prototype.setDefaultUnknownValue=function(e){this.renderedValue=this.setOtherValueIntoValue(e),this.otherValue=e},t.prototype.valueToData=function(e){return w.isValueEmpty(e)?e:Array.isArray(e)?e.length>0?e[0]:void 0:e},t.prototype.filterItems=function(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredProperties();return this.runItemsEnableCondition(e),this.runItemsCondition(e)},t.prototype.runItemsCondition=function(e){var i=this.runConditionsForItems(e);return this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),i&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),i},t.prototype.runItemsEnableCondition=function(e){var i=this,n=this.getChoicesCondition("choicesEnableIf"),o=q.runEnabledConditionsForItems(this.activeChoices,n,e,function(s,a){return a&&i.onEnableItemCallBack(s)});o&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()},t.prototype.onAfterRunItemsEnableCondition=function(){},t.prototype.onEnableItemCallBack=function(e){return!0},t.prototype.onSelectedItemValuesChangedHandler=function(e){var i;(i=this.survey)===null||i===void 0||i.loadedChoicesFromServer(this)},t.prototype.getItemIfChoicesNotContainThisValue=function(e,i){return this.waitingChoicesByURL?this.createItemValue(e,i):null},t.prototype.getSingleSelectedItem=function(){var e=this.selectedItemValues;if(this.isEmpty())return null;var i=this.getItemByValue(this.value);return this.onGetSingleSelectedItem(i),!i&&(!e||this.value!=e.id)&&this.updateSelectedItemValues(),i||e||(this.isOtherSelected?this.otherItem:this.getItemIfChoicesNotContainThisValue(this.value))},t.prototype.onGetSingleSelectedItem=function(e){},t.prototype.getMultipleSelectedItems=function(){return[]},t.prototype.getChoicesCondition=function(e){var i=this.getExpressionFromSurvey(e);return i?new ge(i):null},t.prototype.canSurveyChangeItemVisibility=function(){return!!this.survey&&this.survey.canChangeChoiceItemsVisibility()},t.prototype.changeItemVisibility=function(){var e=this;return this.canSurveyChangeItemVisibility()?function(i,n){return e.survey.getChoiceItemVisibility(e,i,n)}:null},t.prototype.runConditionsForItems=function(e){this.filteredChoicesValue=[];var i=this.changeItemVisibility(),n=this.areInvisibleElementsShowing?null:this.getChoicesCondition("choicesVisibleIf"),o=this.activeChoices;return q.runConditionsForItems(o,this.getFilteredChoices(),n,e,!this.survey||!this.survey.areInvisibleElementsShowing,function(s,a){return i?i(s,a):a})||this.isCarryForwardChanged(o)},t.prototype.isCarryForwardChanged=function(e){if(!this.isUsingCarryForward)return!1;var i=this.visibleChoices;if(i.length!==e.length)return!0;for(var n=0;n<e.length;n++)if(i[n].value!==e[n].value)return!0;return!1},t.prototype.isOtherValue=function(e){return Array.isArray(e)?e.indexOf(on)>-1:e===on},t.prototype.getIsItemValue=function(e,i){return e===i.value},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.renderedValueToDataCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.createRestful=function(){return new qe},t.prototype.getQuestionComment=function(){return this.showCommentArea?r.prototype.getQuestionComment.call(this):this.otherValueCore?this.otherValueCore:this.showCommentArea||this.getStoreOthersAsComment()?r.prototype.getQuestionComment.call(this):this.otherValueCore},t.prototype.selectOtherValueFromComment=function(e){e&&(this.prevIsOtherSelected=!0),this.value=e?this.otherItem.value:void 0},t.prototype.onUpdateCommentOnAutoOtherMode=function(e){if(this.autoOtherMode){var i=this.isOtherSelected;(!i&&e||i&&!e)&&this.selectOtherValueFromComment(!!e)}},t.prototype.getValueOnSettingOther=function(e){var i=this.rendredValueToData(this.renderedValue);if(this.showCommentArea||this.getStoreOthersAsComment())return i;var n=this.getItemByValue(e);if(!n||n===this.otherItemValue)return i;if(this.otherValueCore="",!Array.isArray(i))return e;var o=i.indexOf(this.otherItem.value);return o>-1&&i.splice(o,1),i.indexOf(e)<0&&i.push(e),i},t.prototype.clearValue=function(e,i){r.prototype.clearValue.call(this,e,i),this.selectedItemValues=void 0},Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.getPropertyValue("renderedValue",null)},set:function(e){this.setRenderedValue(e,!0)},enumerable:!1,configurable:!0}),t.prototype.setRenderedValue=function(e,i){this.setPropertyValue("renderedValue",e),i&&!this.isReadOnlyAttr&&(e=this.rendredValueToData(e),this.isTwoValueEquals(e,this.value)||(this.value=e)),this.onRenderedValueChagned(i)},t.prototype.onRenderedValueChagned=function(e){var i=this;this.choices.forEach(function(n){return i.updateItemIsCommentShowing(n,e)}),this.showOtherItem&&this.updateItemIsCommentShowing(this.otherItem,e)},t.prototype.updateItemIsCommentShowing=function(e,i){if(e.showCommentArea){var n=this.isCommentShowing(e);e.setIsCommentShowing(n),!n&&i&&this.setCommentValueCore(e,void 0)}},t.prototype.selectItem=function(e){if(!(this.isReadOnlyAttr||!e)){var i=this.getSingleSelectedItem();this.renderedValue=e.value,i&&i!==this.getSingleSelectedItem()&&this.onItemDeselected(i),this.onItemSelected(e)}},t.prototype.onItemSelected=function(e){e.showCommentArea&&this.focusOtherComment(e)},t.prototype.onItemDeselected=function(e){e.showCommentArea&&this.setCommentValueCore(e,void 0)},t.prototype.setQuestionValue=function(e,i,n){i===void 0&&(i=!0),n===void 0&&(n=!0),!(this.isLoadingFromJson||this.isTwoValueEquals(this.value,e))&&(this.setRenderedValue(this.rendredValueFromData(e),!1),r.prototype.setQuestionValue.call(this,e,i),this.updateChoicesDependedQuestions(),this.updateChoicesPanels(),!this.showCommentArea&&n&&!this.isOtherSelected&&this.otherValue&&(this.makeCommentEmpty=!0,this.otherValueCore="",this.setPropertyValue("comment","")))},t.prototype.setValueCore=function(e){r.prototype.setValueCore.call(this,e),this.makeCommentEmpty&&(this.setCommentIntoData(""),this.makeCommentEmpty=!1)},t.prototype.setNewValue=function(e){var i;e=this.valueFromData(e),(!this.isRunningChoices&&!(!((i=this.choicesByUrlValue)===null||i===void 0)&&i.isWaitingForParameters)||!this.isValueEmpty(e))&&(this.cachedValueForUrlRequests=e),r.prototype.setNewValue.call(this,e)},t.prototype.valueFromData=function(e){var i=this.getItemByValue(e,this.activeChoices);return i?this.getChoiceValue(i,e,!1):r.prototype.valueFromData.call(this,e)},t.prototype.updateChoicesPanels=function(){!this.supportElementsInChoice()||!this.wasRendered||(this.choices.forEach(function(e){e.isDescendantOf("choiceitem")&&e.panelFirstRendering()}),this.isClearValueOnHidden&&this.clearValuesInVisiblePanels("onHiddenContainer"))},t.prototype.getChoiceValue=function(e,i,n){var o=typeof i=="object",s=o?i[this.commentPropertyValue]:"",a=!w.isValueEmpty(s);if(o&&e.showCommentArea&&(n||a)){var l={value:e.value};return a&&(l[this.commentPropertyValue]=s),l}return e.value},t.prototype.getItemByValue=function(e,i){var n=i||this.visibleChoices;return e&&typeof e=="object"&&!w.isValueEmpty(e.value)&&(e=e.value),q.getItemByValue(n,e)},t.prototype.rendredValueFromData=function(e){if(e&&typeof e=="object"&&!w.isValueEmpty(e.value)){var i=this.getItemByValue(e.value);i&&(this.setCommentPropertyValue(i,e[this.commentPropertyValue]),e=e.value)}return this.getStoreOthersAsComment()||!this.showOtherItem?e:this.renderedValueFromDataCore(e)},t.prototype.getValueFromValueWithComment=function(e){return e&&typeof e=="object"&&!w.isValueEmpty(e.value)?e.value:e},t.prototype.rendredValueToData=function(e){return this.getStoreOthersAsComment()?e:this.renderedValueToDataCore(e)},t.prototype.renderedValueFromDataCore=function(e){return this.hasUnknownValue(e,!0,!1)?(this.otherValue=e,this.otherItem.value):this.valueFromData(e)},t.prototype.renderedValueToDataCore=function(e){return this.isOtherValue(e)&&this.needConvertRenderedOtherToDataValue()&&(e=this.otherValue),e},t.prototype.needConvertRenderedOtherToDataValue=function(){var e=this.otherValue;return this.getTrimmedComment(e)?this.hasUnknownValue(e,!0,!1):!1},t.prototype.getIsQuestionReady=function(){return r.prototype.getIsQuestionReady.call(this)&&!this.waitingChoicesByURL&&!this.waitingGetChoiceDisplayValueResponse},t.prototype.updateSelectedItemValues=function(){var e=this;if(!(this.waitingGetChoiceDisplayValueResponse||!this.survey||this.isEmpty())){var i=this.value,n=Array.isArray(i)?i:[i],o=n.some(function(s){return!e.getItemByValue(s,e.choices)});o&&(this.choicesLazyLoadEnabled||this.hasChoicesUrl)&&(this.waitingGetChoiceDisplayValueResponse=!0,this.updateIsReady(),this.survey.getChoiceDisplayValue({question:this,values:n,setItems:function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(e.waitingGetChoiceDisplayValueResponse=!1,!s||!s.length){e.updateIsReady();return}var u=s.map(function(f,y){return e.createItemValue(n[y],f)});e.setCustomValuesIntoItems(u,a),Array.isArray(i)?e.selectedItemValues=u:e.selectedItemValues=u[0],e.updateIsReady(),e.onSelectedItemValuesUpdated()}}))}},t.prototype.onSelectedItemValuesUpdated=function(){},t.prototype.setCustomValuesIntoItems=function(e,i){!Array.isArray(i)||i.length===0||i.forEach(function(n){var o=n.values,s=n.propertyName;if(Array.isArray(o))for(var a=0;a<e.length&&a<o.length;a++)e[a][s]=o[a]})},t.prototype.hasUnknownValue=function(e,i,n,o){if(i===void 0&&(i=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!Array.isArray(e))return this.hasUnknownValueItem(e,i,n,o);for(var s=0;s<e.length;s++)if(this.hasUnknownValueItem(e[s],i,n,o))return!0;return!1},t.prototype.hasUnknownValueItem=function(e,i,n,o){if(i===void 0&&(i=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!o&&this.isValueEmpty(e)||i&&this.isOtherValue(e)||this.showNoneItem&&e==this.noneItem.value||this.showRefuseItem&&e==this.refuseItem.value||this.showDontKnowItem&&e==this.dontKnowItem.value)return!1;var s=n?this.getFilteredChoices():this.activeChoices;return this.getItemByValue(e,s)==null},t.prototype.isValueDisabled=function(e){var i=this.getItemByValue(e,this.getFilteredChoices());return!!i&&!i.isEnabled},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.updateVisibleChoices()},Object.defineProperty(t.prototype,"customChoices",{get:function(){return this.getItemValuesPropertyValue("customChoices")},set:function(e){this.setArrayPropertyValue("customChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesByUrl",{get:function(){var e=this;return this.getPropertyValue("choicesByUrl",void 0,function(){return e.createChoicesByUrl()})},set:function(e){if(e){var i=this.choicesByUrlValue;i&&(i.dispose(),this.setPropertyValueDirectly("choicesByUrl",this.createChoicesByUrl())),this.choicesByUrl.fromJSON(e.toJSON())}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesByUrlValue",{get:function(){return this.getPropertyValueWithoutDefault("choicesByUrl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChoicesUrlEmpty",{get:function(){var e=this.choicesByUrlValue;return!e||e.isEmpty},enumerable:!1,configurable:!0}),t.prototype.createChoicesByUrl=function(){var e=this,i=this.createRestful();return i.owner=this,i.loadingOwner=this,i.createItemValue=function(n){return e.createItemValue(n)},i.beforeSendRequestCallback=function(){e.onBeforeSendRequest()},i.getResultCallback=function(n){e.onLoadChoicesFromUrl(n)},i.updateResultCallback=function(n,o){return e.survey?e.survey.updateChoicesFromServer(e,n,o):n},i},Object.defineProperty(t.prototype,"choicesFromQuestion",{get:function(){return this.getPropertyValue("choicesFromQuestion")},set:function(e){var i=this.getQuestionWithChoices();this.isLockVisibleChoices=!!i&&i.name===e,i&&i.name!==e&&(i.removeDependedQuestion(this),this.isInDesignMode&&!this.isLoadingFromJson&&e&&this.setPropertyValue("choicesFromQuestion",void 0)),this.setPropertyValue("choicesFromQuestion",e),this.isLockVisibleChoices=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherText",{get:function(){return this.getLocStringText(this.locOtherText)},set:function(e){this.setLocStringText(this.locOtherText,e),this.onVisibleChoicesChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherText",{get:function(){return this.otherItem.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPlaceHolder",{get:function(){return this.otherPlaceholder},set:function(e){this.otherPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){return this.getPropertyValue("visibleChoices")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChoices",{get:function(){for(var e=[],i=this.visibleChoices,n=0;n<i.length;n++)i[n].isEnabled&&e.push(i[n]);return e},enumerable:!1,configurable:!0}),t.prototype.updateVisibleChoices=function(){if(!(this.isLoadingFromJson||this.isDisposed)){var e=this.calcVisibleChoices(),i=new Array;(e||[]).forEach(function(o){return i.push(o)});var n=this.visibleChoices;(!this.isTwoValueEquals(n,i)||this.choicesLazyLoadEnabled)&&(this.setArrayPropertyDirectly("visibleChoices",i),this.updateRenderedChoices())}},t.prototype.calcVisibleChoices=function(){var e=new Array;return this.customChoices.forEach(function(i){return e.push(i)}),this.getFilteredChoices().forEach(function(i){return e.push(i)}),e=this.sortArrayByChoicesOrder(e),this.addToVisibleChoices(e,this.isAddDefaultItems),e},t.prototype.setCanShowOptionItemCallback=function(e){this.canShowOptionItemCallback=e,e&&this.onVisibleChoicesChanged()},Object.defineProperty(t.prototype,"newItem",{get:function(){return this.newItemValue},enumerable:!1,configurable:!0}),t.prototype.addToVisibleChoices=function(e,i){this.headItemsCount=0,this.footItemsCount=0,this.isEmptyActiveChoicesInDesign||this.addNewItemToVisibleChoices(e,i);var n=new Array;this.addNonChoicesItems(n,i),n.sort(function(a,l){return a.index===l.index?0:a.index<l.index?-1:1});for(var o=0;o<n.length;o++){var s=n[o];s.index<0?(e.splice(o,0,s.item),this.headItemsCount++):(e.push(s.item),this.footItemsCount++)}},t.prototype.addNewItemToVisibleChoices=function(e,i){var n=this;i&&(this.newItemValue||(this.newItemValue=this.createItemValue("newitem"),this.newItemValue.isGhost=!0,this.newItemValue.registerFunctionOnPropertyValueChanged("isVisible",function(){n.updateVisibleChoices()})),this.newItemValue.isVisible&&!this.isUsingCarryForward&&this.canShowOptionItem(function(){return n.newItemValue},i,!1)&&(this.footItemsCount=1,e.push(this.newItemValue)))},t.prototype.addNonChoicesItems=function(e,i){var n=this;this.supportNone()&&this.addNonChoiceItem(e,function(){return n.noneItem},i,this.showNoneItem,C.specialChoicesOrder.noneItem),this.supportRefuse()&&this.addNonChoiceItem(e,function(){return n.refuseItem},i,this.showRefuseItem,C.specialChoicesOrder.refuseItem),this.supportDontKnow()&&this.addNonChoiceItem(e,function(){return n.dontKnowItem},i,this.showDontKnowItem,C.specialChoicesOrder.dontKnowItem),this.supportOther()&&this.addNonChoiceItem(e,function(){return n.otherItem},i,this.showOtherItem,C.specialChoicesOrder.otherItem)},t.prototype.addNonChoiceItem=function(e,i,n,o,s){var a=this.canShowOptionItem(i,n,o);a&&s.forEach(function(l){return e.push({index:l,item:a})})},t.prototype.canShowOptionItem=function(e,i,n){var o=this.canSurveyChangeItemVisibility();if(!i&&!n&&!o)return null;var s=e(),a=n||i&&(this.canShowOptionItemCallback?this.canShowOptionItemCallback(s):!0);if(o){var l=this.changeItemVisibility();a=l(s,a)}return a?s:null},t.prototype.isItemInList=function(e){return e===this.otherItemValue?this.showOtherItem:e===this.noneItemValue?this.showNoneItem:e===this.refuseItemValue?this.showRefuseItem:e===this.dontKnowItemValue?this.showDontKnowItem:e!==this.newItemValue},Object.defineProperty(t.prototype,"isAddDefaultItems",{get:function(){return C.showDefaultItemsInCreator&&this.isInDesignMode&&!this.customWidget},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var i=this;e===void 0&&(e={includeEmpty:!0,includeQuestionTypes:!1});var n=r.prototype.getPlainData.call(this,e);if(n){var o=Array.isArray(this.value)?this.value:[this.value];n.isNode=!0,n.data=(n.data||[]).concat(o.map(function(s,a){var l=i.getItemByValue(s),u={name:a,title:i.getLocalizationString("choices_Choice"),value:s,displayValue:i.getChoicesDisplayValue(i.visibleChoices,s),getString:function(f){return i.getValueAsString(f)},isNode:!1};return l&&(e.calculations||[]).forEach(function(f){u[f.propertyName]=l[f.propertyName]}),i.isOtherSelected&&i.otherItemValue===l&&(u.isOther=!0,u.displayValue=i.otherValue),u}))}return n},t.prototype.getDisplayValueCore=function(e,i){return i=this.getValueFromValueWithComment(i),this.useDisplayValuesInDynamicTexts?this.getChoicesDisplayValue(this.visibleChoices,i):i},t.prototype.getDisplayValueEmpty=function(){return q.getTextOrHtmlByValue(this.visibleChoices,void 0)},t.prototype.getChoicesDisplayValue=function(e,i){if(this.isOtherValue(i))return this.otherValue?this.otherValue:this.locOtherText.textOrHtml;var n=this.getSingleSelectedItem();if(n&&this.isTwoValueEquals(n.value,i))return n.locText.textOrHtml;var o=q.getTextOrHtmlByValue(e,i);return o==""&&i?i:o},t.prototype.getDisplayArrayValue=function(e,i,n){for(var o=this,s=this.visibleChoices,a=[],l=[],u=0;u<i.length;u++)l.push(n?n(u):i[u]);if(w.isTwoValueEquals(this.value,l)&&this.getMultipleSelectedItems().forEach(function(y,b){return a.push(o.getItemDisplayValue(y,l[b]))}),a.length===0)for(var u=0;u<l.length;u++){var f=this.getChoicesDisplayValue(s,l[u]);f&&a.push(f)}return a.join(C.choicesSeparator)},t.prototype.getItemDisplayValue=function(e,i){if(this.isOtherItemByInstance(e)){if(this.showOtherItem&&this.showCommentArea&&i)return i;if(this.comment)return this.comment}return e.locText.textOrHtml},t.prototype.getFilteredChoices=function(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices},Object.defineProperty(t.prototype,"activeChoices",{get:function(){var e=this.getCarryForwardQuestion();return this.carryForwardQuestionType==="select"?(e.addDependedQuestion(this),this.getChoicesFromSelectQuestion(e)):this.carryForwardQuestionType==="array"?(e.addDependedQuestion(this),this.getChoicesFromArrayQuestion(e)):this.isEmptyActiveChoicesInDesign?[]:this.choicesFromUrl?this.choicesFromUrl:this.getChoices()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmptyActiveChoicesInDesign",{get:function(){return this.isInDesignMode&&(this.hasChoicesUrl||this.isMessagePanelVisible)},enumerable:!1,configurable:!0}),t.prototype.getCarryForwardQuestion=function(e){var i=this.findCarryForwardQuestion(e),n=this.getQuestionWithChoicesCore(i),o=n?null:this.getQuestionWithArrayValue(i);return this.setCarryForwardQuestionType(!!n,!!o),n||o?i:null},t.prototype.getIsReadyDependsOn=function(){var e=r.prototype.getIsReadyDependsOn.call(this);return this.carryForwardQuestion&&e.push(this.carryForwardQuestion),e},t.prototype.getQuestionWithChoices=function(){return this.getQuestionWithChoicesCore(this.findCarryForwardQuestion())},t.prototype.findCarryForwardQuestion=function(e){var i;return e||(e=this.data||((i=this.parentQuestion)===null||i===void 0?void 0:i.data)),this.carryForwardQuestion=null,this.choicesFromQuestion&&e&&(this.carryForwardQuestion=e.findQuestionByName(this.choicesFromQuestion)),this.carryForwardQuestion},t.prototype.getQuestionWithChoicesCore=function(e){return e&&e.visibleChoices&&V.isDescendantOf(e.getType(),"selectbase")&&e!==this?e:null},t.prototype.getQuestionWithArrayValue=function(e){return e&&e.isValueArray?e:null},t.prototype.getChoicesFromArrayQuestion=function(e){if(this.isInDesignMode)return[];var i=e.value;if(!Array.isArray(i))return[];for(var n=[],o=0;o<i.length;o++){var s=i[o];if(w.isValueObject(s)){var a=this.getValueKeyName(s);if(a&&!this.isValueEmpty(s[a])){var l=this.choiceTextsFromQuestion?s[this.choiceTextsFromQuestion]:void 0;n.push(this.createItemValue(s[a],l))}}}return n},t.prototype.getValueKeyName=function(e){if(this.choiceValuesFromQuestion)return this.choiceValuesFromQuestion;var i=Object.keys(e);return i.length>0?i[0]:void 0},t.prototype.getChoicesFromSelectQuestion=function(e){if(this.isInDesignMode)return[];for(var i=[],n=this.choicesFromQuestionMode=="selected"?!0:this.choicesFromQuestionMode=="unselected"?!1:void 0,o=e.visibleChoices,s=0;s<o.length;s++)if(!e.isBuiltInChoice(o[s])){if(n===void 0){i.push(this.copyChoiceItem(o[s]));continue}var a=e.isItemSelected(o[s]);(a&&n||!a&&!n)&&i.push(this.copyChoiceItem(o[s]))}return this.choicesFromQuestionMode==="selected"&&!this.showOtherItem&&e.isOtherSelected&&e.otherValue&&i.push(this.createItemValue(e.otherItem.value,e.otherValue)),i},t.prototype.copyChoiceItem=function(e){var i=this.createItemValue(e.value);return i.setData(e),i},Object.defineProperty(t.prototype,"hasActiveChoices",{get:function(){var e=this.visibleChoices;(!e||e.length==0)&&(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var i=0;i<e.length;i++)if(!this.isBuiltInChoice(e[i]))return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return!!e&&[this.otherItemValue,this.noneItemValue,this.refuseItemValue,this.dontKnowItemValue,this.newItemValue].indexOf(e)>-1},t.prototype.isNoneItem=function(e){return e.isExclusive===!0},t.prototype.getChoices=function(){return this.choices},Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.showCommentArea||this.showOtherItem},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return this.isSupportProperty("showOtherItem")},t.prototype.supportNone=function(){return this.isSupportProperty("showNoneItem")},t.prototype.supportRefuse=function(){return this.isSupportProperty("showRefuseItem")},t.prototype.supportDontKnow=function(){return this.isSupportProperty("showDontKnowItem")},t.prototype.isSupportProperty=function(e){return!this.isDesignMode||this.getPropertyByName(e).visible},t.prototype.onCheckForErrors=function(e,i,n){var o=this;if(r.prototype.onCheckForErrors.call(this,e,i,n),this.hasEmptyComments()&&(!i||this.prevOtherErrorValue)){var s=new Il(this.otherErrorText,this);s.onUpdateErrorTextCallback=function(a){a.text=o.otherErrorText},e.push(s)}},t.prototype.hasEmptyComments=function(){for(var e=this.visibleChoices,i=0;i<e.length;i++){var n=e[i];if(n.isCommentRequired&&this.isCommentShowing(n)&&!this.getCommentValue(e[i]))return!0}return!1},t.prototype.setSurveyImpl=function(e,i){this.isRunningChoicesValue=!0,r.prototype.setSurveyImpl.call(this,e,i),this.isRunningChoicesValue=!1,this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()},t.prototype.setSurveyCore=function(e){r.prototype.setSurveyCore.call(this,e),e&&this.choicesFromQuestion&&this.onVisibleChoicesChanged()},t.prototype.getStoreOthersAsComment=function(){return this.showCommentArea?!1:this.checkHasChoicesComments()?!0:this.storeOthersAsComment===!0||this.storeOthersAsComment=="default"&&(this.survey!=null?this.survey.storeOthersAsComment:!0)||this.hasChoicesUrl&&!this.choicesFromUrl},t.prototype.checkHasChoicesComments=function(){for(var e=this.choices,i=0;i<e.length;i++)if(e[i].showCommentArea)return!0;return!1},t.prototype.onSurveyLoad=function(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),this.doForPanels(void 0,function(e){e.onSurveyLoad()}),r.prototype.onSurveyLoad.call(this)},t.prototype.onFirstRenderingCore=function(){r.prototype.onFirstRenderingCore.call(this),this.doForPanels(!0,function(e){e.onFirstRendering()})},t.prototype.onAnyValueChanged=function(e,i){r.prototype.onAnyValueChanged.call(this,e,i),e!=this.getValueName()&&this.runChoicesByUrl();var n=this.choicesFromQuestion;e&&n&&(e===n||i===n)&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues())},t.prototype.updateValueFromSurvey=function(e,i){var n="";this.showOtherItem&&this.activeChoices.length>0&&!this.isRunningChoices&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(e)&&!this.isOtherValue(e)?(n=this.getCommentFromValue(e),e=this.setOtherValueIntoValue(e)):this.data&&(n=this.data.getComment(this.getValueName()))),r.prototype.updateValueFromSurvey.call(this,e,i),this.isRunningChoices&&!this.isEmpty()&&(this.cachedValueForUrlRequests=this.value),n&&this.setNewComment(n),this.updateValueForPanels(i,!1)},t.prototype.updateCommentFromSurvey=function(e){r.prototype.updateCommentFromSurvey.call(this,e),this.updateValueForPanels(!1,!0)},t.prototype.updateValueForPanels=function(e,i){var n=this;this.data&&this.doForPanels(!0,function(o){o.questions.forEach(function(s){var a=s.getValueName();i?s.updateCommentFromSurvey(n.data.getComment(a)):s.updateValueFromSurvey(n.data.getValue(a),e)})})},t.prototype.getCommentFromValue=function(e){return e},t.prototype.setOtherValueIntoValue=function(e){return this.otherItem.value},t.prototype.onOtherValueInput=function(e,i){this.isInputTextUpdate&&i.target&&this.setCommentValueCore(e,i.target.value)},t.prototype.onOtherValueChange=function(e,i){var n=i.target;if(n){this.setCommentValueCore(e,n.value||"");var o=this.getCommentValueCore(e);o!==n.value&&(n.value=o||"")}},t.prototype.runChoicesByUrl=function(){if(this.updateIsUsingRestful(),!(!this.choicesByUrlValue||this.isLoadingFromJson||this.isRunningChoicesValue||this.isInDesignMode||this.choicesLazyLoadEnabled)){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.updateIsReady(),this.isRunningChoicesValue=!0,this.choicesByUrl.run(e),this.isRunningChoicesValue=!1)}},Object.defineProperty(t.prototype,"isRunningChoices",{get:function(){var e;return this.isRunningChoicesValue||((e=this.choicesByUrlValue)===null||e===void 0?void 0:e.isRunning)},enumerable:!1,configurable:!0}),t.prototype.onBeforeSendRequest=function(){C.web.disableQuestionWhileLoadingChoices===!0&&!this.isReadOnly&&(this.enableOnLoadingChoices=!0,this.readOnly=!0)},t.prototype.onLoadChoicesFromUrl=function(e){var i;this.enableOnLoadingChoices&&(this.readOnly=!1);var n=[];if(!this.isReadOnly){var o=this.choicesByUrlValue;o&&o.error&&n.push(o.error)}var s=null,a=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,a=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value);var l=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,a);if(e&&(e.length>0||!((i=this.choicesByUrlValue)===null||i===void 0)&&i.allowEmptyResponse)&&(s=new Array,q.setData(s,e)),s)for(var u=0;u<s.length;u++)s[u].locOwner=this;this.setChoicesFromUrl(s,n,l)},t.prototype.canAvoidSettChoicesFromUrl=function(e){if(this.isFirstLoadChoicesFromUrl)return!1;var i=!e||Array.isArray(e)&&e.length===0;return i&&!this.isEmpty()?!1:w.isTwoValueEquals(this.choicesFromUrl,e)},t.prototype.setChoicesFromUrl=function(e,i,n){if(!this.canAvoidSettChoicesFromUrl(e)){if(this.isFirstLoadChoicesFromUrl=!1,this.choicesFromUrl=e,this.filterItems(),this.onVisibleChoicesChanged(),e){var o=this.updateCachedValueForUrlRequests(n,e);if(o&&!this.isReadOnly){var s=!this.isTwoValueEquals(this.value,o.value);try{this.isValueEmpty(o.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=s,s?this.value=o.value:this.setQuestionValue(o.value,!0,!1)}finally{this.allowNotifyValueChanged=!0}}}!this.isReadOnly&&!e&&!this.isFirstLoadChoicesFromUrl&&(this.value=null),this.errors=i,this.choicesLoaded()}},t.prototype.createCachedValueForUrlRequests=function(e,i){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this.createCachedValueForUrlRequests(e[o],!0));return n}var s=i?!this.hasUnknownValue(e):!0;return{value:e,isExists:s}},t.prototype.updateCachedValueForUrlRequests=function(e,i){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++){var s=this.updateCachedValueForUrlRequests(e[o],i);if(s&&!this.isValueEmpty(s.value)){var a=s.value,u=this.getItemByValue(s.value,i);u&&(a=u.value),n.push(a)}}return{value:n}}var l=e.isExists&&this.hasUnknownValue(e.value)?null:e.value,u=this.getItemByValue(l,i);return u&&(l=u.value),{value:l}},t.prototype.updateChoicesDependedQuestions=function(){this.isLoadingFromJson||this.isUpdatingChoicesDependedQuestions||!this.allowNotifyValueChanged||this.isRunningChoices||(this.isUpdatingChoicesDependedQuestions=!0,this.updateDependedQuestions(),this.isUpdatingChoicesDependedQuestions=!1)},t.prototype.updateDependedQuestion=function(){this.onVisibleChoicesChanged(),this.clearIncorrectValues()},t.prototype.onSurveyValueChanged=function(e){r.prototype.onSurveyValueChanged.call(this,e),this.updateChoicesDependedQuestions()},t.prototype.onVisibleChoicesChanged=function(){this.isLoadingFromJson||this.isLockVisibleChoices||(this.updateVisibleChoices(),this.isOtherValue(this.renderedValue)&&this.setRenderedValue(this.rendredValueFromData(this.value),!1),this.onVisibleChanged(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())},t.prototype.isVisibleCore=function(){var e=r.prototype.isVisibleCore.call(this);if(!this.hideIfChoicesEmpty||!e)return e;var i=this.isUsingCarryForward?this.visibleChoices:this.getFilteredChoices();return!i||i.length>0},t.prototype.sortArrayByChoicesOrder=function(e){var i=e.slice();if(this.isInDesignMode)return i;var n=this.choicesOrder.toLowerCase();return n=="asc"?this.sortArray(i,1):n=="desc"?this.sortArray(i,-1):n=="random"?this.randomizeArray(i):i},t.prototype.sortArray=function(e,i){return e.sort(function(n,o){return w.compareStrings(n.calculatedText,o.calculatedText)*i})},t.prototype.randomizeArray=function(e){return w.randomizeArray(e)},Object.defineProperty(t.prototype,"hasChoicesUrl",{get:function(){var e;return!!(!((e=this.choicesByUrlValue)===null||e===void 0)&&e.url)},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(){!this.canClearIncorrectValues()||!this.hasValueToClearIncorrectValues()||(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())},t.prototype.canClearIncorrectValues=function(){return!(this.canAddCustomChoices()||this.carryForwardQuestion&&!this.carryForwardQuestion.isReady||this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1||this.hasChoicesUrl&&(!this.choicesFromUrl||this.choicesFromUrl.length==0))},t.prototype.canAddCustomChoices=function(){return!1},t.prototype.hasValueToClearIncorrectValues=function(){return this.survey&&this.survey.keepIncorrectValues?!1:!this.keepIncorrectValues&&!this.isEmpty()},t.prototype.clearValueIfInvisibleCore=function(e){r.prototype.clearValueIfInvisibleCore.call(this,e),this.clearIncorrectValues(),this.clearValuesInVisiblePanels(e)},t.prototype.clearValuesInVisiblePanels=function(e){this.doForPanels(!1,function(i){i.questions.forEach(function(n){n.clearValue()}),i.questions.forEach(function(n){n.clearValueIfInvisible(e)})})},t.prototype.isItemSelected=function(e){return this.isOtherItemByInstance(e)?this.isOtherSelected:this.isItemSelectedCore(e)},t.prototype.isItemSelectedCore=function(e){return e.value===this.renderedValue},t.prototype.clearDisabledValues=function(){!this.survey||!this.survey.clearDisabledChoices||this.clearDisabledValuesCore()},t.prototype.clearIncorrectValuesCore=function(){var e=this.value;this.canClearValueAnUnknown(e)&&this.clearValue(!0)},t.prototype.canClearValueAnUnknown=function(e){return!this.getStoreOthersAsComment()&&this.isOtherSelected?!1:this.hasUnknownValue(e,!0,!0,!0)},t.prototype.clearDisabledValuesCore=function(){this.isValueDisabled(this.value)&&this.clearValue(!0)},t.prototype.clearUnusedValues=function(){r.prototype.clearUnusedValues.call(this),this.isOtherValueUnused()&&(this.otherValue="")},t.prototype.isOtherValueUnused=function(){return!this.isOtherSelected},t.prototype.getColumnClass=function(){return new I().append(this.cssClasses.column).append("sv-q-column-"+this.colCount,this.hasColumns).toString()},t.prototype.getItemIndex=function(e){return this.visibleChoices.indexOf(e)},t.prototype.getItemClass=function(e){var i={item:e},n=this.getItemClassCore(e,i);return i.css=n,this.survey&&this.survey.updateChoiceItemCss(this,i),i.css},t.prototype.getCurrentColCount=function(){return this.colCount},t.prototype.getItemClassCore=function(e,i){var n=new I().append(this.cssClasses.item).append(this.cssClasses.itemInline,!this.hasColumns&&this.colCount===0).append("sv-q-col-"+this.getCurrentColCount(),!this.hasColumns&&this.colCount!==0).append(this.cssClasses.itemOnError,this.hasCssError()),o=this.getIsDisableAndReadOnlyStyles(!e.isEnabled),s=o[0],a=o[1],l=this.isItemSelected(e),u=!a&&!l&&!(this.survey&&this.survey.isDesignMode),f=e===this.noneItemValue;return i.isDisabled=a||s,i.isChecked=l,i.isNone=f,n.append(this.cssClasses.itemDisabled,a).append(this.cssClasses.itemReadOnly,s).append(this.cssClasses.itemPreview,this.isPreviewStyle).append(this.cssClasses.itemChecked,l).append(this.cssClasses.itemHover,u).append(this.cssClasses.itemNone,f).toString()},t.prototype.getLabelClass=function(e){return new I().append(this.cssClasses.label).append(this.cssClasses.labelChecked,this.isItemSelected(e)).toString()},t.prototype.getControlLabelClass=function(e){return new I().append(this.cssClasses.controlLabel).append(this.cssClasses.controlLabelChecked,this.isItemSelected(e)).toString()||void 0},t.prototype.updateRenderedChoices=function(){this.renderedChoices=this.onGetRenderedChoicesCallback?this.onGetRenderedChoicesCallback(this.visibleChoices):this.visibleChoices},t.prototype.getRenderedChoicesAnimationOptions=function(){var e=this;return{isAnimationEnabled:function(){return e.animationAllowed},getRerenderEvent:function(){return e.onElementRerendered},getKey:function(i){return i!=e.newItemValue?i.value:e.newItemValue},getLeaveOptions:function(i){var n=e.cssClasses.itemLeave;if(e.hasColumns){var o=e.bodyItems.indexOf(i);o!==-1&&o!==e.bodyItems.length-1&&(n="")}return{cssClass:n,onBeforeRunAnimation:Ve,onAfterRunAnimation:he}},getAnimatedElement:function(i){return i.getRootElement()},getEnterOptions:function(i){var n=e.cssClasses.itemEnter;if(e.hasColumns){var o=e.bodyItems.indexOf(i);o!==-1&&o!==e.bodyItems.length-1&&(n="")}return{cssClass:n,onBeforeRunAnimation:function(s){if(e.getCurrentColCount()==0&&e.bodyItems.indexOf(i)>=0){var a=s.parentElement.firstElementChild.offsetLeft;s.offsetLeft>a&&gt(s,{moveAnimationDuration:"0s",fadeAnimationDelay:"0s"},"--")}Ve(s)},onAfterRunAnimation:he}}}},Object.defineProperty(t.prototype,"renderedChoices",{get:function(){return this._renderedChoices},set:function(e){this.renderedChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headItems",{get:function(){for(var e=this.separateSpecialChoices||this.isInDesignMode?this.headItemsCount:0,i=[],n=0;n<e;n++)this.renderedChoices[n]&&i.push(this.renderedChoices[n]);return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footItems",{get:function(){for(var e=this.separateSpecialChoices||this.isInDesignMode?this.footItemsCount:0,i=[],n=this.renderedChoices,o=0;o<e;o++)this.renderedChoices[n.length-e+o]&&i.push(this.renderedChoices[n.length-e+o]);return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChoices",{get:function(){var e=this;return this.renderedChoices.filter(function(i){return!e.isBuiltInChoice(i)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyItems",{get:function(){return this.hasHeadItems||this.hasFootItems?this.dataChoices:this.renderedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasHeadItems",{get:function(){return this.headItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFootItems",{get:function(){return this.footItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemFlowDirection",{get:function(){return C.itemFlowDirection},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){if(!this.hasColumns||this.renderedChoices.length===0)return[];var e=this.getCurrentColCount(),i=!this.separateSpecialChoices&&!this.isInDesignMode?this.renderedChoices:this.dataChoices;return this.itemFlowDirection==="column"?this.getColumnsWithColumnItemFlow(i,e):this.getColumnsWithRowItemFlow(i,e)},enumerable:!1,configurable:!0}),t.prototype.getColumnsWithColumnItemFlow=function(e,i){var n=[],o=Math.floor(e.length/i);e.length%i&&(o+=1);for(var s=e.length,a=i,l=0,u=0;u<i;u++){for(var f=[],y=0;y<o;y++){s<=a&&(o=1);var b=e[y+l];b&&(f.push(b),s--)}n.push(f),a--,l+=f.length}return n},t.prototype.getColumnsWithRowItemFlow=function(e,i){for(var n=[],o=0;o<i;o++){for(var s=[],a=o;a<e.length;a+=i)s.push(e[a]);n.push(s)}return n},t.prototype.getItemsColumnKey=function(e){return(e||[]).map(function(i){return i.uniqueId}).join("-")},Object.defineProperty(t.prototype,"hasColumns",{get:function(){return!this.isMobile&&this.getCurrentColCount()>1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowLayout",{get:function(){return this.getCurrentColCount()==0&&!(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockedRow",{get:function(){return this.getCurrentColCount()==0&&(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),t.prototype.choicesLoaded=function(){this.isChoicesLoaded=!0,this.updateIsReady(),this.survey&&this.survey.loadedChoicesFromServer(this),this.loadedChoicesFromServerCallback&&this.loadedChoicesFromServerCallback()},t.prototype.getItemValueWrapperComponentName=function(e){var i=this.survey;return i?i.getItemValueWrapperComponentName(e,this):Me.TemplateRendererComponentName},t.prototype.getItemValueWrapperComponentData=function(e){var i=this.survey;return i?i.getItemValueWrapperComponentData(e,this):e},t.prototype.ariaItemChecked=function(e){return this.renderedValue===e.value?"true":"false"},t.prototype.isOtherItem=function(e){return this.showOtherItem&&this.isOtherValue(e.value)},t.prototype.isOtherItemByInstance=function(e){var i=this.showOtherItem?this.otherItem:this.otherItemValue;return!!e&&e===i},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.getSelectBaseRootCss=function(){return new I().append(this.getQuestionRootCss()).append(this.cssClasses.rootRow,this.rowLayout).toString()},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getAriaItemLabel=function(e){return e.locText.renderedHtml},t.prototype.getItemId=function(e){return this.inputId+"_"+this.getItemIndex(e)},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.getItemEnabled=function(e){return!this.isDisabledAttr&&e.isEnabled},t.prototype.focusOtherComment=function(e){var i;this.autoOtherMode||ae.FocusElement(this.getItemCommentId(e),!1,(i=this.survey)===null||i===void 0?void 0:i.rootElement)},t.prototype.getDefaultItemComponent=function(){return""},c([p()],t.prototype,"selectedItemValues",void 0),c([p()],t.prototype,"showNoneItem",void 0),c([p()],t.prototype,"showRefuseItem",void 0),c([p()],t.prototype,"showDontKnowItem",void 0),c([p()],t.prototype,"choicesVisibleIf",void 0),c([p()],t.prototype,"choicesEnableIf",void 0),c([p()],t.prototype,"autoOtherMode",void 0),c([p()],t.prototype,"choices",void 0),c([p()],t.prototype,"choicesFromQuestionMode",void 0),c([p()],t.prototype,"choiceValuesFromQuestion",void 0),c([p()],t.prototype,"choiceTextsFromQuestion",void 0),c([p()],t.prototype,"hideIfChoicesEmpty",void 0),c([p()],t.prototype,"keepIncorrectValues",void 0),c([p()],t.prototype,"storeOthersAsComment",void 0),c([p({isLowerCase:!0})],t.prototype,"choicesOrder",void 0),c([p()],t.prototype,"separateSpecialChoices",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"otherPlaceholder",void 0),c([p({localizable:{defaultStr:"Other required error",markdown:!0}})],t.prototype,"otherErrorText",void 0),c([p()],t.prototype,"isMessagePanelVisible",void 0),c([p({onSetting:function(e,i){return i.supportOther()?e:!1}})],t.prototype,"showOtherItem",void 0),c([re()],t.prototype,"_renderedChoices",void 0),c([p({getDefaultValue:function(e){return e.getDefaultItemComponent()}})],t.prototype,"itemComponent",void 0),t})(ie),wt=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",this.isFlowLayout?0:void 0)},set:function(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){r.prototype.onParentChanged.call(this),this.isFlowLayout&&this.setPropertyValue("colCount",null)},t.prototype.onParentQuestionChanged=function(){this.onVisibleChoicesChanged()},t.prototype.getSearchableItemValueKeys=function(e){e.push("choices")},t})(sn);function an(r,t){var e;if(!r)return!1;if(r.templateQuestion){var i=(e=r.colOwner)===null||e===void 0?void 0:e.data;if(r=r.templateQuestion,!r.getCarryForwardQuestion(i))return!1}return r.carryForwardQuestionType===t}V.addClass("choiceitem",[{name:"showCommentArea:boolean",locationInTable:"detail",visibleIf:function(r){return r.supportComment}},{name:"isCommentRequired:boolean",locationInTable:"detail",visibleIf:function(r){return r.showCommentArea}},{name:"commentPlaceholder",locationInTable:"detail",serializationProperty:"locCommentPlaceholder",visibleIf:function(r){return r.showCommentArea}},{name:"elements",baseClassName:"question",visible:!1,isLightSerializable:!1,isSerializableFunc:function(r){return r.hasElements}}],function(r){return new Ct(r)},"itemvalue"),V.addClass("selectbase",[{name:"showCommentArea:switch",visible:!0},"choicesFromQuestion:question_carryforward",{name:"choices:choiceitem[]",uniqueProperty:"value",baseValue:function(){return te("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:function(r){return!r.choicesFromQuestion}},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:function(r){return an(r,"select")}},{name:"choiceValuesFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(r){return an(r,"array")}},{name:"choiceTextsFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(r){return an(r,"array")}},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:function(r){return!r.choicesFromQuestion}},{name:"choicesByUrl:restfull",className:"choicesByUrl",onGetValue:function(r){var t=r.choicesByUrlValue;return t?t.toJSON():void 0},onSetValue:function(r,t){r.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean","choicesVisibleIf:condition",{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(r){return!r.choicesFromQuestion}},{name:"defaultValue:value",visibleIf:function(r){return!r.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"correctAnswer:value",visibleIf:function(r){return!r.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"separateSpecialChoices:boolean",visible:!1},{name:"showOtherItem:boolean",alternativeName:"hasOther"},{name:"showNoneItem:boolean",alternativeName:"hasNone"},{name:"showRefuseItem:boolean",visible:!1,version:"1.9.128"},{name:"showDontKnowItem:boolean",visible:!1,version:"1.9.128"},{name:"otherPlaceholder",alternativeName:"otherPlaceHolder",serializationProperty:"locOtherPlaceholder",dependsOn:"showOtherItem",visibleIf:function(r){return r.showOtherItem}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"showNoneItem",visibleIf:function(r){return r.showNoneItem}},{name:"refuseText",serializationProperty:"locRefuseText",dependsOn:"showRefuseItem",visibleIf:function(r){return r.showRefuseItem}},{name:"dontKnowText",serializationProperty:"locDontKnowText",dependsOn:"showDontKnowItem",visibleIf:function(r){return r.showDontKnowItem}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"showOtherItem",visibleIf:function(r){return r.showOtherItem}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"showOtherItem",visibleIf:function(r){return r.showOtherItem}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),V.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase");var Pt=(function(r){P(t,r);function t(e,i){var n=r.call(this)||this;n.question=e,n.onSelectionChanged=i,n.minPageSize=25,n.loadingItemHeight=40,n.timer=void 0,n._markdownMode=!1,n.filteredItems=void 0,n.selectedItemSelector=".sv-list__item--selected",n.itemSelector=".sv-list__item",n.itemsSettings={skip:0,take:0,totalCount:0,items:[]},n.listModelFilterStringChanged=function(s){n.filterString!==s&&(n.filterString=s,n.choicesLazyLoadEnabled||n.processCustomValue())},n.questionPropertyChangedHandler=function(s,a){n.onPropertyChangedHandler(s,a)},n.ariaExpanded="false",n.createLocalizableString("clearCaption",n.question,!1,!0),n.createLocalizableString("selectCaption",n.question,!1,!0),n.htmlCleanerElement=D.createElement("div"),e.onPropertyChanged.add(n.questionPropertyChangedHandler),n.showInputFieldComponent=n.question.showInputFieldComponent,n.listModel=n.createListModel(),n.setChoicesLazyLoadEnabled(n.question.choicesLazyLoadEnabled),n.setInputPlaceholder(n.question.placeholder),n.updateAfterListModelCreated(n.listModel),n.setSearchEnabled(n.question.searchEnabled),n.setAllowCustomChoices(n.question.allowCustomChoices),n.setTextWrapEnabled(n.question.textWrapEnabled),n.createPopup(),n.createButtons(),n.resetItemsSettings();var o=e.cssClasses;return n.updateCssClasses(o.popup,o.list),n}return Object.defineProperty(t.prototype,"focusFirstInputSelector",{get:function(){return this.getFocusFirstInputSelector()},enumerable:!1,configurable:!0}),t.prototype.getFocusFirstInputSelector=function(){return m.IsTouch?this.isValueEmpty(this.question.value)?this.itemSelector:this.selectedItemSelector:!this.listModel.showFilter&&this.question.value?this.selectedItemSelector:""},t.prototype.resetItemsSettings=function(){this.itemsSettings.skip=0,this.itemsSettings.take=Math.max(this.minPageSize,this.question.choicesLazyLoadPageSize),this.itemsSettings.totalCount=0,this.itemsSettings.items=[]},t.prototype.setItems=function(e,i){this.itemsSettings.items=[].concat(this.itemsSettings.items,e),this.itemsSettings.totalCount=i,this.listModel.isAllDataLoaded=this.choicesLazyLoadEnabled&&this.itemsSettings.items.length==this.itemsSettings.totalCount,this.question.choices=this.itemsSettings.items},t.prototype._loadQuestionChoices=function(e){var i=this,n=this.filterString;this.setIsChoicesLoading(!0),this.question.survey.loadQuestionChoices({question:this.question,filter:this.filterString,skip:this.itemsSettings.skip,take:this.itemsSettings.take,setItems:function(o,s){i.setItems(o||[],s||0),i.popupRecalculatePosition(i.itemsSettings.skip===i.itemsSettings.take),e&&e(),i.processCustomValue(n),i.setIsChoicesLoading(!1)}}),this.itemsSettings.skip+=this.itemsSettings.take},t.prototype.setIsChoicesLoading=function(e){this.question.setIsChoicesLoading&&this.question.setIsChoicesLoading(e)},t.prototype.processCustomValue=function(e){if(this.allowCustomChoices){var i=e||this.filterString,n=this.listModel.getVisibleActions().filter(function(o){return w.isTwoValueEquals(o.text,i,!1,!1)})[0];n?this.customValue=void 0:(this.customValue=i,this.updateItems(),this.listModel.focusFirstVisibleItem())}},t.prototype.updateQuestionChoices=function(e){var i=this,n=this.itemsSettings.skip+1<this.itemsSettings.totalCount;(!this.itemsSettings.skip||n)&&(this.resetTimer(),this.filterString&&C.dropdownSearchDelay>0?this.timer=setTimeout(function(){i._loadQuestionChoices(e)},C.dropdownSearchDelay):this._loadQuestionChoices(e))},t.prototype.resetTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)},t.prototype.updatePopupFocusFirstInputSelector=function(){this._popupModel.focusFirstInputSelector=this.focusFirstInputSelector},t.prototype.getDropdownMenuOptions=function(){var e=k.getInnerWidth(),i=k.getInnerHeight(),n=il(e,i),o="dropdown",s="desktop";return m.IsTouch&&(o="popup",s=n?"tablet":"mobile"),{menuType:o,deviceType:s,hasTouchScreen:m.IsTouch,screenHeight:i,screenWidth:e}},t.prototype.checkFocusRemainsWithinComponent=function(e){if(!this.question.cssClasses.root||!e?.target)return!1;var i=e.target.closest(pe(this.question.cssClasses.root));return i&&i.contains(e.relatedTarget)},t.prototype.createButtons=function(){var e=this;this.editorButtons=new be,this.editorButtons.containerCss="sd-dropdown-action-bar",this.chevronButton=new G({id:"chevron",css:"sd-editor-chevron-button",iconName:this.question.cssClasses.chevronButtonIconId||"icon-chevron",iconSize:"auto",showTitle:!1,locTitle:this.locSelectCaption,disableTabStop:!0,enabled:new $(function(){return!e.question.isInputReadOnly}),visible:new $(function(){return!e.question.isPreviewStyle}),action:function(i){e.onClick()}}),this.clearButton=new G({id:"clear",css:"sd-editor-clean-button",iconName:this.question.cssClasses.cleanButtonIconId||"icon-cancel-24x24",iconSize:"auto",showTitle:!1,locTitle:this.locClearCaption,disableTabStop:!0,enabled:new $(function(){return!e.question.isInputReadOnly}),visible:new $(function(){var i=e.question.isEmpty(),n=e.question.isReadOnly;return e.question.allowClear&&!i&&!n}),action:function(i){e.onClear()}}),this.editorButtons.setItems([this.clearButton,this.chevronButton]),this.editorButtons.actions.forEach(function(i){return i.cssClasses={item:"sd-editor-button-item",itemIcon:"sv-editor-button-item__icon",itemPressed:"sd-editor-button-item--pressed"}})},t.prototype.createPopup=function(){var e=this,i={verticalPosition:"bottom",horizontalPosition:"center",showPointer:!1};this._popupModel=new pt("sv-list",{model:this.listModel},i),this._popupModel.displayMode=m.IsTouch?"overlay":"popup",this._popupModel.positionMode="fixed",this._popupModel.isFocusedContainer=!1,this._popupModel.isFocusedContent=m.IsTouch,this._popupModel.setWidthByTarget=!m.IsTouch,this._popupModel.locale=this.question.getLocale(),this.updatePopupFocusFirstInputSelector(),this.listModel.registerPropertyChangedHandlers(["showFilter"],function(){e.updatePopupFocusFirstInputSelector()}),this._popupModel.onVisibilityChanged.add(function(n,o){e.popupVisibilityChanged(o.isVisible),e.chevronButton.pressed=o.isVisible})},t.prototype.popupVisibilityChanged=function(e){if(e&&(this.listModel.renderElements=!0),e&&this.choicesLazyLoadEnabled&&(this.listModel.actions=[],this.resetItemsSettings(),this.updateQuestionChoices()),e){this.updatePopupFocusFirstInputSelector();var i=this.getDropdownMenuOptions();this.question.processOpenDropdownMenu(i);var n=this._popupModel.updateDisplayMode(i.menuType);n&&this.listModel.setSearchEnabled(this.inputAvailable&&i.menuType!=="dropdown"),this.question.onOpenedCallBack&&this.question.onOpenedCallBack()}e||this.onHidePopup(),this.ariaExpanded=e?"true":"false",this.question.processPopupVisiblilityChanged(this.popupModel,e)},t.prototype.setFilterStringToListModel=function(e){var i=this;if(this.listModel.filterString=e,this.listModel.resetFocusedItem(),this.question.selectedItem&&this.question.selectedItem.text.indexOf(e)>=0){this.listModel.focusedItem=this.getAvailableItems().filter(function(n){return n.id==i.question.selectedItem.value})[0],this.listModel.filterString&&this.listModel.actions.map(function(n){return n.selectedValue=!1});return}(!this.listModel.focusedItem||!this.listModel.isItemVisible(this.listModel.focusedItem))&&this.listModel.focusFirstVisibleItem()},t.prototype.setTextWrapEnabled=function(e){this.listModel.textWrapEnabled=e},t.prototype.popupRecalculatePosition=function(e){var i=this;setTimeout(function(){i.popupModel.recalculatePosition(e)},1)},t.prototype.onHidePopup=function(){this.question.suggestedItem=null,this.choicesLazyLoadEnabled&&this.resetItemsSettings(),this.customValue=void 0,this.resetCustomItemValue()},t.prototype.getAvailableItems=function(){return this.allowCustomChoices?[].concat(this.question.visibleChoices,[this.customItemValue]):this.question.visibleChoices},t.prototype.setOnTextSearchCallbackForListModel=function(e){var i=this;e.setOnTextSearchCallback(function(n,o){if(n.id===i.customItemValue.id)return n.visible;if(i.filteredItems)return i.filteredItems.indexOf(n)>=0;var s=n.text.toLocaleLowerCase();s=C.comparator.normalizeTextCallback(s,"filter");var a=s.indexOf(o.toLocaleLowerCase());return i.question.searchMode=="startsWith"?a==0:a>-1})},t.prototype.createListModel=function(){var e=this,i=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(a){e.setQuestionValue(a),e.popupModel.hide()});var o={items:i,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},s=new ct(o);return this.setOnTextSearchCallbackForListModel(s),s.renderElements=!1,s.forceShowFilter=this.question.choicesLazyLoadEnabled||this.question.allowCustomChoices,s.areSameItemsCallback=function(a,l){return a===l},s},t.prototype.setQuestionValue=function(e){var i=e;if(this.allowCustomChoices&&e.id===this.customItemValue.id){var n=this.createCustomItem();i=n}i&&(this.resetFilterString(),this.question.selectItem(i),this.searchEnabled&&this.applyInputString(i))},t.prototype.selectAvailableItem=function(){if(!m.IsTouch&&C.dropdownSaveOnOutsideClick&&this.popupModel.isVisible){var e=this.listModel.visibleItems;if(e.length>0)return this.listModel.onItemClick(e[0]),!0}return!1},t.prototype.createCustomItem=function(){var e=new q(this.customValue),i={item:e,question:this.question,allow:!0};return this.question.survey.createCustomChoiceItem(i),i.allow?(this.question.customChoices.push(e),this.customValue=void 0,this.updateItems(),e):(this.clear(),null)},t.prototype.updateAfterListModelCreated=function(e){var i=this;e.isItemSelected=function(n){return!!n.selected},e.isAllDataLoaded=!this.choicesLazyLoadEnabled,e.disableSearch=this.choicesLazyLoadEnabled,e.actions.forEach(function(n){return n.disableTabStop=!0}),e.setOnFilterStringChangedCallback(this.listModelFilterStringChanged),e.setLoadingIndicatorVisibilityObserver(function(n){n&&i.updateQuestionChoices()})},t.prototype.getPopupCssClasses=function(){return"sv-single-select-list"},t.prototype.updateCssClasses=function(e,i){this.popupModel.cssClass=new I().append(e).append(this.getPopupCssClasses()).toString(),this.listModel.cssClasses=i},t.prototype.resetFilterString=function(){this.filterString&&(this.filterString=void 0,this.listModel.filterString=""),this.inputString=null,this.hintString=""},t.prototype.clear=function(){this.customValue=void 0,this.resetFilterString()},t.prototype.onSetFilterString=function(){var e=this;if(this.filteredItems=void 0,!(!this.filterString&&!this.popupModel.isVisible)){var i={question:this.question,choices:this.getAvailableItems(),filter:this.filterString,filteredChoices:void 0};this.question.survey.onChoicesSearch.fire(this.question.survey,i),this.filteredItems=i.filteredChoices,this.filterString&&!this.popupModel.isVisible&&this.popupModel.show();var n=function(){e.setFilterStringToListModel(e.filterString),e.filterString&&e.applyHintString(),e.popupRecalculatePosition(!0)};this.choicesLazyLoadEnabled?(this.resetItemsSettings(),this.updateQuestionChoices(n)):n()}},Object.defineProperty(t.prototype,"isAllDataLoaded",{get:function(){return!!this.itemsSettings.totalCount&&this.itemsSettings.items.length==this.itemsSettings.totalCount},enumerable:!1,configurable:!0}),t.prototype.loadQuestionChoices=function(e){this.isAllDataLoaded||this._loadQuestionChoices(e)},Object.defineProperty(t.prototype,"canShowSelectedItem",{get:function(){return!this.focused||this._markdownMode||!this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needRenderInput",{get:function(){return!this.question.isInputReadOnly||!!this.placeholderRendered},enumerable:!1,configurable:!0}),t.prototype.updateCustomItemValue=function(){this.customValue?(this.customItemValue.text=this.getLocalizationFormatString("createCustomItem",this.customValue),this.customItemValue.visible=!0):this.resetCustomItemValue()},t.prototype.resetCustomItemValue=function(){this.customItemValue.text="",this.customItemValue.visible=!1},Object.defineProperty(t.prototype,"customItemValue",{get:function(){return this._customItemValue||(this._customItemValue=new q("newCustomItem",this.getLocalizationFormatString("createCustomItem",this.customValue)),this._customItemValue.css="sv-list-item--custom-value"),this._customItemValue},enumerable:!1,configurable:!0}),t.prototype.applyInputString=function(e){var i=e?.locText.hasHtml;i||this.question.inputFieldComponentName?(this._markdownMode=!0,this.inputString=this.cleanHtml(e?.locText.getHtmlValue()),this.hintString=""):(this.inputString=e?.title,this.hintString=e?.title)},t.prototype.cleanHtml=function(e){return this.htmlCleanerElement?(this.htmlCleanerElement.innerHTML=e,this.htmlCleanerElement.textContent):""},t.prototype.fixInputCase=function(){var e=this.hintStringMiddle;e&&this.inputString!=e&&(this.inputString=e)},t.prototype.applyHintString=function(){var e=this.listModel.focusedItem||this.question.selectedItem,i=e?.locText.hasHtml;i||this.question.inputFieldComponentName?(this._markdownMode=!0,this.hintString=""):e===this.customItemValue?this.hintString="":this.hintString=e?.title},Object.defineProperty(t.prototype,"inputStringRendered",{get:function(){return this.inputString||""},set:function(e){var i;this.inputString=e,this.filterString=e,this.choicesLazyLoadEnabled||this.processCustomValue(),(!e||!this.searchEnabled||((i=this.listModel.focusedItem)===null||i===void 0?void 0:i.id)===this.customItemValue.id)&&(this.hintString="")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderRendered",{get:function(){return this.hintString||this.question.readOnly||!this.question.isEmpty()?"":this.inputPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"listElementId",{get:function(){return this.question.inputId+"_list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringLC",{get:function(){var e;return((e=this.hintString)===null||e===void 0?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputStringLC",{get:function(){var e;return((e=this.inputString)===null||e===void 0?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintPrefix",{get:function(){return!!this.inputString&&this.hintStringLC.indexOf(this.inputStringLC)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringPrefix",{get:function(){return this.inputString?this.hintString.substring(0,this.hintStringLC.indexOf(this.inputStringLC)):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintString",{get:function(){return!!this.searchEnabled&&!!(this.hintStringLC||this.inputStringLC)||!this.searchEnabled&&this.hintStringLC&&this.question.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringSuffix",{get:function(){return this.hintStringLC.indexOf(this.inputStringLC)>=0?this.hintString.substring(this.hintStringLC.indexOf(this.inputStringLC)+this.inputStringLC.length):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringMiddle",{get:function(){var e=this.hintStringLC.indexOf(this.inputStringLC);return e==-1?null:this.hintString.substring(e,e+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){return this._popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectCaption",{get:function(){return this.getLocalizableStringText("selectCaption")},set:function(e){this.setLocalizableStringText("selectCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectCaption",{get:function(){return this.getLocalizableString("selectCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputAvailable",{get:function(){return this.searchEnabled||this.allowCustomChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noTabIndex",{get:function(){return this.question.isInputReadOnly||this.inputAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterReadOnly",{get:function(){return!this.filterStringEnabled||!this.focused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterStringEnabled",{get:function(){return!this.question.isInputReadOnly&&this.inputAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputMode",{get:function(){return m.IsTouch?"none":"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupEnabled",{get:function(){return!this.question.isInputReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionRole",{get:function(){return this.filterStringEnabled?void 0:"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionRequired",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaRequired:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionInvalid",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaInvalid:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionErrorMessage",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaErrormessage:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionLabel",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabel:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionLabelledby",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabelledBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionDescribedby",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaDescribedBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionControls",{get:function(){return this.ariaQuestionRole&&this.popupEnabled?this.listElementId:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionExpanded",{get:function(){return this.ariaQuestionRole?this.popupEnabled?this.ariaExpanded:"false":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionActivedescendant",{get:function(){return this.ariaQuestionRole?this.ariaActivedescendant:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputRole",{get:function(){return this.filterStringEnabled?"combobox":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputRequired",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaRequired:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputInvalid",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaInvalid:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputErrorMessage",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaErrormessage:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputLabel",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaLabel:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputLabelledby",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaLabelledBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputDescribedby",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaDescribedBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputControls",{get:function(){return this.ariaInputRole&&this.popupEnabled?this.listElementId:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputExpanded",{get:function(){return this.ariaInputRole?this.popupEnabled?this.ariaExpanded:"false":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputActivedescendant",{get:function(){return this.ariaInputRole?this.ariaActivedescendant:void 0},enumerable:!1,configurable:!0}),t.prototype.setSearchEnabled=function(e){this.listModel.setSearchEnabled(m.IsTouch&&(e||this.question.allowCustomChoices)),this.searchEnabled=e},t.prototype.setAllowCustomChoices=function(e){this.allowCustomChoices=e,this.listModel.forceShowFilter=this.question.choicesLazyLoadEnabled||e,e&&(this.searchEnabled=e)},t.prototype.setChoicesLazyLoadEnabled=function(e){this.choicesLazyLoadEnabled=e,this.listModel.disableSearch=e,this.listModel.isAllDataLoaded=!e,this.listModel.forceShowFilter=e||this.question.allowCustomChoices},t.prototype.setInputPlaceholder=function(e){this.inputPlaceholder=e},t.prototype.updateItems=function(){this.listModel.setItems(this.getAvailableItems())},t.prototype.onClick=function(e){this.question.readOnly||this.question.isDesignMode||this.question.isPreviewStyle||this.question.isReadOnlyAttr||(this._popupModel.toggleVisibility(),this.focusItemOnClickAndPopup(),this.question.focusInputElement(!1))},t.prototype.chevronPointerDown=function(e){this._popupModel.isVisible&&e.preventDefault()},t.prototype.onPropertyChangedHandler=function(e,i){i.name=="value"&&(this.showInputFieldComponent=this.question.showInputFieldComponent),i.name=="textWrapEnabled"&&this.setTextWrapEnabled(i.newValue)},t.prototype.focusItemOnClickAndPopup=function(){this._popupModel.isVisible&&this.question.value&&this.changeSelectionWithKeyboard(!1)},t.prototype.onClear=function(e){this.question.clearValueFromUI(),this._popupModel.hide(),e&&(e.preventDefault(),e.stopPropagation())},t.prototype.getSelectedAction=function(){return this.question.selectedItem||null},t.prototype.changeSelectionWithKeyboard=function(e){var i,n=this.listModel.focusedItem;!n&&this.question.selectedItem?q.getItemByValue(this.question.visibleChoices,this.question.value)&&(this.listModel.focusedItem=this.question.selectedItem):e?this.listModel.focusPrevVisibleItem():this.listModel.focusNextVisibleItem(),this.beforeScrollToFocusedItem(n),this.scrollToFocusedItem(),this.afterScrollToFocusedItem(),this.ariaActivedescendant=(i=this.listModel.focusedItem)===null||i===void 0?void 0:i.elementId},t.prototype.beforeScrollToFocusedItem=function(e){this.question.value&&e&&(e.selectedValue=!1,this.listModel.focusedItem.selectedValue=!this.listModel.filterString,this.question.suggestedItem=this.listModel.focusedItem)},t.prototype.afterScrollToFocusedItem=function(){var e;this.question.value&&!this.listModel.filterString&&this.searchEnabled?this.applyInputString(this.listModel.focusedItem||this.question.selectedItem):this.applyHintString(),this.fixInputCase(),this.ariaActivedescendant=(e=this.listModel.focusedItem)===null||e===void 0?void 0:e.elementId},t.prototype.keyHandler=function(e){var i=e.keyCode,n=e.which||i,o=this.handleKeyEvent(i,n,e);o.stopPropagation&&(e.preventDefault(),e.stopPropagation())},t.prototype.handleKeyEvent=function(e,i,n){return e===t.KEY_UP?this.handleArrowUp(n):e===t.KEY_DOWN?this.handleArrowDown():e===t.KEY_TAB?this.handleTab(n):e===t.KEY_SPACE?this.handleSpace(n):e===t.KEY_ENTER?this.handleEnter(n):i===t.KEY_DELETE||i===t.KEY_BACKSPACE?this.handleDelete(n):e===t.KEY_ESCAPE?this.handleEscape():this.handleOtherKeys(n)},t.prototype.handleArrowUp=function(e){return this.popupModel.isVisible?(this.changeSelectionWithKeyboard(!0),{stopPropagation:!0}):(Fi(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly}),{stopPropagation:!0})},t.prototype.handleArrowDown=function(){return this.popupModel.show(),this.changeSelectionWithKeyboard(!1),{stopPropagation:!0}},t.prototype.handleTab=function(e){return this.handleEnter(e),this.popupModel.hide(),{stopPropagation:!1}},t.prototype.handleSpace=function(e){return this.popupModel.isVisible?!this.searchEnabled||!this.inputString?(this.listModel.selectFocusedItem(),this.onFocus(e),{stopPropagation:!0}):{stopPropagation:!1}:(this.popupModel.show(),this.changeSelectionWithKeyboard(!1),{stopPropagation:!0})},t.prototype.handleEnter=function(e){if(!this.popupModel.isVisible)return this.question.survey.questionEditFinishCallback(this.question,e),{stopPropagation:!0};var i=this.searchEnabled&&!this.inputString&&this.question instanceof Vt&&!this._markdownMode&&!!this.question.value;return i?(this._popupModel.hide(),this.onClear(e)):(this.listModel.selectFocusedItem(),this.onFocus(e)),{stopPropagation:!0}},t.prototype.handleDelete=function(e){return this.inputAvailable||this.onClear(e),{stopPropagation:!1}},t.prototype.handleEscape=function(){return this._popupModel.hide(),this.resetFilterString(),this.onEscape(),{stopPropagation:!1}},t.prototype.handleOtherKeys=function(e){return Fi(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly}),{stopPropagation:!1}},t.prototype.onEscape=function(){this.searchEnabled&&this.applyInputString(this.question.selectedItem)},t.prototype.onScroll=function(e){var i=e.target;i.scrollHeight-(i.scrollTop+i.offsetHeight)<=this.loadingItemHeight&&this.updateQuestionChoices()},t.prototype.onBlur=function(e){this.checkFocusRemainsWithinComponent(e)||(this.focused=!1,!(this.popupModel.isVisible&&this.popupModel.displayMode=="overlay")&&(xr(e),this.selectAvailableItem()||this.resetFilterString(),this._popupModel.hide(),e.stopPropagation()))},t.prototype.onFocus=function(e){this.focused=!0,this.setInputStringFromSelectedItem(this.question.selectedItem)},t.prototype.setInputStringFromSelectedItem=function(e){this.focused&&this.searchEnabled&&e&&this.applyInputString(e)},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.question&&this.question.onPropertyChanged.remove(this.questionPropertyChangedHandler),this.questionPropertyChangedHandler=void 0,this.listModel&&this.listModel.dispose(),this.popupModel&&this.popupModel.dispose(),this.htmlCleanerElement=void 0},t.prototype.scrollToFocusedItem=function(){this.listModel.scrollToFocusedItem()},t.KEY_UP=38,t.KEY_DOWN=40,t.KEY_TAB=9,t.KEY_ENTER=13,t.KEY_ESCAPE=27,t.KEY_SPACE=32,t.KEY_DELETE=46,t.KEY_BACKSPACE=8,c([p({defaultValue:!1})],t.prototype,"focused",void 0),c([p({defaultValue:!1})],t.prototype,"allowCustomChoices",void 0),c([p({onSet:function(e,i){i.updateCustomItemValue()}})],t.prototype,"customValue",void 0),c([p({defaultValue:!0})],t.prototype,"searchEnabled",void 0),c([p()],t.prototype,"choicesLazyLoadEnabled",void 0),c([p({defaultValue:"",onSet:function(e,i){i.onSetFilterString()}})],t.prototype,"filterString",void 0),c([p({defaultValue:"",onSet:function(e,i){i.question.inputHasValue=!!e}})],t.prototype,"inputString",void 0),c([p({})],t.prototype,"showInputFieldComponent",void 0),c([p()],t.prototype,"ariaActivedescendant",void 0),c([p()],t.prototype,"ariaExpanded",void 0),c([p()],t.prototype,"inputPlaceholder",void 0),c([p({defaultValue:""})],t.prototype,"hintString",void 0),t})(U);function Po(r){var t=(function(e){P(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"dropdownListModel",{get:function(){return this.dropdownListModelValue},set:function(n){this.dropdownListModelValue=n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupModel",{get:function(){return this.dropdownListModel.popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnlyText",{get:function(){return this.locReadOnlyText.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"locReadOnlyText",{get:function(){var n=this;return this.getOrCreateLocStr("readOnlyText",!0,!1,function(o){o.onGetTextCallback=function(){return n.calculateReadOnlyText()||n.placeholder}})},enumerable:!1,configurable:!0}),i.prototype.calculateReadOnlyText=function(){return this.displayValue},i.prototype.resetReadOnlyText=function(){this.resetPropertyValue("readOnlyText")},i.prototype.updateCustomChoices=function(n,o){},i.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},i.prototype.onSelectedItemValuesUpdated=function(){e.prototype.onSelectedItemValuesUpdated.call(this),this.resetReadOnlyText()},i.prototype.hasUnknownValue=function(n,o,s,a){return this.choicesLazyLoadEnabled?!1:e.prototype.hasUnknownValue.call(this,n,o,s,a)},i.prototype.needConvertRenderedOtherToDataValue=function(){var n,o=(n=this.otherValue)===null||n===void 0?void 0:n.trim();return o?e.prototype.hasUnknownValue.call(this,o,!0,!1):!1},i.prototype.getItemIfChoicesNotContainThisValue=function(n,o){return this.choicesLazyLoadEnabled?this.createItemValue(n,o):e.prototype.getItemIfChoicesNotContainThisValue.call(this,n,o)},i.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.dropdownListModelValue&&this.dropdownListModel.updateItems()},i.prototype.canAddCustomChoices=function(){return this.allowCustomChoices},i.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this._isChoicesLoading},i.prototype.ensureQuestionIsReady=function(){e.prototype.ensureQuestionIsReady.call(this),this.dropdownListModel&&this.choicesLazyLoadEnabled&&this.dropdownListModel.loadQuestionChoices()},i.prototype.onLoadChoicesFromUrl=function(n){this.updateCustomChoices(this.value,n),e.prototype.onLoadChoicesFromUrl.call(this,n)},i.prototype.valueFromData=function(n){var o=e.prototype.valueFromData.call(this,n);return this.survey&&this.survey.isSettingData()&&this.updateCustomChoices(o,this.visibleChoices),o},i.prototype.setIsChoicesLoading=function(n){this._isChoicesLoading=n,this.updateIsReady()},i.prototype.supportEmptyValidation=function(){return!0},i.prototype.onBlurCore=function(n){this.dropdownListModel.onBlur(n),e.prototype.onBlurCore.call(this,n)},i.prototype.onFocusCore=function(n){this.dropdownListModel.onFocus(n),e.prototype.onFocusCore.call(this,n)},i.prototype.calcCssClasses=function(n){var o=e.prototype.calcCssClasses.call(this,n);return this.dropdownListModelValue&&this.dropdownListModel.updateCssClasses(o.popup,o.list),o},i.prototype.clearValue=function(n,o){var s;e.prototype.clearValue.call(this,n,o),(s=this.dropdownListModelValue)===null||s===void 0||s.clear()},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},i})(r);return t}var Vt=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.lastSelectedItemValue=null,e.minMaxChoices=[],e.onOpened=e.addEvent(),e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["choicesMin","choicesMax","choicesStep"],s=["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"];o.indexOf(e)>-1&&this.onVisibleChoicesChanged(),s.indexOf(e)>-1&&(this.getSingleSelectedItem(),this.resetReadOnlyText()),e==="placeholder"&&this.updateInputPlaceholder(n)},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.resetReadOnlyText(),this.updateInputPlaceholder(this.placeholder)},t.prototype.updateInputPlaceholder=function(e){this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(e)},Object.defineProperty(t.prototype,"showOptionsCaption",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"dropdown"},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11yQuestionAriaRole",{get:function(){return this.searchEnabled?null:"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return this.searchEnabled?"combobox":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),t.prototype.isOtherValueUnused=function(){var e;return!(!((e=this.selectedItem)===null||e===void 0)&&e.showCommentArea)},t.prototype.onGetSingleSelectedItem=function(e){e&&(this.lastSelectedItemValue=e)},Object.defineProperty(t.prototype,"isShowingChoiceComment",{get:function(){var e;return(e=this.selectedItem)===null||e===void 0?void 0:e.showCommentArea},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){return!this.isShowingChoiceComment},t.prototype.getChoices=function(){var e=r.prototype.getChoices.call(this);if(this.choicesMax<=this.choicesMin)return e;for(var i=[],n=0;n<e.length;n++)i.push(e[n]);if(this.minMaxChoices.length===0||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1){this.minMaxChoices=[];for(var n=this.choicesMin;n<=this.choicesMax;n+=this.choicesStep)this.minMaxChoices.push(this.createItemValue(n))}return i=i.concat(this.minMaxChoices),i},t.prototype.getControlClass=function(){return new I().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).append(this.cssClasses.controlInputFieldComponent,!!this.inputFieldComponentName).toString()},t.prototype.updateCssClasses=function(e,i){r.prototype.updateCssClasses.call(this,e,i),this.useDropdownList&&qt(e,i)},Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e=this.suggestedItem||this.selectedItem;return e?.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputFieldComponentName",{get:function(){return this.inputFieldComponent||this.itemComponent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.inputHasValue&&!this.inputFieldComponentName&&!!this.selectedItemLocText&&this.dropdownListModel.canShowSelectedItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInputFieldComponent",{get:function(){return!this.inputHasValue&&!!this.inputFieldComponentName&&!this.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.calculateReadOnlyText=function(){if(!this.useDropdownList){if(this.isOtherSelected)return this.otherText;if(this.isNoneSelected)return this.noneText}var e=this.selectedItem;return e?e.text:""},Object.defineProperty(t.prototype,"useDropdownList",{get:function(){return this.renderAs!=="select"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return!this.isDisposed&&this.useDropdownList&&!this.dropdownListModelValue&&(this.dropdownListModelValue=new Pt(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),t.prototype.onSelectedItemValuesChangedHandler=function(e){var i;(i=this.dropdownListModelValue)===null||i===void 0||i.setInputStringFromSelectedItem(e),r.prototype.onSelectedItemValuesChangedHandler.call(this,e)},t.prototype.updateCustomChoices=function(e,i){if(e!=null&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled){this.customChoices.splice(0,this.customChoices.length);var n=i.filter(function(o){return w.isTwoValueEquals(o.id,e,!1,!1)})[0];n||this.customChoices.splice(0,this.customChoices.length,new q(e))}},t.prototype.getFirstInputElementId=function(){return this.getInputIdCore(this.searchEnabled||this.allowCustomChoices)},t.prototype.getInputId=function(){return this.getInputIdCore(!0)},t.prototype.getInputIdCore=function(e){var i=e&&this.useDropdownList?"_0":"";return this.inputId+i},t.prototype.clearValue=function(e,i){r.prototype.clearValue.call(this,e,i),this.lastSelectedItemValue=null},t.prototype.afterRenderCore=function(e){r.prototype.afterRenderCore.call(this,e),this.dropdownListModelValue&&this.dropdownListModelValue.clear()},t.prototype.onClick=function(e){this.onOpenedCallBack&&this.onOpenedCallBack()},t.prototype.onKeyUp=function(e){var i=e.which||e.keyCode;i===46&&(this.clearValueFromUI(),e.preventDefault(),e.stopPropagation())},c([p({localizable:{defaultStr:!0}})],t.prototype,"placeholder",void 0),c([p()],t.prototype,"choicesMin",void 0),c([p()],t.prototype,"choicesMax",void 0),c([p({onSetting:function(e){return e<1?1:e}})],t.prototype,"choicesStep",void 0),c([p()],t.prototype,"autocomplete",void 0),c([p()],t.prototype,"allowClear",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),c([p()],t.prototype,"searchMode",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setAllowCustomChoices(e)}})],t.prototype,"allowCustomChoices",void 0),c([p()],t.prototype,"textWrapEnabled",void 0),c([p({defaultValue:!1})],t.prototype,"inputHasValue",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),c([p()],t.prototype,"choicesLazyLoadPageSize",void 0),c([p()],t.prototype,"suggestedItem",void 0),t})(Po(sn));V.addClass("dropdown",[{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",alternativeName:"showOptionsCaption",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autocomplete",alternativeName:"autoComplete",choices:C.questions.dataList},{name:"textWrapEnabled:boolean",default:!0},{name:"renderAs",default:"default",visible:!1},{name:"searchEnabled:boolean",default:!0,visible:!1},{name:"allowCustomChoices:boolean",default:!1,visibleIf:function(r){return!r.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"searchMode",default:"contains",choices:["contains","startsWith"]},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"inputFieldComponent",visible:!1},{name:"itemComponent",visible:!1,default:""}],function(){return new Vt("")},"selectbase"),K.Instance.registerQuestion("dropdown",function(r){var t=new Vt(r);return t.choices=K.DefaultChoices,t});var Jl=(function(){function r(t){this.row=t}return r.prototype.getObj=function(){return this.row},r.prototype.getValue=function(t){if(t.path.length===0)return{isFound:!0,value:this.row.value,context:this}},r.prototype.getTextValue=function(t,e,i){return i?this.row.getDisplayValue(e):e},r})(),ln=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"matrixcolumn"},c([p({defaultValue:!1})],t.prototype,"isExclusive",void 0),t})(q),Vo=(function(r){P(t,r);function t(e,i,n,o){var s=r.call(this)||this;return s.item=e,s.fullName=i,s.data=n,s.setValueDirectly(o),s.data.hasErrorInRow(s)&&(s.hasError=!0),s}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="value"&&this.data&&this.data.onMatrixRowChanged(this)},t.prototype.cellClick=function(e){this.data.cellClick(this,e)},t.prototype.isChecked=function(e){return this.data.isCellChecked(this,e)},Object.defineProperty(t.prototype,"name",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),t.prototype.getOwner=function(){return this.data},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.item.isVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){this.isReadOnly||this.setValueDirectly(this.data.getCorrectedRowValue(e))},enumerable:!1,configurable:!0}),t.prototype.setValueDirectly=function(e){this.setPropertyValue("value",e)},t.prototype.getDisplayValue=function(e){return this.data.getDisplayRowValue(e)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return!this.item.enabled||this.data.isInputReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.data.isReadOnlyAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return!this.item.enabled||this.data.isDisabledAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTextClasses",{get:function(){return new I().append(this.data.cssClasses.rowTextCell).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowClasses",{get:function(){var e=this.data.cssClasses;return new I().append(e.row).append(e.rowError,this.hasError).append(e.rowReadOnly,this.isReadOnly).append(e.rowDisabled,this.data.isDisabledStyle).toString()},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new Jl(this)},c([p({defaultValue:!1})],t.prototype,"hasError",void 0),t})(U),So=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.cellsOwner=e,i.values={},i.locs={},i}return t.prototype.getType=function(){return"cells"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return Object.keys(this.values).length==0},enumerable:!1,configurable:!0}),t.prototype.valuesChanged=function(){!this.locNotification&&this.onValuesChanged&&this.onValuesChanged()},t.prototype.getDefaultCellLocText=function(e){return this.getCellLocCore(this.defaultRowValue,e)},t.prototype.getCellDisplayLocText=function(e,i){return this.getCellLocCore(e,i)},t.prototype.getCellLocCore=function(e,i){var n=this;if(e=this.getCellRowColumnValue(e,this.rows),i=this.getCellRowColumnValue(i,this.columns),w.isValueEmpty(e)||w.isValueEmpty(i))return null;this.locs[e]||(this.locs[e]={});var o=this.locs[e][i];return o||(o=this.createString(e,i,function(s){return s.setJson(n.getCellLocData(e,i))})),o},Object.defineProperty(t.prototype,"defaultRowValue",{get:function(){return C.matrix.defaultRowName},enumerable:!1,configurable:!0}),t.prototype.getCellLocData=function(e,i){var n=this.getCellLocDataFromValue(e,i);return n||this.getCellLocDataFromValue(this.defaultRowValue,i)},t.prototype.getCellLocDataFromValue=function(e,i){return!this.values[e]||!this.values[e][i]?null:this.values[e][i]},t.prototype.getCellText=function(e,i){var n=this.getCellLocCore(e,i);return n?n.calculatedText:null},t.prototype.setCellText=function(e,i,n){var o=this.getCellLocCore(e,i);o&&(o.text=n)},t.prototype.updateValues=function(e,i,n){n?(this.values[e]||(this.values[e]={}),this.values[e][i]=n,this.valuesChanged()):this.values[e]&&this.values[e][i]&&(delete this.values[e][i],Object.keys(this.values[e]).length==0&&delete this.values[e],this.valuesChanged())},t.prototype.getDefaultCellText=function(e){var i=this.getCellLocCore(this.defaultRowValue,e);return i?i.calculatedText:null},t.prototype.setDefaultCellText=function(e,i){this.setCellText(this.defaultRowValue,e,i)},t.prototype.getCellDisplayText=function(e,i){var n=this.getCellDisplayLocText(e,i);return n?n.calculatedText:null},Object.defineProperty(t.prototype,"rows",{get:function(){return this.cellsOwner?this.cellsOwner.getRows():[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.cellsOwner?this.cellsOwner.getColumns():[]},enumerable:!1,configurable:!0}),t.prototype.getCellRowColumnValue=function(e,i){if(e==null)return null;if(typeof e=="number"){if(e<0||e>=i.length)return null;e=i[e].value}return e.value?e.value:e},t.prototype.getJson=function(e){if(this.isEmpty||e?.storeLocaleStrings===!1)return null;var i=this.values[this.defaultRowValue],n={};for(var o in this.values){var s={},a=this.values[o];for(var l in a)if(o===this.defaultRowValue||!i||i[l]!==a[l]){var u=this.getCellLocCore(o,l);s[l]=u?u.getJson(e):a[l]}n[o]=s}return n},t.prototype.setJson=function(e,i){var n=this;if(this.values={},e){for(var o in e)if(o!="pos"){var s=e[o];this.values[o]={};for(var a in s)a!="pos"&&(this.values[o][a]=s[a])}}this.locNotification=!0,this.runFuncOnLocs(function(l,u,f){return f.setJson(n.getCellLocData(l,u))}),this.locNotification=!1,this.valuesChanged()},t.prototype.mergeWith=function(e,i){this.locNotification=!0;var n={locales:i,storeLocaleStrings:!0};for(var o in e.values){var s=e.values[o],a=function(f){var y=e.getCellLocCore(o,f);if(y){var b=l.getCellLocCore(o,f);b?b.mergeWith(y,i):b=l.createString(o,f,function(E){return E.setJson(y.getJson(n))})}},l=this;for(var u in s)a(u)}this.locNotification=!1,this.onValuesChanged()},t.prototype.locStrsChanged=function(){this.runFuncOnLocs(function(e,i,n){return n.strChanged()})},t.prototype.runFuncOnLocs=function(e){for(var i in this.locs){var n=this.locs[i];for(var o in n)e(i,o,n[o])}},t.prototype.createString=function(e,i,n){var o=this,s=new me(this.cellsOwner,!0);return n(s),s.onGetTextCallback=function(a){if(!a){var l=q.getItemByValue(o.columns,i);if(l)return l.locText.getJson()||l.value}return a},s.onStrChanged=function(a,l){o.updateValues(e,i,l)},this.locs[e][i]=s,s},t})(U),$l=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.question=e,i}return t.prototype.getObj=function(){return this.question},t.prototype.getValue=function(e){if(e.path.length>0){var i=r.prototype.getValue.call(this,e);if(i&&i.isFound)return i}return new fe(this.question.value).getValue(e)},t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,i){var n,o=this.question.getMatrixRows();e=e.toLocaleLowerCase();for(var s=0;s<o.length;s++){var a=o[s],l=((n=a.name)===null||n===void 0?void 0:n.toString())||"";if(l.toLocaleLowerCase()===e){i.isFound=!0,i.obj=a,i.context=a.getValueGetterContext();return}}},t})(Ne),un=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isRowChanging=!1,i.emptyLocalizableString=new me(i),i.cellsValue=new So(i),i.cellsValue.onValuesChanged=function(){i.updateHasCellText(),i.propertyValueChanged("cells",i.cells,i.cells)},i}return t.prototype.onPropertyValueChanged=function(e,i,n){var o=this;r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="columns"&&this.onColumnsChanged(),e==="rows"&&this.executeOnSyncPropertiesChanged(function(){o.rows=o.sortVisibleRows(o.rows),o.runCondition(o.getDataFilteredProperties()),o.onRowsChanged()}),e==="hideIfRowsEmpty"&&this.updateVisibilityBasedOnRows(),e==="cellType"&&(this.value=this.convertToCorrectValue(this.value)),e==="rowOrder"&&this.onRowsChanged()},t.prototype.getType=function(){return"matrix"},t.prototype.getAllChildren=function(){return z(z(z([],r.prototype.getAllChildren.call(this),!0),this.columns,!0),this.rows,!0)},Object.defineProperty(t.prototype,"isMultiSelect",{get:function(){return this.cellType==="checkbox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllRowRequired",{get:function(){return this.eachRowRequired},set:function(e){this.eachRowRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRows",{get:function(){return this.rows.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsOrder",{get:function(){return this.rowOrder},set:function(e){this.rowOrder=e},enumerable:!1,configurable:!0}),t.prototype.getRows=function(){return this.rows},t.prototype.getColumns=function(){return this.visibleColumns},t.prototype.addColumn=function(e,i){var n=new ln(e,i);return this.columns.push(n),n},Object.defineProperty(t.prototype,"checkType",{get:function(){return this.isMultiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),t.prototype.formatCss=function(e){return(e||"").replace("{type}",this.checkType)},t.prototype.getItemClass=function(e,i){var n=e.isChecked(i),o=this.isReadOnly,s=!n&&!o,a=this.hasCellText,l=this.cssClasses;return new I().append(l.cell,a).append(a?l.cellText:this.formatCss(l.label)).append(l.itemOnError,!a&&(this.eachRowRequired||this.eachRowUnique?e.hasError:this.hasCssError())).append(a?l.cellTextSelected:this.formatCss(l.itemChecked),n).append(a?l.cellTextDisabled:this.formatCss(l.itemDisabled),this.isDisabledStyle).append(a?l.cellTextReadOnly:this.formatCss(l.itemReadOnly),this.isReadOnlyStyle).append(a?l.cellTextPreview:this.formatCss(l.itemPreview),this.isPreviewStyle).append(this.formatCss(l.itemHover),s&&!a).toString()},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.getItemSvgIcon=function(e,i){return this.isMultiSelect&&e.isChecked(i)?this.cssClasses.itemPreviewSvgIconId:this.itemSvgIcon},Object.defineProperty(t.prototype,"cssItemValue",{get:function(){return this.formatCss(this.cssClasses.itemValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssMaterialDecorator",{get:function(){return this.formatCss(this.cssClasses.materialDecorator)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssItemDecorator",{get:function(){return this.formatCss(this.cssClasses.itemDecorator)},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.cells.locStrsChanged()},t.prototype.getQuizQuestionCount=function(){for(var e=0,i=0;i<this.rows.length;i++)this.isValueEmpty(this.correctAnswer[this.rows[i].value])||e++;return e},t.prototype.convertToCorrectValue=function(e){if(e==null||typeof e!="object")return e;for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],s=e[o];Array.isArray(s)&&!this.isMultiSelect&&(s.length>0?e[o]=s[0]:delete e[o]),!Array.isArray(s)&&this.isMultiSelect&&(e[o]=[s])}return e},t.prototype.getCorrectAnswerCount=function(){for(var e=0,i=this.value,n=0;n<this.rows.length;n++){var o=this.rows[n].value;!this.isValueEmpty(i[o])&&this.isTwoValueEquals(this.correctAnswer[o],i[o])&&e++}return e},t.prototype.runConditionCore=function(e){q.runEnabledConditionsForItems(this.rows,void 0,e),r.prototype.runConditionCore.call(this,e)},t.prototype.createRowsVisibleIfRunner=function(){var e=this.getExpressionFromSurvey("rowsVisibleIf");return e?new ge(e):null},t.prototype.onRowsChanged=function(){this.clearGeneratedRows(),r.prototype.onRowsChanged.call(this)},t.prototype.getMatrixRows=function(){if(this.generatedVisibleRows)return this.generatedVisibleRows;var e=new Array,i=this.value;i||(i={});for(var n=this.rows,o=0;o<n.length;o++){var s=n[o];if(!this.isValueEmpty(s.value)){var a=this.id+"_"+s.value.toString().replace(/\s/g,"_");e.push(this.createMatrixRow(s,a,i[s.value]))}}return this.generatedVisibleRows=e,e},t.prototype.getVisibleRows=function(){var e=[];return this.getMatrixRows().forEach(function(i){i.isVisible&&e.push(i)}),e},t.prototype.getRowByName=function(e){for(var i=this.visibleRows,n=0;n<i.length;n++)if(i[n].name===e)return i[n];return null},t.prototype.getSingleInputQuestionsCore=function(e,i){var n=this;if(this.nestedQuestionsValue)return this.nestedQuestionsValue;var o=[],s=this.isMultiSelect?"checkbox":"radiogroup";return this.visibleRows.forEach(function(a){var l=V.createClass(s);l.name=a.name,l.locTitle.sharedData=a.locText,l.choices=n.visibleColumns,l.value=a.value,l.isRequired=n.eachRowRequired,l.setSurveyImpl(n),l.setParentQuestion(n),o.push(l)}),this.nestedQuestionsValue=o,o},t.prototype.disposeNestedQuestions=function(){this.nestedQuestionsValue&&(this.nestedQuestionsValue.forEach(function(e){return e.dispose()}),this.nestedQuestionsValue=null)},t.prototype.resetSingleInput=function(){this.disposeNestedQuestions(),r.prototype.resetSingleInput.call(this)},t.prototype.dispose=function(){this.disposeNestedQuestions(),r.prototype.dispose.call(this)},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){var e;return(e=this.surveyImpl)===null||e===void 0?void 0:e.getTextProcessor()},t.prototype.getValue=function(e){var i=this.getRowByName(e);return i?i.value:void 0},t.prototype.setValue=function(e,i){this.getRowByName(e).value=i},t.prototype.getComment=function(e){var i;return(i=this.data)===null||i===void 0?void 0:i.getComment(e)},t.prototype.setComment=function(e,i,n){var o;(o=this.data)===null||o===void 0||o.setComment(e,i,n)},t.prototype.getFilteredProperties=function(){var e;return(e=this.data)===null||e===void 0?void 0:e.getFilteredProperties()},t.prototype.findQuestionByName=function(e){var i;return(i=this.data)===null||i===void 0?void 0:i.findQuestionByName(e)},t.prototype.sortVisibleRows=function(e){if(this.survey&&this.survey.isDesignMode)return e;var i=this.rowOrder.toLowerCase();return i==="random"?w.randomizeArray(e):e},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.rows=this.sortVisibleRows(this.rows),this.onRowsChanged(),this.onColumnsChanged()},t.prototype.isNewValueCorrect=function(e){return w.isValueObject(e,!0)},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this.cellsValue},set:function(e){this.cells.setJson(e&&e.getJson?e.getJson():null)},enumerable:!1,configurable:!0}),t.prototype.isPropertyStoredInHash=function(e){return e!=="cells"&&r.prototype.isPropertyStoredInHash.call(this,e)},t.prototype.mergeLocalizationObj=function(e,i){r.prototype.mergeLocalizationObj.call(this,e,i),e instanceof t&&this.cells.mergeWith(e.cells,i)},Object.defineProperty(t.prototype,"hasCellText",{get:function(){return this.getPropertyValue("hasCellText",!1)},enumerable:!1,configurable:!0}),t.prototype.updateHasCellText=function(){this.setPropertyValue("hasCellText",!this.cells.isEmpty)},t.prototype.setCellText=function(e,i,n){this.cells.setCellText(e,i,n)},t.prototype.getCellText=function(e,i){return this.cells.getCellText(e,i)},t.prototype.setDefaultCellText=function(e,i){this.cells.setDefaultCellText(e,i)},t.prototype.getDefaultCellText=function(e){return this.cells.getDefaultCellText(e)},t.prototype.getCellDisplayText=function(e,i){return this.cells.getCellDisplayText(e,i)},t.prototype.getCellDisplayLocText=function(e,i){var n=this.cells.getCellDisplayLocText(e,i);return n||this.emptyLocalizableString},t.prototype.supportAutoAdvance=function(){return this.isMouseDown===!0&&this.hasValuesInAllRows()},t.prototype.onCheckForErrors=function(e,i,n){if(r.prototype.onCheckForErrors.call(this,e,i,n),!i||this.hasCssError()){var o={noValue:!1,isNotUnique:!1};this.checkErrorsAllRows(n,o),o.noValue&&e.push(new El(null,this)),o.isNotUnique&&e.push(new Tl(null,this))}},t.prototype.hasValuesInAllRows=function(){var e={noValue:!1,isNotUnique:!1};return this.checkErrorsAllRows(!1,e,!0),!e.noValue},t.prototype.checkErrorsAllRows=function(e,i,n){var o=this,s=this.eachRowRequired||n,a=this.eachRowUnique;if(i.noValue=!1,i.isNotUnique=!1,e&&(this.errorsInRow=void 0),!(!s&&!a)){var l=this.visibleRows;if(l){for(var u={},f=0;f<l.length;f++){var y=l[f].value,b=this.isValueEmpty(y),E=a&&!b&&u[y]===!0;b=b&&s,e&&(b||E)&&this.addErrorIntoRow(l[f]),b||(u[y]=!0),i.noValue=i.noValue||b,i.isNotUnique=i.isNotUnique||E}e&&l.forEach(function(S){S.hasError=o.hasErrorInRow(S)})}}},t.prototype.addErrorIntoRow=function(e){this.errorsInRow||(this.errorsInRow={}),this.errorsInRow[e.name]=!0,e.hasError=!0},t.prototype.refreshRowsErrors=function(){this.errorsInRow&&this.checkErrorsAllRows(!0,{noValue:!1,isNotUnique:!1})},t.prototype.getIsAnswered=function(){return r.prototype.getIsAnswered.call(this)&&this.hasValuesInAllRows()},t.prototype.createMatrixRow=function(e,i,n){var o=new Vo(e,i,this,n);return this.onMatrixRowCreated(o),o},t.prototype.onMatrixRowCreated=function(e){},t.prototype.setQuestionValue=function(e,i){if(i===void 0&&(i=!0),r.prototype.setQuestionValue.call(this,e,this.isRowChanging||i),!(!this.generatedVisibleRows||this.generatedVisibleRows.length==0)){this.isRowChanging=!0;var n=this.value;if(n||(n={}),this.rows.length==0)this.generatedVisibleRows[0].setValueDirectly(n);else for(var o=0;o<this.generatedVisibleRows.length;o++){var s=this.generatedVisibleRows[o],a=n[s.name];this.isValueEmpty(a)&&(a=null),this.generatedVisibleRows[o].setValueDirectly(a)}this.refreshRowsErrors(),this.updateIsAnswered(),this.isRowChanging=!1}},t.prototype.getValueGetterContext=function(){return new $l(this)},t.prototype.getDisplayValueCore=function(e,i){var n={};for(var o in i){var s=e?q.getTextOrHtmlByValue(this.rows,o):o;s||(s=o);var a=q.getTextOrHtmlByValue(this.columns,i[o]);a||(a=i[o]),n[s]=a}return n},t.prototype.getPlainData=function(e){var i=this;e===void 0&&(e={includeEmpty:!0});var n=r.prototype.getPlainData.call(this,e);if(n){var o=this.createValueCopy();n.isNode=!0,n.data=Object.keys(o||{}).map(function(s){var a=i.rows.filter(function(f){return f.value===s})[0],l={name:s,title:a?a.text:"row",value:o[s],displayValue:q.getTextOrHtmlByValue(i.visibleColumns,o[s]),getString:function(f){return i.getValueAsString(f)},isNode:!1},u=q.getItemByValue(i.visibleColumns,o[s]);return u&&(e.calculations||[]).forEach(function(f){l[f.propertyName]=u[f.propertyName]}),l})}return n},t.prototype.addConditionObjectsByContext=function(e,i){for(var n=0;n<this.rows.length;n++){var o=this.rows[n];o.value&&e.push({name:this.getValueName()+"."+o.value,text:this.processedTitle+"."+o.calculatedText,question:this})}},t.prototype.getConditionJson=function(e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),!i)return r.prototype.getConditionJson.call(this,e);var n=new Vt(i);n.choices=this.columns;var o=new le().toJsonObject(n);return o.type=n.getType(),o},t.prototype.clearIncorrectValues=function(){this.clearInvisibleValuesInRowsAndColumns(!0,!0,!0),r.prototype.clearIncorrectValues.call(this)},t.prototype.clearValueIfInvisibleCore=function(e){r.prototype.clearValueIfInvisibleCore.call(this,e),this.clearInvisibleValuesInRowsAndColumns(!0,!0,!1)},t.prototype.clearInvisibleColumnValues=function(){this.clearInvisibleValuesInRowsAndColumns(!1,!0,!1)},t.prototype.clearInvisibleValuesInRows=function(){this.clearInvisibleValuesInRowsAndColumns(!0,!1,!1)},t.prototype.clearInvisibleValuesInRowsAndColumns=function(e,i,n){if(!this.isEmpty()){for(var o=this.getUnbindValue(this.value),s={},a=this.rows,l=0;l<a.length;l++){var u=a[l].value;o[u]&&(e&&!a[l].isVisible?delete o[u]:(i&&this.clearIncorrectValuesInRow(u,o),o[u]!=null&&(s[u]=o[u])))}n&&(o=s),!this.isTwoValueEquals(o,this.value)&&(this.value=o)}},t.prototype.clearIncorrectValuesInRow=function(e,i){var n=i[e];if(n===void 0){delete i[e];return}if(this.isMultiSelect&&Array.isArray(n)){for(var o=n.length-1;o>=0;o--){var s=this.getVisibleColumnByValue(n[o]);s||n.splice(o,1)}n.length===0&&delete i[e]}else this.getVisibleColumnByValue(n)||delete i[e]},t.prototype.getVisibleColumnByValue=function(e){var i=q.getItemByValue(this.columns,e);return i&&i.isVisible?i:null},t.prototype.getFirstInputElementId=function(){var e=this.generatedVisibleRows;return e||(e=this.visibleRows),e.length>0&&this.visibleColumns.length>0?this.inputId+"_"+e[0].name+"_0":r.prototype.getFirstInputElementId.call(this)},t.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,!this.hasRows)this.setNewValue(e.value);else{var i=this.value||{};this.isValueEmpty(e.value)?delete i[e.name]:i[e.name]=e.value,this.setNewValue(i)}this.isRowChanging=!1}},t.prototype.getCorrectedRowValue=function(e){var i=this.getColumnByValue(e);return i?i.value:e},t.prototype.getDisplayRowValue=function(e){var i=this.getColumnByValue(e);return i?i.text:e!=null?e.toString():""},t.prototype.cellClick=function(e,i){this.isReadOnly||this.isDisabledAttr||(e.value=this.getValueOnCellClick(e,i))},t.prototype.getValueOnCellClick=function(e,i){if(this.isMultiSelect){if(i.isExclusive)return this.isCellChecked(e,i)?void 0:[i.value];var n=Array.isArray(e.value)?[].concat(e.value):[];if(this.isCellChecked(e,i)){var o=this.getRowValueIndex(e,i);o>-1&&n.splice(o,1),n.length===0&&(n=void 0)}else Array.isArray(n)||(n=[]),this.columns.forEach(function(s){if(s.isExclusive){var a=n.indexOf(s.value);a>-1&&n.splice(a,1)}}),n.push(i.value);return n}return i.value},t.prototype.isCellChecked=function(e,i){return this.isMultiSelect?this.getRowValueIndex(e,i)>-1:w.isTwoValueEquals(e.value,i.value)},t.prototype.getRowValueIndex=function(e,i){var n=e.value;if(!Array.isArray(n))return-1;for(var o=0;o<n.length;o++)if(this.isTwoValueEquals(n[o],i.value))return o;return-1},t.prototype.getColumnByValue=function(e){for(var i=this.columns,n=0;n<i.length;n++)if(e===i[n].value)return i[n];for(var n=0;n<i.length;n++)if(this.isTwoValueEquals(e,i[n].value))return i[n];return null},t.prototype.hasErrorInRow=function(e){return!!this.errorsInRow&&!!this.errorsInRow[e.name]},t.prototype.getSearchableItemValueKeys=function(e){e.push("columns"),e.push("rows")},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")},c([p({onSetting:function(e){return e!=="checkbox"?"radio":e}})],t.prototype,"cellType",void 0),c([p()],t.prototype,"cellComponent",void 0),c([p()],t.prototype,"eachRowRequired",void 0),c([p()],t.prototype,"eachRowUnique",void 0),c([p({isLowerCase:!0})],t.prototype,"rowOrder",void 0),c([p()],t.prototype,"hideIfRowsEmpty",void 0),t})(zi);V.addClass("matrixcolumn",[{name:"isExclusive:boolean",visibleIf:function(r){var t;return((t=r.locOwner)===null||t===void 0?void 0:t.cellType)==="checkbox"},locationInTable:"detail"}],function(r){return new ln(r)},"itemvalue"),V.addClass("matrix",["rowTitleWidth",{name:"columns:matrixcolumn[]",uniqueProperty:"value",baseValue:function(){return te("matrix_column")}},{name:"rows:itemvalue[]",uniqueProperty:"value",baseValue:function(){return te("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowOrder",alternativeName:"rowsOrder",default:"initial",choices:["initial","random"]},{name:"eachRowRequired:boolean",alternativeName:"isAllRowRequired"},{name:"eachRowUnique:boolean"},"hideIfRowsEmpty:boolean",{name:"cellComponent",visible:!1,default:"survey-matrix-cell"},{name:"cellType",default:"radio",choices:["radio","checkbox"]}],function(){return new un("")},"matrixbase"),K.Instance.registerQuestion("matrix",function(r){var t=new un(r);return t.rows=K.DefaultRows,t.columns=K.DefaultColums,t});var xo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.updateRemainingCharacterCounter=function(e,i){this.remainingCharacterCounter=w.getRemainingCharacterCounterText(e,i)},c([p()],t.prototype,"remainingCharacterCounter",void 0),t})(U),ei=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.characterCounter=new xo,e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="maxLength"&&this.updateRemainingCharacterCounter(this.value)},t.prototype.isTextValue=function(){return!0},t.prototype.getMaxLength=function(){return w.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)},t.prototype.updateRemainingCharacterCounter=function(e){this.characterCounter.updateRemainingCharacterCounter(e,this.getMaxLength())},Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"textbase"},t.prototype.isEmpty=function(){return r.prototype.isEmpty.call(this)||this.value===""},t.prototype.getIsInputTextUpdate=function(){return this.textUpdateMode=="default"?r.prototype.getIsInputTextUpdate.call(this):this.textUpdateMode=="onTyping"},Object.defineProperty(t.prototype,"renderedPlaceholder",{get:function(){var e=this,i=function(){return e.hasPlaceholder()?e.placeHolder:void 0};return this.getPropertyValue("renderedPlaceholder",void 0,i)},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){r.prototype.onReadOnlyChanged.call(this),this.resetRenderedPlaceholder()},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.resetRenderedPlaceholder()},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.resetRenderedPlaceholder=function(){this.resetPropertyValue("renderedPlaceholder")},t.prototype.hasPlaceholder=function(){return!this.isReadOnly},t.prototype.setNewValue=function(e){r.prototype.setNewValue.call(this,e),this.updateRemainingCharacterCounter(e)},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),r.prototype.setQuestionValue.call(this,e,i),this.updateRemainingCharacterCounter(e)},t.prototype.convertToCorrectValue=function(e){return Array.isArray(e)?e.join(this.getValueSeparator()):e},t.prototype.getValueSeparator=function(){return", "},t.prototype.getControlCssClassBuilder=function(){return new I().append(this.cssClasses.root).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle)},t.prototype.getControlClass=function(){return this.getControlCssClassBuilder().toString()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),c([p()],t.prototype,"maxLength",void 0),c([p({localizable:!0,onSet:function(e,i){return i.resetRenderedPlaceholder()}})],t.prototype,"placeholder",void 0),c([p()],t.prototype,"textUpdateMode",void 0),t})(ie);V.addClass("textbase",[],function(){return new ei("")},"question");var Kl=(function(){function r(t,e,i){var n=this;this.inputMaskInstance=t,this.inputElement=e,this.prevUnmaskedValue=void 0,this.inputMaskInstancePropertyChangedHandler=function(s,a){if(a.name!=="saveMaskedValue"){var l=n.inputMaskInstance.getMaskedValue(n.prevUnmaskedValue);n.setInputValue(l)}},this.clickHandler=function(s){n.inputElement.value==n.maskedEmptyValue&&n.inputElement.setSelectionRange(0,0)},this.focusHandler=function(s){n.inputElement.placeholder&&n.inputElement.value==""&&n.setInputValue(n.maskedEmptyValue),n.clickHandler(s)},this.blurHandler=function(s){n.updateInputValue()},this.beforeInputHandler=function(s){if(n.inputElement.readOnly){s.preventDefault();return}var a=n.createArgs(s),l=n.inputMaskInstance.processInput(a);n.setInputValue(l.value),n.inputElement.setSelectionRange(l.caretPosition,l.caretPosition),l.cancelPreventDefault||s.preventDefault()},this.changeHandler=function(s){var a=n.inputMaskInstance.processInput({prevValue:"",insertedChars:s.target.value,selectionStart:0,selectionEnd:0});n.setInputValue(a.value)};var o=i;o==null&&(o=""),this.maskedEmptyValue=this.inputMaskInstance.getMaskedValue(""),this.setInputValue(t.saveMaskedValue?o:t.getMaskedValue(o)),this.updateInputValue(),this.prevUnmaskedValue=o,t.onPropertyChanged.add(this.inputMaskInstancePropertyChangedHandler),this.addInputEventListener()}return r.prototype.setInputValue=function(t){this.inputElement.maxLength>=0&&this.inputElement.maxLength<t.length&&(t=t.slice(0,this.inputElement.maxLength)),this.inputElement.value=t},r.prototype.updateInputValue=function(){this.inputElement.placeholder&&this.inputElement.value==this.maskedEmptyValue&&(this.inputElement.value="")},r.prototype.createArgs=function(t){var e={insertedChars:t.data,selectionStart:t.target.selectionStart,selectionEnd:t.target.selectionEnd,prevValue:t.target.value,inputDirection:"forward"};return t.inputType==="deleteContentBackward"&&(e.inputDirection="backward",e.selectionStart===e.selectionEnd&&(e.selectionStart=Math.max(e.selectionStart-1,0))),t.inputType==="deleteContentForward"&&e.selectionStart===e.selectionEnd&&(e.selectionEnd+=1),e},r.prototype.addInputEventListener=function(){this.inputElement&&(this.inputElement.addEventListener("beforeinput",this.beforeInputHandler),this.inputElement.addEventListener("click",this.clickHandler),this.inputElement.addEventListener("focus",this.focusHandler),this.inputElement.addEventListener("blur",this.blurHandler),this.inputElement.addEventListener("change",this.changeHandler))},r.prototype.removeInputEventListener=function(){this.inputElement&&(this.inputElement.removeEventListener("beforeinput",this.beforeInputHandler),this.inputElement.removeEventListener("click",this.clickHandler),this.inputElement.removeEventListener("focus",this.focusHandler),this.inputElement.removeEventListener("blur",this.blurHandler),this.inputElement.removeEventListener("change",this.changeHandler))},r.prototype.dispose=function(){this.removeInputEventListener(),this.inputElement=void 0,this.inputMaskInstance.onPropertyChanged.remove(this.inputMaskInstancePropertyChangedHandler)},r})(),cn=/[0-9]/;function Io(){var r=V.getChildrenClasses("masksettings")||[],t=r.map(function(e){var i=e.name;return e.name.indexOf("mask")!==-1&&(i=i.slice(0,i.indexOf("mask"))),i});return t.unshift("none"),t}var ti=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.doNotUpdateInputValue=!1,i._isWaitingForEnter=!1,i._isColorValueChanged=!1,i.onCompositionUpdate=function(n){i.isInputTextUpdate&&setTimeout(function(){i.updateValueOnEvent(n)},1),i.updateRemainingCharacterCounter(n.target.value)},i.onKeyUp=function(n){i.updateDateValidationMessage(n),i.isInputTextUpdate?(!i._isWaitingForEnter||n.keyCode===13)&&(i.updateValueOnEvent(n),i._isWaitingForEnter=!1):n.keyCode===13&&i.updateValueOnEvent(n),i.updateRemainingCharacterCounter(n.target.value)},i.readOnlyBlocker=function(n){if(i.isReadOnlyAttr&&["color","range"].indexOf(i.inputType)>-1)return n.preventDefault(),!0},i.onKeyDown=function(n){i.readOnlyBlocker(n)||(i.onKeyDownPreprocess&&i.onKeyDownPreprocess(n),i.isInputTextUpdate&&(i._isWaitingForEnter=n.keyCode===229),i.onTextKeyDownHandler(n))},i.onChange=function(n){i._isColorValueChanged=!0,i.updateDateValidationMessage(n);var o=Qe(i.input);if(o){var s=n.target===o.activeElement;s?i.isInputTextUpdate&&i.updateValueOnEvent(n):i.updateValueOnEvent(n),i.updateRemainingCharacterCounter(n.target.value)}},i.setNewMaskSettingsProperty(),i}return t.prototype.createMaskAdapter=function(){this.input&&!this.maskTypeIsEmpty&&(this.maskInputAdapter=new Kl(this.maskInstance,this.input,this.value))},t.prototype.deleteMaskAdapter=function(){this.maskInputAdapter&&(this.maskInputAdapter.dispose(),this.maskInputAdapter=void 0)},t.prototype.updateMaskAdapter=function(){this.deleteMaskAdapter(),this.createMaskAdapter()},t.prototype.onSetMaskType=function(e){this.setNewMaskSettingsProperty(),this.updateMaskAdapter()},Object.defineProperty(t.prototype,"maskTypeIsEmpty",{get:function(){switch(this.inputType){case"tel":case"text":return this.maskType==="none";default:return!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){if(e){var i=this.maskSettings;i&&i.dispose(),this.setNewMaskSettingsProperty(),this.maskSettings.fromJSON(e.toJSON()),this.updateMaskAdapter()}},enumerable:!1,configurable:!0}),t.prototype.setNewMaskSettingsProperty=function(){this.setPropertyValue("maskSettings",this.createMaskSettings())},t.prototype.createMaskSettings=function(){var e=this,i=!this.maskType||this.maskType==="none"?"masksettings":this.maskType+"mask";V.findClass(i)||(i="masksettings");var n=V.createClass(i);return n.onPropertyChanged.add(function(o,s){e.onNestedPropertyChanged.fire(e,{name:"maskSettings",newValue:s.newValue,nestedName:s.name}),e.updateInputValue()}),n.owner=this,n},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["min","max","inputType","minValueExpression","maxValueExpression"];o.indexOf(e)>-1&&this.setRenderedMinMax(),(e==="inputType"||e==="inputSize")&&(this.resetInputSize(),this.resetRenderedPlaceholder())},t.prototype.isTextValue=function(){return this.isDateInputType||["text","number","password"].indexOf(this.inputType)>-1},t.prototype.getType=function(){return"text"},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.setRenderedMinMax()},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.getPropertyValue("inputType")},set:function(e){e=e.toLowerCase(),(e==="datetime_local"||e==="datetime")&&(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0),this.updateMaskAdapter()},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return this.isTextInput?r.prototype.getMaxLength.call(this):null},t.prototype.getSupportedValidators=function(){var e={},i=["text","email","tel","password","url"];e.text=i,e.regex=i,e.email=["email"],e.numeric=["number","range"];for(var n=r.prototype.getSupportedValidators.call(this),o=n.length-1;o>=0;o--){var s=n[o];e[s]&&e[s].indexOf(this.inputType)<0&&n.splice(o,1)}return n},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),(this.minValueExpression||this.maxValueExpression)&&this.setRenderedMinMax(e)},t.prototype.getDisplayValueCore=function(e,i){return!this.maskTypeIsEmpty&&!w.isValueEmpty(i)?this.maskInstance.getMaskedValue(i):r.prototype.getDisplayValueCore.call(this,e,i)},t.prototype.isLayoutTypeSupported=function(e){return!0},Object.defineProperty(t.prototype,"size",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTextInput",{get:function(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputSize",{get:function(){var e=this;return this.getPropertyValue("renderedInputSize",void 0,function(){var i=e.calInputSize();return i>0?i:void 0})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputWidth",{get:function(){var e=this;return this.getPropertyValue("inputWidth",void 0,function(){return e.calInputSize()>0?"auto":""})},enumerable:!1,configurable:!0}),t.prototype.calInputSize=function(){if(!this.isTextInput)return 0;var e=this.inputSize>0?this.inputSize:0;return e<1&&this.parent&&this.parent.inputSize&&(e=this.parent.inputSize),e},t.prototype.resetInputSize=function(){this.resetPropertyValue("renderedInputSize"),this.resetPropertyValue("inputWidth")},Object.defineProperty(t.prototype,"min",{get:function(){return this.getPropertyValue("min")},set:function(e){if(this.isValueExpression(e)){this.minValueExpression=e.substring(1);return}this.setPropertyValue("min",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.getPropertyValue("max")},set:function(e){if(this.isValueExpression(e)){this.maxValueExpression=e.substring(1);return}this.setPropertyValue("max",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.getPropertyValue("renderedMin")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.getPropertyValue("renderedMax")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMinMaxType",{get:function(){return xe(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskInstance",{get:function(){return this.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputValue",{get:function(){return!this._inputValue&&!this.maskTypeIsEmpty?this.maskInstance.getMaskedValue(""):this._inputValue},set:function(e){var i=e,n=e;this.maskTypeIsEmpty||(i=this.maskInstance.getUnmaskedValue(e),i==null||i===""?(this.doNotUpdateInputValue=!0,i=void 0):(n=this.maskInstance.getMaskedValue(i),i&&this.maskSettings.saveMaskedValue&&(i=n))),this._inputValue=n,w.isTwoValueEquals(this.value,i,!1,!0)||(this.value=i)},enumerable:!1,configurable:!0}),t.prototype.getFilteredValue=function(){return this.getExpressionValue(this.value)},t.prototype.getExpressionValue=function(e){return!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getUnmaskedValue(e):e},t.prototype.convertToCorrectValue=function(e){return e!=null&&typeof e!="string"&&!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getMaskedValue(e):r.prototype.convertToCorrectValue.call(this,e)},t.prototype.onChangeQuestionValue=function(e){r.prototype.onChangeQuestionValue.call(this,e),this.updateInputValue()},t.prototype.updateInputValue=function(){var e=this.value;if(this.doNotUpdateInputValue){this.doNotUpdateInputValue=!1;return}this.maskTypeIsEmpty?this._inputValue=e:this.maskSettings.saveMaskedValue?this._inputValue=e??this.maskInstance.getMaskedValue(""):this._inputValue=this.maskInstance.getMaskedValue(e)},t.prototype.hasToConvertToUTC=function(e){return C.storeUtcDates&&this.isDateTimeLocaleType()&&!!e},t.prototype.createDate=function(e){return ne("question-text",e)},t.prototype.valueForSurveyCore=function(e){return this.hasToConvertToUTC(e)&&(e=this.createDate(e).toISOString()),r.prototype.valueForSurveyCore.call(this,e)},t.prototype.valueFromDataCore=function(e){if(this.hasToConvertToUTC(e)){var i=this.createDate(e),n=this.createDate(i.getTime()-i.getTimezoneOffset()*60*1e3),o=n.toISOString();e=o.substring(0,o.length-2)}return r.prototype.valueFromDataCore.call(this,e)},t.prototype.onCheckForErrors=function(e,i,n){var o=this;r.prototype.onCheckForErrors.call(this,e,i,n);var s=this.getIsInputTextUpdate();if(!(i&&s)){if(!this.isOnValueChanged){if(this.isValueLessMin){var a=new ce(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this);a.onUpdateErrorTextCallback=function(b){b.text=o.getMinMaxErrorText(o.minErrorText,o.getCalculatedMinMax(o.renderedMin))},e.push(a)}if(this.isValueGreaterMax){var l=new ce(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this);l.onUpdateErrorTextCallback=function(b){b.text=o.getMinMaxErrorText(o.maxErrorText,o.getCalculatedMinMax(o.renderedMax))},e.push(l)}this.isStepNumberIncorrect&&e.push(new ce(this.getStepErrorText(),this)),e.length===0&&this.dateValidationMessage&&e.push(new ce(this.dateValidationMessage,this))}if(this.inputType==="email"&&!this.validators.some(function(b){return b.getType()==="emailvalidator"})){var u=this.getValidatorTitle(),f=new _i;f.owner=this;var y=f.validate(this.value,u);y&&y.error&&e.push(y.error)}}},t.prototype.canSetValueToSurvey=function(){if(!this.isMinMaxType)return!0;var e=!this.isValueLessMin&&!this.isValueGreaterMax;return(!e||this.errors.length>0)&&this.survey&&(this.survey.isValidateOnValueChanging||this.survey.isValidateOnValueChanged)&&this.validate(),e},t.prototype.convertFuncValuetoQuestionValue=function(e){var i=this.maskTypeIsEmpty?this.inputType:this.maskSettings.getTypeForExpressions();return w.convertValToQuestionVal(e,i)},t.prototype.getMinMaxErrorText=function(e,i){if(w.isValueEmpty(i))return e;var n=i.toString();return this.inputType==="date"&&i.toDateString&&(n=i.toDateString()),e.replace("{0}",n)},t.prototype.getStepErrorText=function(){var e=this.getLocalizationString("stepError");return e.replace("{0}",this.renderedStep)},Object.defineProperty(t.prototype,"isValueLessMin",{get:function(){return!this.isValueEmpty(this.renderedMin)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueGreaterMax",{get:function(){return!this.isValueEmpty(this.renderedMax)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStepNumberIncorrect",{get:function(){if(this.inputType!=="number"||this.isEmpty()||!w.isNumber(this.renderedStep)||!w.isNumber(this.value))return!1;for(var e=w.getNumber(this.value),i=w.getNumber(this.renderedStep),n=1;Math.round(i*n)/n!==i&&n<1e6;)n*=10;return e=e*n,i=i*n,i>0&&e%i!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDateInputType",{get:function(){return this.inputType==="date"||this.isDateTimeLocaleType()},enumerable:!1,configurable:!0}),t.prototype.isDateTimeLocaleType=function(){return this.inputType==="datetime-local"},t.prototype.getCalculatedMinMax=function(e){return this.isValueEmpty(e)?e:this.isDateInputType?this.createDate(e):e},t.prototype.setRenderedMinMax=function(e){var i=this;e===void 0&&(e=null);var n=function(a,l){i.setPropertyValue(a,i.convertFuncValuetoQuestionValue(l))},o=function(a){!a&&i.isDateInputType&&C.minDate&&(a=C.minDate),n("renderedMin",a)},s=function(a){!a&&i.isDateInputType&&(a=C.maxDate),n("renderedMax",a)};this.runExpressionByProperty("minValueExpression",e,function(a){o(a)})||o(this.min),this.runExpressionByProperty("maxValueExpression",e,function(a){s(a)})||s(this.max)},Object.defineProperty(t.prototype,"renderedStep",{get:function(){return this.isValueEmpty(this.step)?this.inputType!=="number"?void 0:"any":this.step},enumerable:!1,configurable:!0}),t.prototype.getIsInputTextUpdate=function(){return this.maskTypeIsEmpty?r.prototype.getIsInputTextUpdate.call(this):!1},t.prototype.supportAutoAdvance=function(){return!this.getIsInputTextUpdate()&&!this.isDateInputType},t.prototype.supportGoNextPageError=function(){return!this.isDateInputType},Object.defineProperty(t.prototype,"dataList",{get:function(){return this.locDataList.value},set:function(e){this.locDataList.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDataList",{get:function(){var e=this;return this.locDataListValue||(this.locDataListValue=new Cr(this),this.locDataListValue.onValueChanged=function(i,n){e.propertyValueChanged("dataList",i,n)}),this.locDataListValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataListId",{get:function(){var e;return!((e=this.locDataListValue)===null||e===void 0)&&e.hasValue()?this.id+"_datalist":void 0},enumerable:!1,configurable:!0}),t.prototype.isPropertyStoredInHash=function(e){return e==="dataList"?!this.locDataListValue:r.prototype.isPropertyStoredInHash.call(this,e)},t.prototype.setNewValue=function(e){e=this.correctValueType(e),e&&(this.dateValidationMessage=void 0),r.prototype.setNewValue.call(this,e)},t.prototype.correctValueType=function(e){if(!e)return e;if(this.inputType==="number"||this.inputType==="range")return w.isNumber(e)?w.getNumber(e):"";if(this.inputType==="month"){for(var i=this.createDate(e),n=i.toISOString().indexOf(e)==0&&e.indexOf("T")==-1,o=n?i.getUTCMonth():i.getMonth(),s=(n?i.getUTCFullYear():i.getFullYear()).toString();s.length<4;)s="0"+s;var a=o+1;return s+"-"+(a<10?"0":"")+a}return e},t.prototype.hasPlaceholder=function(){return!this.isReadOnly&&this.inputType!=="range"},t.prototype.getControlCssClassBuilder=function(){var e=this.getMaxLength();return r.prototype.getControlCssClassBuilder.call(this).append(this.cssClasses.constrolWithCharacterCounter,!!e).append(this.cssClasses.characterCounterBig,e>99)},t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&C.readOnly.textRenderMode==="div"},Object.defineProperty(t.prototype,"inputStyle",{get:function(){var e={};return e.width=this.inputWidth,this.updateTextAlign(e),e},enumerable:!1,configurable:!0}),t.prototype.updateTextAlign=function(e){this.inputTextAlignment!=="auto"?e.textAlign=this.inputTextAlignment:!this.maskTypeIsEmpty&&this.maskSettings.getTextAlignment()!=="auto"&&(e.textAlign=this.maskSettings.getTextAlignment())},t.prototype.updateValueOnEvent=function(e){if(!(this.inputType==="color"&&!this._isColorValueChanged)){var i=e.target.value;this.isTwoValueEquals(this.value,i)||(this.inputValue=i)}},t.prototype.updateDateValidationMessage=function(e){this.dateValidationMessage=this.isDateInputType&&e.target?e.target.validationMessage:void 0},t.prototype.onBlurCore=function(e){this.updateDateValidationMessage(e),this.updateValueOnEvent(e),this.updateRemainingCharacterCounter(e.target.value),r.prototype.onBlurCore.call(this,e)},t.prototype.onFocusCore=function(e){this.updateRemainingCharacterCounter(e.target.value),r.prototype.onFocusCore.call(this,e)},t.prototype.afterRenderQuestionElement=function(e){e&&(this.input=e instanceof HTMLInputElement?e:e.querySelector("input"),this.createMaskAdapter()),r.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){this.deleteMaskAdapter(),this.input=void 0},c([p({onSet:function(e,i){i.onSetMaskType(e)}})],t.prototype,"maskType",void 0),c([p()],t.prototype,"inputTextAlignment",void 0),c([p()],t.prototype,"inputSize",void 0),c([p()],t.prototype,"autocomplete",void 0),c([p()],t.prototype,"minValueExpression",void 0),c([p()],t.prototype,"maxValueExpression",void 0),c([p({localizable:{defaultStr:"minError",markdown:!0}})],t.prototype,"minErrorText",void 0),c([p({localizable:{defaultStr:"maxError",markdown:!0}})],t.prototype,"maxErrorText",void 0),c([p()],t.prototype,"_inputValue",void 0),c([p()],t.prototype,"step",void 0),t})(ei),Yl=["number","range","date","datetime-local","month","time","week"];function xe(r){var t=r?r.inputType:"";return t?Yl.indexOf(t)>-1:!1}function Eo(r,t){var e=r.split(t);return e.length!==2||!w.isNumber(e[0])||!w.isNumber(e[1])?-1:parseFloat(e[0])*60+parseFloat(e[1])}function Xl(r,t,e){var i=Eo(r,e),n=Eo(t,e);return i<0||n<0?!1:i>n}function To(r,t,e,i){var n=i?e:t;if(!xe(r)||w.isValueEmpty(t)||w.isValueEmpty(e))return n;if(r.inputType.indexOf("date")===0||r.inputType==="month"){var o=r.inputType==="month",s="question-text-minmax",a=ne(s,o?t+"-01":t),l=ne(s,o?e+"-01":e);if(!a||!l)return n;if(a>l)return i?t:e}if(r.inputType==="week"||r.inputType==="time"){var u=r.inputType==="week"?"-W":":";return Xl(t,e,u)?i?t:e:n}if(r.inputType==="number"){if(!w.isNumber(t)||!w.isNumber(e))return n;if(w.getNumber(t)>w.getNumber(e))return i?t:e}return typeof t=="string"||typeof e=="string"?n:t>e?i?t:e:n}function Ro(r,t){r&&r.inputType&&(t.inputType=r.inputType!=="range"?r.inputType:"number",t.textUpdateMode="onBlur")}V.addClass("text",[{name:"inputType",default:"text",choices:C.questions.inputTypes},{name:"inputSize:number",alternativeName:"size",minValue:0,dependsOn:"inputType",visibleIf:function(r){return r?r.isTextInput:!1}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(r){return r?r.isTextInput:!1}},{name:"autocomplete",alternativeName:"autoComplete",choices:C.questions.dataList},{name:"min",dependsOn:"inputType",visibleIf:function(r){return xe(r)},onPropertyEditorUpdate:function(r,t){Ro(r,t)},onSettingValue:function(r,t){return To(r,t,r.max,!1)}},{name:"max",dependsOn:"inputType",nextToProperty:"*min",visibleIf:function(r){return xe(r)},onSettingValue:function(r,t){return To(r,r.min,t,!0)},onPropertyEditorUpdate:function(r,t){Ro(r,t)}},{name:"minValueExpression:expression",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"maxValueExpression:expression",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(r){return r.inputType==="text"||r.inputType==="tel"},choices:function(r){var t=Io();return t}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:["inputType","maskType"],visibleIf:function(r){return r.inputType==="text"||r.inputType==="tel"},onGetValue:function(r){return r.maskSettings.getData()},onSetValue:function(r,t){r.maskSettings.setData(t)}},{name:"step:number",dependsOn:"inputType",visibleIf:function(r){return r?r.inputType==="number"||r.inputType==="range":!1}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(r){return r?r.isTextInput:!1}},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder",dependsOn:"inputType",visibleIf:function(r){return r?r.isTextInput:!1}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(r){return r?r.inputType==="text":!1}}],function(){return new ti("")},"textbase"),K.Instance.registerQuestion("text",function(r){return new ti(r)});var Zl=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.question=e,i}return t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,i){for(var n=this.question.items,o=0;o<n.length;o++){var s=n[o].editor;if(s.getValueName()===e){i.isFound=!0,i.obj=s,i.context=s.getValueGetterContext();return}}},t})(Ne),Oo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){return null},enumerable:!1,configurable:!0}),t})(ti),pn=(function(r){P(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;return n.focusIn=function(){n.editor.focusIn()},n.editorValue=n.createEditor(e),n.maskSettings=n.editorValue.maskSettings,n.editor.questionTitleTemplateCallback=function(){return""},n.editor.titleLocation="left",i&&(n.title=i),n.editor.onPropertyChanged.add(function(o,s){s.name!=="maskSettings"&&n.onPropertyChanged.fire(n,s)}),n}return t.prototype.getType=function(){return"multipletextitem"},t.prototype.getOwner=function(){return this.question},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.validators,!0)},Object.defineProperty(t.prototype,"id",{get:function(){return this.editor.id},enumerable:!1,configurable:!0}),t.prototype.getOriginalObj=function(){return this.editor},Object.defineProperty(t.prototype,"name",{get:function(){return this.editor.name},set:function(e){this.editor.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this.editorValue},enumerable:!1,configurable:!0}),t.prototype.createEditor=function(e){return new Oo(e)},t.prototype.addUsedLocales=function(e){r.prototype.addUsedLocales.call(this,e),this.editor.addUsedLocales(e)},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.editor.localeChanged()},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.editor.locStrsChanged()},t.prototype.setData=function(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e,this.editor.setParentQuestion(e))},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.editor.isRequired},set:function(e){this.editor.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this.editor.inputType},set:function(e){this.editor.inputType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.editor.title},set:function(e){this.editor.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.editor.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.editor.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.editor.maxLength},set:function(e){this.editor.maxLength=e},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){var e=this.getSurvey();return w.getMaxLength(this.maxLength,e?e.maxTextLength:-1)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.editor.placeholder},set:function(e){this.editor.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.editor.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.editor.requiredErrorText},set:function(e){this.editor.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.editor.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.editor.inputSize},set:function(e){this.editor.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.editor.defaultValueExpression},set:function(e){this.editor.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.editor.minValueExpression},set:function(e){this.editor.minValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.editor.maxValueExpression},set:function(e){this.editor.maxValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.editor.validators},set:function(e){this.editor.validators=e},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},Object.defineProperty(t.prototype,"maskType",{get:function(){return this.editor.maskType},set:function(e){this.editor.maskType=e,this.maskSettings=this.editor.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){this.setPropertyValue("maskSettings",e),this.editor.maskSettings!==e&&(this.editor.maskSettings=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputTextAlignment",{get:function(){return this.editor.inputTextAlignment},set:function(e){this.editor.inputTextAlignment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){this.data!=null&&this.data.setMultipleTextValue(this.name,e)},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return this.editor.isEmpty()},t.prototype.onValueChanged=function(e){this.valueChangedCallback&&this.valueChangedCallback(e)},t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},t.prototype.getTextProcessor=function(){return this.data?this.data.getTextProcessor():null},t.prototype.getValue=function(e){return this.data?this.data.getMultipleTextValue(e):null},t.prototype.setValue=function(e,i){this.data&&this.data.setMultipleTextValue(e,i)},t.prototype.getComment=function(e){return null},t.prototype.setComment=function(e,i){},t.prototype.getFilteredProperties=function(){return{survey:this.getSurvey()}},t.prototype.findQuestionByName=function(e){var i=this.getSurvey();return i?i.getQuestionByName(e):null},t.prototype.getValidatorTitle=function(){return this.title},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getDataFilteredProperties=function(){return this.getFilteredProperties()},t})(U),ii=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isMultipleItemValueChanging=!1,i.createNewArray("items",function(n){n.setData(i),i.survey&&i.survey.multipleTextItemAdded(i,n)}),i}return t.addDefaultItems=function(e){for(var i=K.DefaultMutlipleTextItems,n=0;n<i.length;n++)e.addItem(i[n])},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["items","colCount","itemErrorLocation"];o.indexOf(e)>-1&&this.calcVisibleRows(),e==="inputSize"&&this.resetItemsSize()},t.prototype.getType=function(){return"multipletext"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.items,!0)},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e,i);for(var n=0;n<this.items.length;n++)this.items[n].setData(this)},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){this.editorsOnSurveyLoad(),r.prototype.onSurveyLoad.call(this),w.isValueEmpty(this.rows)||this.calcVisibleRows()},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),r.prototype.setQuestionValue.call(this,e,i),this.performForEveryEditor(function(n){n.editor.updateValueFromSurvey(n.value)}),this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(e){r.prototype.onSurveyValueChanged.call(this,e),this.performForEveryEditor(function(i){i.editor.onSurveyValueChanged(i.value)})},t.prototype.resetItemsSize=function(){this.performForEveryEditor(function(e){e.editor.resetInputSize()})},t.prototype.editorsOnSurveyLoad=function(){this.performForEveryEditor(function(e){e.editor.onSurveyLoad()})},t.prototype.performForEveryEditor=function(e){for(var i=0;i<this.items.length;i++){var n=this.items[i];n.editor&&e(n)}},t.prototype.addItem=function(e,i){i===void 0&&(i=null);var n=this.createTextItem(e,i);return this.items.push(n),n},t.prototype.getItemByName=function(e){for(var i=0;i<this.items.length;i++)if(this.items[i].name==e)return this.items[i];return null},t.prototype.getElementsInDesign=function(e){e===void 0&&(e=!1);var i;return i=r.prototype.getElementsInDesign.call(this,e),i.concat(this.items)},t.prototype.addConditionObjectsByContext=function(e,i){for(var n=0;n<this.items.length;n++){var o=this.items[n];e.push({name:this.getValueName()+"."+o.name,text:this.processedTitle+"."+o.fullTitle,question:this})}},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){o&&e.push(this),this.items.forEach(function(s){return s.editor.addNestedQuestion(e,i,n,o)})},t.prototype.getConditionJson=function(e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),!i)return r.prototype.getConditionJson.call(this,e);var n=this.getItemByName(i);if(!n)return null;var o=new le().toJsonObject(n);return o.type="text",o},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this);for(var e=0;e<this.items.length;e++)this.items[e].locStrsChanged()},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this);for(var e=0;e<this.items.length;e++)this.items[e].localeChanged()},t.prototype.getQuestionErrorLocation=function(){return this.itemErrorLocation!=="default"?this.itemErrorLocation:this.getErrorLocation()},Object.defineProperty(t.prototype,"showItemErrorOnTop",{get:function(){return this.getQuestionErrorLocation()=="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemErrorOnBottom",{get:function(){return this.getQuestionErrorLocation()=="bottom"},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(e){return this.getQuestionErrorLocation()},t.prototype.isNewValueCorrect=function(e){return w.isValueObject(e,!0)},t.prototype.supportAutoAdvance=function(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0},Object.defineProperty(t.prototype,"itemSize",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),t.prototype.onRowCreated=function(e){return e},t.prototype.calcVisibleRows=function(){for(var e=this.colCount,i=this.items,n=0,o,s,a=[],l=0;l<i.length;l++)n==0&&(o=this.onRowCreated(new hn),s=this.onRowCreated(new Ao),this.showItemErrorOnTop?(a.push(s),a.push(o)):(a.push(o),a.push(s))),o.cells.push(new fn(i[l],this)),s.cells.push(new Do(i[l],this)),n++,(n>=e||l==i.length-1)&&(n=0,s.onAfterCreated());this.rows=a},t.prototype.getRows=function(){return w.isValueEmpty(this.rows)&&this.calcVisibleRows(),this.rows},t.prototype.onValueChanged=function(){r.prototype.onValueChanged.call(this),this.onItemValueChanged()},t.prototype.createTextItem=function(e,i){return new pn(e,i)},t.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var i=null;this.value&&this.items[e].name in this.value&&(i=this.value[this.items[e].name]),this.items[e].onValueChanged(i)}},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.items.forEach(function(i){return i.editor.runCondition(e)})},t.prototype.getIsRunningValidators=function(){if(r.prototype.getIsRunningValidators.call(this))return!0;for(var e=0;e<this.items.length;e++)if(this.items[e].editor.isRunningValidators)return!0;return!1},t.prototype.validateElementCore=function(e){for(var i=!0,n=0;n<this.items.length;n++)e.isOnValueChanged&&this.items[n].editor.isEmpty()||(i=this.items[n].editor.validateElement(e)&&i);return r.prototype.validateElementCore.call(this,e)&&i},t.prototype.getAllErrors=function(){for(var e=r.prototype.getAllErrors.call(this),i=0;i<this.items.length;i++){var n=this.items[i].editor.getAllErrors();n&&n.length>0&&(e=e.concat(n))}return e},t.prototype.clearErrors=function(){r.prototype.clearErrors.call(this);for(var e=0;e<this.items.length;e++)this.items[e].editor.clearErrors()},t.prototype.getContainsErrors=function(){var e=r.prototype.getContainsErrors.call(this);if(e)return e;for(var i=this.items,n=0;n<i.length;n++)if(i[n].editor.containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!r.prototype.getIsAnswered.call(this))return!1;for(var e=0;e<this.items.length;e++){var i=this.items[e].editor;if(i.isVisible&&!i.isAnswered)return!1}return!0},t.prototype.getProgressInfo=function(){for(var e=[],i=0;i<this.items.length;i++)e.push(this.items[i].editor);return ae.getProgressInfoByElements(e,this.isRequired)},t.prototype.getValueGetterContext=function(){return new Zl(this)},t.prototype.getDisplayValueCore=function(e,i){if(!i)return i;for(var n={},o=0;o<this.items.length;o++){var s=this.items[o],a=i[s.name];if(!w.isValueEmpty(a)){var l=s.name;e&&s.title&&(l=s.title),n[l]=s.editor.getDisplayValue(e,a)}}return n},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},t.prototype.setMultipleTextValue=function(e,i){this.isMultipleItemValueChanging=!0,this.isValueEmpty(i)&&(i=void 0);var n=this.value;n||(n={}),n[e]=i,this.setNewValue(n),this.isMultipleItemValueChanging=!1},t.prototype.getItemDefaultValue=function(e){return this.defaultValue?this.defaultValue[e]:null},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.addElement=function(e,i){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getItemLabelCss=function(e){return new I().append(this.cssClasses.itemLabel).append(this.cssClasses.itemLabelDisabled,this.isDisabledStyle).append(this.cssClasses.itemLabelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.itemLabelPreview,this.isPreviewStyle).append(this.cssClasses.itemLabelAnswered,e.editor.isAnswered).append(this.cssClasses.itemLabelAllowFocus,!this.isDesignMode).append(this.cssClasses.itemLabelOnError,e.editor.errors.length>0).append(this.cssClasses.itemWithCharacterCounter,!!e.getMaxLength()).toString()},t.prototype.getItemCss=function(){return new I().append(this.cssClasses.item).toString()},t.prototype.getItemTitleCss=function(){return new I().append(this.cssClasses.itemTitle).toString()},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),c([p()],t.prototype,"items",void 0),c([p()],t.prototype,"itemErrorLocation",void 0),c([p({onSetting:function(e){return e<1?1:e>5?5:e}})],t.prototype,"colCount",void 0),c([p()],t.prototype,"inputSize",void 0),c([p({returnValue:""})],t.prototype,"itemTitleWidth",void 0),c([re()],t.prototype,"rows",void 0),t})(ie),hn=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isVisible=!0,e.cells=[],e}return c([p()],t.prototype,"isVisible",void 0),c([re()],t.prototype,"cells",void 0),t})(U),Ao=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onAfterCreated=function(){var e=this,i=function(){e.isVisible=e.cells.some(function(n){var o,s;return((o=n.item)===null||o===void 0?void 0:o.editor)&&((s=n.item)===null||s===void 0?void 0:s.editor.hasVisibleErrors)})};this.cells.forEach(function(n){var o,s;!((o=n.item)===null||o===void 0)&&o.editor&&((s=n.item)===null||s===void 0||s.editor.registerFunctionOnPropertyValueChanged("hasVisibleErrors",i))}),i()},t})(hn),fn=(function(){function r(t,e){this.item=t,this.question=e,this.isErrorsCell=!1}return r.prototype.getClassName=function(){return new I().append(this.question.cssClasses.cell).toString()},Object.defineProperty(r.prototype,"className",{get:function(){return this.getClassName()},enumerable:!1,configurable:!0}),r})(),Do=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isErrorsCell=!0,e}return t.prototype.getClassName=function(){return new I().append(r.prototype.getClassName.call(this)).append(this.question.cssClasses.cellError).append(this.question.cssClasses.cellErrorTop,this.question.showItemErrorOnTop).append(this.question.cssClasses.cellErrorBottom,this.question.showItemErrorOnBottom).toString()},t})(fn);V.addClass("multipletextitem",[{name:"!name",isUnique:!0},"isRequired:boolean",{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"inputType",default:"text",choices:C.questions.inputTypes},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(r){return r.inputType==="text"},choices:function(r){var t=Io();return t}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:"inputType",visibleIf:function(r){return r.inputType==="text"},onGetValue:function(r){return r.maskSettings.getData()},onSetValue:function(r,t){r.maskSettings.setData(t)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"inputSize:number",alternativeName:"size",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"defaultValueExpression:expression",visible:!1},{name:"minValueExpression:expression",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"maxValueExpression:expression",dependsOn:"inputType",visibleIf:function(r){return xe(r)}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new pn("")}),V.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem",isArray:!0},{name:"inputSize:number",minValue:0,visible:!1,alternativeName:"itemSize"},{name:"colCount:number",default:1,choices:[1,2,3,4,5]},{name:"itemErrorLocation",default:"default",choices:["default","top","bottom"],visible:!1},{name:"itemTitleWidth"}],function(){return new ii("")},"question"),K.Instance.registerQuestion("multipletext",function(r){var t=new ii(r);return ii.addDefaultItems(t),t});var Lo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="content"&&this.onContentChanged()},t.prototype.getType=function(){return"flowpanel"},t.prototype.getChildrenLayoutType=function(){return"flow"},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.onContentChanged()},t.prototype.onContentChanged=function(){var e="";this.onCustomHtmlProducing?e=this.onCustomHtmlProducing():e=this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()},t.prototype.produceHtml=function(){for(var e=[],i=/{(.*?(element:)[^$].*?)}/g,n=this.content,o=0,s=null;(s=i.exec(n))!==null;){s.index>o&&(e.push(n.substring(o,s.index)),o=s.index);var a=this.getQuestionFromText(s[0]);a?e.push(this.getHtmlForQuestion(a)):e.push(n.substring(o,s.index+s[0].length)),o=s.index+s[0].length}return o<n.length&&e.push(n.substring(o,n.length)),e.join("").replace(new RegExp("<br>","g"),"<br/>")},t.prototype.getQuestionFromText=function(e){return e=e.substring(1,e.length-1),e=e.replace(t.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)},t.prototype.getHtmlForQuestion=function(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""},t.prototype.getQuestionHtmlId=function(e){return this.name+"_"+e.id},t.prototype.onAddElement=function(e,i){r.prototype.onAddElement.call(this,e,i),this.addElementToContent(e),e.renderWidth=""},t.prototype.onRemoveElement=function(e){var i=this.getElementContentText(e);this.content=this.content.replace(i,""),r.prototype.onRemoveElement.call(this,e)},t.prototype.dragDropMoveElement=function(e,i,n){},t.prototype.addElementToContent=function(e){if(!this.isLoadingFromJson){var i=this.getElementContentText(e);this.insertTextAtCursor(i)||(this.content=this.content+i)}},t.prototype.insertTextAtCursor=function(e,i){if(i===void 0&&(i=null),!this.isDesignMode||!k.isAvailable())return!1;var n=k.getSelection();if(n.getRangeAt&&n.rangeCount){var o=n.getRangeAt(0);o.deleteContents();var s=new Text(e);o.insertNode(s);var a=this;if(a.getContent){var l=a.getContent(i);this.content=l}return!0}return!1},t.prototype.getElementContentText=function(e){return"{"+t.contentElementNamePrefix+e.name+"}"},t.contentElementNamePrefix="element:",c([p({localizable:!0})],t.prototype,"content",void 0),c([p({returnValue:""})],t.prototype,"html",void 0),t})(bt);V.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],function(){return new Lo},"panel");var eu=(function(){function r(){}return r.getIconCss=function(t,e){return new I().append(t.icon).append(t.iconExpanded,!e).toString()},r})(),ni=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getType=function(){return"nonvalue"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getTitleLocation=function(){return""},Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.validateElementCore=function(e){return!0},t.prototype.getAllErrors=function(){return[]},t.prototype.supportAutoAdvance=function(){return!1},t.prototype.addConditionObjectsByContext=function(e,i){},t.prototype.getConditionJson=function(e,i){return null},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),t})(ie);V.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"clearIfInvisible",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"showTitle",visible:!1,isSerializable:!1},{name:"showCommentArea",visible:!1},{name:"useDisplayValuesInDynamicTexts",alternativeName:"useDisplayValuesInTitle",visible:!1}],function(){return new ni("")},"question");var Mo=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getType=function(){return"empty"},t})(ie);V.addClass("empty",[],function(){return new Mo("")},"question");var ri=(function(){function r(t,e){this.val=t??[],this.name=e}return r.prototype.add=function(t){var e;return this.contains(t)?this.val:(this.name?this.val.push((e={},e[this.name]=t,e)):this.val.push(t),this.val)},r.prototype.indexOf=function(t){for(var e=0;e<this.val.length;e++)if(this.getValue(e)===t)return e;return-1},r.prototype.contains=function(t){return this.indexOf(t)>-1},r.prototype.toggle=function(t,e){return e===void 0&&(e=0),this.contains(t)?this.remove(t):e>0&&this.val.length>=e?this.val:this.add(t)},r.prototype.remove=function(t){var e=this.indexOf(t);return e>-1&&this.val.splice(e,1),this.val},r.prototype.convert=function(t){var e=this;return t==null||(Array.isArray(t)||(t=[t]),!this.name)?t:t.map(function(i){var n;return i&&typeof i=="object"&&e.name in i?i:(n={},n[e.name]=i,n)})},r.prototype.getNamedValue=function(t){var e;return this.name?(e={},e[this.name]=t,e):t},r.prototype.getValues=function(){var t=this;if(this.val)return this.val.map(function(e,i){return t.getValue(i)})},r.prototype.getValue=function(t){if(!(t<0||t>=this.val.length)){var e=this.val[t];return this.name&&typeof e=="object"?e[this.name]:e}},r.prototype.equals=function(t){if(!Array.isArray(t)||this.val.length!==t.length)return!1;for(var e=new r(t,this.name).getValues(),i=this.getValues(),n=0;n<e.length;n++)if(e[n]!==i[n])return!1;return!0},r})(),Fo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"checkboxitem"},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="showCommentArea"&&this.locOwner&&this.locOwner.onItemHasCommentChanged()},c([p()],t.prototype,"isExclusive",void 0),t})(Ct),St=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.invisibleOldValues={},e.isChangingValueOnClearIncorrect=!1,e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),["showSelectAllItem","selectAllText"].indexOf(e)>-1&&this.onVisibleChoicesChanged(),e==="choices"&&this.onItemHasCommentChanged(),(e==="maxSelectedChoices"||e==="minSelectedChoices")&&this.filterItems()},t.prototype.supportElementsInChoice=function(){return!0},t.prototype.getDefaultItemComponent=function(){return"survey-checkbox-item"},t.prototype.getType=function(){return"checkbox"},t.prototype.getItemValueType=function(){return"checkboxitem"},t.prototype.onCreating=function(){r.prototype.onCreating.call(this),this.createNewArray("renderedValue"),this.createNewArray("value")},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getValuePropertyName=function(){return this.valuePropertyName||(this.isTheOnlyComment?"":"value")},t.prototype.getQuestionFromArray=function(e,i){if(e&&e===this.getValuePropertyName()){var n=this.value;if(Array.isArray(n)&&i<n.length)return this}return null},t.prototype.getDependedQuestionsByValueName=function(e){return e&&this.getValuePropertyName()?[]:r.prototype.getDependedQuestionsByValueName.call(this,e)},Object.defineProperty(t.prototype,"selectAllItem",{get:function(){return this.selectAllItemValue||(this.selectAllItemValue=this.createBuiltInItem("","selectAllText","selectAllItemText",function(e){e.value="",e.id="selectall"})),this.selectAllItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectAllText",{get:function(){return this.getLocalizableStringText("selectAllText")},set:function(e){this.setLocStringText(this.locSelectAllText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectAllText",{get:function(){return this.selectAllItem.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelectAll",{get:function(){return this.showSelectAllItem},set:function(e){this.showSelectAllItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllSelected",{get:function(){return this.allElementsSelected()},set:function(e){e?this.selectAll():this.unselectAll()},enumerable:!1,configurable:!0}),t.prototype.toggleSelectAll=function(){this.isAllSelected=!this.isAllSelected},t.prototype.allElementsSelected=function(){if(this.isNoneItemsSelected())return!1;var e=this.getVisibleEnableItems();if(e.length===0)return!1;var i=this.value;if(!i||!Array.isArray(i)||i.length===0||i.length<e.length)return!1;for(var n=this.getPropertyNameArray(i).getValues(),o=0;o<e.length;o++)if(n.indexOf(e[o].value)<0)return!1;return!0},t.prototype.isNoneItemsSelected=function(){for(var e=this.getNoneItems(),i=0;i<e.length;i++)if(this.isItemSelected(e[i]))return!0;return!1},t.prototype.getNoneItems=function(){var e=this,i=new Array;return this.visibleChoices.forEach(function(n){e.isNoneItem(n)&&i.push(n)}),i},t.prototype.selectAll=function(){var e=this;this.selectAllCore(function(i){return i.isEnabled||e.isItemSelected(i)})},t.prototype.unselectAll=function(){var e=this;this.selectAllCore(function(i){return!i.isEnabled&&e.isItemSelected(i)})},t.prototype.selectAllCore=function(e){for(var i=[],n=this.getVisibleEnableItems(!0),o=0;o<n.length;o++){var s=n[o];e(s)&&i.push(s.value)}this.renderedValue=i},t.prototype.clickItemHandler=function(e,i){this.selectItem(e,i)},t.prototype.selectItem=function(e,i){if(!(this.isReadOnlyAttr||!e))if(e===this.selectAllItem)i===!0||i===!1?this.isAllSelected=i:this.toggleSelectAll();else{if(this.isNoneItem(e))this.renderedValue=i?[e.value]:[];else{var n=[].concat(this.renderedValue||[]),o=n.indexOf(e.value);i?o<0&&n.push(e.value):o>-1&&n.splice(o,1),this.renderedValue=n}i&&this.onItemSelected(e)}},t.prototype.isItemSelectedCore=function(e){if(e===this.selectAllItem)return this.isAllSelected;var i=this.renderedValue;if(!i||!Array.isArray(i))return!1;for(var n=0;n<i.length;n++)if(this.isTwoValueEquals(i[n],e.value))return!0;return!1},t.prototype.hasUnknownValueItem=function(e,i,n,o){return i===void 0&&(i=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),r.prototype.hasUnknownValueItem.call(this,this.getPropertyNameArray([e]).getValue(0),i,n,o)},t.prototype.setCommentValueCore=function(e,i){if(i=this.getTrimmedComment(i),this.isOtherItemByValue(e))r.prototype.setCommentValueCore.call(this,e,i);else{this.setCommentPropertyValue(e,i);var n=this.getItemValIndexByItemValue(e.value);if(n>-1){var o=this.createValueCopy(),s=o[n];i?s[this.commentPropertyValue]=i:delete s[this.commentPropertyValue],this.value=o}}},t.prototype.getCommentValueByItem=function(e){var i=this.getItemValIndexByItemValue(e.value);return i>-1?this.value[i][this.commentPropertyValue]:void 0},t.prototype.getItemValIndexByItemValue=function(e){return this.getPropertyNameArray(this.value).indexOf(e)},Object.defineProperty(t.prototype,"isTheOnlyComment",{get:function(){var e=this;return this.getPropertyValue("isTheOnlyComment",void 0,function(){return e.calcIsTheOnlyComment()})},enumerable:!1,configurable:!0}),t.prototype.calcIsTheOnlyComment=function(){for(var e=0;e<this.choices.length;e++){var i=this.choices[e];if(i.showCommentArea&&!this.isOtherValue(i.value))return!1}return!0},t.prototype.onItemHasCommentChanged=function(){this.resetPropertyValue("isTheOnlyComment")},t.prototype.getValueFromReal=function(e){return this.getPropertyNameArray([]).getNamedValue(e)},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChoices",{get:function(){var e=this.renderedValue,i=this.visibleChoices,n=this.selectedItemValues;if(this.isEmpty())return[];var o=this.defaultSelectedItemValues?[].concat(this.defaultSelectedItemValues,i):i,s=e.map(function(l){return q.getItemByValue(o,l)}).filter(function(l){return!!l});!s.length&&!n&&this.updateSelectedItemValues();var a=this.validateItemValues(s);return a},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.selectedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!!this.getValuePropertyName()},enumerable:!1,configurable:!0}),t.prototype.getFilteredName=function(){var e=r.prototype.getFilteredName.call(this);return this.hasFilteredValue&&(e+=C.expressionVariables.unwrapPostfix),e},t.prototype.getFilteredValue=function(e){return e&&this.hasFilteredValue?this.renderedValue:r.prototype.getFilteredValue.call(this,e)},t.prototype.getMultipleSelectedItems=function(){return this.selectedChoices},t.prototype.validateItemValues=function(e){var i=this;if(e.length)return e;var n=this.selectedItemValues;if(n&&n.length)return this.defaultSelectedItemValues=[].concat(n),n;var o=this.renderedValue;return o.map(function(s){return i.createItemValue(s)})},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!0},t.prototype.onCheckForErrors=function(e,i,n){if(r.prototype.onCheckForErrors.call(this,e,i,n),!i&&this.checkMinSelectedChoicesUnreached()){var o=new ce(this.getLocalizationFormatString("minSelectError",this.minSelectedChoices),this);e.push(o)}},t.prototype.onVisibleChoicesChanged=function(){r.prototype.onVisibleChoicesChanged.call(this),this.updateSelectAllItemProps()},t.prototype.onEnableItemCallBack=function(e){return this.shouldCheckMaxSelectedChoices()?this.isItemSelected(e):!0},t.prototype.onAfterRunItemsEnableCondition=function(){this.updateSelectAllItemProps();var e=this.maxSelectedChoices<1||this.isOtherSelected||!this.shouldCheckMaxSelectedChoices();this.showOtherItem&&this.otherItem.setIsEnabled(e)},t.prototype.updateSelectAllItemProps=function(){this.showSelectAllItem&&this.selectAllItem.setIsEnabled(this.getSelectAllEnabled())},t.prototype.getSelectAllEnabled=function(){if(!this.showSelectAllItem)return!0;var e=this.getVisibleEnableItems().length,i=this.maxSelectedChoices;return i>0&&i<e?!1:e>0},t.prototype.getVisibleEnableItems=function(e){for(var i=new Array,n=this.visibleChoices,o=0;o<n.length;o++){var s=n[o];(e||s.isEnabled)&&!this.isBuiltInChoice(s)&&!s.isExclusive&&i.push(s)}return i},t.prototype.shouldCheckMaxSelectedChoices=function(){if(this.maxSelectedChoices<1)return!1;var e=this.value,i=Array.isArray(e)?e.length:0;return i>=this.maxSelectedChoices},t.prototype.checkMinSelectedChoicesUnreached=function(){if(this.minSelectedChoices<1)return!1;var e=this.value,i=Array.isArray(e)?e.length:0;return i===1&&this.isNoneItemsSelected()?!1:i<this.minSelectedChoices},t.prototype.getItemClassCore=function(e,i){return this.value,i.isSelectAllItem=e===this.selectAllItem,new I().append(r.prototype.getItemClassCore.call(this,e,i)).append(this.cssClasses.itemSelectAll,i.isSelectAllItem).toString()},t.prototype.updateValueFromSurvey=function(e,i){r.prototype.updateValueFromSurvey.call(this,e,i),this.invisibleOldValues={}},t.prototype.onSurveyLoad=function(){this.onItemHasCommentChanged(),r.prototype.onSurveyLoad.call(this)},t.prototype.getPropertyNameArray=function(e){return new ri(e,this.getValuePropertyName())},t.prototype.setDefaultUnknownValue=function(e){if(!Array.isArray(e)){r.prototype.setDefaultUnknownValue.call(this,e);return}var i=this.getPropertyNameArray(e);if(this.hasActiveChoices){for(var s=[],a="",n=0;n<e.length;n++){var o=i.getValue(n);this.hasUnknownValue(o)?a||(a=o,s.push(this.otherItem.value)):s.push(o)}this.renderedValue=s,this.otherValue=a}else{for(var n=0;n<e.length;n++){var o=i.getValue(n);this.addIntoInvisibleOldValues(o)}this.value=e}},t.prototype.addIntoInvisibleOldValues=function(e){this.invisibleOldValues[e]=e},t.prototype.hasValueToClearIncorrectValues=function(){return r.prototype.hasValueToClearIncorrectValues.call(this)||!w.isValueEmpty(this.invisibleOldValues)},t.prototype.setNewValue=function(e){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues={}),e=this.valueFromData(e);var i=this.value;e||(e=[]),i||(i=[]),!this.isTwoValueEquals(i,e)&&(this.removeNoneItemsValues(i,e),r.prototype.setNewValue.call(this,e))},t.prototype.getCommentFromValue=function(e){var i=this.getFirstUnknownIndex(e);return i<0?"":e[i]},t.prototype.getStoreOthersAsComment=function(){return this.getValuePropertyName()?!1:r.prototype.getStoreOthersAsComment.call(this)},t.prototype.setOtherValueIntoValue=function(e){var i=this.getFirstUnknownIndex(e);return i<0||e.splice(i,1,this.getPropertyNameArray([]).getNamedValue(this.otherItem.value)),e},t.prototype.getFirstUnknownIndex=function(e){if(!Array.isArray(e))return-1;for(var i=0;i<e.length;i++)if(this.hasUnknownValueItem(e[i],!1,!1))return i;return-1},t.prototype.removeNoneItemsValues=function(e,i){if(!this.getPropertyNameArray(e).equals(i)){var n=this.getNoneItems().map(function(l){return l.value});if(n.length>0){var o=this.noneIndexInArray(e,n),s=this.noneIndexInArray(i,n);if(o.index>-1)if(o.val===s.val)i.length>0&&i.splice(s.index,1);else{var a=this.noneIndexInArray(i,[o.val]);a.index>-1&&a.index<i.length-1&&i.splice(a.index,1)}else s.index>-1&&i.length>1&&i.splice(0,i.length,this.getValueFromReal(s.val))}}},t.prototype.noneIndexInArray=function(e,i){if(!Array.isArray(e))return{index:-1,val:void 0};for(var n=this.getPropertyNameArray(e),o=e.length-1;o>=0;o--){var s=i.indexOf(n.getValue(o));if(s>-1)return{index:o,val:i[s]}}return{index:-1,val:void 0}},t.prototype.supportSelectAll=function(){return this.isSupportProperty("showSelectAllItem")},t.prototype.addNonChoicesItems=function(e,i){var n=this;r.prototype.addNonChoicesItems.call(this,e,i),this.supportSelectAll()&&this.addNonChoiceItem(e,function(){return n.selectAllItem},i,this.showSelectAllItem,C.specialChoicesOrder.selectAllItem)},t.prototype.isBuiltInChoice=function(e){return e===this.selectAllItem||r.prototype.isBuiltInChoice.call(this,e)},t.prototype.isItemInList=function(e){return e==this.selectAllItem?this.showSelectAllItem:r.prototype.isItemInList.call(this,e)},t.prototype.getDisplayValueEmpty=function(){var e=this;return q.getTextOrHtmlByValue(this.visibleChoices.filter(function(i){return i!=e.selectAllItemValue}),void 0)},t.prototype.getDisplayValueCore=function(e,i){var n=this;if(!Array.isArray(i))return r.prototype.getDisplayValueCore.call(this,e,i);var o=function(s){return n.getPropertyNameArray(i).getValue(s)};return this.getDisplayArrayValue(e,i,o)},t.prototype.clearIncorrectValuesCore=function(){this.clearIncorrectAndDisabledValues(!1)},t.prototype.clearDisabledValuesCore=function(){this.clearIncorrectAndDisabledValues(!0)},t.prototype.clearIncorrectAndDisabledValues=function(e){var i=this.value,n=!1,o=this.restoreValuesFromInvisible();if(!(!i&&o.length==0)){if(!Array.isArray(i)||i.length==0){if(this.isChangingValueOnClearIncorrect=!0,e||(this.showCommentArea?this.value=null:this.clearValue(!0)),this.isChangingValueOnClearIncorrect=!1,o.length==0)return;i=[]}for(var s=[],a=this.getPropertyNameArray(i),l=0;l<i.length;l++){var u=a.getValue(l),f=this.canClearValueAnUnknown(u);!e&&!f||e&&!this.isValueDisabled(u)?s.push(i[l]):(n=!0,f&&this.addIntoInvisibleOldValues(i[l]))}for(var l=0;l<o.length;l++)s.push(o[l]),n=!0;n&&(this.isChangingValueOnClearIncorrect=!0,s.length==0?this.clearValue(!0):this.value=s,this.isChangingValueOnClearIncorrect=!1)}},t.prototype.restoreValuesFromInvisible=function(){for(var e=[],i=this.visibleChoices,n=0;n<i.length;n++){var o=i[n];if(o!==this.selectAllItem){var s=i[n].value;w.isTwoValueEquals(s,this.invisibleOldValues[s])&&(this.isItemSelected(o)||e.push(s),delete this.invisibleOldValues[s])}}return e},t.prototype.getConditionJson=function(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.prototype.getConditionJson.call(this,e,i);return(e=="contains"||e=="notcontains")&&(n.type="radiogroup"),n.maxSelectedChoices=0,n.minSelectedChoices=0,n},t.prototype.isAnswerCorrect=function(){return w.isArrayContainsEqual(this.value,this.correctAnswer)},t.prototype.setDefaultValueWithOthers=function(){this.value=this.renderedValueFromDataCore(this.defaultValue)},t.prototype.getIsItemValue=function(e,i){return!e||!Array.isArray(e)?!1:e.indexOf(i.value)>=0},t.prototype.valueFromData=function(e){if(!e)return e;if(!Array.isArray(e))return[r.prototype.valueFromData.call(this,e)];for(var i=[],n=0;n<e.length;n++){var o=this.getItemByValue(e[n],this.visibleChoices);o?i.push(this.getChoiceValue(o,e[n],!0)):i.push(e[n])}return i},t.prototype.rendredValueFromData=function(e){return e=this.convertValueFromObject(e),r.prototype.rendredValueFromData.call(this,e)},t.prototype.convertValueFromObject=function(e){return Array.isArray(e)?this.getPropertyNameArray(e).getValues():e},t.prototype.renderedValueFromDataCore=function(e){if((!e||!Array.isArray(e))&&(e=[]),!this.hasActiveChoices)return e;for(var i=0;i<e.length;i++){if(this.isOtherValue(e[i]))return e;if(this.hasUnknownValueItem(e[i],!0,!1)){this.otherValue=e[i];var n=e.slice();return n[i]=this.otherItem.value,n}}return e},t.prototype.renderedValueToDataCore=function(e){if(!e||!e.length)return e;for(var i=[],n=this.createValueCopy(),o=0;o<e.length;o++){var s=-1,a=e[o];this.isOtherValue(a)&&this.needConvertRenderedOtherToDataValue()?(s=this.getFirstUnknownIndex(n),a=this.otherValue,s>-1&&(n[s]=this.getValueFromReal(this.otherValue))):s=this.getItemValIndexByItemValue(a),s>-1?i.push(n[s]):i.push(this.getValueFromReal(a))}return i},t.prototype.valueToData=function(e){return w.isValueEmpty(e)?e:(Array.isArray(e)||(e=[e]),this.getPropertyNameArray(e).convert(e))},t.prototype.selectOtherValueFromComment=function(e){var i=[],n=this.renderedValue;if(Array.isArray(n))for(var o=0;o<n.length;o++)this.isOtherValue(n[o])||i.push(n[o]);e&&i.push(this.otherItem.value),this.value=i},Object.defineProperty(t.prototype,"checkBoxSvgPath",{get:function(){return"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),c([p()],t.prototype,"valuePropertyName",void 0),c([p()],t.prototype,"showSelectAllItem",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"maxSelectedChoices",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"minSelectedChoices",void 0),t})(wt);V.addClass("checkboxitem",[{name:"isExclusive:boolean",locationInTable:"detail"}],function(r){return new Fo(r)},"choiceitem"),V.addClass("checkbox",[{name:"showSelectAllItem:boolean",alternativeName:"hasSelectAll"},{name:"separateSpecialChoices",visible:!0},{name:"maxSelectedChoices:number",default:0,onSettingValue:function(r,t){if(t<=0)return 0;var e=r.minSelectedChoices;return e>0&&t<e?e:t}},{name:"minSelectedChoices:number",default:0,onSettingValue:function(r,t){if(t<=0)return 0;var e=r.maxSelectedChoices;return e>0&&t>e?e:t}},{name:"selectAllText",serializationProperty:"locSelectAllText",dependsOn:"showSelectAllItem",visibleIf:function(r){return r.showSelectAllItem}},"valuePropertyName",{name:"itemComponent",visible:!1,default:"survey-checkbox-item"}],function(){return new St("")},"checkboxbase"),V.getProperty("checkbox","choices").type="checkboxitem[]",K.Instance.registerQuestion("checkbox",function(r){var t=new St(r);return t.choices=K.DefaultChoices,t});var No=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.onItemClick=function(n){i.isItemDisabled(n)||(i.isExpanded=!1,i.isItemSelected(n)?(i.selectedItems.splice(i.selectedItems.indexOf(n),1)[0],i.onSelectionChanged&&i.onSelectionChanged(n,"removed")):(i.selectedItems.push(n),i.onSelectionChanged&&i.onSelectionChanged(n,"added")))},i.isItemDisabled=function(n){return n.enabled!==void 0&&!n.enabled},i.isItemSelected=function(n){return!!i.allowSelection&&i.selectedItems.filter(function(o){return i.areSameItems(o,n)}).length>0},i.setSelectedItems(e.selectedItems||[]),i}return t.prototype.updateItemState=function(){var e=this;this.actions.forEach(function(i){var n=e.isItemSelected(i);i.visible=e.hideSelectedItems?!n:!0})},t.prototype.updateState=function(){this.updateItemState(),this.raiseUpdate({needUpdateIsEmpty:!0})},t.prototype.setSelectedItems=function(e){this.selectedItems=e,this.updateState()},t.prototype.selectFocusedItem=function(){r.prototype.selectFocusedItem.call(this),this.hideSelectedItems&&this.focusNextVisibleItem()},c([p()],t.prototype,"hideSelectedItems",void 0),t})(ct),ko=(function(r){P(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.setHideSelectedItems(e.hideSelectedItems),n.syncFilterStringPlaceholder(),n.closeOnSelect=e.closeOnSelect,n}return Object.defineProperty(t.prototype,"needRenderInput",{get:function(){return!this.question.isInputReadOnly||!!this.filterStringPlaceholder},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.syncFilterStringPlaceholder()},t.prototype.updateListState=function(){this.listModel.updateState(),this.updateCustomItemValue(),this.syncFilterStringPlaceholder()},t.prototype.syncFilterStringPlaceholder=function(){var e=this.getSelectedActions();e.length||this.question.selectedItems.length||this.listModel.focusedItem?this.filterStringPlaceholder=void 0:this.filterStringPlaceholder=this.question.placeholder},t.prototype.getSelectedActions=function(){return this.listModel.actions.filter(function(e){return e.selected})},t.prototype.getFocusFirstInputSelector=function(){return this.listModel.hideSelectedItems&&m.IsTouch&&!this.isValueEmpty(this.question.value)?this.itemSelector:r.prototype.getFocusFirstInputSelector.call(this)},t.prototype.getPopupCssClasses=function(){return"sv-multi-select-list"},t.prototype.createListModel=function(){var e=this,i=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(a,l){e.resetFilterString(),a.id==="selectall"?e.selectAllItems():l==="added"&&a.value===C.noneItemValue?e.selectNoneItem():l==="added"?e.selectItem(a.value):l==="removed"&&e.deselectItem(a.value),e.popupRecalculatePosition(!1),e.closeOnSelect&&(e.popupModel.isVisible=!1)});var o={items:i,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},s=new No(o);return this.setOnTextSearchCallbackForListModel(s),s.forceShowFilter=this.question.choicesLazyLoadEnabled||this.question.allowCustomChoices,s},Object.defineProperty(t.prototype,"shouldResetAfterCancel",{get:function(){return m.IsTouch&&!this.closeOnSelect},enumerable:!1,configurable:!0}),t.prototype.createPopup=function(){var e=this;r.prototype.createPopup.call(this),this.popupModel.onFooterActionsCreated.add(function(i,n){n.actions.push({id:"sv-dropdown-done-button",title:e.doneButtonCaption,innerCss:"sv-popup__button--done",needSpace:!0,action:function(){e.popupModel.isVisible=!1},enabled:new $(function(){return!e.isTwoValueEquals(e.question.renderedValue,e.previousValue)})})}),this.popupModel.onVisibilityChanged.add(function(i,n){e.shouldResetAfterCancel&&n.isVisible&&(e.previousValue=[].concat(e.question.renderedValue||[]))}),this.popupModel.onCancel=function(){e.shouldResetAfterCancel&&(e.question.renderedValue=e.previousValue,e.updateListState())}},t.prototype.selectAllItems=function(){this.question.toggleSelectAll(),this.question.isAllSelected&&this.question.hideSelectedItems&&this.popupModel.hide(),this.updateListState()},t.prototype.selectNoneItem=function(){this.question.renderedValue=[C.noneItemValue],this.updateListState()},t.prototype.selectItem=function(e){var i;if(this.allowCustomChoices&&e===this.customItemValue.id){var n=this.createCustomItem();n&&(i=n.id)}else i=e;if(i!=null){var o=[].concat(this.question.renderedValue||[]);o.push(i),this.question.renderedValue=o,this.updateListState()}},t.prototype.deselectItem=function(e){var i=[].concat(this.question.renderedValue||[]);i.splice(i.indexOf(e),1),this.question.renderedValue=i,this.applyHintString(),this.updateListState()},t.prototype.clear=function(){r.prototype.clear.call(this),this.syncFilterStringPlaceholder()},t.prototype.onClear=function(e){r.prototype.onClear.call(this,e),this.updateListState()},t.prototype.setHideSelectedItems=function(e){this.listModel.hideSelectedItems=e,this.updateListState()},t.prototype.removeLastSelectedItem=function(){this.deselectItem(this.question.renderedValue[this.question.renderedValue.length-1]),this.popupRecalculatePosition(!1)},t.prototype.inputKeyHandler=function(e){e.keyCode===8&&!this.filterString&&(this.removeLastSelectedItem(),e.preventDefault(),e.stopPropagation())},t.prototype.setInputStringFromSelectedItem=function(e){this.question.searchEnabled&&(this.inputString=null)},t.prototype.focusItemOnClickAndPopup=function(){},t.prototype.onEscape=function(){},t.prototype.beforeScrollToFocusedItem=function(e){},t.prototype.afterScrollToFocusedItem=function(){var e;!((e=this.listModel.focusedItem)===null||e===void 0)&&e.selected?this.hintString="":this.applyHintString(),this.syncFilterStringPlaceholder()},t.prototype.onPropertyChangedHandler=function(e,i){r.prototype.onPropertyChangedHandler.call(this,e,i),(i.name==="value"||i.name==="renderedValue"||i.name==="placeholder")&&this.syncFilterStringPlaceholder()},c([p({defaultValue:""})],t.prototype,"filterStringPlaceholder",void 0),c([p({defaultValue:!0})],t.prototype,"closeOnSelect",void 0),c([p()],t.prototype,"previousValue",void 0),c([p({localizable:{defaultStr:"tagboxDoneButtonCaption"}})],t.prototype,"doneButtonCaption",void 0),t})(Pt),dn=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.itemDisplayNameMap={},e.onOpened=e.addEvent(),e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"];o.indexOf(e)>-1&&this.resetReadOnlyText(),e==="placeholder"&&this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(n)},t.prototype.supportElementsInChoice=function(){return!1},t.prototype.locStrsChanged=function(){var e;r.prototype.locStrsChanged.call(this),this.resetReadOnlyText(),(e=this.dropdownListModelValue)===null||e===void 0||e.locStrsChanged()},t.prototype.getDefaultItemComponent=function(){return""},Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return!this.isDisposed&&!this.dropdownListModelValue&&(this.dropdownListModelValue=new ko(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"tagbox"},t.prototype.supportMultipleComment=function(e){return this.isOtherValue(e.value)},Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),t.prototype.getControlClass=function(){return new I().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlEditable,!this.isDisabledStyle&&!this.isReadOnlyStyle&&!this.isPreviewStyle).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},t.prototype.updateCssClasses=function(e,i){r.prototype.updateCssClasses.call(this,e,i),qt(e,i)},t.prototype.validateItemValues=function(e){var i=this;this.updateItemDisplayNameMap();var n=this.renderedValue;if(e.length&&e.length===n.length)return e;var o=this.selectedItemValues;if(!e.length&&o&&o.length)return this.defaultSelectedItemValues=[].concat(o),o;var s=e.map(function(a){return a.value});return n.filter(function(a){return s.indexOf(a)===-1}).forEach(function(a){var l=i.getItemIfChoicesNotContainThisValue(a,i.itemDisplayNameMap[a]);l&&e.push(l)}),e.sort(function(a,l){return n.indexOf(a.value)-n.indexOf(l.value)}),e},t.prototype.updateItemDisplayNameMap=function(){var e=this,i=function(n){e.itemDisplayNameMap[n.value]=n.text};(this.defaultSelectedItemValues||[]).forEach(i),(this.selectedItemValues||[]).forEach(i),this.visibleChoices.forEach(i)},t.prototype.updateCustomChoices=function(e,i){var n;if(e!=null&&e.length>0&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled){this.customChoices.splice(0,this.customChoices.length);var o=[];e.forEach(function(s){var a=i.filter(function(l){return w.isTwoValueEquals(l.id,s,!1,!1)})[0];a||o.push(new q(s))}),o.length>0&&(n=this.customChoices).splice.apply(n,z([0,this.customChoices.length],o,!1))}},t.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled||this.allowCustomChoices?"_0":"")},t.prototype.getInputId=function(){return this.inputId+"_0"},t.prototype.allElementsSelected=function(){var e=r.prototype.allElementsSelected.call(this);return this.updateSelectAllItemText(e),e},t.prototype.updateSelectAllItemText=function(e){this.selectAllTextValue=this.selectAllTextValue||this.locSelectAllText,this.selectAllItem.setLocText(e?this.deselectAllText():this.selectAllTextValue)},t.prototype.deselectAllText=function(){return this.deselectAllTextValue||(this.deselectAllTextValue=this.createLocalizableString("deselectAllText",this.selectAllItem,!0,"deselectAllItemText")),this.deselectAllTextValue},c([p()],t.prototype,"searchMode",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setAllowCustomChoices(e)}})],t.prototype,"allowCustomChoices",void 0),c([p()],t.prototype,"allowClear",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setHideSelectedItems(e)}})],t.prototype,"hideSelectedItems",void 0),c([p({onSet:function(e,i){i.dropdownListModelValue&&i.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),c([p()],t.prototype,"choicesLazyLoadPageSize",void 0),c([p({getDefaultValue:function(){return C.tagboxCloseOnSelect}})],t.prototype,"closeOnSelect",void 0),c([p()],t.prototype,"textWrapEnabled",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"placeholder",void 0),t})(Po(St));V.addClass("tagbox",[{name:"placeholder",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",default:!0},{name:"searchEnabled:boolean",default:!0},{name:"allowCustomChoices:boolean",default:!1,visibleIf:function(r){return!r.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"textWrapEnabled:boolean",default:!0},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"hideSelectedItems:boolean",default:!1},{name:"closeOnSelect:boolean"},{name:"itemComponent",visible:!1,default:""},{name:"searchMode",default:"contains",choices:["contains","startsWith"]}],function(){return new dn("")},"checkbox"),K.Instance.registerQuestion("tagbox",function(r){var t=new dn(r);return t.choices=K.DefaultChoices,t});var Bo=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.doDragOver=function(){if(e.parentElement.getType()!=="imagepicker"){var i=e.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button");i.style.cursor="grabbing"}},e.doBanDropHere=function(){if(e.parentElement.getType()!=="imagepicker"){var i=e.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button");i.style.cursor="not-allowed"}},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"item-value"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,i,n){if(this.parentElement.getType()==="imagepicker")return this.createImagePickerShortcut(this.draggedElement,e,i,n);var o=D.createElement("div");if(o){o.className="sv-drag-drop-choices-shortcut";var s=!0,a=i.closest("[data-sv-drop-target-item-value]").cloneNode(s);a.classList.add("sv-drag-drop-choices-shortcut__content");var l=a.querySelector(".svc-item-value-controls__drag-icon");l.style.visibility="visible";var u=a.querySelector(".svc-item-value-controls__remove");u.style.backgroundColor="transparent",a.classList.remove("svc-item-value--moveup"),a.classList.remove("svc-item-value--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,o.appendChild(a);var f=i.getBoundingClientRect();return o.shortcutXOffset=n.clientX-f.x,o.shortcutYOffset=n.clientY-f.y,this.isBottom=null,typeof this.onShortcutCreated=="function"&&this.onShortcutCreated(o),o}},t.prototype.createImagePickerShortcut=function(e,i,n,o){var s=D.createElement("div");if(s){s.classList.add("sv-drag-drop-image-picker-shortcut");var a=n.closest("[data-sv-drop-target-item-value]");this.imagepickerControlsNode=a.querySelector(".svc-image-item-value-controls");var l=a.querySelector(".sd-imagepicker__image-container"),u=a.querySelector(e.imageLink?"img":".sd-imagepicker__no-image").cloneNode(!0);return this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="none"),l.style.width=u.width+"px",l.style.height=u.height+"px",u.style.objectFit="cover",u.style.borderRadius="4px",s.appendChild(u),s}},t.prototype.getDropTargetByDataAttributeValue=function(e){var i;return i=this.parentElement.choices.filter(function(n){return""+n.value==e})[0],i},t.prototype.getChoices=function(){var e=this.parentElement;return e.getType()==="ranking"?e.selectToRankEnabled?e.unRankingChoices:e.rankingChoices:e.visibleChoices},t.prototype.isDropTargetValid=function(e,i){var n=this.getChoices();if(this.parentElement.getType()!=="imagepicker"){var o=n.indexOf(this.dropTarget),s=n.indexOf(this.draggedElement);if(s>o&&this.dropTarget.isDragDropMoveUp)return this.dropTarget.isDragDropMoveUp=!1,!1;if(s<o&&this.dropTarget.isDragDropMoveDown)return this.dropTarget.isDragDropMoveDown=!1,!1}return n.indexOf(e)!==-1},t.prototype.isDropTargetDoesntChanged=function(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom},t.prototype.calculateIsBottom=function(e,i){var n=i.getBoundingClientRect();return e>=n.y+n.height/2},t.prototype.afterDragOver=function(e){var i=this.getChoices(),n=i.indexOf(this.dropTarget),o=i.indexOf(this.draggedElement);if(o<n&&this.isBottom===!0)i.splice(o,1),i.splice(n,0,this.draggedElement);else if(o>n&&this.isBottom===!1)i.splice(n,1),i.splice(o,0,this.dropTarget);else return;this.parentElement.getType()!=="imagepicker"&&(o!==n&&(e.classList.remove("svc-item-value--moveup"),e.classList.remove("svc-item-value--movedown"),this.dropTarget.isDragDropMoveDown=!1,this.dropTarget.isDragDropMoveUp=!1),o>n&&(this.dropTarget.isDragDropMoveDown=!0),o<n&&(this.dropTarget.isDragDropMoveUp=!0),r.prototype.ghostPositionChanged.call(this))},t.prototype.doDrop=function(){var e=this.parentElement.choices,i=this.getChoices().filter(function(s){return e.indexOf(s)!==-1}),n=e.indexOf(this.draggedElement),o=i.indexOf(this.draggedElement);return e.splice(n,1),e.splice(o,0,this.draggedElement),this.parentElement},t.prototype.clear=function(){this.parentElement&&this.updateVisibleChoices(this.parentElement),this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="flex",this.imagepickerControlsNode=null),r.prototype.clear.call(this)},t.prototype.updateVisibleChoices=function(e){e.getType()==="ranking"?e.updateRankingChoices():e.updateVisibleChoices()},t})(Yi),_o=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isDragOverRootNode=!1,e.doDragOver=function(){var i=e.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item");i.style.cursor="grabbing"},e.reorderRankedItem=function(i,n,o){if(n!=o){var s=i.rankingChoices,a=s[n];i.isValueSetByUser=!0,s.splice(n,1),s.splice(o,0,a),e.updateDraggedElementShortcut(o+1)}},e.doBanDropHere=function(){if(e.isDragOverRootNode){e.allowDropHere=!0;return}var i=e.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item");i.style.cursor="not-allowed",m.IsTouch&&e.parentElement.updateRankingChoices(!0)},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"ranking-item"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,i,n){var o=D.createElement("div");if(o){o.className=this.shortcutClass+" sv-ranking-shortcut";var s=!0,a=i.cloneNode(s);o.appendChild(a);var l=i.getBoundingClientRect(),u=D.getComputedStyle(this.survey.rootElement).direction==="rtl";u?o.style.right=l.right:o.style.left=l.x,o.style.top=l.y,this.domAdapter.rootElement.append(o);var f=o.offsetHeight,y=n.clientY;return y>l.y+f&&(y=l.y+f-10),o.shortcutXOffset=n.clientX-l.x,o.shortcutYOffset=y-l.y,this.parentElement&&this.parentElement.useFullItemSizeForShortcut&&(o.style.width=i.offsetWidth+"px",o.style.height=i.offsetHeight+"px"),o}},Object.defineProperty(t.prototype,"shortcutClass",{get:function(){return new I().append(this.parentElement.cssClasses.root).append(this.parentElement.cssClasses.rootMobileMod,Lt).toString()},enumerable:!1,configurable:!0}),t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]},t.prototype.findDropTargetNodeByDragOverNode=function(e){return this.isDragOverRootNode=this.getIsDragOverRootNode(e),r.prototype.findDropTargetNodeByDragOverNode.call(this,e)},t.prototype.getIsDragOverRootNode=function(e){return typeof e.className=="string"&&e.className.indexOf("sv-ranking")!==-1},t.prototype.isDropTargetValid=function(e,i){var n=this.parentElement.rankingChoices;return n.indexOf(e)!==-1},t.prototype.calculateIsBottom=function(e,i){return this.dropTarget instanceof q&&this.draggedElement!==this.dropTarget?r.prototype.calculateIsBottom.call(this,e,i):!1},t.prototype.getIndices=function(e,i,n){var o=i.indexOf(this.draggedElement),s=n.indexOf(this.dropTarget);if(o<0&&this.draggedElement&&(this.draggedElement=q.getItemByValue(i,this.draggedElement.value)||this.draggedElement,o=i.indexOf(this.draggedElement)),s===-1){var a=e.value.length;s=a}else i==n?(!this.isBottom&&o<s&&s--,this.isBottom&&o>s&&s++):i!=n&&this.isBottom&&s++;return{fromIndex:o,toIndex:s}},t.prototype.afterDragOver=function(e){var i=this.getIndices(this.parentElement,this.parentElement.rankingChoices,this.parentElement.rankingChoices),n=i.fromIndex,o=i.toIndex;this.reorderRankedItem(this.parentElement,n,o)},t.prototype.updateDraggedElementShortcut=function(e){var i;if(!((i=this.domAdapter)===null||i===void 0)&&i.draggedElementShortcut){var n=e!==null?e+"":"",o=this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item__index");o.innerText=n}},t.prototype.ghostPositionChanged=function(){this.parentElement.currentDropTarget=this.draggedElement,r.prototype.ghostPositionChanged.call(this)},t.prototype.doDrop=function(){return this.parentElement.setValue(),this.parentElement},t.prototype.clear=function(){this.parentElement&&(this.parentElement.dropTargetNodeMove=null,this.parentElement.updateRankingChoices(!0)),r.prototype.clear.call(this)},t})(Bo),Qo=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.selectToRank=function(i,n,o){var s=[].concat(i.rankingChoices),a=i.unRankingChoices,l=a[n];s.splice(o,0,l),e.updateChoices(i,s)},e.unselectFromRank=function(i,n,o){var s=[].concat(i.rankingChoices);s.splice(n,1),e.updateChoices(i,s)},e}return t.prototype.findDropTargetNodeByDragOverNode=function(e){if(e.dataset.ranking==="from-container"||e.dataset.ranking==="to-container")return e;var i=e.closest("[data-ranking='to-container']"),n=e.closest("[data-ranking='from-container']");return this.parentElement.unRankingChoices.length===0&&n?n:this.parentElement.rankingChoices.length===0&&i?i:r.prototype.findDropTargetNodeByDragOverNode.call(this,e)},t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]||this.parentElement.unRankingChoices[e]},t.prototype.getDropTargetByNode=function(e,i){return e.dataset.ranking==="to-container"?"to-container":e.dataset.ranking==="from-container"||e.closest("[data-ranking='from-container']")?"from-container":r.prototype.getDropTargetByNode.call(this,e,i)},t.prototype.isDropTargetValid=function(e,i){return e==="to-container"||e==="from-container"?!0:r.prototype.isDropTargetValid.call(this,e,i)},t.prototype.afterDragOver=function(e){var i=this.parentElement,n=i.rankingChoices,o=i.unRankingChoices;if(this.isDraggedElementUnranked&&this.isDropTargetRanked){this.doRankBetween(e,o,n,this.selectToRank);return}if(this.isDraggedElementRanked&&this.isDropTargetRanked){this.doRankBetween(e,n,n,this.reorderRankedItem);return}if(this.isDraggedElementRanked&&!this.isDropTargetRanked){this.doRankBetween(e,n,o,this.unselectFromRank);return}},t.prototype.doRankBetween=function(e,i,n,o){var s=this.parentElement,a=this.getIndices(s,i,n),l=a.fromIndex,u=a.toIndex;o(s,l,u,e)},Object.defineProperty(t.prototype,"isDraggedElementRanked",{get:function(){return this.parentElement.rankingChoices.indexOf(this.draggedElement)!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDropTargetRanked",{get:function(){return this.dropTarget==="to-container"?!0:this.parentElement.rankingChoices.indexOf(this.dropTarget)!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDraggedElementUnranked",{get:function(){return!this.isDraggedElementRanked},enumerable:!1,configurable:!0}),t.prototype.updateChoices=function(e,i){e.isValueSetByUser=!0,e.rankingChoices=i,e.updateUnRankingChoices(i)},t})(_o),gn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.domNode=null,i.onVisibleChoicesChanged=function(){if(r.prototype.onVisibleChoicesChanged.call(i),i.carryForwardStartUnranked&&!i.isValueSetByUser&&!i.selectToRankEnabled&&!i.defaultValue&&(i.value=[]),i.visibleChoices.length===1&&!i.selectToRankEnabled){i.value=[],i.value.push(i.visibleChoices[0].value),i.updateRankingChoices();return}if(i.isEmpty()){i.updateRankingChoices();return}if(i.selectToRankEnabled){i.updateRankingChoices();return}i.visibleChoices.length>i.value.length&&i.addToValueByVisibleChoices(),i.visibleChoices.length<i.value.length&&i.removeFromValueByVisibleChoices(),i.updateRankingChoices()},i.localeChanged=function(){r.prototype.localeChanged.call(i),i.updateRankingChoicesSync()},i._rankingChoicesAnimation=new Ae(i.getChoicesAnimationOptions(!0),function(n){i._renderedRankingChoices=n},function(){return i.renderedRankingChoices}),i._unRankingChoicesAnimation=new Ae(i.getChoicesAnimationOptions(!1),function(n){i._renderedUnRankingChoices=n},function(){return i.renderedUnRankingChoices}),i.rankingChoices=[],i.unRankingChoices=[],i._renderedRankingChoices=[],i._renderedUnRankingChoices=[],i.handlePointerDown=function(n,o,s){var a=n.target;i.isDragStartNodeValid(a)&&i.isAllowStartDrag(a,o)&&(i.draggedChoiceValue=o.value,i.draggedTargetNode=s,i.dragOrClickHelper.onPointerDown(n))},i.startDrag=function(n){var o=q.getItemByValue(i.visibleChoices,i.draggedChoiceValue);i.dragDropRankingChoices.startDrag(n,o,i,i.draggedTargetNode)},i.handlePointerUp=function(n,o,s){if(i.selectToRankEnabled){var a=n.target;i.isAllowStartDrag(a,o)&&i.handleKeydownSelectToRank(n,o," ",!1)}},i.handleKeydown=function(n,o){if(!i.isReadOnlyAttr&&!i.isDesignMode){var s=n.key,a=i.rankingChoices.indexOf(o);if(i.selectToRankEnabled){i.handleKeydownSelectToRank(n,o);return}if(s==="ArrowUp"&&a||s==="ArrowDown"&&a!==i.rankingChoices.length-1){var l=s=="ArrowUp"?a-1:a+1;i.dragDropRankingChoices.reorderRankedItem(i,a,l),i.setValueAfterKeydown(l,"",!0,n)}}},i.focusItem=function(n,o){if(i.domNode)if(i.selectToRankEnabled&&o){var s="[data-ranking='"+o+"']",a=i.domNode.querySelectorAll(s+" ."+i.cssClasses.item);a[n].focus()}else{var a=i.domNode.querySelectorAll("."+i.cssClasses.item);a[n].focus()}},i.isValueSetByUser=!1,i.setValue=function(){var n=[];i.rankingChoices.forEach(function(o){n.push(o.value)}),i.value=n,i.isValueSetByUser=!0},i.dragOrClickHelper=new Yt(i.startDrag),i}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="selectToRankEnabled"&&(this.clearValue(!0),this.setDragDropRankingChoices(),this.updateRankingChoicesSync())},t.prototype.getType=function(){return"ranking"},t.prototype.supportElementsInChoice=function(){return!1},t.prototype.getItemTabIndex=function(e){if(!(this.isDesignMode||e.disabled))return 0},t.prototype.supportContainerQueries=function(){return this.selectToRankEnabled},Object.defineProperty(t.prototype,"rootClass",{get:function(){return new I().append(this.cssClasses.root).append(this.cssClasses.rootMobileMod,this.isMobileMode()).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.itemOnError,this.hasCssError()).append(this.cssClasses.rootDragHandleAreaIcon,C.rankingDragHandleArea==="icon").append(this.cssClasses.rootSelectToRankMod,this.selectToRankEnabled).append(this.cssClasses.rootSelectToRankEmptyValueMod,this.isEmpty()).append(this.cssClasses.rootSelectToRankAlignHorizontal,this.selectToRankEnabled&&this.renderedSelectToRankAreasLayout==="horizontal").append(this.cssClasses.rootSelectToRankAlignVertical,this.selectToRankEnabled&&this.renderedSelectToRankAreasLayout==="vertical").append(this.cssClasses.rootSelectToRankSwapAreas,this.selectToRankEnabled&&this.renderedSelectToRankAreasLayout==="horizontal"&&this.selectToRankSwapAreas).toString()},enumerable:!1,configurable:!0}),t.prototype.isItemSelectedCore=function(e){return this.selectToRankEnabled?r.prototype.isItemSelectedCore.call(this,e):!0},t.prototype.getItemClassCore=function(e,i){return new I().append(r.prototype.getItemClassCore.call(this,e,i)).append(this.cssClasses.itemGhostMod,this.currentDropTarget===e).toString()},t.prototype.getContainerClasses=function(e){var i=!1,n=e==="to",o=e==="from";return n?i=this.renderedRankingChoices.length===0:o&&(i=this.renderedUnRankingChoices.length===0),new I().append(this.cssClasses.container).append(this.cssClasses.containerToMode,n).append(this.cssClasses.containerFromMode,o).append(this.cssClasses.containerEmptyMode,i).toString()},t.prototype.isItemCurrentDropTarget=function(e){return this.dragDropRankingChoices.dropTarget===e},Object.defineProperty(t.prototype,"ghostPositionCssClass",{get:function(){return this.ghostPosition==="top"?this.cssClasses.dragDropGhostPositionTop:this.ghostPosition==="bottom"?this.cssClasses.dragDropGhostPositionBottom:""},enumerable:!1,configurable:!0}),t.prototype.getItemIndexClasses=function(e){var i;return this.selectToRankEnabled?i=this.unRankingChoices.indexOf(e)!==-1:i=this.isEmpty(),new I().append(this.cssClasses.itemIndex).append(this.cssClasses.itemIndexEmptyMode,i).toString()},t.prototype.getNumberByIndex=function(e){return this.isEmpty()?"":e+1+""},t.prototype.updateRankingChoicesSync=function(){this.blockAnimations(),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e,i),this.setDragDropRankingChoices(),this.updateRankingChoicesSync()},t.prototype.isAnswerCorrect=function(){return w.isArraysEqual(this.value,this.correctAnswer,!1)},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(e){r.prototype.onSurveyValueChanged.call(this,e),!this.isLoadingFromJson&&this.updateRankingChoices()},t.prototype.onSurveyLoad=function(){this.blockAnimations(),r.prototype.onSurveyLoad.call(this),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.updateValueFromSurvey=function(e,i){r.prototype.updateValueFromSurvey.call(this,e,i),e&&(this.isValueSetByUser=!0)},t.prototype.addToValueByVisibleChoices=function(){var e=this.value.slice();this.visibleChoices.forEach(function(i){e.indexOf(i.value)===-1&&e.push(i.value)}),this.value=e},t.prototype.removeFromValueByVisibleChoices=function(){for(var e=this.value.slice(),i=this.visibleChoices,n=this.value.length-1;n>=0;n--)q.getItemByValue(i,this.value[n])||e.splice(n,1);this.value=e},t.prototype.getChoicesAnimationOptions=function(e){var i=this;return{getKey:function(n){return n.value},getRerenderEvent:function(){return i.onElementRerendered},isAnimationEnabled:function(){return i.animationAllowed&&!i.isDesignMode&&i.isVisible&&!!i.domNode},getReorderOptions:function(n,o){var s="";return n!==i.currentDropTarget&&(s=o?"sv-dragdrop-movedown":"sv-dragdrop-moveup"),{cssClass:s}},getLeaveOptions:function(n){var o=e?i.renderedRankingChoices:i.renderedUnRankingChoices;return i.renderedSelectToRankAreasLayout=="vertical"&&o.length==1&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-removing-empty"}:{cssClass:"sv-ranking-item--animate-item-removing",onBeforeRunAnimation:function(s){s.style.setProperty("--animation-height",s.offsetHeight+"px")}}},getEnterOptions:function(n){var o=e?i.renderedRankingChoices:i.renderedUnRankingChoices;return i.renderedSelectToRankAreasLayout=="vertical"&&o.length==1&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-adding-empty"}:{cssClass:"sv-ranking-item--animate-item-adding",onBeforeRunAnimation:function(s){s.style.setProperty("--animation-height",s.offsetHeight+"px")}}},getAnimatedElement:function(n){var o,s=i.cssClasses,a="";i.selectToRankEnabled&&(!e&&s.containerFromMode?a=pe(s.containerFromMode):e&&s.containerToMode&&(a=pe(s.containerToMode)));var l=e?i.renderedRankingChoices.indexOf(n):i.renderedUnRankingChoices.indexOf(n);return(o=i.domNode)===null||o===void 0?void 0:o.querySelector("".concat(a," [data-sv-drop-target-ranking-item='").concat(l,"']"))},allowSyncRemovalAddition:!0}},Object.defineProperty(t.prototype,"rankingChoicesAnimation",{get:function(){return this._rankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unRankingChoicesAnimation",{get:function(){return this._unRankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedRankingChoices",{get:function(){return this._renderedRankingChoices},set:function(e){this.rankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedUnRankingChoices",{get:function(){return this._renderedUnRankingChoices},set:function(e){this.unRankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.updateRenderedRankingChoices=function(){this.renderedRankingChoices=this.rankingChoices},t.prototype.updateRenderedUnRankingChoices=function(){this.renderedUnRankingChoices=this.unRankingChoices},t.prototype.updateRankingChoices=function(e){var i=this;if(e===void 0&&(e=!1),this.selectToRankEnabled){this.updateRankingChoicesSelectToRankMode(e);return}var n=[];if(e&&(this.rankingChoices=[]),this.isEmpty()){this.rankingChoices=this.visibleChoices;return}this.value.forEach(function(o){i.visibleChoices.forEach(function(s){s.value===o&&n.push(s)})}),this.rankingChoices=n},t.prototype.updateUnRankingChoices=function(e){var i=[];this.visibleChoices.forEach(function(n){i.push(n)}),e.forEach(function(n){i.forEach(function(o,s){o.value===n.value&&i.splice(s,1)})}),this.unRankingChoices=i},t.prototype.updateRankingChoicesSelectToRankMode=function(e){var i=this,n=[];this.isEmpty()||this.value.forEach(function(o){i.visibleChoices.forEach(function(s){s.value===o&&n.push(s)})}),this.updateUnRankingChoices(n),this.rankingChoices=n},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.setDragDropRankingChoices()},t.prototype.setDragDropRankingChoices=function(){this.dragDropRankingChoices=this.createDragDropRankingChoices()},t.prototype.createDragDropRankingChoices=function(){return this.selectToRankEnabled?new Qo(this.survey,null,this.longTap):new _o(this.survey,null,this.longTap)},t.prototype.isDragStartNodeValid=function(e){return C.rankingDragHandleArea==="icon"?e.classList.contains(this.cssClasses.itemIconHoverMod):!0},t.prototype.isAllowStartDrag=function(e,i){return!this.isReadOnly&&!this.isDesignMode&&this.canStartDragDueMaxSelectedChoices(e)&&this.canStartDragDueItemEnabled(i)},t.prototype.canStartDragDueMaxSelectedChoices=function(e){if(!this.selectToRankEnabled)return!0;var i=e.closest("[data-ranking='from-container']");return i?this.checkMaxSelectedChoicesUnreached():!0},t.prototype.canStartDragDueItemEnabled=function(e){return e.enabled},t.prototype.checkMaxSelectedChoicesUnreached=function(){if(this.maxSelectedChoices<1)return!0;var e=this.value,i=Array.isArray(e)?e.length:0;return i<this.maxSelectedChoices},t.prototype.afterRenderQuestionElement=function(e){this.domNode=e,r.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){this.domNode=void 0,r.prototype.beforeDestroyQuestionElement.call(this,e)},t.prototype.supportSelectAll=function(){return!1},t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.handleKeydownSelectToRank=function(e,i,n,o){if(o===void 0&&(o=!0),!this.isDesignMode){var s=e.key;if(n&&(s=n),!(s!==" "&&s!=="ArrowUp"&&s!=="ArrowDown")){var a=this.dragDropRankingChoices,l=this.rankingChoices,u=l.indexOf(i)!==-1,f=u?l:this.unRankingChoices,y=f.indexOf(i);if(!(y<0)){var b;if(s===" "&&!u){if(!this.checkMaxSelectedChoicesUnreached()||!this.canStartDragDueItemEnabled(i))return;b=this.value.length,a.selectToRank(this,y,b),this.setValueAfterKeydown(b,"to-container",o,e);return}if(u){if(s===" "){a.unselectFromRank(this,y),b=this.unRankingChoices.indexOf(i),this.setValueAfterKeydown(b,"from-container",o,e);return}var E=s==="ArrowUp"?-1:s==="ArrowDown"?1:0;E!==0&&(b=y+E,!(b<0||b>=l.length)&&(a.reorderRankedItem(this,y,b),this.setValueAfterKeydown(b,"to-container",o,e)))}}}}},t.prototype.setValueAfterKeydown=function(e,i,n,o){var s=this;n===void 0&&(n=!0),this.setValue(),n&&setTimeout(function(){s.focusItem(e,i)},1),o&&o.preventDefault()},t.prototype.getIconHoverCss=function(){return new I().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconHoverMod).toString()},t.prototype.getIconFocusCss=function(){return new I().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconFocusMod).toString()},t.prototype.getDefaultItemComponent=function(){return"sv-ranking-item"},Object.defineProperty(t.prototype,"renderedSelectToRankAreasLayout",{get:function(){return this.isMobileMode()?"vertical":this.selectToRankAreasLayout},enumerable:!1,configurable:!0}),t.prototype.isMobileMode=function(){return Lt},Object.defineProperty(t.prototype,"useFullItemSizeForShortcut",{get:function(){return this.getPropertyValue("useFullItemSizeForShortcut")},set:function(e){this.setPropertyValue("useFullItemSizeForShortcut",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragDropSvgIcon",{get:function(){return this.cssClasses.dragDropSvgIconId||"#icon-drag-24x24"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrowsSvgIcon",{get:function(){return this.cssClasses.arrowsSvgIconId||"#icon-reorder-24x24"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dashSvgIcon",{get:function(){return this.cssClasses.dashSvgIconId||"#icon-rankingundefined-16x16"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),c([re({onSet:function(e,i){return i.updateRenderedRankingChoices()},onRemove:function(e,i,n){return n.updateRenderedRankingChoices()},onPush:function(e,i,n){return n.updateRenderedRankingChoices()}})],t.prototype,"rankingChoices",void 0),c([re({onSet:function(e,i){return i.updateRenderedUnRankingChoices()},onRemove:function(e,i,n){return n.updateRenderedUnRankingChoices()},onPush:function(e,i,n){return n.updateRenderedUnRankingChoices()}})],t.prototype,"unRankingChoices",void 0),c([re()],t.prototype,"_renderedRankingChoices",void 0),c([re()],t.prototype,"_renderedUnRankingChoices",void 0),c([p({defaultValue:null})],t.prototype,"currentDropTarget",void 0),c([p()],t.prototype,"longTap",void 0),c([p({defaultValue:!1})],t.prototype,"selectToRankEnabled",void 0),c([p({defaultValue:!1})],t.prototype,"selectToRankSwapAreas",void 0),c([p({defaultValue:!0})],t.prototype,"carryForwardStartUnranked",void 0),c([p()],t.prototype,"selectToRankAreasLayout",void 0),c([p({localizable:{defaultStr:!0,markdown:!0}})],t.prototype,"selectToRankEmptyRankedAreaText",void 0),c([p({localizable:{defaultStr:!0,markdown:!0}})],t.prototype,"selectToRankEmptyUnrankedAreaText",void 0),t})(St);V.addClass("ranking",[{name:"showOtherItem",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"showNoneItem",visible:!1,isSerializable:!1},{name:"showRefuseItem",visible:!1,isSerializable:!1},{name:"showDontKnowItem",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"showSelectAllItem",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"separateSpecialChoices",visible:!1,isSerializable:!1},{name:"longTap",default:!0,visible:!1,isSerializable:!1},{name:"selectToRankEnabled:switch",default:!1,visible:!0,isSerializable:!0},{name:"selectToRankSwapAreas:switch",default:!1,visible:!1,isSerializable:!0,dependsOn:"selectToRankEnabled"},{name:"selectToRankAreasLayout",default:"horizontal",choices:["horizontal","vertical"],dependsOn:"selectToRankEnabled",visibleIf:function(r){return!!r.selectToRankEnabled},visible:!0,isSerializable:!0},{name:"selectToRankEmptyRankedAreaText:text",serializationProperty:"locSelectToRankEmptyRankedAreaText",dependsOn:"selectToRankEnabled",visibleIf:function(r){return!!r.selectToRankEnabled}},{name:"selectToRankEmptyUnrankedAreaText:text",serializationProperty:"locSelectToRankEmptyUnrankedAreaText",dependsOn:"selectToRankEnabled",visibleIf:function(r){return!!r.selectToRankEnabled}},{name:"maxSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(r){return!!r.selectToRankEnabled},isSerializable:!0},{name:"minSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(r){return!!r.selectToRankEnabled},isSerializable:!0},{name:"itemComponent",visible:!1,default:"sv-ranking-item"}],function(){return new gn("")},"checkbox"),K.Instance.registerQuestion("ranking",function(r){var t=new gn(r);return t.choices=K.DefaultChoices,t});var yn=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return Object.defineProperty(t.prototype,"textAreaModel",{get:function(){return this.textAreaModelValue||(this.textAreaModelValue=new Ut(this.getTextAreaOptions())),this.textAreaModelValue},enumerable:!1,configurable:!0}),t.prototype.getTextAreaOptions=function(){var e=this,i=this,n=function(s){w.isTwoValueEquals(i.value,s,!1,!0,!1)||(i.value=s)},o={question:this,id:function(){return e.inputId},propertyNames:["value"],className:function(){return e.className},placeholder:function(){return e.renderedPlaceholder},isDisabledAttr:function(){return e.isDisabledAttr},isReadOnlyAttr:function(){return e.isReadOnlyAttr||e.forceIsInputReadOnly||!1},autoGrow:function(){return e.renderedAutoGrow},maxLength:function(){return e.getMaxLength()},rows:function(){return e.rows},cols:function(){return e.cols},ariaRequired:function(){return e.a11y_input_ariaRequired},ariaLabel:function(){return e.a11y_input_ariaLabel},ariaLabelledBy:function(){return e.a11y_input_ariaLabelledBy},ariaDescribedBy:function(){return e.a11y_input_ariaDescribedBy},ariaInvalid:function(){return e.a11y_input_ariaInvalid},ariaErrormessage:function(){return e.a11y_input_ariaErrormessage},getTextValue:function(){return e.value},onTextAreaChange:function(s){n(s.target.value)},onTextAreaInput:function(s){e.onInput(s)},onTextAreaKeyDown:function(s){e.onKeyDown(s)},onTextAreaFocus:function(s){e.onFocus(s)},onTextAreaBlur:function(s){e.onBlur(s)}};return o},Object.defineProperty(t.prototype,"renderedAutoGrow",{get:function(){var e=this.autoGrow;return e===void 0&&this.survey?this.survey.autoGrowComment:!!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAllowResize",{get:function(){var e=this.allowResize;return e===void 0&&this.survey?this.survey.allowResizeComment:!!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.renderedAllowResize?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"comment"},t.prototype.afterRenderQuestionElement=function(e){this.element=e?.querySelector("#".concat(this.inputId))||e,r.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.element=void 0},t.prototype.onInput=function(e){this.isInputTextUpdate&&(this.value=e.target.value),this.updateRemainingCharacterCounter(e.target.value)},t.prototype.onBlurCore=function(e){r.prototype.onBlurCore.call(this,e)},t.prototype.onKeyDown=function(e){this.onKeyDownPreprocess&&this.onKeyDownPreprocess(e),!this.acceptCarriageReturn&&(e.key==="Enter"||e.keyCode===13)&&(e.preventDefault(),e.stopPropagation())},t.prototype.setNewValue=function(e){!this.acceptCarriageReturn&&e&&(e=e.replace(new RegExp(`(\r
|
|\r)`,"gm"),"")),r.prototype.setNewValue.call(this,e)},t.prototype.getValueSeparator=function(){return`
`},t.prototype.notifyStateChanged=function(e){r.prototype.notifyStateChanged.call(this,e),this.isCollapsed||this.textAreaModel.updateElement()},Object.defineProperty(t.prototype,"className",{get:function(){return(this.cssClasses?this.getControlClass():"panel-comment-root")||void 0},enumerable:!1,configurable:!0}),c([p()],t.prototype,"rows",void 0),c([p()],t.prototype,"cols",void 0),c([p()],t.prototype,"acceptCarriageReturn",void 0),c([p()],t.prototype,"autoGrow",void 0),c([p()],t.prototype,"allowResize",void 0),t})(ei);V.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50,visible:!1,isSerializable:!1},{name:"rows:number",default:4},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]},{name:"autoGrow:boolean",defaultFunc:function(){}},{name:"allowResize:boolean",defaultFunc:function(){}},{name:"acceptCarriageReturn:boolean",default:!0,visible:!1}],function(){return new yn("")},"textbase"),K.Instance.registerQuestion("comment",function(r){return new yn(r)});var xt="environment",Fe="user",tu=(function(){function r(){this.canFlipValue=void 0}return r.clear=function(){r.cameraList=void 0,r.cameraIndex=-1},r.setCameraList=function(t){var e=function(i){var n=i.label.toLocaleLowerCase();return n.indexOf(Fe)>-1?Fe:n.indexOf(xt)>-1?xt:n.indexOf("front")>-1?Fe:n.indexOf("back")>-1?xt:""};r.clear(),Array.isArray(t)&&t.length>0&&(r.cameraIndex=-1,t.sort(function(i,n){if(i===n)return 0;if(i.label!==n.label){var o=e(i),s=e(n);if(o!==s){if(o===Fe)return-1;if(s===Fe)return 1;if(o===xt)return-1;if(s===xt)return 1}}var a=t.indexOf(i),l=t.indexOf(n);return a<l?-1:1})),r.cameraList=t},r.prototype.hasCamera=function(t){var e=this;if(r.cameraList!==void 0){this.hasCameraCallback(t);return}if(r.mediaDevicesCallback){var i=function(n){e.setVideoInputs(n),e.hasCameraCallback(t)};r.mediaDevicesCallback(i);return}typeof navigator<"u"&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){e.setVideoInputs(n),e.hasCameraCallback(t),e.updateCanFlipValue()}).catch(function(n){r.cameraList=null,e.hasCameraCallback(t)}):(r.cameraList=null,this.hasCameraCallback(t))},r.prototype.getMediaConstraints=function(t){var e=r.cameraList;if(!(!Array.isArray(e)||e.length<1)){r.cameraIndex<0&&(r.cameraIndex=0);var i=e[r.cameraIndex],n={};return i&&i.deviceId?n.deviceId={exact:i.deviceId}:n.facingMode=r.cameraFacingMode,t&&(t?.height&&(n.height={ideal:t.height}),t?.width&&(n.width={ideal:t.width})),{video:n,audio:!1}}},r.prototype.startVideo=function(t,e,i,n){var o=this;if(!t){e(void 0);return}t.style.width="100%",t.style.height="auto",t.style.height="100%",t.style.objectFit="contain";var s=this.getMediaConstraints({width:i,height:n});navigator.mediaDevices.getUserMedia(s).then(function(a){var l;t.srcObject=a,!(!((l=r.cameraList[r.cameraIndex])===null||l===void 0)&&l.deviceId)&&a.getTracks()[0].getCapabilities().facingMode&&(r.canSwitchFacingMode=!0,o.updateCanFlipValue()),t.play(),e(a)}).catch(function(a){e(void 0)})},r.prototype.getImageSize=function(t){return{width:t.videoWidth,height:t.videoHeight}},r.prototype.snap=function(t,e){if(!t||!D.isAvailable())return!1;var i=D.getDocument(),n=i.createElement("canvas"),o=this.getImageSize(t);n.height=o.height,n.width=o.width;var s=n.getContext("2d");return s.clearRect(0,0,n.width,n.height),s.drawImage(t,0,0,n.width,n.height),n.toBlob(e,"image/png"),!0},r.prototype.updateCanFlipValue=function(){var t=r.cameraList;this.canFlipValue=Array.isArray(t)&&t.length>1||r.canSwitchFacingMode,this.onCanFlipChangedCallback&&this.onCanFlipChangedCallback(this.canFlipValue)},r.prototype.canFlip=function(t){return this.canFlipValue===void 0&&this.updateCanFlipValue(),t&&(this.onCanFlipChangedCallback=t),this.canFlipValue},r.prototype.flip=function(){this.canFlip()&&(r.canSwitchFacingMode?r.cameraFacingMode=r.cameraFacingMode===Fe?"environment":Fe:r.cameraIndex>=r.cameraList.length-1?r.cameraIndex=0:r.cameraIndex++)},r.prototype.hasCameraCallback=function(t){t(Array.isArray(r.cameraList))},r.prototype.setVideoInputs=function(t){var e=[];t.forEach(function(i){i.kind==="videoinput"&&e.push(i)}),r.setCameraList(e.length>0?e:null)},r.cameraIndex=-1,r.cameraFacingMode=Fe,r.canSwitchFacingMode=!1,r})();function iu(r,t,e){var i=atob(r.split(",")[1]),n=new Uint8Array(i.split("").map(function(o){return o.charCodeAt(0)})).buffer;return new File([n],t,{type:e})}var tt=C.customFileCategoryName,mn=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isUploading=!1,e.onUploadStateChanged=e.addEvent(),e.onStateChanged=e.addEvent(),e}return t.prototype.stateChanged=function(e){this.currentState!=e&&(e==="loading"&&(this.isUploading=!0),e==="loaded"&&(this.isUploading=!1),e==="error"&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e}),this.onUploadStateChanged.fire(this,{state:e}))},Object.defineProperty(t.prototype,"showLoadingIndicator",{get:function(){return this.isUploading},enumerable:!1,configurable:!0}),t.prototype.clearValue=function(e,i){this.clearOnDeletingContainer(),r.prototype.clearValue.call(this,e,i)},t.prototype.clearOnDeletingContainer=function(){this.survey&&this.survey.clearFiles(this,this.name,this.value,null,function(){})},t.prototype.onCheckForErrors=function(e,i,n){r.prototype.onCheckForErrors.call(this,e,i,n),this.isUploading&&this.waitForUpload&&e.push(new zt(this.getLocalizationString("uploadingFile"),this))},t.prototype.uploadFiles=function(e,i){var n=this;this.survey&&(this.errors=[],this.stateChanged("loading"),this.survey.uploadFiles(this,this.name,e,function(o,s){Array.isArray(o)&&(n.setValueFromResult(o),Array.isArray(s)&&(s.forEach(function(a){return n.errors.push(new zt(a,n))}),n.stateChanged("error"))),o==="success"&&Array.isArray(s)&&n.setValueFromResult(s),o==="error"&&(typeof s=="string"&&n.errors.push(new zt(s,n)),Array.isArray(s)&&s.length>0&&s.forEach(function(a){return n.errors.push(new zt(a,n))}),n.stateChanged("error")),n.stateChanged("loaded")},i))},t.prototype.loadPreview=function(e){},t.prototype.onChangeQuestionValue=function(e){r.prototype.onChangeQuestionValue.call(this,e),this.stateChanged(this.isEmpty()?"empty":"loaded")},t.prototype.getIsQuestionReady=function(){return r.prototype.getIsQuestionReady.call(this)&&!this.isFileLoading},Object.defineProperty(t.prototype,"isFileLoading",{get:function(){return this.isFileLoadingValue},set:function(e){this.isFileLoadingValue=e,this.updateIsReady()},enumerable:!1,configurable:!0}),c([p()],t.prototype,"isUploading",void 0),c([p({defaultValue:"empty"})],t.prototype,"currentState",void 0),c([p()],t.prototype,"storeDataAsText",void 0),c([p()],t.prototype,"waitForUpload",void 0),t})(ie),jo=(function(r){P(t,r);function t(e,i){var n=r.call(this)||this;return n.question=e,n.index=i,n.id=t.getId(),n}return t.getId=function(){return"sv_sfp_"+t.pageCounter++},Object.defineProperty(t.prototype,"css",{get:function(){return this.question.cssClasses.page},enumerable:!1,configurable:!0}),t.pageCounter=0,c([re({})],t.prototype,"items",void 0),t})(U),vn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isDragging=!1,i.canFlipCameraValue=void 0,i.prevPreviewLength=0,i.isClearingFiles=!1,i._renderedPages=[],i.pagesAnimation=new Oi(i.getPagesAnimationOptions(),function(n){i._renderedPages=n},function(){return i.renderedPages}),i.calcAvailableItemsCount=function(n,o,s){var a=Math.floor(n/(o+s));return(a+1)*(o+s)-s<=n&&a++,a},i.dragCounter=0,i.onDragEnter=function(n){i.canDragDrop()&&(n.preventDefault(),i.isDragging=!0,i.dragCounter++)},i.onDragOver=function(n){if(!i.canDragDrop())return n.returnValue=!1,!1;n.dataTransfer.dropEffect="copy",n.preventDefault()},i.onDrop=function(n){if(i.canDragDrop()){i.isDragging=!1,i.dragCounter=0,n.preventDefault();var o=n.dataTransfer;i.onChange(o)}},i.onDragLeave=function(n){i.canDragDrop()&&(i.dragCounter--,i.dragCounter===0&&(i.isDragging=!1))},i.doChange=function(n){var o=n.target||n.srcElement;i.onChange(o)},i.doClean=function(){if(i.needConfirmRemoveFile){ht({message:i.confirmRemoveAllMessage,funcOnYes:function(){i.clearFilesCore()},locale:i.getLocale(),rootElement:i.survey.rootElement,cssClass:i.cssClasses.confirmDialog});return}i.clearFilesCore()},i.doDownloadFileFromContainer=function(n){n.stopPropagation();var o=n.currentTarget;if(o&&o.getElementsByTagName){var s=o.getElementsByTagName("a")[0];s?.click()}},i.doDownloadFile=function(n,o){n.stopPropagation(),ft()&&(n.preventDefault(),Pr(o.content,o.name))},i.createNewArray("acceptedCategories",void 0,function(n){n===tt&&(i.acceptedTypes=void 0)}),i.actionsContainerValue=i.createActionsContainer(),i}return Object.defineProperty(t.prototype,"fileNavigatorVisible",{get:function(){var e=this.showLoadingIndicator,i=this.isPlayingVideo,n=this.containsMultiplyFiles,o=this.pageSize<this.previewValue.length;return!e&&!i&&n&&o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagesCount",{get:function(){return Math.ceil(this.previewValue.length/this.pageSize)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionsContainerVisible",{get:function(){var e=this.showLoadingIndicator,i=this.isPlayingVideo;return!e&&!i},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="acceptedTypes"&&this.updateAcceptedCategories(),e==="acceptedCategories"&&(!Array.isArray(n)||n.indexOf(tt)<0)&&(this.acceptedTypes=void 0)},Object.defineProperty(t.prototype,"actionsContainer",{get:function(){return this.actionsContainerValue.actions.length===0&&(this.actionsContainerValue.actions=this.createContainerActions()),this.actionsContainerValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fileNavigator",{get:function(){return this.fileNavigatorValue||(this.fileNavigatorValue=this.createActionsContainer(),this.fileNavigatorValue.actions=this.createFileNavigatorActions()),this.fileNavigatorValue},enumerable:!1,configurable:!0}),t.prototype.createActionsContainer=function(){var e=new be;return e.locOwner=this,e},t.prototype.createContainerActions=function(){var e=this,i=new G({iconName:"icon-choosefile",id:"sv-file-choose-file",iconSize:"auto",data:{question:this},enabledIf:function(){return!e.isInputReadOnly},visible:new $(function(){var s=e.isDesignMode,a=e.sourceType==="camera";return!s&&e.hasFileUI||s&&!a}),component:"sv-file-choose-btn"}),n=new G({iconName:"icon-takepicture_24x24",id:"sv-file-start-camera",iconSize:"auto",locTitle:this.locTakePhotoCaption,visible:new $(function(){var s=e.isDesignMode,a=e.sourceType==="file";return!s&&e.hasVideoUI||s&&!a}),showTitle:new $(function(){return!e.isAnswered}),enabledIf:function(){return!e.isInputReadOnly},action:function(){e.startVideo()}}),o=new G({iconName:"icon-clear",id:"sv-file-clean",iconSize:"auto",locTitle:this.locClearButtonCaption,showTitle:!1,enabledIf:function(){return!e.isInputReadOnly},visible:new $(function(){return e.isAnswered}),innerCss:new $(function(){return e.cssClasses.removeButton}),action:function(){e.doClean()}});return[i,n,o]},t.prototype.createFileNavigatorActions=function(){var e=this;return this.fileIndexAction=new G({id:"fileIndex",css:"sv-action--file-index",title:this.getFileIndexCaption(),enabled:!1}),this.prevFileAction=new G({id:"prevPage",iconSize:16,action:function(){e.navigationDirection="left",e.indexToShow=e.previewValue.length&&(e.indexToShow-1+e.pagesCount)%e.pagesCount||0,e.updateFileIndexActionTitle()}}),this.nextFileAction=new G({id:"nextPage",iconSize:16,action:function(){e.navigationDirection="right",e.indexToShow=e.previewValue.length&&(e.indexToShow+1)%e.pagesCount||0,e.updateFileIndexActionTitle()}}),this.updateFileNavigatorActionsCss(this.cssClasses),[this.prevFileAction,this.fileIndexAction,this.nextFileAction]},t.prototype.updateFileIndexActionTitle=function(){this.fileIndexAction&&(this.fileIndexAction.title=this.getFileIndexCaption())},Object.defineProperty(t.prototype,"closeCameraAction",{get:function(){var e=this;return this.closeCameraActionValue||(this.closeCameraActionValue=new G({iconName:"icon-closecamera",id:"sv-file-close-camera",iconSize:"auto",innerCss:new $(function(){return new I().append(e.cssClasses.contextButton).append(e.cssClasses.closeCameraButton).toString()}),action:function(){e.stopVideo()}}),this.closeCameraActionValue.cssClasses={}),this.closeCameraActionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"takePictureAction",{get:function(){var e=this;return this.takePictureActionValue||(this.takePictureActionValue=new G({iconName:"icon-takepicture",id:"sv-file-take-picture",iconSize:"auto",innerCss:new $(function(){return new I().append(e.cssClasses.contextButton).append(e.cssClasses.takePictureButton).toString()}),locTitle:this.locTakePhotoCaption,showTitle:!1,action:function(){e.snapPicture()}}),this.takePictureActionValue.cssClasses={}),this.takePictureActionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changeCameraAction",{get:function(){var e=this;return this.changeCameraActionValue||(this.changeCameraActionValue=new G({iconName:"icon-changecamera",id:"sv-file-change-camera",iconSize:"auto",innerCss:new $(function(){return new I().append(e.cssClasses.contextButton).append(e.cssClasses.changeCameraButton).toString()}),visible:new $(function(){return e.canFlipCamera()}),action:function(){e.flipCamera()}}),this.changeCameraActionValue.cssClasses={}),this.changeCameraActionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoId",{get:function(){return this.id+"_video"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideoUI",{get:function(){return this.currentMode!=="file"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFileUI",{get:function(){return this.currentMode!=="camera"},enumerable:!1,configurable:!0}),t.prototype.startVideo=function(){var e=this;this.currentMode==="file"||this.isDesignMode||this.isPlayingVideo||(this.setIsPlayingVideo(!0),setTimeout(function(){e.startVideoInCamera()},0))},Object.defineProperty(t.prototype,"videoHtmlElement",{get:function(){var e;return(e=this.rootElement)===null||e===void 0?void 0:e.querySelector("#".concat(this.videoId))},enumerable:!1,configurable:!0}),t.prototype.startVideoInCamera=function(){var e=this;this.camera.startVideo(this.videoHtmlElement,function(i){e.videoStream=i,i||e.stopVideo()},_e(this.imageWidth),_e(this.imageHeight))},t.prototype.stopVideo=function(){this.setIsPlayingVideo(!1),this.closeVideoStream()},t.prototype.snapPicture=function(){var e=this;if(this.isPlayingVideo){var i=function(n){if(n){var o=new File([n],"snap_picture.png",{type:"image/png"});e.loadFiles([o],"camera")}};this.camera.snap(this.videoHtmlElement,i),this.stopVideo()}},t.prototype.canFlipCamera=function(){var e=this;return this.canFlipCameraValue===void 0&&(this.canFlipCameraValue=this.camera.canFlip(function(i){e.canFlipCameraValue=i})),this.canFlipCameraValue},t.prototype.flipCamera=function(){this.canFlipCamera()&&(this.closeVideoStream(),this.camera.flip(),this.startVideoInCamera())},t.prototype.closeVideoStream=function(){this.videoStream&&(this.videoStream.getTracks().forEach(function(e){e.stop()}),this.videoStream=void 0)},t.prototype.onHidingContent=function(){r.prototype.onHidingContent.call(this),this.stopVideo()},t.prototype.updateFileNavigatorActionsCss=function(e){this.prevFileAction&&(this.prevFileAction.iconName=e.leftIconId),this.nextFileAction&&(this.nextFileAction.iconName=e.rightIconId)},t.prototype.updateElementCssCore=function(e){r.prototype.updateElementCssCore.call(this,e),this.updateFileNavigatorActionsCss(e),this.updateCurrentMode()},t.prototype.getFileIndexCaption=function(){return this.getLocalizationFormatString("indexText",this.indexToShow+1,this.pagesCount)},t.prototype.updateFileNavigator=function(){this.updatePages(),this.navigationDirection=void 0,this.indexToShow=this.previewValue.length&&(this.indexToShow+this.pagesCount)%this.pagesCount||0,this.updateFileIndexActionTitle()},t.prototype.updateRenderedPages=function(){this.pages&&this.pages[this.indexToShow]&&(this.renderedPages=[this.pages[this.indexToShow]])},t.prototype.updatePages=function(){var e=this;this.blockAnimations();var i;this.pages=[],this.renderedPages=[],this.previewValue.forEach(function(n,o){o%e.pageSize==0&&(i=new jo(e,e.pages.length),e.pages.push(i)),i.items.push(n)}),this.releaseAnimations(),this.updateRenderedPages()},t.prototype.previewValueChanged=function(){var e=this;this.navigationDirection=void 0,this.previewValue.length!==this.prevPreviewLength&&(this.previewValue.length>0?this.prevPreviewLength>this.previewValue.length?this.indexToShow>=this.pagesCount&&this.indexToShow>0&&(this.indexToShow=this.pagesCount-1,this.navigationDirection="left-delete"):this.indexToShow=Math.floor(this.prevPreviewLength/this.pageSize):this.indexToShow=0),this.updatePages(),this.updateFileIndexActionTitle(),this.containsMultiplyFiles=this.previewValue.length>1,this.previewValue.length>0&&!this.calculatedGapBetweenItems&&!this.calculatedItemWidth&&setTimeout(function(){e.processResponsiveness(0,e._width)},1),this.prevPreviewLength=this.previewValue.length},t.prototype.getType=function(){return"file"},t.prototype.onChangeQuestionValue=function(e){r.prototype.onChangeQuestionValue.call(this,e),this.isLoadingFromJson||this.loadPreview(e)},t.prototype.updateAcceptedCategories=function(){this.acceptedTypes&&this.acceptedCategories.indexOf(tt)<0&&this.acceptedCategories.push(tt)},Object.defineProperty(t.prototype,"renderedAcceptedTypes",{get:function(){var e=[];this.acceptedCategories.forEach(function(n){var o=C.acceptedFileCategories[n];o&&e.push.apply(e,o)});var i=function(n){n.forEach(function(o){o&&e.indexOf(o)<0&&e.push(o)})};return Array.isArray(this.acceptedTypes)?i(this.acceptedTypes):i((this.acceptedTypes||"").split(",")),e.length>0?e.join(","):void 0},enumerable:!1,configurable:!0}),t.prototype.chooseFile=function(e){var i=this;if(this.rootElement){var n=this.rootElement.querySelector("#".concat(this.inputId));n&&(e.preventDefault(),e.stopImmediatePropagation(),n&&(this.survey?this.survey.chooseFiles(n,function(o){return i.loadFiles(o,"file")},{element:this,elementType:this.getType(),propertyName:this.name}):n.click()))}},t.prototype.getConfirmRemoveMessage=function(e){return this.confirmRemoveMessage.format(e)},Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){var e=this;return this.locRenderedPlaceholderValue===void 0&&(this.locRenderedPlaceholderValue=new $(function(){var i=e.isReadOnly,n=!e.isDesignMode&&e.hasFileUI||e.isDesignMode&&e.sourceType!="camera",o=!e.isDesignMode&&e.hasVideoUI||e.isDesignMode&&e.sourceType!="file",s;return i?s=e.locNoFileChosenCaption:n&&o?s=e.locFileOrPhotoPlaceholder:n?s=e.locFilePlaceholder:s=e.locPhotoPlaceholder,s})),this.locRenderedPlaceholderValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMode",{get:function(){return this.getPropertyValue("currentMode",this.sourceType)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingVideo",{get:function(){return this.getPropertyValue("isPlayingVideo",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsPlayingVideo=function(e){this.setPropertyValue("isPlayingVideo",e)},t.prototype.updateCurrentMode=function(){var e=this;!this.isDesignMode&&this.survey&&(this.sourceType!=="file"?this.camera.hasCamera(function(i){e.setPropertyValue("currentMode",i?e.sourceType:"file")}):this.setPropertyValue("currentMode",this.sourceType))},Object.defineProperty(t.prototype,"inputTitle",{get:function(){return this.isUploading?this.loadingFileTitle:this.isEmpty()?this.chooseFileTitle:" "},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chooseButtonText",{get:function(){return this.isEmpty()||this.allowMultiple?this.chooseButtonCaption:this.replaceButtonCaption},enumerable:!1,configurable:!0}),t.prototype.clear=function(e){var i=this;this.survey&&(this.containsMultiplyFiles=!1,this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,null,function(n,o){n==="success"&&(i.value=void 0,i.errors=[],e&&e(),i.indexToShow=0,i.updateFileIndexActionTitle(),i.isClearingFiles=!1)}))},Object.defineProperty(t.prototype,"renderCapture",{get:function(){return this.allowCameraAccess?"user":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multipleRendered",{get:function(){return this.allowMultiple?"multiple":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFileDecorator",{get:function(){var e=this.isPlayingVideo,i=this.showLoadingIndicator;return!e&&!i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showDragAreaPlaceholder",{get:function(){return!this.isAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showLoadingIndicator",{get:function(){return this.isUploading||this.isClearingFiles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowShowPreview",{get:function(){var e=this.showLoadingIndicator,i=this.isPlayingVideo;return!e&&!i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPreviewContainer",{get:function(){return this.previewValue&&this.previewValue.length>0},enumerable:!1,configurable:!0}),t.prototype.defaultImage=function(e){return!this.canPreviewImage(e)&&!!this.cssClasses.defaultImage},t.prototype.removeFile=function(e){this.removeFileByContent(this.value.filter(function(i){return i.name===e})[0])},t.prototype.removeFileByContent=function(e){var i=this;this.survey&&(this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,e.name,function(n,o){if(n==="success"){var s=i.value;Array.isArray(s)?i.value=s.filter(function(a){return!w.isTwoValueEquals(a,e,!0,!1,!1)}):i.value=void 0,i.isClearingFiles=!1}}))},t.prototype.setValueFromResult=function(e){this.value=(this.value||[]).concat(e.map(function(i){return{name:i.file.name,type:i.file.type,content:i.content}}))},t.prototype.loadFiles=function(e,i){var n=this;if(this.survey&&(this.errors=[],!!this.allFilesOk(e))){var o=function(){n.stateChanged("loading");var s=[];n.storeDataAsText?e.forEach(function(a){var l=new FileReader;l.onload=function(u){s=s.concat([{name:a.name,type:a.type,content:l.result}]),s.length===e.length&&(n.value=(n.value||[]).concat(s))},l.readAsDataURL(a)}):n.uploadFiles(e,i)};this.allowMultiple?o():this.clear(o)}},Object.defineProperty(t.prototype,"camera",{get:function(){return this.cameraValue||(this.cameraValue=new tu),this.cameraValue},enumerable:!1,configurable:!0}),t.prototype.canPreviewImage=function(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)},t.prototype.loadPreview=function(e){var i=this;if(!(this.showPreview&&this.prevLoadedPreviewValue===e)&&(this.previewValue.splice(0,this.previewValue.length),!(!this.showPreview||!e))){this.prevLoadedPreviewValue=e;var n=Array.isArray(e)?e:e?[e]:[];this.storeDataAsText?(n.forEach(function(o){var s=o.content||o;i.previewValue.push({name:o.name,type:o.type,content:s})}),this.previewValueChanged()):(this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new qo(this,function(o,s){o!=="error"&&(s.forEach(function(a){i.previewValue.push(a)}),i.previewValueChanged()),i.isFileLoading=!1,i._previewLoader.dispose(),i._previewLoader=void 0}),this._previewLoader.load(n))}},t.prototype.allFilesOk=function(e){var i=this,n=this.errors?this.errors.length:0;e=e||[];var o=Array.isArray(this.value)?this.value.length:0;return this.maxFiles>0&&this.maxFiles<e.length+o&&this.errors.push(new Mr(this.maxFiles,this)),e.forEach(function(s){i.maxSize>0&&s.size>i.maxSize&&i.errors.push(new Lr(i.maxSize,i))}),n===this.errors.length},t.prototype.isFileImage=function(e){if(!e||!e.content||!e.content.substring)return!1;var i="data:image",n=e.content&&e.content.substring(0,i.length);n=n&&n.toLowerCase();var o=n===i||!!e.type&&e.type.toLowerCase().indexOf("image/")===0;return o},t.prototype.getPlainData=function(e){var i=this;e===void 0&&(e={includeEmpty:!0});var n=r.prototype.getPlainData.call(this,e);if(n&&!this.isEmpty()){n.isNode=!1;var o=Array.isArray(this.value)?this.value:[this.value];n.data=o.map(function(s,a){return{name:a,title:"File",value:s.content&&s.content||s,displayValue:s.name&&s.name||s,getString:function(l){return i.getValueAsString(l)},isNode:!1}})}return n},t.prototype.getImageWrapperCss=function(e){return new I().append(this.cssClasses.imageWrapper).append(this.cssClasses.imageWrapperDefaultImage,this.defaultImage(e)).toString()},t.prototype.getActionsContainerCss=function(e){return new I().append(e.actionsContainer).append(e.actionsContainerAnswered,this.isAnswered).toString()},t.prototype.getRemoveButtonCss=function(){return new I().append(this.cssClasses.removeFileButton).append(this.cssClasses.contextButton).toString()},t.prototype.getChooseFileCss=function(){var e=this.isAnswered;return new I().append(this.cssClasses.chooseFile).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.chooseFileAsText,!e).append(this.cssClasses.chooseFileAsTextDisabled,!e&&this.isInputReadOnly).append(this.cssClasses.contextButton,e).append(this.cssClasses.chooseFileAsIcon,e).toString()},t.prototype.getReadOnlyFileCss=function(){return new I().append("form-control").append(this.cssClasses.placeholderInput).toString()},Object.defineProperty(t.prototype,"fileRootCss",{get:function(){return new I().append(this.cssClasses.root).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDragging,this.isDragging).append(this.cssClasses.rootAnswered,this.isAnswered).append(this.cssClasses.single,!this.allowMultiple).append(this.cssClasses.singleImage,!this.allowMultiple&&this.isAnswered&&this.canPreviewImage(this.value[0])).append(this.cssClasses.mobile,this.isMobile).toString()},enumerable:!1,configurable:!0}),t.prototype.getFileDecoratorCss=function(){return new I().append(this.cssClasses.fileDecorator).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.fileDecoratorDrag,this.isDragging).toString()},t.prototype.onChange=function(e){if(k.isFileReaderAvailable()&&!(!e||!e.files||e.files.length<1)){for(var i=[],n=this.allowMultiple?e.files.length:1,o=0;o<n;o++)i.push(e.files[o]);e.value="",this.loadFiles(i)}},t.prototype.updateActionsContainerCss=function(e,i){var n=this.actionsContainerValue;n.cssClasses=e.actionBar,n.cssClasses.itemWithTitle=n.cssClasses.item,n.cssClasses.item="",n.cssClasses.itemAsIcon=i.contextButton,n.containerCss=i.actionsContainer},t.prototype.calcCssClasses=function(e){var i=r.prototype.calcCssClasses.call(this,e);return this.updateActionsContainerCss(e,i),i},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.updateAcceptedCategories(),this.updateCurrentMode(),this.loadPreview(this.value)},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getObservedElementSelector=function(){return pe(this.cssClasses.dragArea)},t.prototype.getFileListSelector=function(){return pe(this.cssClasses.fileList)},Object.defineProperty(t.prototype,"renderedPages",{get:function(){return this._renderedPages},set:function(e){this.pagesAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.getPagesAnimationOptions=function(){var e=this;return{getEnterOptions:function(i){var n=e.cssClasses.page;return{cssClass:n?new I().append("".concat(n,"--enter-from-left"),e.navigationDirection=="left"||e.navigationDirection=="left-delete").append("".concat(n,"--enter-from-right"),e.navigationDirection=="right").toString():""}},getLeaveOptions:function(i){var n=e.cssClasses.page;return{cssClass:n?new I().append("".concat(n,"--leave-to-left"),e.navigationDirection=="right").append("".concat(n,"--leave-to-right"),e.navigationDirection=="left").toString():""}},getAnimatedElement:function(i){var n;return(n=e.rootElement)===null||n===void 0?void 0:n.querySelector("#".concat(i.id))},isAnimationEnabled:function(){return e.animationAllowed&&!!e.rootElement},getRerenderEvent:function(){return e.onElementRerendered}}},t.prototype.triggerResponsiveness=function(e){e&&(this.calculatedGapBetweenItems=void 0,this.calculatedItemWidth=void 0),r.prototype.triggerResponsiveness.call(this)},t.prototype.processResponsiveness=function(e,i){if(this._width=i,this.rootElement&&(!this.calculatedGapBetweenItems||!this.calculatedItemWidth)&&this.allowMultiple){var n=this.getFileListSelector(),o=n?this.rootElement.querySelector(this.getFileListSelector()):void 0;if(o){var s=o.querySelector(pe(this.cssClasses.page));if(s){var a=s.querySelector(pe(this.cssClasses.previewItem));this.calculatedGapBetweenItems=Math.ceil(Number.parseFloat(D.getComputedStyle(s).gap)),a&&(this.calculatedItemWidth=Math.ceil(Number.parseFloat(D.getComputedStyle(a).width)))}}}return this.calculatedGapBetweenItems&&this.calculatedItemWidth?(this.pageSize=Math.max(this.calcAvailableItemsCount(i,this.calculatedItemWidth,this.calculatedGapBetweenItems),1),!0):!1},t.prototype.canDragDrop=function(){return!this.isInputReadOnly&&this.currentMode!=="camera"&&!this.isPlayingVideo},t.prototype.afterRenderQuestionElement=function(e){r.prototype.afterRenderQuestionElement.call(this,e),this.rootElement=e},t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.stopVideo(),this.rootElement=void 0},t.prototype.clearFilesCore=function(){if(this.rootElement){var e=this.rootElement.querySelectorAll("input")[0];e&&(e.value="")}this.clear()},t.prototype.doRemoveFile=function(e,i){var n=this;if(i.stopPropagation(),this.needConfirmRemoveFile){ht({message:this.getConfirmRemoveMessage(e.name),funcOnYes:function(){n.removeFileCore(e)},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog});return}this.removeFileCore(e)},t.prototype.removeFileCore=function(e){var i=this.previewValue.indexOf(e);this.removeFileByContent(i===-1?e:this.value[i])},t.prototype.dispose=function(){this.cameraValue=void 0,this.closeVideoStream(),r.prototype.dispose.call(this)},c([p()],t.prototype,"isDragging",void 0),c([re({})],t.prototype,"previewValue",void 0),c([re({})],t.prototype,"pages",void 0),c([p({defaultValue:0,onSet:function(e,i){i.updateRenderedPages()}})],t.prototype,"indexToShow",void 0),c([p({defaultValue:1,onSet:function(e,i){i.updateFileNavigator()}})],t.prototype,"pageSize",void 0),c([p({defaultValue:!1})],t.prototype,"containsMultiplyFiles",void 0),c([p()],t.prototype,"allowCameraAccess",void 0),c([p({onSet:function(e,i){i.isLoadingFromJson||i.updateCurrentMode()}})],t.prototype,"sourceType",void 0),c([p()],t.prototype,"canFlipCameraValue",void 0),c([p()],t.prototype,"showPreview",void 0),c([p()],t.prototype,"allowMultiple",void 0),c([p()],t.prototype,"imageHeight",void 0),c([p()],t.prototype,"imageWidth",void 0),c([p()],t.prototype,"acceptedCategories",void 0),c([p()],t.prototype,"acceptedTypes",void 0),c([p()],t.prototype,"allowImagesPreview",void 0),c([p()],t.prototype,"maxSize",void 0),c([p()],t.prototype,"maxFiles",void 0),c([p()],t.prototype,"needConfirmRemoveFile",void 0),c([p({localizable:{defaultStr:"confirmRemoveFile"}})],t.prototype,"confirmRemoveMessage",void 0),c([p({localizable:{defaultStr:"confirmRemoveAllFiles"}})],t.prototype,"confirmRemoveAllMessage",void 0),c([p({localizable:{defaultStr:"noFileChosen"}})],t.prototype,"noFileChosenCaption",void 0),c([p({localizable:{defaultStr:"chooseFileCaption"}})],t.prototype,"chooseButtonCaption",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"takePhotoCaption",void 0),c([p({localizable:{defaultStr:"replaceFileCaption"}})],t.prototype,"replaceButtonCaption",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"removeFileCaption",void 0),c([p({localizable:{defaultStr:"loadingFile"}})],t.prototype,"loadingFileTitle",void 0),c([p({localizable:{defaultStr:"chooseFile"}})],t.prototype,"chooseFileTitle",void 0),c([p({localizable:{defaultStr:"clearCaption"}})],t.prototype,"clearButtonCaption",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"fileOrPhotoPlaceholder",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"photoPlaceholder",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"filePlaceholder",void 0),c([p()],t.prototype,"locRenderedPlaceholderValue",void 0),c([p()],t.prototype,"isClearingFiles",void 0),c([re()],t.prototype,"_renderedPages",void 0),t})(mn);V.addClass("file",[{name:"showCommentArea:switch",visible:!0},{name:"showPreview:boolean",default:!0,visible:!1},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0,dependsOn:"showPreview",visibleIf:function(r){return!!r.showPreview}},"imageHeight","imageWidth",{name:"acceptedCategories:set",choices:function(){var r=[];for(var t in C.acceptedFileCategories)r.push(t);return r.push(tt),r},onSerializeValue:function(r){var t=[];return r.acceptedCategories.forEach(function(e){C.acceptedFileCategories[e]&&t.push(e)}),t}},{name:"acceptedTypes",dependsOn:"acceptedCategories",visibleIf:function(r){return r.acceptedCategories.indexOf(tt)>-1}},{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},{name:"maxSize:number",default:0},{name:"maxFiles:number",default:1e3,visibleIf:function(r){return r.allowMultiple}},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean"},{name:"sourceType",choices:["file","camera","file-camera"],default:"file"},{name:"fileOrPhotoPlaceholder:text",serializationProperty:"locFileOrPhotoPlaceholder"},{name:"photoPlaceholder:text",serializationProperty:"locPhotoPlaceholder"},{name:"filePlaceholder:text",serializationProperty:"locFilePlaceholder"},{name:"allowCameraAccess:switch",visible:!1}],function(){return new vn("")},"question"),K.Instance.registerQuestion("file",function(r){return new vn(r)});var qo=(function(){function r(t,e){this.fileQuestion=t,this.callback=e,this.loaded=[]}return r.prototype.load=function(t){var e=this,i=0;this.loaded=new Array(t.length),t.forEach(function(n,o){e.fileQuestion.survey&&e.fileQuestion.survey.downloadFile(e.fileQuestion,e.fileQuestion.name,n,function(s,a){!e.fileQuestion||!e.callback||(s!=="error"?(e.loaded[o]={content:a,name:n.name,type:n.type},i++,i===t.length&&e.callback(s,e.loaded)):e.callback("error",e.loaded))})})},r.prototype.dispose=function(){this.fileQuestion=void 0,this.callback=void 0},r})(),bn=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getProcessedText=function(e){return this.ignoreHtmlProgressing?e:r.prototype.getProcessedText.call(this,e)},Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.processHtml(this.html)},enumerable:!1,configurable:!0}),t.prototype.processHtml=function(e){return this.survey?this.survey.processHtml(e,"html-question"):this.html},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return new I().append(this.cssClasses.root).append(this.cssClasses.nested,this.getIsNested()).toString()||void 0},enumerable:!1,configurable:!0}),c([p({localizable:{onCreate:function(e,i){i.onGetTextCallback=function(n){return e.survey&&!e.ignoreHtmlProgressing?e.processHtml(n):n}}}})],t.prototype,"html",void 0),t})(ni);V.addClass("html",[{name:"html:html",serializationProperty:"locHtml"},{name:"showNumber",visible:!1},{name:"state",visible:!1},{name:"titleLocation",visible:!1},{name:"descriptionLocation",visible:!1},{name:"errorLocation",visible:!1},{name:"indent",visible:!1},{name:"width",visible:!1}],function(){return new bn("")},"nonvalue"),K.Instance.registerQuestion("html",function(r){return new bn(r)});var Cn=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultItemComponent=function(){return"survey-radiogroup-item"},t.prototype.getType=function(){return"radiogroup"},t.prototype.supportElementsInChoice=function(){return!0},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){return this.allowClear&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){var e;return this.isMouseDown===!0&&!(!((e=this.selectedItem)===null||e===void 0)&&e.showCommentArea)},t.prototype.getConditionJson=function(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.prototype.getConditionJson.call(this,e,i);return delete n.allowClear,delete n.showClearButton,n},t.prototype.setNewComment=function(e){this.isMouseDown=!0,r.prototype.setNewComment.call(this,e),this.isMouseDown=!1},t.prototype.clickItemHandler=function(e){this.selectItem(e)},t.prototype.isOtherValueUnused=function(){var e;return!(!((e=this.selectedItem)===null||e===void 0)&&e.showCommentArea)},t.prototype.getDefaultTitleActions=function(){var e=this,i=[];if(!this.isDesignMode){var n=new G({locTitleName:"clearCaption",id:"sv-clr-btn-".concat(this.id),action:function(){e.clearValueFromUI()},innerCss:this.cssClasses.clearButton,visible:new $(function(){return e.canShowClearButton}),ariaLabelledBy:this.a11y_input_ariaLabelledBy});i.push(n)}return i},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),c([p()],t.prototype,"allowClear",void 0),t})(wt);V.addClass("radiogroup",[{name:"allowClear:boolean",alternativeName:"showClearButton"},{name:"separateSpecialChoices",visible:!0},{name:"itemComponent",visible:!1,default:"survey-radiogroup-item"}],function(){return new Cn("")},"checkboxbase"),K.Instance.registerQuestion("radiogroup",function(r){var t=new Cn(r);return t.choices=K.DefaultChoices,t});function Ho(r){if(typeof getComputedStyle=="function"){var t=getComputedStyle(D.getDocumentElement());return t.getPropertyValue&&t.getPropertyValue(r)}return""}function it(r,t,e){var i=!!r&&r[t];if(i||(i=Ho(e)),!i)return null;var n=D.createElement("canvas");if(!n)return null;var o=n.getContext("2d");o.fillStyle=i,o.fillStyle=="#000000"&&(o.fillStyle=Ho(e));var s=o.fillStyle;if(s.startsWith("rgba"))return s.substring(5,s.length-1).split(",").map(function(l){return+l.trim()});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]:null}var It=(function(r){P(t,r);function t(e,i){return r.call(this,e,i)||this}return t.prototype.getType=function(){return"ratingitem"},Object.defineProperty(t.prototype,"ratingOwner",{get:function(){return this.locOwner},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var e=this;return this.getPropertyValue("style",void 0,function(){var i;return(i=e.ratingOwner)===null||i===void 0?void 0:i.getItemStyle(e)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){var e=this;return this.getPropertyValue("className",void 0,function(){var i;return(i=e.ratingOwner)===null||i===void 0?void 0:i.getItemClass(e)})},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),["style","className"].indexOf(e)===-1&&this.resetVisuals()},t.prototype.resetVisuals=function(){this.resetPropertyValue("style"),this.resetPropertyValue("className")},Object.defineProperty(t.prototype,"description",{get:function(){var e;return(e=this.ratingOwner)===null||e===void 0?void 0:e.getDescription(this)},enumerable:!1,configurable:!0}),t.prototype.getLocText=function(){return this.description||r.prototype.getLocText.call(this)},c([p({defaultValue:""})],t.prototype,"highlight",void 0),t})(q),wn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.createItemValues("rateValues"),i}return t.prototype.resetItemsVisuals=function(){var e=this.getPropertyValue("visibleChoices");Array.isArray(e)&&e.forEach(function(i){return i.resetVisuals()})},t.prototype.onPropertyValueChanged=function(e,i,n){var o=this;r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="rateValues"&&this.executeOnSyncPropertiesChanged(function(){o.autoGenerate=o.rateValues.length==0,o.setIconsToRateValues(),o.resetRenderedItems()}),e==="autoGenerate"&&this.executeOnSyncPropertiesChanged(function(){!o.autoGenerate&&o.rateValues.length===0&&o.setArray("rateValues",o.rateValues,o.visibleRateValues,!1,!1),o.autoGenerate&&(o.rateValues.splice(0,o.rateValues.length),o.updateRateMax()),o.resetRenderedItems()}),e==="rateCount"&&this.executeOnSyncPropertiesChanged(function(){if(!o.useRateValues())o.rateMax=o.rateMin+o.rateStep*(o.rateCount-1);else if(o.rateCount<o.rateValues.length){if(o.rateCount>=10&&o.rateType=="smileys")return;o.rateValues.splice(o.rateCount,o.rateValues.length-o.rateCount)}else for(var f=o.rateValues.length;f<o.rateCount;f++)o.rateValues.push(new It(te("choices_Item")+(f+1)))});var s=["rateMin","rateMax","rateStep","rateValues"];s.indexOf(e)>-1&&this.executeOnSyncPropertiesChanged(function(){return o.updateRateCount()});var a=["cssClassesValue","isReadOnly","isVisible","errors","value"];a.indexOf(e)>-1&&this.resetItemsVisuals();var l=["value","renderAs","placeholder","choices","visibleChoices"];l.indexOf(e)>-1&&this.resetReadOnlyText();var u=["rateMin","rateMax","minRateDescription","maxRateDescription","rateStep","displayRateDescriptionsAsExtremeItems","rateType","rateValues"];u.indexOf(e)>-1&&((e==="rateType"||e==="rateValues")&&this.setIconsToRateValues(),this.resetRenderedItems(),e==="rateType"&&this.updateRateCount()),(e==="rateColorMode"||e==="scaleColorMode")&&this.updateColors(this.survey.themeVariables),e==="displayMode"&&this.updateRenderAsBasedOnDisplayMode(!1)},t.prototype.setIconsToRateValues=function(){var e=this;this.rateType=="smileys"&&this.rateValues.map(function(i){return i.icon=e.getItemSmiley(i)})},t.prototype.locStrsChanged=function(){var e;r.prototype.locStrsChanged.call(this),this.resetReadOnlyText(),(e=this.dropdownListModelValue)===null||e===void 0||e.locStrsChanged()},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.jsonObj.rateMin!==void 0&&this.jsonObj.rateCount!==void 0&&this.jsonObj.rateMax===void 0&&this.updateRateMax(),this.jsonObj.rateMax!==void 0&&this.jsonObj.rateCount!==void 0&&this.jsonObj.rateMin===void 0&&this.updateRateMin(),this.jsonObj.autoGenerate===void 0&&this.jsonObj.rateValues!==void 0&&(this.autoGenerate=!this.jsonObj.rateValues.length),this.updateRateCount(),this.setIconsToRateValues()},t.prototype.useRateValues=function(){return!!this.rateValues.length&&!this.autoGenerate},t.prototype.updateRateMax=function(){this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)},t.prototype.updateRateMin=function(){this.rateMin=this.rateMax-this.rateStep*(this.rateCount-1)},t.prototype.updateRateCount=function(){var e=0;this.useRateValues()?e=this.rateValues.length:e=Math.trunc((this.rateMax-this.rateMin)/(this.rateStep||1))+1,e>10&&this.rateType=="smileys"&&(e=10),this.rateCount=e,this.rateValues.length>e&&this.rateValues.splice(e,this.rateValues.length-e)},Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e=this,i;return!this.readOnly&&((i=this.visibleRateValues.filter(function(n){return n.value==e.value})[0])===null||i===void 0?void 0:i.locText)},enumerable:!1,configurable:!0}),t.prototype.selectItem=function(e){!this.isReadOnly&&e&&(this.value=e.value)},t.prototype.updateColors=function(e){this.colorMode!=="monochrome"&&D.isAvailable()&&(t.colorsCalculated||(t.badColor=it(e,"--sjs-special-red","--sd-rating-bad-color"),t.normalColor=it(e,"--sjs-special-yellow","--sd-rating-normal-color"),t.goodColor=it(e,"--sjs-special-green","--sd-rating-good-color"),t.badColorLight=it(e,"--sjs-special-red-light","--sd-rating-bad-color-light"),t.normalColorLight=it(e,"--sjs-special-yellow-light","--sd-rating-normal-color-light"),t.goodColorLight=it(e,"--sjs-special-green-light","--sd-rating-good-color-light"),this.colorsCalculated=!0,this.resetRenderedItems()))},t.prototype.getDisplayValueCore=function(e,i){if(!this.useRateValues)return r.prototype.getDisplayValueCore.call(this,e,i);var n=q.getTextOrHtmlByValue(this.visibleRateValues,i);return n||i},Object.defineProperty(t.prototype,"visibleRateValues",{get:function(){return this.visibleChoices},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return this.isDropdown},Object.defineProperty(t.prototype,"isDropdown",{get:function(){return this.renderAs==="dropdown"},enumerable:!1,configurable:!0}),t.prototype.itemValuePropertyChanged=function(e,i,n,o){var s=["value","text","icon","visibleIf","enableIf"];!this.useRateValues()&&s.indexOf(i)>=0&&(this.autoGenerate=!1),r.prototype.itemValuePropertyChanged.call(this,e,i,n,o)},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.runRateItesmCondition(e)},t.prototype.runRateItesmCondition=function(e){var i;if(this.useRateValues()){var n=!1;if(!((i=this.survey)===null||i===void 0)&&i.areInvisibleElementsShowing?this.rateValues.forEach(function(s){n=n||!s.isVisible,s.setIsVisible(s,!0)}):n=q.runConditionsForItems(this.rateValues,void 0,void 0,e,!0),n&&(this.resetRenderedItems(),!this.isEmpty()&&!this.isReadOnly)){var o=q.getItemByValue(this.rateValues,this.value);o&&!o.isVisible&&this.clearValue()}}},t.prototype.getRateValuesCore=function(){var e=this.useRateValues()?this.rateValues:this.createRateValues(),i=new Array;return e.forEach(function(n){n.isVisible&&i.push(n)}),i},t.prototype.calculateRateValues=function(){var e=this.getRateValuesCore();return this.rateType=="smileys"&&e.length>10&&(e=e.slice(0,10)),e},t.prototype.getDescription=function(e){if(!this.isLoadingFromJson&&!(!this.displayRateDescriptionsAsExtremeItems&&!this.isDropdown)){var i=this.visibleChoices,n=i.indexOf(e);if(n==0)return this.minRateDescription&&this.locMinRateDescription;if(n==i.length-1)return this.maxRateDescription&&this.locMaxRateDescription}},t.prototype.resetRenderedItems=function(){if(this.autoGenerate){var e=this.createRateValues();this.rateMax=e[e.length-1].value}this.resetPropertyValue("visibleChoices")},Object.defineProperty(t.prototype,"renderedRateItems",{get:function(){return this.visibleChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){var e=this;return this.getPropertyValue("visibleChoices",void 0,function(){return e.calculateRateValues()})},enumerable:!1,configurable:!0}),t.prototype.updateVisibleChoices=function(){this.resetRenderedItems()},t.prototype.createRateValues=function(){for(var e=[],i=this.rateMin,n=this.rateStep;i<=this.rateMax&&e.length<C.ratingMaximumRateValueCount;){var o=new It(i,"");o.locOwner=this,o.ownerPropertyName="rateValues",e.push(o),i=this.correctValue(i+n,n)}return e},t.prototype.correctValue=function(e,i){if(!e||Math.round(e)==e)return e;for(var n=0;Math.round(i)!=i;)i*=10,n++;return parseFloat(e.toFixed(n))},t.prototype.getType=function(){return"rating"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.rateValues,!0)},t.prototype.getItemValueType=function(){return"ratingitem"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getInputId=function(e){return this.inputId+"_"+e},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){return this.isMouseDown===!0||this.isDropdown},t.prototype.supportOther=function(){return!1},t.prototype.getPlainDataCalculatedValue=function(e){var i=r.prototype.getPlainDataCalculatedValue.call(this,e);if(i!==void 0||!this.useRateValues||this.isEmpty())return i;var n=q.getItemByValue(this.visibleRateValues,this.value);return n?n[e]:void 0},Object.defineProperty(t.prototype,"hasMinRateDescription",{get:function(){var e=this;return this.getPropertyValue("hasMinRateDescription",void 0,function(){return!!e.minRateDescription})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxRateDescription",{get:function(){var e=this;return this.getPropertyValue("hasMaxRateDescription",void 0,function(){return!!e.maxRateDescription})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMinLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMinRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMaxRateDescription},enumerable:!1,configurable:!0}),t.prototype.updateRenderAsBasedOnDisplayMode=function(e){this.isDesignMode?(e||this.isDropdown)&&(this.renderAs="default"):(e||this.displayMode!=="auto")&&(this.renderAs=this.displayMode==="dropdown"?"dropdown":"default")},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.isDropdown&&this.displayMode==="auto"?this.displayMode="dropdown":this.updateRenderAsBasedOnDisplayMode()},Object.defineProperty(t.prototype,"rateDisplayMode",{get:function(){return this.rateType},set:function(e){this.rateType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this.rateType=="stars"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSmiley",{get:function(){return this.rateType=="smileys"},enumerable:!1,configurable:!0}),t.prototype.getDefaultItemComponent=function(){return this.isDropdown?"sv-rating-dropdown-item":this.isStar?"sv-rating-item-star":this.isSmiley?"sv-rating-item-smiley":"sv-rating-item"},t.prototype.valueToData=function(e){if(this.useRateValues()){var i=q.getItemByValue(this.visibleChoices,e);return i?i.value:e}return isNaN(e)?e:parseFloat(e)},t.prototype.setValueFromClick=function(e){if(!this.isReadOnlyAttr){this.value===(typeof this.value=="string"?e:parseFloat(e))?this.clearValue(!0):this.value=e;for(var i=0;i<this.visibleChoices.length;i++)this.visibleChoices[i].highlight="none"}},t.prototype.onItemMouseIn=function(e){if(!m.IsTouch&&!(this.isReadOnly||!e.isEnabled||this.isDesignMode)){var i=!0,n=!this.isEmpty();if(this.rateType!=="stars"){e.highlight="highlighted";return}for(var o=0;o<this.visibleChoices.length;o++)this.visibleChoices[o].highlight=i&&!n&&"highlighted"||!i&&n&&"unhighlighted"||"none",this.visibleChoices[o]==e&&(i=!1),this.visibleChoices[o].value==this.value&&(n=!1)}},t.prototype.onItemMouseOut=function(e){m.IsTouch||(this.visibleChoices.forEach(function(i){return i.highlight="none"}),this.resetItemsVisuals())},Object.defineProperty(t.prototype,"itemSmallMode",{get:function(){return!this.isSingleInputActive&&this.inMatrixMode&&C.matrix.rateSize=="small"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratingRootCss",{get:function(){var e=this.hasMaxLabel||this.hasMinLabel;return new I().append(this.cssClasses.root).append(this.cssClasses.rootWrappable,this.displayMode=="buttons"||!!this.survey&&this.survey.isDesignMode||this.displayMode=="auto"&&!this.supportResponsiveness()).append(this.cssClasses.rootLabelsTop,e&&this.rateDescriptionLocation=="top").append(this.cssClasses.rootLabelsBottom,e&&this.rateDescriptionLocation=="bottom").append(this.cssClasses.rootLabelsDiagonal,e&&this.rateDescriptionLocation=="topBottom").append(this.cssClasses.itemSmall,this.itemSmallMode&&this.rateType!="labels").toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIcon",{get:function(){return this.itemSmallMode?"icon-rating-star-small":"icon-rating-star"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIconAlt",{get:function(){return this.itemStarIcon+"-2"},enumerable:!1,configurable:!0}),t.prototype.getItemSmiley=function(e){var i=["terrible","very-poor","poor","not-good","average","normal","good","very-good","excellent","perfect"],n=["very-good","not-good","normal","good","average","excellent","poor","perfect","very-poor","terrible"],o=this.useRateValues()?this.rateValues.length:this.rateMax-this.rateMin+1,s=n.slice(0,o),a=i.filter(function(l){return s.indexOf(l)!=-1});return this.useRateValues()?a[this.rateValues.indexOf(e)]:a[e.value-this.rateMin]},t.prototype.getItemSmileyIconName=function(e){return"icon-"+this.getItemSmiley(e)},t.prototype.getRenderedItemColor=function(e,i){var n=i?t.badColorLight:t.badColor,o=i?t.goodColorLight:t.goodColor,s=(this.rateCount-1)/2,a=i?t.normalColorLight:t.normalColor;if(e<s?o=a:(n=a,e-=s),!n||!o)return null;for(var l=[0,0,0,0],u=0;u<4;u++)l[u]=n[u]+(o[u]-n[u])*e/s,u<3&&(l[u]=Math.trunc(l[u]));return"rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},t.prototype.getItemStyle=function(e){if(this.scaleColorMode==="monochrome"&&this.rateColorMode=="default"||this.isPreviewStyle||this.isReadOnlyStyle)return{};var i=this.visibleRateValues.indexOf(e),n=this.getRenderedItemColor(i,!1),o=e.highlight=="highlighted"&&this.scaleColorMode==="colored"&&this.getRenderedItemColor(i,!0);return o?{"--sd-rating-item-color":n,"--sd-rating-item-color-light":o}:{"--sd-rating-item-color":n}},t.prototype.getItemClass=function(e){var i=this,n=this.value==e.value;this.isStar&&(this.useRateValues()?n=this.rateValues.indexOf(this.rateValues.filter(function(nt){return nt.value==i.value})[0])>=this.rateValues.indexOf(e):n=this.value>=e.value);var o=this.isReadOnly||!e.isEnabled,s=!o&&this.value!=e.value&&!(this.survey&&this.survey.isDesignMode),a=this.isStar&&e.highlight=="highlighted",l=this.isStar&&e.highlight=="unhighlighted",u=this.cssClasses.item,f=this.cssClasses.selected,y=this.cssClasses.itemDisabled,b=this.cssClasses.itemReadOnly,E=this.cssClasses.itemPreview,S=this.cssClasses.itemHover,O=this.cssClasses.itemOnError,R=null,A=null,Q=null,ee=null,X=null;this.isStar&&(u=this.cssClasses.itemStar,f=this.cssClasses.itemStarSelected,y=this.cssClasses.itemStarDisabled,b=this.cssClasses.itemStarReadOnly,E=this.cssClasses.itemStarPreview,S=this.cssClasses.itemStarHover,O=this.cssClasses.itemStarOnError,R=this.cssClasses.itemStarHighlighted,A=this.cssClasses.itemStarUnhighlighted,X=this.cssClasses.itemStarSmall),this.isSmiley&&(u=this.cssClasses.itemSmiley,f=this.cssClasses.itemSmileySelected,y=this.cssClasses.itemSmileyDisabled,b=this.cssClasses.itemSmileyReadOnly,E=this.cssClasses.itemSmileyPreview,S=this.cssClasses.itemSmileyHover,O=this.cssClasses.itemSmileyOnError,R=this.cssClasses.itemSmileyHighlighted,Q=this.cssClasses.itemSmileyScaleColored,ee=this.cssClasses.itemSmileyRateColored,X=this.cssClasses.itemSmileySmall);var we=!this.isStar&&!this.isSmiley&&(!this.displayRateDescriptionsAsExtremeItems||this.useRateValues()&&e!=this.rateValues[0]&&e!=this.rateValues[this.rateValues.length-1]||!this.useRateValues()&&e.value!=this.rateMin&&e.value!=this.rateMax)&&e.locText.calculatedText.length<=2&&Number.isInteger(Number(e.locText.calculatedText)),ve={item:e,css:""};return ve.css=new I().append(u).append(f,n).append(y,this.isDisabledStyle).append(b,this.isReadOnlyStyle).append(E,this.isPreviewStyle).append(S,s).append(R,a).append(Q,this.scaleColorMode=="colored").append(ee,this.rateColorMode=="scale"&&n).append(A,l).append(O,this.hasCssError()).append(X,this.itemSmallMode).append(this.cssClasses.itemFixedSize,we).toString(),this.survey&&this.survey.updateChoiceItemCss(this,ve),ve.css},t.prototype.getControlClass=function(){return this.isEmpty(),new I().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},Object.defineProperty(t.prototype,"allowClear",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.locReadOnlyText.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){var e=this;return this.getOrCreateLocStr("readOnlyText",!0,!1,function(i){i.onGetTextCallback=function(){return e.displayValue||e.placeholder}})},enumerable:!1,configurable:!0}),t.prototype.resetReadOnlyText=function(){this.resetPropertyValue("readOnlyText")},t.prototype.needResponsiveWidth=function(){var e=this.getPropertyValue("rateStep"),i=this.getPropertyValue("rateMax"),n=this.getPropertyValue("rateMin");return this.displayMode!="dropdown"&&!!(this.hasMinRateDescription||this.hasMaxRateDescription||e&&(i-n)/e>9)},t.prototype.supportResponsiveness=function(){return!this.inMatrixMode},t.prototype.onBeforeSetCompactRenderer=function(){!this.isDisposed&&!this.dropdownListModelValue&&(this.dropdownListModelValue=new Pt(this))},t.prototype.getCompactRenderAs=function(){return this.displayMode=="buttons"?"default":"dropdown"},t.prototype.getDesktopRenderAs=function(){return this.displayMode=="dropdown"?"dropdown":"default"},Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.isDropdown&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),t.prototype.onBlurCore=function(e){var i;(i=this.dropdownListModel)===null||i===void 0||i.onBlur(e),r.prototype.onBlurCore.call(this,e)},t.prototype.updateCssClasses=function(e,i){r.prototype.updateCssClasses.call(this,e,i),qt(e,i)},t.prototype.calcCssClasses=function(e){var i=r.prototype.calcCssClasses.call(this,e);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(i.popup,i.list),i},t.prototype.themeChanged=function(e){this.colorsCalculated=!1,this.updateColors(e.cssVariables)},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e,i),this.survey&&(this.updateColors(this.survey.themeVariables),this.updateRenderAsBasedOnDisplayMode())},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return this.isDropdown?"combobox":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),t.colorsCalculated=!1,c([p({defaultValue:!1})],t.prototype,"inputHasValue",void 0),c([p()],t.prototype,"autoGenerate",void 0),c([p()],t.prototype,"rateValues",void 0),c([p()],t.prototype,"rateMin",void 0),c([p()],t.prototype,"rateMax",void 0),c([p()],t.prototype,"rateStep",void 0),c([p()],t.prototype,"rateCount",void 0),c([p({localizable:{markdown:!0,onCreate:function(e,i){return i.onStringChanged.add(function(){return e.setPropertyValue("hasMinRateDescription",!i.isEmpty)})}}})],t.prototype,"minRateDescription",void 0),c([p({localizable:{markdown:!0,onCreate:function(e,i){return i.onStringChanged.add(function(){return e.setPropertyValue("hasMaxRateDescription",!i.isEmpty)})}}})],t.prototype,"maxRateDescription",void 0),c([p()],t.prototype,"displayRateDescriptionsAsExtremeItems",void 0),c([p()],t.prototype,"displayMode",void 0),c([p()],t.prototype,"rateDescriptionLocation",void 0),c([p()],t.prototype,"rateType",void 0),c([p()],t.prototype,"scaleColorMode",void 0),c([p()],t.prototype,"rateColorMode",void 0),c([p({getDefaultValue:function(e){return e.getDefaultItemComponent()}})],t.prototype,"itemComponent",void 0),c([p({localizable:{defaultStr:"ratingOptionsCaption"}})],t.prototype,"placeholder",void 0),t})(ie);V.addClass("ratingitem",[],function(r){return new It(r,"")},"itemvalue"),V.addClass("rating",[{name:"showCommentArea:switch",visible:!0},{name:"rateType",alternativeName:"rateDisplayMode",default:"labels",choices:["labels","stars","smileys"]},{name:"scaleColorMode",default:"monochrome",choices:["monochrome","colored"],visibleIf:function(r){return r.rateType=="smileys"}},{name:"rateColorMode",default:"scale",choices:["default","scale"],visibleIf:function(r){return r.rateType=="smileys"&&r.scaleColorMode=="monochrome"}},{name:"autoGenerate",default:!0,choices:[!0,!1]},{name:"rateCount:number",default:5,onSettingValue:function(r,t){return t<2?2:t>C.ratingMaximumRateValueCount&&t>r.rateValues.length?C.ratingMaximumRateValueCount:t>10&&r.rateType=="smileys"?10:t}},{name:"rateValues:ratingitem[]",baseValue:function(){return te("choices_Item")},visibleIf:function(r){return!r.autoGenerate}},{name:"rateMin:number",default:1,onSettingValue:function(r,t){return t>r.rateMax-r.rateStep?r.rateMax-r.rateStep:t},visibleIf:function(r){return!!r.autoGenerate}},{name:"rateMax:number",default:5,onSettingValue:function(r,t){return t<r.rateMin+r.rateStep?r.rateMin+r.rateStep:t},visibleIf:function(r){return!!r.autoGenerate}},{name:"rateStep:number",default:1,minValue:.1,onSettingValue:function(r,t){return t<=0&&(t=1),t>r.rateMax-r.rateMin&&(t=r.rateMax-r.rateMin),t},visibleIf:function(r){return!!r.autoGenerate}},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription"},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription"},{name:"displayRateDescriptionsAsExtremeItems:boolean",default:!1,visibleIf:function(r){return r.rateType=="labels"}},{name:"rateDescriptionLocation",default:"leftRight",choices:["leftRight","top","bottom","topBottom"]},{name:"displayMode",default:"auto",choices:["auto","buttons","dropdown"]},{name:"itemComponent",visible:!1,defaultFunc:function(r){return r?(r.getOriginalObj&&(r=r.getOriginalObj()),r.getDefaultItemComponent()):"sv-rating-item"}}],function(){return new wn("")},"question"),K.Instance.registerQuestion("rating",function(r){return new wn(r)});var Pn=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"sliderlabel"},t.prototype.onGetText=function(e){return e||!this.locOwner?r.prototype.onGetText.call(this,e):this.locOwner.getTextByItem(this)},t.prototype.getCorrectValue=function(e){return typeof e=="number"?e:w.isNumber(e)?parseFloat(e.toString()):this.value||0},c([p({defaultValue:!1})],t.prototype,"showValue",void 0),t})(q),Vn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.getThumbContainerCss=function(n){return new I().append(i.cssClasses.thumbContainer).append(i.cssClasses.thumbContainerIndeterminateMode,!!i.isIndeterminate).append(i.cssClasses.thumbContainerFocusedMode,n===i.focusedThumb).toString()},i.getLabelCss=function(n){return new I().append(i.cssClasses.label).append(i.cssClasses.labelLongMod,n.renderedHtml.length>10).toString()},i.isIndeterminate=!1,i.getTrackPercentLeft=function(){var n=i,o=n.renderedValue,s=n.sliderType,a=n.renderedMin,l;return s==="single"?o[0]>0?l=i.getPercent(Math.max(0,a)):l=i.getPercent(o[0]):l=i.getPercent(Math.min.apply(Math,o)),l},i.getTrackPercentRight=function(){var n=i,o=n.renderedValue,s=n.sliderType,a=n.renderedMax,l;return s==="single"?o[0]>0?l=i.getPercent(o[0]):l=i.getPercent(Math.min(0,a)):l=i.getPercent(Math.max.apply(Math,o)),100-l},i.getPercent=function(n){var o=i,s=o.renderedMax,a=o.renderedMin,l=s-a;return Math.abs(n-a)/l*100},i.ensureMaxRangeBorders=function(n,o){var s=i,a=s.renderedMaxRangeLength,l=s.renderedValue,u=l.slice(),f=u[o],y=!1;u[o]=n;for(var b=0;b<u.length-1;b++)if(Math.abs(u[b]-u[b+1])>a){y=!0;break}return y?f:n},i.ensureMinRangeBorders=function(n,o){var s=i,a=s.renderedMinRangeLength,l=s.renderedValue,u=s.allowSwap,f=s.renderedMin,y=s.renderedMax,b=l.slice(),E=b[o],S=!1;b[o]=n;for(var O=0;O<b.length-1;O++)if(Math.abs(b[O]-b[O+1])<a){S=!0;break}if(!u){var R=o>0?b[o-1]:f,A=o<b.length-1?b[o+1]:y;(n<=R||n>=A)&&(S=!0)}return S?E:n},i.getClosestToStepValue=function(n){var o=i,s=o.step,a=o.renderedMin,l=o.renderedMax,u=a+Math.trunc((l-a)/s)*s,f=a+Math.round((n-a)/s)*s;return f=Math.min(u,f),f},i.handleRangeOnChange=function(n){if(i.isRangeMoving&&i.isAllowToChange()){var o=i,s=o.renderedMax,a=o.renderedMin,l=o.renderedValue,u=o.ensureMaxRangeBorders,f=o.ensureMinRangeBorders,y=n.target,b=i.oldInputValue-+y.value;i.oldInputValue=+y.value;for(var E=!1,S=0;S<l.length;S++){var O=l[S]-b;O=u(O,S),O=f(O,S),O<=s&&O>=a?l.splice(S,1,O):E=!0}if(E){E=!1;return}}},i.prepareInputRangeForMoving=function(n,o){var s=i,a=s.renderedMax,l=s.renderedMin;i.isRangeMoving=!0,i.animatedThumb=!1;var u=Qe(o);if(u){var f=u.querySelector("#"+i.id+"-sjs-slider-input-range-input");f.style.setProperty("--sjs-range-slider-range-input-thumb-width","20px"),f.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),f.style.setProperty("--sjs-range-slider-range-input-thumb-position","static");var y=(n.clientX-o.getBoundingClientRect().x)/o.getBoundingClientRect().width*100,b=y/100*(a-l)+l;f.value=""+b,i.oldInputValue=b}},i.handleRangePointerDown=function(n,o){var s=i,a=s.dragOrClickHelper,l=s.allowDragRange,u=s.step,f=s.prepareInputRangeForMoving,y=n.target;u&&(y.step="0.01"),l&&(a.dragHandler=function(){f.call(i,n,o)},a.onPointerDown(n))},i.handleRangePointerUp=function(n,o){var s=i,a=s.step,l=s.renderedValue,u=s.getClosestToStepValue,f=n.target;if(i.isRangeMoving){if(i.refreshInputRange(),i.isRangeMoving=!1,a){f.step=""+a;for(var y=0;y<l.length;y++)l[y]=u(l[y]);i.setSliderValue(l)}return}f.style.setProperty("--sjs-range-slider-range-input-thumb-width","0px"),f.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),f.style.setProperty("--sjs-range-slider-range-input-thumb-position","static"),i.setValueByClickOnPath(n,o)},i.refreshInputRange=function(n){var o=i,s=o.allowDragRange,a=o.renderedValue,l=o.getPercent;if(s){var u=n||i.questionRootElement.querySelector("#"+i.id+"-sjs-slider-input-range-input");if(u){var f=l(a[a.length-1]),y=l(a[0]),b=f-y;u.style.setProperty("--sjs-range-slider-range-input-thumb-width","calc(".concat(b,"% - 20px - 20px)")),u.style.setProperty("--sjs-range-slider-range-input-thumb-left","calc(".concat(y,"% + 20px)")),u.style.setProperty("--sjs-range-slider-range-input-thumb-position","absolute")}}},i.setSliderValue=function(n){if(i.isAllowToChange()){var o=void 0;i.sliderType==="single"?o=Array.isArray(n)?n[0]:n:i.sliderType==="range"&&(o=n),i.value=o,i.resetPropertyValue("renderedValue")}},i.setValueByClickOnPath=function(n,o){var s=i,a=s.renderedMax,l=s.renderedMin,u=D.getComputedStyle(D.getBody()).direction=="rtl",f=(n.clientX-o.getBoundingClientRect().x)/o.getBoundingClientRect().width*100;u&&(f=100-f);var y=f/100*(a-l)+l;i.setValueByClick(y,n.target)},i.setValueByClick=function(n,o){var s=i,a=s.step,l=s.getClosestToStepValue,u=s.ensureMaxRangeBorders,f=s.ensureMinRangeBorders,y=s.renderedValue,b=s.refreshInputRange,E=s.setSliderValue;i.animatedThumb=!0;for(var S=y.slice(),O=0,R=0;R<S.length;R++){var A=Math.abs(S[O]-n),Q=Math.abs(S[R]-n);Q<A&&(O=R)}if(S.length>1&&(n=u(n,O),n=f(n,O)),S[O]=n,a)for(var ee=y.slice(),R=0;R<S.length;R++){var X=ee[R]/a,we=S[R]/a,ve=Math.round(we);ve===X&&(we>X?S[R]=S[R]+a:we<X&&(S[R]=S[R]-a)),S[R]=l(S[R])}E(S),b()},i.handleOnChange=function(n,o){if(i.isAllowToChange()&&i.oldValue!==null){var s=i,a=s.allowSwap,l=s.ensureMaxRangeBorders,u=s.ensureMinRangeBorders,f=s.renderedValue,y=n.target,b=+y.value;f.length>1&&(b=l(b,o),a||(b=u(b,o))),f.splice(o,1,b)}},i.handlePointerDown=function(n){var o=i,s=o.step,a=o.renderedValue;if(s)for(var l=0;l<a.length;l++){var u=i.questionRootElement.querySelector("#"+i.id+"-sjs-slider-input-".concat(l));u.step=.01}i.oldValue=i.renderedValue,i.animatedThumb=!1},i.handlePointerUp=function(n){n.stopPropagation();var o=i,s=o.step,a=o.focusedThumb,l=o.renderedValue,u=o.allowSwap,f=o.renderedMinRangeLength,y=o.getClosestToStepValue,b=o.refreshInputRange,E=o.setSliderValue,S=l[a];if(n.target,l.sort(function(A,Q){return A-Q}),i.focusedThumb=l.indexOf(S),s)for(var O=0;O<l.length;O++){l[O]=y(l[O]);var R=i.questionRootElement.querySelector("#"+i.id+"-sjs-slider-input-".concat(O));R.step=s}if(u){for(var O=0;O<l.length-1;O++)if(Math.abs(l[O]-l[O+1])<f){i.setPropertyValue("renderedValue",i.oldValue);break}}E(l),b(),i.oldValue=null},i.handleKeyDown=function(n){i.oldValue=i.renderedValue,i.animatedThumb=!0},i.handleKeyUp=function(n){i.oldValue=null,i.setSliderValue(i.renderedValue)},i.handleOnFocus=function(n){i.focusedThumb=n},i.handleOnBlur=function(){i.focusedThumb=null},i.handleLabelPointerUp=function(n,o){var s=n.target;isNaN(o)||i.setValueByClick(o,s)},i.getTooltipValue=function(n){var o=i,s=o.step,a=o.getClosestToStepValue,l=o.renderedValue,u=o.tooltipFormat,f=o.formatNumber,y=l[n];return y=s?a(y):y,y=f(y),u.replace("{0}",""+y)},i.getLabelText=function(n){var o=i,s=o.step,a=o.renderedMax,l=o.renderedMin,u=o.renderedLabelCount,f=o.formatNumber,y=a-l,b=s%1!=0,E=u-1,S=E===0?0:n*y/E;return b?""+f(S+l):""+Math.round(S+l)},i.getLabelPosition=function(n){var o=i,s=o.max,a=o.min,l=o.renderedLabelCount;o.customLabels;var u=l-1;if(u===0)return 0;var f=s-a,y=a+n*f/u;return y},i.isRangeMoving=!1,i.oldInputValue=null,i.oldValue=null,i.calcRenderedValue=function(){var n=i,o=n.renderedMax,s=n.renderedMin,a=n.renderedMaxRangeLength,l=n.getClosestToStepValue,u=n.sliderType,f;if(u==="single")return f=i.ensureValueRespectMinMax(i.value),typeof f>"u"||f===null||f.length===0?(i.isIndeterminate=!0,i.isNegativeScale?[Math.min(o,0)]:[s]):Array.isArray(f)?[f[0]]:[f];if(f=Array.isArray(i.value)?i.value.slice():[],f.length===0){var y=o-s;if(i.isIndeterminate=!0,Math.abs(y)>a){var b=(y-a)/2;return[l(s+b),l(o-b)]}return[s,o]}return f.map(function(E){return i.ensureValueRespectMinMax(E)})},i.createItemValues("customLabels"),i.dragOrClickHelper=new Yt(null,!1),i}return Object.defineProperty(t.prototype,"labelCount",{get:function(){return this.customLabels.length>0?this.customLabels.length:this.tickSize?Math.round(100/this.tickSize)+2:this.getPropertyValue("labelCount")},set:function(e){this.setPropertyValue("labelCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowSwap",{get:function(){return this.minRangeLength?!1:this.getPropertyValue("allowSwap",!0)},set:function(e){this.setPropertyValue("allowSwap",e)},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,i,n){var o=this;r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="autoGenerate"&&this.executeOnSyncPropertiesChanged(function(){!o.autoGenerate&&o.customLabels.length===0&&o.setPropertyValue("customLabels",o.calcGeneratedLabels()),o.autoGenerate&&o.customLabels.splice(0,o.customLabels.length)});var s=["min","max","step","autoGenerate","labelFormat","labelCount"];s.indexOf(e)>-1&&(this.resetPropertyValue("generatedLabels"),this.locStrsChanged());var a=["min","max","step","maxRangeLength","minRangeLength","sliderType"];a.indexOf(e)>-1&&this.resetPropertyValue("renderedValue")},Object.defineProperty(t.prototype,"generatedLabels",{get:function(){var e=this;return this.getPropertyValue("generatedLabels",void 0,function(){return e.calcGeneratedLabels()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedValue",{get:function(){var e=this;return this.getPropertyValue("renderedValue",void 0,function(){return e.calcRenderedValue()})},set:function(e){this.setPropertyValue("renderedValue",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"slider"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.customLabels,!0)},Object.defineProperty(t.prototype,"rootCss",{get:function(){return new I().append(this.cssClasses.root).append(this.cssClasses.rootSingleMode,this.sliderType==="single").append(this.cssClasses.rootNegativeScaleMode,!!this.isNegativeScale).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.rootAnimatedThumbMode,!!this.animatedThumb).append(this.cssClasses.rootTooltipsAlwaysMode,this.tooltipVisibility==="always").append(this.cssClasses.rootLabelsShowValueTextMode,this.isLabelsShowValueText).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltipCss",{get:function(){return new I().append(this.cssClasses.tooltip).append(this.cssClasses.tooltipOnHoverMode,this.tooltipVisibility==="auto").toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLabelCount",{get:function(){return this.labelCount<0?6:this.labelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMaxRangeLength",{get:function(){var e;return(e=this.maxRangeLength)!==null&&e!==void 0?e:this.renderedMax-this.renderedMin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMinRangeLength",{get:function(){var e;return(e=this.minRangeLength)!==null&&e!==void 0?e:this.step},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLabels",{get:function(){var e=this.generatedLabels,i=this.customLabels;return this.autoGenerate?e:i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNegativeScale",{get:function(){return this.renderedMin<0},enumerable:!1,configurable:!0}),t.prototype.getTextByItem=function(e){var i=e.value.toString();return this.labelFormat.replace("{0}",""+i)},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.jsonObj.customLabels!==void 0&&(this.autoGenerate=!1),!this.isDesignMode&&this.sliderType==="range"&&this.createNewArray("value")},t.prototype.updateValueFromSurvey=function(e,i){e=this.ensureValueRespectMinMax(e),r.prototype.updateValueFromSurvey.call(this,e,i),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")},t.prototype.itemValuePropertyChanged=function(e,i,n,o){if(this.autoGenerate===!0){var s=this.generatedLabels.indexOf(e);this.autoGenerate=!1,this.setPropertyValue("customLabels",this.calcGeneratedLabels()),e=this.customLabels[s]}i==="text"&&(Number.isFinite(+o)?e.value=+o:e.text=o),r.prototype.itemValuePropertyChanged.call(this,e,i,n,o)},t.prototype.afterRenderQuestionElement=function(e){r.prototype.afterRenderQuestionElement.call(this,e),this.questionRootElement=e},t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.questionRootElement=void 0},t.prototype.runConditionCore=function(e){var i=this;r.prototype.runConditionCore.call(this,e),this.runExpressionByProperty("maxValueExpression",e,function(n){i.max=n??i.renderedMax}),this.runExpressionByProperty("minValueExpression",e,function(n){i.min=n??i.renderedMin})},t.prototype.setNewValue=function(e){e=this.ensureValueRespectMinMax(e),r.prototype.setNewValue.call(this,e),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")},t.prototype.setDefaultValue=function(){r.prototype.setDefaultValue.call(this);var e=this.defaultValue;this.sliderType==="single"&&Array.isArray(e)&&this.setSliderValue(e),this.resetPropertyValue("renderedValue")},t.prototype.getDefaultTitleActions=function(){var e=this,i=[];if(!this.isDesignMode){var n=new G({locTitleName:"clearCaption",id:"sv-clr-btn-".concat(this.id),action:function(){e.clearValueFromUI()},innerCss:this.cssClasses.clearButton,visible:new $(function(){return e.allowClear&&!e.isReadOnly}),ariaLabelledBy:this.a11y_input_ariaLabelledBy});i.push(n)}return i},t.prototype.getItemValueType=function(){return"sliderlabel"},t.prototype.createLabelItem=function(e){var i=new Pn(e);return i.locOwner=this,i},t.prototype.calcGeneratedLabels=function(){for(var e=[],i=0;i<this.renderedLabelCount;i++)e.push(this.createLabelItem(this.getLabelPosition(i)));return e},t.prototype.formatNumber=function(e){return parseFloat(e.toFixed(4))},t.prototype.ensureValueRespectMinMax=function(e){var i=this;return Array.isArray(e)?e.forEach(function(n,o,s){n<i.min&&(e[o]=i.min),n>i.max&&(e[o]=i.max),o===0?(typeof n>"u"||n===null)&&(e[o]=i.min):o===s.length-1&&(typeof n>"u"||n===null)&&(e[o]=i.max)}):(e<this.min&&(e=this.min),e>this.max&&(e=this.max)),e},t.prototype.isAllowToChange=function(){return!this.isReadOnly&&!this.isDisabledAttr&&!this.isPreviewStyle&&!this.isDisabledStyle},Object.defineProperty(t.prototype,"isLabelsShowValueText",{get:function(){return!!this.customLabels.find(function(e){return e.showValue})},enumerable:!1,configurable:!0}),c([p({defaultValue:"single"})],t.prototype,"sliderType",void 0),c([p({defaultValue:100})],t.prototype,"max",void 0),c([p({defaultValue:0})],t.prototype,"min",void 0),c([p({defaultValue:null})],t.prototype,"maxValueExpression",void 0),c([p({defaultValue:null})],t.prototype,"minValueExpression",void 0),c([p({defaultValue:null})],t.prototype,"maxRangeLength",void 0),c([p({defaultValue:null})],t.prototype,"minRangeLength",void 0),c([p({defaultValue:"{0}"})],t.prototype,"tooltipFormat",void 0),c([p({defaultValue:"{0}"})],t.prototype,"labelFormat",void 0),c([p({defaultValue:"auto"})],t.prototype,"tooltipVisibility",void 0),c([p()],t.prototype,"step",void 0),c([p({defaultValue:!0})],t.prototype,"showLabels",void 0),c([p({defaultValue:!0})],t.prototype,"autoGenerate",void 0),c([p()],t.prototype,"customLabels",void 0),c([p({defaultValue:!0})],t.prototype,"allowDragRange",void 0),c([p({defaultValue:null})],t.prototype,"tickSize",void 0),c([p({defaultValue:!1})],t.prototype,"allowClear",void 0),c([p({defaultValue:null})],t.prototype,"focusedThumb",void 0),c([p({defaultValue:null})],t.prototype,"animatedThumb",void 0),t})(ie);function zo(r,t,e,i){var n=e?t:r;return r>=t?e?r+i:t-i:n}V.addClass("sliderlabel",[{name:"!value:number"},{name:"visibleIf",visible:!1},{name:"enableIf",visible:!1},{name:"showValue:boolean",locationInTable:"detail",default:!1}],function(r){return new Pn(r)},"itemvalue"),V.addClass("slider",[{name:"sliderType",default:"single",choices:["single","range"]},{name:"autoGenerate",default:!0,isSerializable:!1,choices:[!0,!1]},{name:"min:number",default:0,onSettingValue:function(r,t){return zo(t,r.max,!1,r.step)}},{name:"max:number",default:100,onSettingValue:function(r,t){return zo(r.min,t,!0,r.step)}},{name:"step:number",default:1},{name:"minValueExpression",type:"expression"},{name:"maxValueExpression",type:"expression"},{name:"minRangeLength:number",visibleIf:function(r){return r.sliderType==="range"}},{name:"maxRangeLength:number",visibleIf:function(r){return r.sliderType==="range"}},{name:"customLabels:sliderlabel[]",visibleIf:function(r){return!r.autoGenerate}},{name:"showLabels:boolean",default:!0},{name:"tooltipVisibility:string",default:"auto",choices:["auto","always","never"]},{name:"labelFormat:string",default:"{0}"},{name:"tooltipFormat:string",default:"{0}"},{name:"allowDragRange:boolean",default:!0,visible:!1,visibleIf:function(r){return r.sliderType==="range"}},{name:"allowSwap:boolean",default:!0,visibleIf:function(r){return r.sliderType==="range"}},{name:"labelCount:number",default:-1,visibleIf:function(r){return r.autoGenerate}},{name:"allowClear:boolean",default:!1}],function(){return new Vn("")},"question"),K.Instance.registerQuestion("slider",function(r){return new Vn(r)});var Sn=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getType=function(){return"boolean"},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.supportAutoAdvance=function(){return this.renderAs!=="checkbox"},Object.defineProperty(t.prototype,"isIndeterminate",{get:function(){return this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"booleanValue",{get:function(){return this.isEmpty()?null:this.value==this.getValueTrue()},set:function(e){this.isReadOnly||this.isDesignMode||this.setBooleanValue(e)},enumerable:!1,configurable:!0}),t.prototype.setBooleanValue=function(e){this.isValueEmpty(e)?this.value=void 0:this.value=e==!0?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){e===!0&&(e="true"),e===!1&&(e="false"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),t.prototype.getDefaultValue=function(){var e=this.defaultValue;if(!(e==="indeterminate"||e===void 0||e===null))return e=="true"?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"locTitle",{get:function(){var e=this.getLocalizableString("title");return(this.isLabelRendered&&!this.showTitle||this.isValueEmpty(e.text))&&!this.isValueEmpty(this.locLabel.text)?this.locLabel:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelRenderedAriaID",{get:function(){return this.isLabelRendered?this.ariaTitleId:null},enumerable:!1,configurable:!0}),t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.leftAnswerElement=void 0},Object.defineProperty(t.prototype,"isLabelRendered",{get:function(){return this.titleLocation==="hidden"||this.useTitleAsLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRenderLabelDescription",{get:function(){return this.isLabelRendered&&this.hasDescription&&(this.hasDescriptionUnderTitle||this.hasDescriptionUnderInput)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeterminated",{get:function(){return this.booleanValue!==null&&this.booleanValue!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelLeft",{get:function(){return this.swapOrder?this.locLabelTrue:this.locLabelFalse},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelRight",{get:function(){return this.swapOrder?this.locLabelFalse:this.locLabelTrue},enumerable:!1,configurable:!0}),t.prototype.getValueTrue=function(){return this.valueTrue!==void 0?this.valueTrue:!0},t.prototype.getValueFalse=function(){return this.valueFalse!==void 0?this.valueFalse:!1},t.prototype.setDefaultValue=function(){this.isDefaultValueSet("true",this.valueTrue)&&this.setBooleanValue(!0),this.isDefaultValueSet("false",this.valueFalse)&&this.setBooleanValue(!1);var e=this.defaultValue;(e==="indeterminate"||e===null||e===void 0)&&this.setBooleanValue(void 0)},t.prototype.isDefaultValueSet=function(e,i){return this.defaultValue==e||i!==void 0&&this.defaultValue===i},t.prototype.getDisplayValueCore=function(e,i){return i==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml},t.prototype.getItemCssValue=function(e){return new I().append(e.item).append(e.itemOnError,this.hasCssError()).append(e.itemDisabled,this.isDisabledStyle).append(e.itemReadOnly,this.isReadOnlyStyle).append(e.itemPreview,this.isPreviewStyle).append(e.itemHover,!this.isDesignMode).append(e.itemChecked,!!this.booleanValue).append(e.itemExchanged,!!this.swapOrder).append(e.itemIndeterminate,!this.isDeterminated).append(e.itemIsLabelRendered,!!this.isLabelRendered).toString()},t.prototype.getItemCss=function(){return this.getItemCssValue(this.cssClasses)},t.prototype.getCheckboxItemCss=function(){return this.getItemCssValue({item:this.cssClasses.checkboxItem,itemOnError:this.cssClasses.checkboxItemOnError,itemDisabled:this.cssClasses.checkboxItemDisabled,itemDisable:this.cssClasses.checkboxItemDisabled,itemReadOnly:this.cssClasses.checkboxItemReadOnly,itemPreview:this.cssClasses.checkboxItemPreview,itemChecked:this.cssClasses.checkboxItemChecked,itemIndeterminate:this.cssClasses.checkboxItemIndeterminate,itemIsLabelRendered:this.cssClasses.checkboxIsLabelRendered})},t.prototype.getLabelCss=function(e){return new I().append(this.cssClasses.label).append(this.cssClasses.disabledLabel,this.booleanValue===!e||this.isDisabledStyle).append(this.cssClasses.labelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.labelPreview,this.isPreviewStyle).append(this.cssClasses.labelTrue,!this.isIndeterminate&&e===!this.swapOrder).append(this.cssClasses.labelFalse,!this.isIndeterminate&&e===this.swapOrder).toString()},t.prototype.updateValueFromSurvey=function(e,i){i===void 0&&(i=!1),r.prototype.updateValueFromSurvey.call(this,e,i)},t.prototype.onValueChanged=function(){r.prototype.onValueChanged.call(this)},Object.defineProperty(t.prototype,"svgIcon",{get:function(){return this.booleanValue&&this.cssClasses.svgIconCheckedId?this.cssClasses.svgIconCheckedId:!this.isDeterminated&&this.cssClasses.svgIconIndId?this.cssClasses.svgIconIndId:!this.booleanValue&&this.cssClasses.svgIconUncheckedId?this.cssClasses.svgIconUncheckedId:this.cssClasses.svgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClick",{get:function(){return this.isIndeterminate&&!this.isInputReadOnly},enumerable:!1,configurable:!0}),t.prototype.getCheckedLabel=function(){if(this.booleanValue===!0)return this.locLabelTrue;if(this.booleanValue===!1)return this.locLabelFalse},t.prototype.setQuestionValue=function(e,i){i===void 0&&(i=!0),e==="true"&&this.valueTrue!=="true"&&(e=!0),e==="false"&&this.valueFalse!=="false"&&(e=!1),(e==="indeterminate"||e===null)&&(e=void 0),r.prototype.setQuestionValue.call(this,e,i)},t.prototype.onLabelClick=function(e,i){return this.allowClick&&(Ir(e),this.booleanValue=i),!0},t.prototype.calculateBooleanValueByEvent=function(e,i){var n=!1;D.isAvailable()&&(n=D.getComputedStyle(e.target).direction=="rtl"),this.booleanValue=n?!i:i},t.prototype.onSwitchClickModel=function(e){if(this.allowClick){Ir(e);var i=e.offsetX/e.target.offsetWidth>.5;this.calculateBooleanValueByEvent(e,i);return}return!0},t.prototype.onKeyDownCore=function(e){return(e.key==="ArrowLeft"||e.key==="ArrowRight")&&(e.stopPropagation(),this.calculateBooleanValueByEvent(e,e.key==="ArrowRight")),!0},t.prototype.getRadioItemClass=function(e,i){var n=void 0;return e.radioItem&&(n=e.radioItem),e.radioItemChecked&&i===this.value&&(n=(n?n+" ":"")+e.radioItemChecked),this.isDisabledStyle&&(n+=" "+e.radioItemDisabled),this.isReadOnlyStyle&&(n+=" "+e.radioItemReadOnly),this.isPreviewStyle&&(n+=" "+e.radioItemPreview),n},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getCompactRenderAs=function(){return"radio"},t.prototype.createActionContainer=function(e){return r.prototype.createActionContainer.call(this,this.renderAs!=="checkbox")},t.prototype.getIsTitleRenderedAsString=function(){return!1},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"switch"},enumerable:!1,configurable:!0}),c([p({localizable:!0})],t.prototype,"label",void 0),c([p({defaultValue:!1,onSet:function(e,i){e&&i.setPropertyValue("titleLocation","hidden")}})],t.prototype,"useTitleAsLabel",void 0),c([p({localizable:{defaultStr:"booleanCheckedLabel",markdown:!0}})],t.prototype,"labelTrue",void 0),c([p({defaultValue:!1})],t.prototype,"swapOrder",void 0),c([p({localizable:{defaultStr:"booleanUncheckedLabel",markdown:!0}})],t.prototype,"labelFalse",void 0),c([p()],t.prototype,"valueTrue",void 0),c([p()],t.prototype,"valueFalse",void 0),t})(ie);V.addClass("boolean",[{name:"showCommentArea:switch",visible:!0},{name:"label:text",serializationProperty:"locLabel",isSerializable:!1,visible:!1},{name:"labelTrue",serializationProperty:"locLabelTrue"},{name:"labelFalse",serializationProperty:"locLabelFalse"},"valueTrue","valueFalse",{name:"swapOrder:boolean"},{name:"renderAs",default:"default",visible:!1},{name:"useTitleAsLabel",default:!1,visible:!1}],function(){return new Sn("")},"question"),K.Instance.registerQuestion("boolean",function(r){return new Sn(r)});var Uo=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"imageitemvalue"},t.prototype.isPropertyStoredInHash=function(e){return e!=="imageLink"&&r.prototype.isPropertyStoredInHash.call(this,e)},t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,i,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,i,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e,i){return this.locOwner?this.locOwner.getProcessedText(e,i):e},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},Object.defineProperty(t.prototype,"contentNotLoaded",{get:function(){return this.locOwner instanceof Et&&this.locOwner.contentMode=="video"?this.videoNotLoaded:this.imageNotLoaded},set:function(e){this.locOwner instanceof Et&&this.locOwner.contentMode=="video"?this.videoNotLoaded=e:this.imageNotLoaded=e},enumerable:!1,configurable:!0}),c([p({defaultValue:!1})],t.prototype,"videoNotLoaded",void 0),c([p({defaultValue:!1})],t.prototype,"imageNotLoaded",void 0),c([p({localizable:!0})],t.prototype,"imageLink",void 0),t})(Ct),Et=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.isResponsiveValue=!1,i.onContentLoaded=function(n,o){n.contentNotLoaded=!1;var s=o.target;i.contentMode=="video"?n.aspectRatio=s.videoWidth/s.videoHeight:n.aspectRatio=s.naturalWidth/s.naturalHeight,i._width&&i.processResponsiveness(0,i._width)},i.gridColCount=void 0,i.colCount=0,i.calcIsResponsive(),i}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["minImageWidth","maxImageWidth","minImageHeight","maxImageHeight","visibleChoices","colCount","isResponsiveValue"];o.indexOf(e)>-1&&this._width&&this.processResponsiveness(0,this._width),(e==="imageWidth"||e==="imageHeight")&&this.calcIsResponsive(),e==="imageLink"&&(this.imageNotLoaded=!1,this.videoNotLoaded=!1)},t.prototype.getType=function(){return"imagepicker"},t.prototype.supportAutoAdvance=function(){return!this.multiSelect},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getItemValueType=function(){return"imageitemvalue"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemFlowDirection",{get:function(){return"row"},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.multiSelect?w.isArrayContainsEqual(this.value,this.correctAnswer):r.prototype.isAnswerCorrect.call(this)},t.prototype.isItemSelected=function(e){var i=this.value,n=e;if(this.isValueEmpty(i)||!n.imageLink||n.contentNotLoaded)return!1;if(!this.multiSelect)return this.isTwoValueEquals(i,e.value);if(!Array.isArray(i))return!1;for(var o=0;o<i.length;o++)if(this.isTwoValueEquals(i[o],e.value))return!0;return!1},t.prototype.getItemEnabled=function(e){var i=e;return!i.imageLink||i.contentNotLoaded?!1:r.prototype.getItemEnabled.call(this,e)},t.prototype.clearIncorrectValues=function(){if(this.multiSelect){var e=this.value;if(!e)return;if(!Array.isArray(e)||e.length==0){this.clearValue(!0);return}for(var i=[],n=0;n<e.length;n++)this.hasUnknownValue(e[n],!0)||i.push(e[n]);if(i.length==e.length)return;i.length==0?this.clearValue(!0):this.value=i}else r.prototype.clearIncorrectValues.call(this)},t.prototype.getDisplayValueCore=function(e,i){return!this.multiSelect&&!Array.isArray(i)?r.prototype.getDisplayValueCore.call(this,e,i):this.getDisplayArrayValue(e,i)},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value")),this.calcIsResponsive()},t.prototype.getValueCore=function(){var e=r.prototype.getValueCore.call(this);return e!==void 0?e:this.multiSelect?[]:e},t.prototype.convertValToArrayForMultSelect=function(e){return!this.multiSelect||this.isValueEmpty(e)||Array.isArray(e)?e:[e]},t.prototype.renderedValueFromDataCore=function(e){return this.convertValToArrayForMultSelect(e)},t.prototype.renderedValueToDataCore=function(e){return this.convertValToArrayForMultSelect(e)},Object.defineProperty(t.prototype,"imageScale",{get:function(){return this.survey?this.survey.widthScale/100:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageHeight",{get:function(){var e=this.isResponsive?Math.floor(this.responsiveImageHeight):this.imageHeight*this.imageScale;return e||150*this.imageScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageWidth",{get:function(){var e=this.isResponsive?Math.floor(this.responsiveImageWidth):this.imageWidth*this.imageScale;return e||200*this.imageScale},enumerable:!1,configurable:!0}),t.prototype.valueToData=function(e){return e},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.multiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return!1},t.prototype.addToVisibleChoices=function(e,i){this.addNewItemToVisibleChoices(e,i)},t.prototype.getSelectBaseRootCss=function(){var e=this.isResponsive;return new I().append(r.prototype.getSelectBaseRootCss.call(this)).append(this.cssClasses.rootResponsive,e).append(this.cssClasses.rootStatic,!e).append(this.cssClasses.rootColumn,this.getCurrentColCount()==1).toString()},Object.defineProperty(t.prototype,"isResponsive",{get:function(){return this.isResponsiveValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exactSizesAreEmpty",{get:function(){var e=this;return!["imageHeight","imageWidth"].some(function(i){return e[i]!==void 0&&e[i]!==null})},enumerable:!1,configurable:!0}),t.prototype.calcIsResponsive=function(){this.isResponsiveValue=this.exactSizesAreEmpty},t.prototype.getObservedElementSelector=function(){return pe(this.cssClasses.root)},t.prototype.supportResponsiveness=function(){return!0},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()},t.prototype.needResponsiveWidth=function(){return this.colCount>2},t.prototype.getCurrentColCount=function(){return this.responsiveColCount===void 0||this.colCount===0?this.colCount:this.responsiveColCount},t.prototype.getContainerStyle=function(){return this.isResponsive?{gridAutoFlow:this.gridColCount?null:"column",gridTemplateColumns:this.gridColCount?"repeat(".concat(this.gridColCount,", 1fr)"):null}:{}},t.prototype.processResponsiveness=function(e,i){this._width=i=Math.floor(i);var n=function(A,Q,ee){var X=Math.floor(A/(Q+ee));return(X+1)*(Q+ee)-ee<=A&&X++,X};if(this.isResponsive){var o=this.choices.length+(this.isDesignMode?1:0),s=(this.gapBetweenItems||0)*this.imageScale,a=this.minImageWidth*this.imageScale,l=this.maxImageWidth*this.imageScale,u=this.maxImageHeight*this.imageScale,f=this.minImageHeight*this.imageScale,y=this.colCount,b,E=n(i,a,s);y===0?((s+a)*o-s>i?b=Math.floor((i-s*(E-1))/E):b=Math.floor((i-s*(o-1))/o),this.gridColCount=Math.max(Math.min(o,E),1)):(E<y?(this.responsiveColCount=Math.max(E,1),y=this.responsiveColCount):this.responsiveColCount=y,this.gridColCount=this.responsiveColCount,b=Math.floor((i-s*(y-1))/y)),b=Math.max(a,Math.min(b,l));var S=Number.MIN_VALUE;this.choices.forEach(function(A){var Q=b/A.aspectRatio;S=Q>S?Q:S}),S>u?S=u:S<f&&(S=f);var O=this.responsiveImageWidth,R=this.responsiveImageHeight;return this.responsiveImageWidth=b,this.responsiveImageHeight=S,O!==this.responsiveImageWidth||R!==this.responsiveImageHeight}return!1},t.prototype.triggerResponsiveness=function(e){e===void 0&&(e=!0),e&&this.reCalcGapBetweenItemsCallback&&this.reCalcGapBetweenItemsCallback(),r.prototype.triggerResponsiveness.call(this,e)},t.prototype.afterRender=function(e){var i=this;r.prototype.afterRender.call(this,e);var n=this.getObservedElementSelector(),o=e&&n?e.querySelector(n):void 0;o&&(this.reCalcGapBetweenItemsCallback=function(){i.gapBetweenItems=Math.ceil(Number.parseFloat(D.getComputedStyle(o).gap))||16},this.reCalcGapBetweenItemsCallback())},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return this.multiSelect?"group":"radiogroup"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputRequiredAttribute",{get:function(){return this.multiSelect?this.hasRequiredError():null},enumerable:!1,configurable:!0}),c([p()],t.prototype,"multiSelect",void 0),c([p()],t.prototype,"showLabel",void 0),c([p()],t.prototype,"imageHeight",void 0),c([p({})],t.prototype,"responsiveImageHeight",void 0),c([p()],t.prototype,"imageWidth",void 0),c([p({})],t.prototype,"responsiveImageWidth",void 0),c([p()],t.prototype,"imageFit",void 0),c([p({onSet:function(e,i){e==="video"&&(i.showLabel=!0)}})],t.prototype,"contentMode",void 0),c([p({})],t.prototype,"isResponsiveValue",void 0),c([p({})],t.prototype,"maxImageWidth",void 0),c([p({})],t.prototype,"minImageWidth",void 0),c([p({})],t.prototype,"maxImageHeight",void 0),c([p({})],t.prototype,"minImageHeight",void 0),c([p({})],t.prototype,"responsiveColCount",void 0),c([p()],t.prototype,"gridColCount",void 0),t})(wt);V.addClass("imageitemvalue",[{name:"imageLink:file",serializationProperty:"locImageLink"}],function(r){return new Uo(r)},"itemvalue"),V.addClass("responsiveImageSize",[],void 0,"number"),V.addClass("imagepicker",[{name:"showOtherItem",visible:!1},{name:"otherText",visible:!1},{name:"showNoneItem",visible:!1},{name:"showRefuseItem",visible:!1},{name:"showDontKnowItem",visible:!1},{name:"noneText",visible:!1},{name:"placeholder",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",minValue:0},{name:"imageWidth:number",minValue:0},{name:"minImageWidth:responsiveImageSize",default:200,minValue:0},{name:"minImageHeight:responsiveImageSize",default:133,minValue:0},{name:"maxImageWidth:responsiveImageSize",default:3e3,minValue:0},{name:"maxImageHeight:responsiveImageSize",default:3e3,minValue:0},"showLabel:boolean",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]},"multiSelect:boolean"],function(){return new Et("")},"checkboxbase"),V.getProperty("imagepicker","choices").type="imageitemvalue[]",K.Instance.registerQuestion("imagepicker",function(r){var t=new Et(r);return t});function nu(r){var t=D.getDocument();return t.createElementNS("http://www.w3.org/2000/svg",r)}var Wo=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.onBgImageLoaded=function(){!i.svg||!i.bg||(i.svg.setAttribute("viewBox","0 0 ".concat(i.bg.naturalWidth," ").concat(i.bg.naturalHeight)),i.renderSVG())},i.onClickHandler=function(n){if(i.isInDesignMode&&i.selectedArea){var o=n.target.dataset.idx;if(o)i.selectedArea.removeCoord(Number(o));else{var s=i.scaleCoordsToSVG([n.offsetX,n.offsetY]),a=s[0],l=s[1];i.selectedArea.addCoord(a,l)}i.drawAreaControls();return}var u=n.target.dataset.uid;if(u){var f=i.areas.find(function(y){return y.uniqueId===Number(u)});i.mapItemToggle(f)}},i.onMouseOverHandler=function(n){if(!(i.isInDesignMode&&i.selectedArea)){var o=n.target.dataset.uid;o&&(i.hoveredUID=Number(o))}},i.onMouseOutHandler=function(){i.hoveredUID=null},i.onMouseDownHandler=function(n){n.target.dataset.idx!==void 0&&(i.activeControlPoint=n.target)},i.onMouseUpHandler=function(){i.activeControlPoint=null},i.onMouseMoveHandler=function(n){if(i.activeControlPoint){var o=i.scaleCoordsToSVG([n.offsetX,n.offsetY]),s=o[0],a=o[1],l=Number(i.activeControlPoint.dataset.idx),u=i.selectedArea;u.setCoord(l,s,a)}},i.controlPoints=[],i.createItemValues("areas"),i}return Object.defineProperty(t.prototype,"isMultiSelect",{get:function(){return this.isDesignMode?!1:this.multiSelect},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"imagemap"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.areas,!0)},t.prototype.onValueChanged=function(){r.prototype.onValueChanged.call(this),this.renderSVG()},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.renderSVG()},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="isSelectedInDesigner"&&n===!1&&(this.selectedArea=void 0),e==="multiSelect"&&this.clearValue(),["idleStrokeColor","idleStrokeWidth","idleFillColor","hoverStrokeColor","hoverStrokeWidth","hoverFillColor","selectedStrokeColor","selectedStrokeWidth","selectedFillColor"].indexOf(e)>-1&&this.updateCSSVariables(),this.isInDesignMode&&e==="areas"&&!this.areas.length&&(this.selectedArea=void 0),["areas","shape","selectedArea","hoveredUID"].indexOf(e)>-1&&this.renderSVG()},t.prototype.getValueCore=function(){var e=r.prototype.getValueCore.call(this);if(!(!this.isMultiSelect&&Array.isArray(e)&&e.length===0))return e},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),q.runEnabledConditionsForItems(this.areas,void 0,e);var i=q.runConditionsForItems(this.areas,void 0,void 0,e,!0);if(i){var n=this.getClearIfInvisible();(n=="onHidden"||n=="onHiddenContainer")&&this.clearIncorrectValues(),this.renderSVG()}},t.prototype.clearValueIfInvisibleCore=function(e){r.prototype.clearValueIfInvisibleCore.call(this,e),this.clearIncorrectValues()},t.prototype.clearIncorrectValues=function(){var e=this;if(r.prototype.clearIncorrectValues.call(this),!!this.value)if(this.isMultiSelect)this.value=this.value.filter(function(n){var o=e.areas.find(function(s){return s.value===n});return!!o&&o.isVisible});else{var i=this.areas.find(function(n){return n.value===e.value});(!i||!i.isVisible)&&(this.value=void 0)}},t.prototype.afterRenderQuestionElement=function(e){k.isAvailable()&&e&&this.initImageMap(e),r.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){r.prototype.beforeDestroyQuestionElement.call(this,e),this.bg&&this.bg.removeEventListener("load",this.onBgImageLoaded),this.svg&&(this.svg.removeEventListener("click",this.onClickHandler),this.svg.removeEventListener("mouseover",this.onMouseOverHandler),this.svg.removeEventListener("mouseout",this.onMouseOutHandler),this.svg.removeEventListener("mousedown",this.onMouseDownHandler),this.svg.removeEventListener("mouseup",this.onMouseUpHandler),this.svg.removeEventListener("mousemove",this.onMouseMoveHandler))},t.prototype.initImageMap=function(e){e&&(this.bg=e.querySelector("#".concat(this.id,"-bg")),this.svg=e.querySelector("#".concat(this.id,"-svg")),this.bg.addEventListener("load",this.onBgImageLoaded),this.svg.removeEventListener("click",this.onClickHandler),this.svg.addEventListener("click",this.onClickHandler),this.svg.removeEventListener("mouseover",this.onMouseOverHandler),this.svg.addEventListener("mouseover",this.onMouseOverHandler),this.svg.removeEventListener("mouseout",this.onMouseOutHandler),this.svg.addEventListener("mouseout",this.onMouseOutHandler),this.svg.removeEventListener("mousedown",this.onMouseDownHandler),this.svg.addEventListener("mousedown",this.onMouseDownHandler),this.svg.removeEventListener("mouseup",this.onMouseUpHandler),this.svg.addEventListener("mouseup",this.onMouseUpHandler),this.svg.removeEventListener("mousemove",this.onMouseMoveHandler),this.svg.addEventListener("mousemove",this.onMouseMoveHandler),this.updateCSSVariables())},t.prototype.scaleCoordsToSVG=function(e){var i=e[0],n=e[1];if(!this.svg||!this.bg)return[i,n];var o=this.svg.getScreenCTM().a;return[i/o,n/o]},t.prototype.getCSSVariables=function(){var e={"--sd-imagemap-idle-fill-color":this.idleFillColor,"--sd-imagemap-idle-stroke-color":this.idleStrokeColor,"--sd-imagemap-idle-stroke-width":this.idleStrokeWidth,"--sd-imagemap-hover-fill-color":this.hoverFillColor,"--sd-imagemap-hover-stroke-color":this.hoverStrokeColor,"--sd-imagemap-hover-stroke-width":this.hoverStrokeWidth,"--sd-imagemap-selected-fill-color":this.selectedFillColor,"--sd-imagemap-selected-stroke-color":this.selectedStrokeColor,"--sd-imagemap-selected-stroke-width":this.selectedStrokeWidth};for(var i in e)(e[i]==null||e[i]===null)&&delete e[i];return Object.keys(e).map(function(n){return"".concat(n,": ").concat(e[n])}).join("; ")},t.prototype.updateCSSVariables=function(){if(this.svg){var e=this.getCSSVariables();e.length?this.svg.setAttribute("style",e):this.svg.removeAttribute("style")}},t.prototype.dispose=function(){r.prototype.dispose.call(this)},t.prototype.renderSVG=function(){var e=this;this.svg&&(this.requestAnimationFrameId||(this.requestAnimationFrameId=requestAnimationFrame(function(){e.requestAnimationFrameId=null,e.svg.innerHTML="";for(var i=0,n=e.areas;i<n.length;i++){var o=n[i];o.render(e.svg)}e.drawAreaControls()})))},t.prototype.onCheckForErrors=function(e,i,n){if(r.prototype.onCheckForErrors.call(this,e,i,n),this.isMultiSelect){var o=Array.isArray(this.value)?this.value.length:0;this.maxSelectedAreas>0&&o>this.maxSelectedAreas&&e.push(new ce(this.getLocalizationFormatString("maxSelectError",this.maxSelectedAreas),this)),this.minSelectedAreas>0&&o<this.minSelectedAreas&&e.push(new ce(this.getLocalizationFormatString("minSelectError",this.minSelectedAreas),this))}},t.prototype.convertToCorrectValue=function(e){return this.isMultiSelect&&(e=new ri(e,this.valuePropertyName).convert(e)),r.prototype.convertToCorrectValue.call(this,e)},t.prototype.getDisplayValueCore=function(e,i){var n=this;return i&&(Array.isArray(i)||(i=[i]),i=i.map(function(o){return typeof o=="object"?n.valuePropertyName?o[n.valuePropertyName]:void 0:o}).filter(function(o){return o!==void 0}),i=i.map(function(o){var s;return((s=n.areas.find(function(a){return a.value===o}))===null||s===void 0?void 0:s.text)||void 0}).filter(function(o){return o!==void 0}).join(C.choicesSeparator),i)},t.prototype.mapItemToggle=function(e){if(this.isInDesignMode){this.selectedArea=this.selectedArea===e?void 0:e;return}if(!(this.isReadOnly||!e.enabled)){if(!this.isMultiSelect){this.value=this.value===e.value?void 0:e.value;return}this.value=new ri(this.value,this.valuePropertyName).toggle(e.value,this.maxSelectedAreas)}},t.prototype.isItemSelected=function(e){return this.isInDesignMode?this.selectedArea===e:this.isMultiSelect?new ri(this.value,this.valuePropertyName).contains(e.value):this.value===e.value},t.prototype.isItemHovered=function(e){var i=this;if(!this.hoveredUID)return!1;var n=this.areas.find(function(o){return o.uniqueId===i.hoveredUID});return n?this.isInDesignMode?e.uniqueId===this.hoveredUID:e.value===n.value:!1},t.prototype.addItem=function(e){var i=new Go(e);return this.areas.push(i),i},t.prototype.createControlPoint=function(e,i,n){var o=nu("circle");return o.setAttribute("cx",e),o.setAttribute("cy",i),o.setAttribute("r","4"),o.setAttribute("class",this.cssClasses.svgControlPoint),o.dataset.idx=n.toString(),o},t.prototype.drawAreaControls=function(){var e=this;if(this.isInDesignMode){for(var i=0,n=this.controlPoints;i<n.length;i++){var o=n[i];o.parentNode===this.svg&&this.svg.removeChild(o)}this.controlPoints=[];var s=this.areas.find(function(R){return R===e.selectedArea});if(s){var a=s.getShape(),l=s.getCoords();switch(a){case"rect":for(var u=0;u<4;u+=2){var f=this.createControlPoint(l[u],l[u+1],this.controlPoints.length);this.svg.appendChild(f),this.controlPoints.push(f)}break;case"circle":for(var y=0,b=[[l[0],l[1]],[Number(l[0])+Number(l[2]),l[1]]];y<b.length;y++){var E=b[y],S=E[0],O=E[1],f=this.createControlPoint(S,O,this.controlPoints.length);this.svg.appendChild(f),this.controlPoints.push(f)}break;case"poly":for(var u=0;u<l.length;u+=2){var f=this.createControlPoint(l[u],l[u+1],this.controlPoints.length);this.svg.appendChild(f),this.controlPoints.push(f)}break}}}},c([p()],t.prototype,"imageLink",void 0),c([p()],t.prototype,"areas",void 0),c([p()],t.prototype,"hoveredUID",void 0),c([p()],t.prototype,"valuePropertyName",void 0),c([p({defaultValue:!0})],t.prototype,"multiSelect",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"maxSelectedAreas",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"minSelectedAreas",void 0),c([p()],t.prototype,"shape",void 0),c([p()],t.prototype,"idleStrokeColor",void 0),c([p()],t.prototype,"idleStrokeWidth",void 0),c([p()],t.prototype,"idleFillColor",void 0),c([p()],t.prototype,"hoverStrokeColor",void 0),c([p()],t.prototype,"hoverStrokeWidth",void 0),c([p()],t.prototype,"hoverFillColor",void 0),c([p()],t.prototype,"selectedStrokeColor",void 0),c([p()],t.prototype,"selectedStrokeWidth",void 0),c([p()],t.prototype,"selectedFillColor",void 0),c([p()],t.prototype,"selectedArea",void 0),t})(ie),Go=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getBaseType=function(){return"imagemaparea"},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=this.locOwner;["idleStrokeColor","idleStrokeWidth","idleFillColor","hoverStrokeColor","hoverStrokeWidth","hoverFillColor","selectedStrokeColor","selectedStrokeWidth","selectedFillColor"].indexOf(e)>-1&&this.updateCSSVariables(),e==="shape"&&o.renderSVG(),e==="coords"&&(this.draw(),o.renderSVG())},t.prototype.getShape=function(){var e=this.locOwner;return this.shape==="inherit"?e?.shape:this.shape},t.prototype.getCoords=function(){var e=this.getShape(),i=this.coords?this.coords.split(",").map(function(n){return n.trim()}).filter(function(n){return n!==""}):[];switch(e){case"rect":i=i.length<4?["10","10","100","50"]:i;break;case"circle":i=i.length<3?["50","50","40"]:i;break;case"poly":i=i.length?i:["50","10","90","90","10","90"];break}return i},t.prototype.getSVGCoords=function(){var e=this.getCoords(),i=this.getShape();switch(i){case"rect":var n=e.map(Number),o=n[0],s=n[1],a=n[2],l=n[3],u=Math.min(o,a),f=Math.min(s,l),y=Math.abs(a-o),b=Math.abs(l-s);return[u,f,y,b].map(function(E){return E.toString()});case"circle":return[e[0],e[1],e[2]];case"poly":return e}},t.prototype.addCoord=function(e,i){var n=this.getShape();if(n==="poly"){var o=this.getCoords();this.coords=o+",".concat(e,",").concat(i)}},t.prototype.removeCoord=function(e){var i=this.getShape();if(i==="poly"){var n=this.getCoords();n.length/2<=3||(n.splice(e*2,2),this.coords=n.join(","))}},t.prototype.setCoord=function(e,i,n){var o=this.getCoords(),s=this.getShape();switch(s){case"rect":if(e<0||e>1)return;o[e*2]=i.toString(),o[e*2+1]=n.toString();break;case"circle":if(e<0||e>1)return;if(e===0)o[e*2]=i.toString(),o[e*2+1]=n.toString();else{var a=Number(o[0]),l=Number(o[1]);o[2]=Math.sqrt((i-a)*(i-a)+(n-l)*(n-l)).toString()}break;case"poly":o[e*2]=i.toString(),o[e*2+1]=n.toString();break}this.coords=o.join(",")},t.prototype.draw=function(){var e=this.getShape();switch(e){case"rect":var i=this.getSVGCoords(),n=i[0],o=i[1],s=i[2],a=i[3];this.svg.setAttribute("x",n),this.svg.setAttribute("y",o),this.svg.setAttribute("width",s),this.svg.setAttribute("height",a);break;case"circle":var l=this.getSVGCoords(),u=l[0],f=l[1],y=l[2];this.svg.setAttribute("cx",u),this.svg.setAttribute("cy",f),this.svg.setAttribute("r",y);break;case"poly":this.svg.setAttribute("points",this.getSVGCoords().join(","));break}},t.prototype.render=function(e){if(e){var i=this.getSVGElement();this.updateCSSVariables(),this.updateCSSClasses(),i.setAttribute("title",this.text?this.text:""),this.visible&&i.ownerSVGElement!==e&&e.appendChild(i)}},t.prototype.getSVGElement=function(){var e=this.getShape();if(this.svg&&this.svg.tagName===e)return this.svg;var i=D.getDocument(),n=i.createElementNS("http://www.w3.org/2000/svg",e==="poly"?"polygon":e);return n.dataset.uid=this.uniqueId.toString(),this.svg=n,this.draw(),this.svg},t.prototype.getCSSVariables=function(){var e={"--sd-imagemap-idle-fill-color":this.idleFillColor,"--sd-imagemap-idle-stroke-color":this.idleStrokeColor,"--sd-imagemap-idle-stroke-width":this.idleStrokeWidth,"--sd-imagemap-hover-fill-color":this.hoverFillColor,"--sd-imagemap-hover-stroke-color":this.hoverStrokeColor,"--sd-imagemap-hover-stroke-width":this.hoverStrokeWidth,"--sd-imagemap-selected-fill-color":this.selectedFillColor,"--sd-imagemap-selected-stroke-color":this.selectedStrokeColor,"--sd-imagemap-selected-stroke-width":this.selectedStrokeWidth};for(var i in e)(e[i]==null||e[i]===null)&&delete e[i];return Object.keys(e).map(function(n){return"".concat(n,": ").concat(e[n])}).join("; ")},t.prototype.getCSSClasses=function(){var e=this.locOwner;if(!e)return"";var i=e.cssClasses,n=e.isItemSelected(this),o=e.isItemHovered(this),s=this.enabled;return s?n?i.svgItemSelected:o?i.svgItemHovered:i.svgItem:i.svgItemDisabled},t.prototype.updateCSSVariables=function(){if(this.svg){var e=this.getCSSVariables();e.length?this.svg.setAttribute("style",e):this.svg.removeAttribute("style")}},t.prototype.updateCSSClasses=function(){this.svg&&this.svg.setAttribute("class",this.getCSSClasses())},c([p()],t.prototype,"shape",void 0),c([p()],t.prototype,"coords",void 0),c([p()],t.prototype,"idleFillColor",void 0),c([p()],t.prototype,"idleStrokeColor",void 0),c([p()],t.prototype,"idleStrokeWidth",void 0),c([p()],t.prototype,"hoverFillColor",void 0),c([p()],t.prototype,"hoverStrokeColor",void 0),c([p()],t.prototype,"hoverStrokeWidth",void 0),c([p()],t.prototype,"selectedFillColor",void 0),c([p()],t.prototype,"selectedStrokeColor",void 0),c([p()],t.prototype,"selectedStrokeWidth",void 0),t})(q);V.addClass("imagemaparea",[{name:"value",isUnique:!1},{name:"shape",choices:["inherit","circle","rect","poly"],default:"inherit"},{name:"coords:string",locationInTable:"detail"},{name:"idleFillColor:color",locationInTable:"detail"},{name:"idleStrokeColor:color",locationInTable:"detail"},{name:"idleStrokeWidth:number",locationInTable:"detail"},{name:"hoverFillColor:color",locationInTable:"detail"},{name:"hoverStrokeColor:color",locationInTable:"detail"},{name:"hoverStrokeWidth:number",locationInTable:"detail"},{name:"selectedFillColor:color",locationInTable:"detail"},{name:"selectedStrokeColor:color",locationInTable:"detail"},{name:"selectedStrokeWidth:number",locationInTable:"detail"}],function(){return new Go("")},"itemvalue"),V.addClass("imagemap",[{name:"imageLink:file"},{name:"areas:imagemaparea[]"},{name:"multiSelect:boolean",default:!0},{name:"valuePropertyName"},{name:"shape",choices:["circle","rect","poly"],default:"poly"},{name:"idleFillColor:color"},{name:"idleStrokeColor:color"},{name:"idleStrokeWidth:number"},{name:"hoverFillColor:color"},{name:"hoverStrokeColor:color"},{name:"hoverStrokeWidth:number"},{name:"selectedFillColor:color"},{name:"selectedStrokeColor:color"},{name:"selectedStrokeWidth:number"},{name:"maxSelectedAreas:number",default:0,onSettingValue:function(r,t){if(t<=0)return 0;var e=r.minSelectedAreas;return e>0&&t<e?e:t}},{name:"minSelectedAreas:number",default:0,onSettingValue:function(r,t){if(t<=0)return 0;var e=r.maxSelectedAreas;return e>0&&t>e?e:t}}],function(){return new Wo("")},"question");var Jo=[".mp4",".mov",".wmv",".flv",".avi",".mkv"],ru="https://www.youtube.com/",$o="embed",xn=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="contentMode"||e==="imageLink")&&this.calculateRenderedMode()},t.prototype.getType=function(){return"image"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.calculateRenderedMode()},Object.defineProperty(t.prototype,"renderedStyleHeight",{get:function(){return this.imageHeight?jt(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHeight",{get:function(){return this.imageHeight?_e(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleWidth",{get:function(){return this.imageWidth?jt(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){return this.imageWidth?_e(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMode",{get:function(){return this.getPropertyValue("renderedMode","image")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAltText",{get:function(){return this.altText||this.title},enumerable:!1,configurable:!0}),t.prototype.getImageCss=function(){var e=this.getPropertyByName("imageHeight"),i=this.getPropertyByName("imageWidth"),n=e.isDefaultValue(this.imageHeight)&&i.isDefaultValue(this.imageWidth);return new I().append(this.cssClasses.image).append(this.cssClasses.adaptive,n).toString()},t.prototype.onLoadHandler=function(){this.contentNotLoaded=!1},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},t.prototype.setRenderedMode=function(e){this.setPropertyValue("renderedMode",e)},t.prototype.calculateRenderedMode=function(){this.contentMode!=="auto"?this.setRenderedMode(this.contentMode):this.isYoutubeVideo()?this.setRenderedMode("youtube"):this.isVideo()?this.setRenderedMode("video"):this.setRenderedMode("image")},t.prototype.isYoutubeVideo=function(){return w.isUrlYoutubeVideo(this.imageLink)},t.prototype.isVideo=function(){var e=this.imageLink;if(!e)return!1;e=e.toLowerCase();for(var i=0;i<Jo.length;i++)if(e.endsWith(Jo[i]))return!0;return!1},c([p({defaultValue:!1})],t.prototype,"contentNotLoaded",void 0),c([p({localizable:{onCreate:function(e,i){i.onGetTextCallback=function(n){return ou(n,e.contentMode=="youtube")}}}})],t.prototype,"imageLink",void 0),c([p({localizable:!0})],t.prototype,"altText",void 0),c([p()],t.prototype,"imageHeight",void 0),c([p()],t.prototype,"imageWidth",void 0),c([p()],t.prototype,"imageFit",void 0),c([p({onSet:function(e,i){e==="video"&&(i.showLabel=!0)}})],t.prototype,"contentMode",void 0),t})(ni);function ou(r,t){if(!r||!w.isUrlYoutubeVideo(r))return t?"":r;var e=r.toLocaleLowerCase();if(e.indexOf($o)>-1)return r;for(var i="",n=r.length-1;n>=0&&!(r[n]==="="||r[n]==="/");n--)i=r[n]+i;return ru+$o+"/"+i}V.addClass("image",[{name:"imageLink:file",serializationProperty:"locImageLink"},{name:"altText",serializationProperty:"locAltText",alternativeName:"text"},{name:"contentMode",default:"auto",choices:["auto","image","video","youtube"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight",default:"150"},{name:"imageWidth",default:"200"}],function(){return new xn("")},"nonvalue"),K.Instance.registerQuestion("image",function(r){return new xn(r)});/*!
 * Signature Pad v4.2.0 | https://github.com/szimek/signature_pad
 * (c) 2024 Szymon Nowak | Released under the MIT license
 */class oi{constructor(t,e,i,n){if(isNaN(t)||isNaN(e))throw new Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=i||0,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class In{static fromPoints(t,e){const i=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new In(t[1],i,n,t[2],e.start,e.end)}static calculateControlPoints(t,e,i){const n=t.x-e.x,o=t.y-e.y,s=e.x-i.x,a=e.y-i.y,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},u={x:(e.x+i.x)/2,y:(e.y+i.y)/2},f=Math.sqrt(n*n+o*o),y=Math.sqrt(s*s+a*a),b=l.x-u.x,E=l.y-u.y,S=y/(f+y),O={x:u.x+b*S,y:u.y+E*S},R=e.x-O.x,A=e.y-O.y;return{c1:new oi(l.x+R,l.y+A),c2:new oi(u.x+R,u.y+A)}}constructor(t,e,i,n,o,s){this.startPoint=t,this.control2=e,this.control1=i,this.endPoint=n,this.startWidth=o,this.endWidth=s}length(){let e=0,i,n;for(let o=0;o<=10;o+=1){const s=o/10,a=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const u=a-i,f=l-n;e+=Math.sqrt(u*u+f*f)}i=a,n=l}return e}point(t,e,i,n,o){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t}}class su{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,e,i){this._et.addEventListener(t,e,i)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,i){this._et.removeEventListener(t,e,i)}}function au(r,t=250){let e=0,i=null,n,o,s;const a=()=>{e=Date.now(),i=null,n=r.apply(o,s),i||(o=null,s=[])};return function(...u){const f=Date.now(),y=t-(f-e);return o=this,s=u,y<=0||y>t?(i&&(clearTimeout(i),i=null),e=f,n=r.apply(o,s),i||(o=null,s=[])):i||(i=window.setTimeout(a,y)),n}}class si extends su{constructor(t,e={}){super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=i=>{i.buttons===1&&this._strokeBegin(i)},this._handleMouseMove=i=>{this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.buttons===1&&this._strokeEnd(i)},this._handleTouchStart=i=>{if(i.cancelable&&i.preventDefault(),i.targetTouches.length===1){const n=i.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=i=>{i.cancelable&&i.preventDefault();const n=i.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.cancelable&&i.preventDefault();const o=i.changedTouches[0];this._strokeEnd(o)}},this._handlePointerStart=i=>{i.preventDefault(),this._strokeBegin(i)},this._handlePointerMove=i=>{this._strokeMoveUpdate(i)},this._handlePointerEnd=i=>{this._drawingStroke&&(i.preventDefault(),this._strokeEnd(i))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in e?e.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?au(si.prototype._strokeUpdate,this.throttle):si.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((i,n)=>{const o=new Image,s=e.ratio||window.devicePixelRatio||1,a=e.width||this.canvas.width/s,l=e.height||this.canvas.height/s,u=e.xOffset||0,f=e.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,u,f,a,l),i()},o.onerror=y=>{n(y)},o.crossOrigin="anonymous",o.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){return t==="image/svg+xml"?(typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`):(typeof e!="number"&&(e=void 0),this.canvas.toDataURL(t,e))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;this._drawingStroke=!0;const i=this._getPointGroupOptions(),n=Object.assign(Object.assign({},i),{points:[]});this._data.push(n),this._reset(i),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const e=t.clientX,i=t.clientY,n=t.pressure!==void 0?t.pressure:t.force!==void 0?t.force:0,o=this._createPoint(e,i,n),s=this._data[this._data.length-1],a=s.points,l=a.length>0&&a[a.length-1],u=l?o.distanceTo(l)<=this.minDistance:!1,f=this._getPointGroupOptions(s);if(!l||!(l&&u)){const y=this._addPoint(o,f);l?y&&this._drawCurve(y,f):this._drawDot(o,f),a.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){this._drawingStroke&&(this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,i){const n=this.canvas.getBoundingClientRect();return new oi(t-n.left,e-n.top,i,new Date().getTime())}_addPoint(t,e){const{_lastPoints:i}=this;if(i.push(t),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],e),o=In.fromPoints(i,n);return i.shift(),o}return null}_calculateCurveWidths(t,e,i){const n=i.velocityFilterWeight*e.velocityFrom(t)+(1-i.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n,i),s={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,s}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,i){const n=this._ctx;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){const i=this._ctx,n=t.endWidth-t.startWidth,o=Math.ceil(t.length())*2;i.beginPath(),i.fillStyle=e.penColor;for(let s=0;s<o;s+=1){const a=s/o,l=a*a,u=l*a,f=1-a,y=f*f,b=y*f;let E=b*t.startPoint.x;E+=3*y*a*t.control1.x,E+=3*f*l*t.control2.x,E+=u*t.endPoint.x;let S=b*t.startPoint.y;S+=3*y*a*t.control1.y,S+=3*f*l*t.control2.y,S+=u*t.endPoint.y;const O=Math.min(t.startWidth+u*n,e.maxWidth);this._drawCurveSegment(E,S,O)}i.closePath(),i.fill()}_drawDot(t,e){const i=this._ctx,n=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;i.beginPath(),this._drawCurveSegment(t.x,t.y,n),i.closePath(),i.fillStyle=e.penColor,i.fill()}_fromData(t,e,i){for(const n of t){const{points:o}=n,s=this._getPointGroupOptions(n);if(o.length>1)for(let a=0;a<o.length;a+=1){const l=o[a],u=new oi(l.x,l.y,l.pressure,l.time);a===0&&this._reset(s);const f=this._addPoint(u,s);f&&e(f,s)}else this._reset(s),i(o[0],s)}}toSVG({includeBackgroundColor:t=!1}={}){const e=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,o=0,s=this.canvas.width/i,a=this.canvas.height/i,l=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("viewBox",`${n} ${o} ${s} ${a}`),l.setAttribute("width",s.toString()),l.setAttribute("height",a.toString()),t&&this.backgroundColor){const u=document.createElement("rect");u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("fill",this.backgroundColor),l.appendChild(u)}return this._fromData(e,(u,{penColor:f})=>{const y=document.createElement("path");if(!isNaN(u.control1.x)&&!isNaN(u.control1.y)&&!isNaN(u.control2.x)&&!isNaN(u.control2.y)){const b=`M ${u.startPoint.x.toFixed(3)},${u.startPoint.y.toFixed(3)} C ${u.control1.x.toFixed(3)},${u.control1.y.toFixed(3)} ${u.control2.x.toFixed(3)},${u.control2.y.toFixed(3)} ${u.endPoint.x.toFixed(3)},${u.endPoint.y.toFixed(3)}`;y.setAttribute("d",b),y.setAttribute("stroke-width",(u.endWidth*2.25).toFixed(3)),y.setAttribute("stroke",f),y.setAttribute("fill","none"),y.setAttribute("stroke-linecap","round"),l.appendChild(y)}},(u,{penColor:f,dotSize:y,minWidth:b,maxWidth:E})=>{const S=document.createElement("circle"),O=y>0?y:(b+E)/2;S.setAttribute("r",O.toString()),S.setAttribute("cx",u.x.toString()),S.setAttribute("cy",u.y.toString()),S.setAttribute("fill",f),l.appendChild(S)}),l.outerHTML}}var lu=300,uu=200,En=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.valueIsUpdatingInternally=!1,i._loadedData=void 0,i.updateValueHandler=function(){i._loadedData=void 0,i.scaleCanvas(!0,!0)},i}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),(e==="penColor"||e==="backgroundColor"||e==="backgroundImage")&&this.signaturePad&&this.updateColors(this.signaturePad)},t.prototype.getPenColorFromTheme=function(){var e=this.survey;return!!e&&!!e.themeVariables&&e.themeVariables["--sjs-primary-backcolor"]},t.prototype.updateColors=function(e){var i=this.getPenColorFromTheme(),n=this.getPropertyByName("penColor");e.penColor=this.penColor||i||n.defaultValue||"#1ab394";var o=this.getPropertyByName("backgroundColor"),s=i?"transparent":void 0,a=this.backgroundImage?"transparent":this.backgroundColor;e.backgroundColor=a||s||o.defaultValue||"#ffffff"},t.prototype.getCssRoot=function(e){return new I().append(r.prototype.getCssRoot.call(this,e)).append(e.small,this.signatureWidth.toString()==="300").toString()},t.prototype.getFormat=function(){return this.dataFormat==="jpeg"?"image/jpeg":this.dataFormat==="svg"?"image/svg+xml":""},t.prototype.updateValue=function(){if(this.signaturePad){var e=this.signaturePad.toDataURL(this.getFormat());this.valueIsUpdatingInternally=!0,this.value=e,this.valueIsUpdatingInternally=!1}},t.prototype.getType=function(){return"signaturepad"},t.prototype.afterRenderQuestionElement=function(e){k.isAvailable()&&e&&(this.isDesignMode||this.initSignaturePad(e),this.element=e),r.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){e&&this.destroySignaturePad(e)},t.prototype.themeChanged=function(e){this.signaturePad&&this.updateColors(this.signaturePad)},t.prototype.resizeCanvas=function(){this.canvas.width=this.containerWidth,this.canvas.height=this.containerHeight},t.prototype.scaleCanvas=function(e,i){e===void 0&&(e=!0),i===void 0&&(i=!1);var n=this.canvas,o=n.offsetWidth/this.containerWidth;(this.scale!=o||i)&&(this.scale=o,n.style.width=this.renderedCanvasWidth,this.resizeCanvas(),this.signaturePad.minWidth=this.penMinWidth*o,this.signaturePad.maxWidth=this.penMaxWidth*o,n.getContext("2d").scale(1/o,1/o),e&&this.loadPreview(this.value))},t.prototype.fromUrl=function(e){var i=this;if(this.isFileLoading=!0,cl(e))this.fromDataUrl(e),this.isFileLoading=!1;else{var n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){if(i.canvas){var o=D.createElement("canvas");o.width=i.containerWidth,o.height=i.containerHeight;var s=o.getContext("2d");s.drawImage(n,0,0);var a=o.toDataURL(i.getFormat());i.fromDataUrl(a)}i.isFileLoading=!1},n.onerror=function(){i.isFileLoading=!1}}},t.prototype.fromDataUrl=function(e){if(this._loadedData=e,this.signaturePad){var i=1,n=this.scale;if(this.dataFormat==="svg"){var o=k.getDevicePixelRatio();i=o||1,n=1}var s={width:this.canvas.width*n/i,height:this.canvas.height*n/i};this.signaturePad.fromDataURL(e,s)}},Object.defineProperty(t.prototype,"loadedData",{get:function(){return this._loadedData},enumerable:!1,configurable:!0}),t.prototype.loadPreview=function(e){var i=this;if(!e){this.signaturePad&&this.canvas&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width*this.scale,this.canvas.height*this.scale),this.signaturePad.clear()),this.hasDrawnStroke=!1,this.valueWasChangedFromLastUpload=!1;return}if(this.storeDataAsText)this.fromDataUrl(e);else if(this.loadedData)this.fromDataUrl(this.loadedData);else{var n=e?[e]:[];this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new qo(this,function(o,s){o==="success"&&s&&s.length>0&&s[0].content?(i.fromDataUrl(s[0].content),i.isFileLoading=!1):o==="skipped"&&i.fromUrl(e),i._previewLoader.dispose(),i._previewLoader=void 0}),this._previewLoader.load(n)}},t.prototype.onChangeQuestionValue=function(e){r.prototype.onChangeQuestionValue.call(this,e),this.isLoadingFromJson||(this._loadedData=void 0,this.loadPreview(e))},t.prototype.onSurveyLoad=function(){r.prototype.onSurveyLoad.call(this),this.loadPreview(this.value)},t.prototype.initSignaturePad=function(e){var i=this,n=e.getElementsByTagName("canvas")[0];this.canvas=n,this.resizeCanvas();var o=new si(n,{backgroundColor:"#ffffff"});this.signaturePad=o,this.isInputReadOnly&&o.off(),this.readOnlyChangedCallback=function(){i.isInputReadOnly?o.off():o.on()},this.updateColors(o),o.addEventListener("beginStroke",function(){i.scaleCanvas(),i.hasDrawnStroke=!0,n.focus()},{once:!1}),o.addEventListener("endStroke",function(){i.storeDataAsText?i.updateValue():i.valueWasChangedFromLastUpload=!0},{once:!1}),this.updateValueHandler(),this.readOnlyChangedCallback();var s=function(a,l){(l.name==="signatureWidth"||l.name==="signatureHeight")&&(i.valueIsUpdatingInternally||i.updateValueHandler())};this.onPropertyChanged.add(s),this.signaturePad.propertyChangedHandler=s},t.prototype.destroySignaturePad=function(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null},Object.defineProperty(t.prototype,"containerHeight",{get:function(){return this.signatureHeight||uu},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this.signatureWidth||lu},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCanvasWidth",{get:function(){return this.signatureAutoScaleEnabled?"100%":this.containerWidth+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){var e=!this.nothingIsDrawn(),i=this.isUploading;return!this.isInputReadOnly&&this.allowClear&&e&&!i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){return this.isReadOnly?this.locPlaceholderReadOnly:this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.nothingIsDrawn=function(){var e=this.hasDrawnStroke,i=this.isEmpty(),n=this.isUploading,o=this.valueWasChangedFromLastUpload;return!e&&i&&!n&&!o},t.prototype.needShowPlaceholder=function(){return this.showPlaceholder&&this.nothingIsDrawn()},t.prototype.onBlurCore=function(e){if(r.prototype.onBlurCore.call(this,e),!this.storeDataAsText&&!this.element.contains(e.relatedTarget)){if(!this.valueWasChangedFromLastUpload)return;this.uploadFiles([iu(this.signaturePad.toDataURL(this.getFormat()),this.name+"."+Tn(this.dataFormat),this.getFormat())],"signature"),this.valueWasChangedFromLastUpload=!1}},t.prototype.uploadResultItemToValue=function(e){return e.content},t.prototype.setValueFromResult=function(e){this.valueIsUpdatingInternally=!0,this.value=e?.length?e.map(function(i){return i.content})[0]:void 0,this.valueIsUpdatingInternally=!1},t.prototype.clearValue=function(e,i){this.valueWasChangedFromLastUpload=!1,r.prototype.clearValue.call(this,e,i),this._loadedData=void 0,this.loadPreview(this.value)},t.prototype.endLoadingFromJson=function(){r.prototype.endLoadingFromJson.call(this),this.signatureWidth===300&&this.width&&typeof this.width=="number"&&this.width&&(Ee.warn("Use signatureWidth property to set width for the signature pad"),this.signatureWidth=this.width,this.width=void 0),this.signatureHeight===200&&this.height&&(Ee.warn("Use signatureHeight property to set width for the signature pad"),this.signatureHeight=this.height,this.height=void 0)},c([p({defaultValue:!1})],t.prototype,"hasDrawnStroke",void 0),c([p({defaultValue:!1})],t.prototype,"isReadyForUpload",void 0),c([p({defaultValue:!1})],t.prototype,"valueWasChangedFromLastUpload",void 0),c([p({onSetting:function(e){return Tn(e)}})],t.prototype,"dataFormat",void 0),c([p()],t.prototype,"signatureWidth",void 0),c([p()],t.prototype,"signatureHeight",void 0),c([p()],t.prototype,"signatureAutoScaleEnabled",void 0),c([p()],t.prototype,"penMinWidth",void 0),c([p()],t.prototype,"penMaxWidth",void 0),c([p()],t.prototype,"height",void 0),c([p()],t.prototype,"allowClear",void 0),c([p()],t.prototype,"penColor",void 0),c([p()],t.prototype,"backgroundColor",void 0),c([p()],t.prototype,"backgroundImage",void 0),c([p({})],t.prototype,"showPlaceholder",void 0),c([p({localizable:{defaultStr:"signaturePlaceHolder",markdown:!0}})],t.prototype,"placeholder",void 0),c([p({localizable:{defaultStr:"signaturePlaceHolderReadOnly",markdown:!0}})],t.prototype,"placeholderReadOnly",void 0),t})(mn);function Tn(r){return r||(r="png"),r=r.replace("image/","").replace("+xml",""),r!=="jpeg"&&r!=="svg"&&(r="png"),r}V.addClass("signaturepad",[{name:"signatureWidth:number",default:300},{name:"signatureHeight:number",default:200},{name:"signatureAutoScaleEnabled:boolean",default:!1},{name:"penMinWidth:number",default:.5},{name:"penMaxWidth:number",default:2.5},{name:"height:number",visible:!1},{name:"allowClear:boolean",default:!0},{name:"showPlaceholder:boolean",default:!0},{name:"placeholder:text",serializationProperty:"locPlaceholder",dependsOn:"showPlaceholder",visibleIf:function(r){return r.showPlaceholder}},{name:"placeholderReadOnly:text",serializationProperty:"locPlaceholderReadOnly",dependsOn:"showPlaceholder",visibleIf:function(r){return r.showPlaceholder}},{name:"backgroundImage:file"},{name:"penColor:color"},{name:"backgroundColor:color"},{name:"dataFormat",default:"png",choices:[{value:"png",text:"PNG"},{value:"jpeg",text:"JPEG"},{value:"svg",text:"SVG"}],onSettingValue:function(r,t){return Tn(t)}},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1}],function(){return new En("")},"question"),K.Instance.registerQuestion("signaturepad",function(r){return new En(r)});var cu=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.item=e,i}return t.prototype.getIndex=function(){return this.panelIndex},t.prototype.getQuestionData=function(){return this.item.data},t.prototype.getValue=function(e){var i=e.path;if(i.length!==0){if(i.length===1){var n=this.getPanelValue(i[0].name);if(n!==void 0)return{isFound:!0,value:n,context:this}}var o=C.expressionVariables,s=o.panel;if(i.length>1){var a=i[0].name===o.prevPanel?-1:i[0].name===o.nextPanel?1:0;if(a!==0){var l=this.visiblePanelIndex+a;if(l<0||l>=this.getPanels(!0).length)return{isFound:!0,value:void 0,context:this};var u=this.getPanels(!0)[l];return i[0].name=s,e.index=l,u.data.getValueGetterContext().getValue(e)}}if(i.length>1&&i[0].name.toLocaleLowerCase()===o.parentPanel.toLocaleLowerCase()){var f=this.item.data;if(f&&f.parentQuestion&&f.parent&&f.parent.data)return i[0].name=s,e.isRoot=!0,f.parent.data.getValueGetterContext().getValue(e)}var y=this.item.panel,b=i[0].name===s;if(b||!e.isRoot){b&&i.shift();var E=new ji(y.questions).getValue(e);if(E&&E.isFound)return E;var S=this.item.getAllValues();if(e.isRoot){var O=this.getValueFromBindedQuestions(i,S);if(O)return O}return e.isRoot=!1,new fe(S).getValue(e)}}},t.prototype.getTextValue=function(e,i,n){return e=e.toLocaleLowerCase(),[this.indexVar,this.visIndexVar].indexOf(e)>-1&&i>-1&&i++,r.prototype.getTextValue.call(this,e,i,n)},Object.defineProperty(t.prototype,"indexVar",{get:function(){return C.expressionVariables.panelIndex.toLocaleLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visIndexVar",{get:function(){return C.expressionVariables.visiblePanelIndex.toLocaleLowerCase()},enumerable:!1,configurable:!0}),t.prototype.getPanelValue=function(e){if(e=e.toLocaleLowerCase(),e===this.indexVar)return this.panelIndex;if(e==this.visIndexVar)return this.visiblePanelIndex},Object.defineProperty(t.prototype,"panelIndex",{get:function(){return this.getPanels(!1).indexOf(this.item.panel)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelIndex",{get:function(){return this.getPanels(!0).indexOf(this.item.panel)},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(e){var i=this.item.data;return i?e?i.visiblePanels:i.panels:[]},t})(Wr),pu=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.question=e,i}return t.prototype.getValue=function(e){var i=e.path,n=this.question,o=e.index;if(o>-1&&n.isDesignMode&&i.length>0){var s=i[0].name,a=n.template.getQuestionByName(s);return a?(i.shift(),i.length===0?{isFound:!0}:a.getValueGetterContext().getValue(e)):{isFound:!1}}if(o>-1){if(o>=0&&o<n.panels.length){var l=n.panels[o].data;return e.isRoot=!1,l.getValueGetterContext().getValue(e)}return{isFound:!1,value:void 0,context:this}}return!e.createObjects&&this.question.isEmpty()?{isFound:i.length===0,value:void 0}:r.prototype.getValue.call(this,e)},t})(Wt),hu=(function(r){P(t,r);function t(e){return r.call(this,e)||this}return t})(G),ai=(function(){function r(t,e){this.data=t,this.data=t,this.panelValue=e,this.textPreProcessor=new yt(this),this.setSurveyImpl()}return Object.defineProperty(r.prototype,"panel",{get:function(){return this.panelValue},enumerable:!1,configurable:!0}),r.prototype.setSurveyImpl=function(){this.panel.setSurveyImpl(this)},r.prototype.getValueGetterContext=function(){return new cu(this)},r.prototype.getValue=function(t){var e=this.getAllValues();return e[t]},r.prototype.setValue=function(t,e){var i=this.data.getPanelItemData(this),n=i?i[t]:void 0;if(!w.isTwoValueEquals(e,n,!1,!0,!1)){this.data.setPanelItemData(this,t,w.getUnbindValue(e));for(var o=this.panel.questions,s=0;s<o.length;s++){var a=o[s];a.getValueName()!==t&&a.checkBindings(t,e);var l=C.commentSuffix;if(t.endsWith(l)){t=t.substring(0,t.length-l.length);var u=this.panel.getQuestionByName(t);u&&(e=u.value)}var f=C.expressionVariables.panel+"."+t;a.runTriggers(f,e)}}},r.prototype.getComment=function(t){var e=this.getValue(t+C.commentSuffix);return e||""},r.prototype.setComment=function(t,e,i){this.setValue(t+C.commentSuffix,e)},r.prototype.findQuestionByName=function(t){if(t){var e=C.expressionVariables.panel+".";if(t.indexOf(e)===0)return this.panel.getQuestionByName(t.substring(e.length));var i=this.getSurvey();return i?i.getQuestionByName(t):null}},r.prototype.getAllValues=function(){return this.data.getPanelItemData(this)},r.prototype.getFilteredProperties=function(){return this.data&&this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}},r.prototype.getSurveyData=function(){return this},r.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},r.prototype.getTextProcessor=function(){return this.textPreProcessor},r})(),fu=(function(){function r(t){this.data=t}return r.prototype.getSurveyData=function(){return null},r.prototype.getSurvey=function(){return this.data.getSurvey()},r.prototype.getTextProcessor=function(){return null},r})(),Rn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i._renderedPanels=[],i.isPanelsAnimationRunning=!1,i.isAddingNewPanels=!1,i.isSetPanelItemData={},i.createNewArray("panels",function(n){i.onPanelAdded(n)},function(n){i.onPanelRemoved(n)}),i.createNewArray("visiblePanels"),i.templateValue=i.createAndSetupNewPanelObject(),i.template.renderWidth="100%",i.template.selectedElementInDesign=i,i.template.addElementCallback=function(n){i.addOnPropertyChangedCallback(n),i.rebuildPanels()},i.template.removeElementCallback=function(){i.rebuildPanels()},i}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="panelsState"&&this.setPanelsState();var o=["newPanelPosition","displayMode","showProgressBar"];o.indexOf(e)>-1&&this.updateFooterActions(),e==="allowAddPanel"&&this.updateNoEntriesTextDefaultLoc(),e==="minPanelCount"&&this.onMinPanelCountChanged(),e==="maxPanelCount"&&this.onMaxPanelCountChanged();var s=["templateQuestionTitleLocation","templateQuestionTitleWidth"];if(s.indexOf(e)>-1){var a=this.visiblePanelsCore;a&&a.forEach(function(l){l.updateElementCss(!0)})}e==="showQuestionNumbers"&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible,!0),e==="tabAlign"&&this.isRenderModeTab&&(this.tabbedMenu.containerCss=this.getTabbedMenuCss())},t.prototype.validateExpressions=function(e){e===void 0&&(e={functions:!0,variables:!0,semantics:!0}),this.useTemplatePanel||new ai(this,this.template);var i=r.prototype.validateExpressions.call(this,e);return this.useTemplatePanel||this.setTemplatePanelSurveyImpl(),i},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFirstQuestionToFocus=function(e){for(var i=this.currentPanel?[this.currentPanel]:this.visiblePanelsCore,n=0,o=i;n<o.length;n++){var s=o[n],a=s.getFirstQuestionToFocus(e);if(a)return a}return this.showAddPanelButton&&(!e||this.currentErrorCount>0)?this:null},t.prototype.getFirstInputElementId=function(){var e=this.getFirstQuestionToFocus(!1);return e&&e!==this?e.inputId:this.showAddPanelButton?this.addButtonId:r.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var e=this.getFirstQuestionToFocus(!0);return e?e.inputId:r.prototype.getFirstErrorInputElementId.call(this)},t.prototype.setSurveyImpl=function(e,i){r.prototype.setSurveyImpl.call(this,e,i),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()},t.prototype.assignOnPropertyChangedToTemplate=function(){for(var e=this.template.elements,i=0;i<e.length;i++)this.addOnPropertyChangedCallback(e[i])},t.prototype.addOnPropertyChangedCallback=function(e){var i=this;e.isQuestion&&e.setParentQuestion(this),e.onPropertyChanged.add(function(n,o){i.onTemplateElementPropertyChanged(n,o)}),e.isPanel&&(e.addElementCallback=function(n){i.addOnPropertyChangedCallback(n)})},t.prototype.onTemplateElementPropertyChanged=function(e,i){if(!(this.isLoadingFromJson||this.useTemplatePanel||this.panelsCore.length==0)){var n=V.findProperty(e.getType(),i.name);if(n)for(var o=this.panelsCore,s=0;s<o.length;s++){var a=o[s].getQuestionByName(e.name);a&&a[i.name]!==i.newValue&&(a[i.name]=i.newValue)}}},Object.defineProperty(t.prototype,"useTemplatePanel",{get:function(){return this.isDesignMode&&!this.isContentElement},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"paneldynamic"},t.prototype.getAllChildren=function(){return z(z([],r.prototype.getAllChildren.call(this),!0),this.templateElements,!0)},t.prototype.clearOnDeletingContainer=function(){this.panelsCore.forEach(function(e){e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.removeElement=function(e){return this.template.removeElement(e)},Object.defineProperty(t.prototype,"template",{get:function(){return this.templateValue},enumerable:!1,configurable:!0}),t.prototype.getPanelInDesignMode=function(){return this.template},t.prototype.getPanels=function(){return[this.template]},Object.defineProperty(t.prototype,"templateElements",{get:function(){return this.template.elements},enumerable:!1,configurable:!0}),t.prototype.isPropertyStoredInHash=function(e){return e!=="templateElements"&&r.prototype.isPropertyStoredInHash.call(this,e)},Object.defineProperty(t.prototype,"templateTitle",{get:function(){return this.template.title},set:function(e){this.template.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTitle",{get:function(){return this.template.locTitle},enumerable:!1,configurable:!0}),t.prototype.getLocalizableString=function(e){return e==="templateTitle"?this.template.locTitle:r.prototype.getLocalizableString.call(this,e)},Object.defineProperty(t.prototype,"templateDescription",{get:function(){return this.template.description},set:function(e){this.template.description=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateDescription",{get:function(){return this.template.locDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateVisibleIf",{get:function(){return this.getPropertyValue("templateVisibleIf")},set:function(e){this.setPropertyValue("templateVisibleIf",e),this.template.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.template.questionStartIndex},set:function(e){this.template.questionStartIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){for(var e=[],i=0;i<this.panelsCore.length;i++)e.push(this.panelsCore[i].data);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.panelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.visiblePanelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsCore",{get:function(){return this.getPropertyValue("panels")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelsCore",{get:function(){return this.getPropertyValue("visiblePanels")},enumerable:!1,configurable:!0}),t.prototype.onPanelAdded=function(e){if(this.onPanelRemovedCore(e),!!e.visible){for(var i=0,n=this.panelsCore,o=0;o<n.length&&n[o]!==e;o++)n[o].visible&&i++;this.visiblePanelsCore.splice(i,0,e),this.addTabFromToolbar(e,i),this.currentPanel||(this.currentPanel=e),this.updateRenderedPanels()}},t.prototype.onPanelRemoved=function(e){var i=this.onPanelRemovedCore(e);if(this.currentPanel===e){var n=this.visiblePanelsCore;i>=n.length&&(i=n.length-1),this.currentPanel=i>=0?n[i]:null}this.updateRenderedPanels()},t.prototype.onPanelRemovedCore=function(e){var i=this.visiblePanelsCore,n=i.indexOf(e);return n>-1&&(i.splice(n,1),this.removeTabFromToolbar(e)),n},Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.isRenderModeList?-1:this.useTemplatePanel?0:this.visiblePanelsCore.indexOf(this.currentPanel)},set:function(e){e<0||this.visiblePanelCount<1||(e>=this.visiblePanelCount&&(e=this.visiblePanelCount-1),this.currentPanel=this.visiblePanelsCore[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPanel",{get:function(){if(this.isDesignMode)return this.template;if(this.isRenderModeList||this.useTemplatePanel)return null;var e=this.getPropertyValue("currentPanel",null);return!e&&this.visiblePanelCount>0&&(e=this.visiblePanelsCore[0],this.currentPanel=e),e},set:function(e){if(!(this.isRenderModeList||this.useTemplatePanel)){var i=this.getPropertyValue("currentPanel"),n=e?this.visiblePanelsCore.indexOf(e):-1;if(!(e&&n<0||e===i)&&(i&&i.onHidingContent(),e&&e.onFirstRendering(),this.setPropertyValue("currentPanel",e),this.updateRenderedPanels(),this.updateFooterActions(),this.updateTabToolbarItemsPressedState(),this.fireCallback(this.currentIndexChangedCallback),n>-1&&this.survey)){var o={panel:e,visiblePanelIndex:n};this.survey.dynamicPanelCurrentIndexChanged(this,o)}}},enumerable:!1,configurable:!0}),t.prototype.getUIState=function(){var e=r.prototype.getUIState.call(this),i=this.currentIndex;return i>0&&(e=e||{},e.activePanelIndex=i),e},t.prototype.setUIState=function(e){r.prototype.setUIState.call(this,e),e.activePanelIndex&&(this.currentIndex=e.activePanelIndex)},t.prototype.updateRenderedPanels=function(){var e=this,i=[];this.isRenderModeList?i=[].concat(this.visiblePanels):this.currentPanel&&(i=[this.currentPanel]),i.forEach(function(n){return e.panelOnFirstRendering(n)}),this.renderedPanels=i},t.prototype.panelOnFirstRendering=function(e){e&&(e.onFirstRendering(),e.locStrsChanged())},Object.defineProperty(t.prototype,"renderedPanels",{get:function(){return this._renderedPanels},set:function(e){this.renderedPanels.length==0||e.length==0?(this.blockAnimations(),this.panelsAnimation.sync(e),this.releaseAnimations()):(this.isPanelsAnimationRunning=!0,this.panelsAnimation.sync(e))},enumerable:!1,configurable:!0}),t.prototype.getPanelsAnimationOptions=function(){var e=this,i=function(){if(e.isRenderModeList)return"";var n=new I,o=!1,s=e.renderedPanels.filter(function(l){return l!==e.currentPanel})[0],a=e.visiblePanels.indexOf(s);return a<0&&(o=!0,a=e.removedPanelIndex),n.append("sv-pd-animation-adding",!!e.focusNewPanelCallback).append("sv-pd-animation-removing",o).append("sv-pd-animation-left",a<=e.currentIndex).append("sv-pd-animation-right",a>e.currentIndex).toString()};return{getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(n){var o,s;if(n&&e.cssContent){var a=pe(e.cssContent);return(s=(o=e.getWrapperElement())===null||o===void 0?void 0:o.querySelector(":scope ".concat(a," #").concat(n.id)))===null||s===void 0?void 0:s.parentElement}},getEnterOptions:function(){var n=new I().append(e.cssClasses.panelWrapperEnter).append(i()).toString();return{onBeforeRunAnimation:function(o){if(e.focusNewPanelCallback){var s=e.isRenderModeList?o:o.parentElement;ae.ScrollElementToViewCore(s,!1,!1,{behavior:"smooth"})}!e.isRenderModeList&&o.parentElement?gt(o.parentElement,{heightTo:o.offsetHeight+"px"}):Ve(o)},onAfterRunAnimation:function(o){he(o),o.parentElement&&he(o.parentElement)},cssClass:n}},getLeaveOptions:function(){var n=new I().append(e.cssClasses.panelWrapperLeave).append(i()).toString();return{onBeforeRunAnimation:function(o){!e.isRenderModeList&&o.parentElement?gt(o.parentElement,{heightFrom:o.offsetHeight+"px"}):Ve(o)},onAfterRunAnimation:function(o){he(o),o.parentElement&&he(o.parentElement)},cssClass:n}},isAnimationEnabled:function(){return e.animationAllowed&&!!e.getWrapperElement()}}},t.prototype.disablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.blockAnimations()})},t.prototype.enablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.releaseAnimations()})},t.prototype.updatePanelsAnimation=function(){var e=this;this._panelsAnimations=new(this.isRenderModeList?Ae:Oi)(this.getPanelsAnimationOptions(),function(i,n){e._renderedPanels=i,n||(e.isPanelsAnimationRunning=!1,e.focusNewPanel())},function(){return e._renderedPanels})},Object.defineProperty(t.prototype,"panelsAnimation",{get:function(){return this._panelsAnimations||this.updatePanelsAnimation(),this._panelsAnimations},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){r.prototype.onHidingContent.call(this),this.currentPanel?this.currentPanel.onHidingContent():this.visiblePanelsCore.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(t.prototype,"panelPrevText",{get:function(){return this.prevPanelText},set:function(e){this.prevPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelNextText",{get:function(){return this.nextPanelText},set:function(e){this.nextPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelAddText",{get:function(){return this.addPanelText},set:function(e){this.addPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveText",{get:function(){return this.removePanelText},set:function(e){this.removePanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressTopShowing",{get:function(){return this.displayMode=="carousel"&&(this.progressBarLocation==="top"||this.progressBarLocation==="topBottom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressBottomShowing",{get:function(){return this.displayMode=="carousel"&&(this.progressBarLocation==="bottom"||this.progressBarLocation==="topBottom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonVisible",{get:function(){return this.currentIndex>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonShowing",{get:function(){return this.isPrevButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonVisible",{get:function(){return this.currentIndex>=0&&this.currentIndex<this.visiblePanelCount-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonShowing",{get:function(){return this.isNextButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRangeShowing",{get:function(){return this.showProgressBar&&this.currentIndex>=0&&this.visiblePanelCount>1},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return e===void 0&&(e=!1),e?[this.template]:this.templateElements},t.prototype.prepareValueForPanelCreating=function(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1},t.prototype.setValueAfterPanelsCreating=function(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)},t.prototype.getValueCore=function(){return this.isAddingNewPanels?this.addingNewPanelsValue:r.prototype.getValueCore.call(this)},t.prototype.setValueCore=function(e){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=e):r.prototype.setValueCore.call(this,e)},t.prototype.setIsMobile=function(e){r.prototype.setIsMobile.call(this,e),(this.panelsCore||[]).forEach(function(i){return i.getQuestions(!0).forEach(function(n){n.setIsMobile(e)})})},t.prototype.themeChanged=function(e){r.prototype.themeChanged.call(this,e),(this.panelsCore||[]).forEach(function(i){return i.getQuestions(!0).forEach(function(n){n.themeChanged(e)})})},Object.defineProperty(t.prototype,"panelCount",{get:function(){return!this.canBuildPanels||this.wasNotRenderedInSurvey?this.getPropertyValue("panelCount"):this.panelsCore.length},set:function(e){if(!(e<0)){if(!this.isLoadingFromJson&&this.isDesignMode){var i=this.minPanelCount;e<i&&(e=i);var n=this.maxPanelCount;n>0&&e>n&&(e=n)}if(!this.canBuildPanels||this.wasNotRenderedInSurvey){this.setPropertyValue("panelCount",e),this.updateFooterActions();return}if(!(e==this.panelsCore.length||this.useTemplatePanel)){this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();for(var o=e-this.panelCount===1,s=this.panelCount;s<e;s++){var a=this.createNewPanel();this.panelsCore.push(a),this.displayMode=="list"&&this.panelsState!="default"&&(this.panelsState==="expanded"?a.expand():a.title&&a.collapse())}o&&this.singleInputOnAddItem(this.settingPanelCountBasedOnValue),e<this.panelCount&&this.panelsCore.splice(e,this.panelCount-e),this.disablePanelsAnimations(),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.enablePanelsAnimations()}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelCount",{get:function(){return this.visiblePanels.length},enumerable:!1,configurable:!0}),t.prototype.getStructuredValue=function(e){if(e===void 0&&(e=-1),e<0||this.isEmpty()||!Array.isArray(this.value))return this.value;for(var i=new Array,n=Math.min(this.visiblePanelCount,this.value.length),o=0;o<n;o++){var s=this.visiblePanels[o],a={};s.collectValues(a,e),i.push(a)}return i},t.prototype.setTemplatePanelSurveyImpl=function(){this.template.setSurveyImpl(this.useTemplatePanel?this.surveyImpl:new fu(this))},t.prototype.setPanelsSurveyImpl=function(){for(var e=0;e<this.panelsCore.length;e++){var i=this.panelsCore[e];i!=this.template&&i.setSurveyImpl(i.data)}},t.prototype.setPanelsState=function(){if(!(this.useTemplatePanel||this.displayMode!="list"||!this.templateTitle))for(var e=0;e<this.panelsCore.length;e++){var i=this.panelsState;i==="firstExpanded"&&(i=e===0?"expanded":"collapsed"),this.panelsCore[e].state=i}},t.prototype.setValueBasedOnPanelCount=function(){var e=this.value;if((!e||!Array.isArray(e))&&(e=[]),e.length!=this.panelCount){for(var i=e.length;i<this.panelCount;i++){var n=this.panels[i].getValue(),o=w.isValueEmpty(n)?{}:n;e.push(o)}e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}},t.prototype.onMinPanelCountChanged=function(){var e=this.minPanelCount;e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e)},t.prototype.onMaxPanelCountChanged=function(){var e=this.maxPanelCount;e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e),this.updateFooterActions()},Object.defineProperty(t.prototype,"addButtonId",{get:function(){return this.id+"addPanel"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitleLocation",{get:function(){return this.templateQuestionTitleLocation},set:function(e){this.templateQuestionTitleLocation=e},enumerable:!1,configurable:!0}),t.prototype.resetSingleInput=function(){r.prototype.resetSingleInput.call(this),this.locTemplateTitle.onGetTextCallback=null},t.prototype.getSingleInputQuestionsCore=function(e,i){this.onFirstRendering();var n=new Array,o=this.visiblePanels;if(i)for(var s=0;s<o.length;s++){var a=o[s];(!a.hasValueAnyQuestion(!0)||!a.validate(!1,!1))&&this.fillSingleInputQuestionsByPanel(n,a)}return this.getSingleInputQuestionsForDynamic(e,n)},t.prototype.fillSingleInputQuestionsInContainer=function(e,i){var n=this.getPanelByQuestion(i);this.fillSingleInputQuestionsByPanel(e,n)},t.prototype.fillSingleInputQuestionsByPanel=function(e,i){i&&i.visibleQuestions.forEach(function(n){return n.addNestedQuestion(e,!0,!1,!1)})},t.prototype.getSingleQuestionLocTitleCore=function(){var e=this,i=this.locTemplateTitle;return i.onGetTextCallback=function(n){var o=e.singleInputQuestion;return o?e.processSingleInputTitle(n,e.getPanelByQuestion(o)):n},i},t.prototype.processSingleInputTitle=function(e,i){return e||(e=this.getSingleInputTitleTemplate()),i?i.getProcessedText(e):e},t.prototype.getSingleInputTitleTemplate=function(){return this.getLocalizationString("panelDynamicTabTextFormat")},t.prototype.getPanelByQuestion=function(e){for(var i=e.parent;i&&i.parent;)i=i.parent;return i},t.prototype.getSingleInputAddTextCore=function(){if(this.canAddPanel)return this.addPanelText},t.prototype.singleInputAddItemCore=function(){this.addPanelUI()},t.prototype.getSingleQuestionOnChange=function(e){var i=this.visiblePanelsCore;if(i.length>0){(e<0||e>=i.length)&&(e=i.length-1);var n=i[e],o=n.visibleQuestions;if(o.length>0)return o[0]}return null},t.prototype.createSingleInputSummary=function(){var e=this,i=new Zi(this,this.locNoEntriesText),n=new Array;return this.visiblePanels.forEach(function(o){var s=new me(e,!0,void 0,e.locTemplateTitle.localizationName);s.setJson(e.locTemplateTitle.getJson()),s.onGetTextCallback=function(u){return e.processSingleInputTitle(e.templateTitle,o)};var a=new G({locTitle:e.locEditPanelText,action:function(){e.singInputEditPanel(o)}}),l=e.canRemovePanel?new G({locTitle:e.locRemovePanelText,action:function(){e.removePanelUI(o)}}):void 0;n.push(new Xi(s,a,l))}),i.items=n,i},Object.defineProperty(t.prototype,"locEditPanelText",{get:function(){return this.getOrCreateLocStr("editPanelText",!1,"editText")},enumerable:!1,configurable:!0}),t.prototype.singleInputMoveToFirstCore=function(){for(var e,i=(e=this.singleInputQuestion)===null||e===void 0?void 0:e.parent;i&&i.parent;)i=i.parent;this.singInputEditPanel(i)},t.prototype.singInputEditPanel=function(e){if(e){var i=e.visibleQuestions;i.length>0&&this.setSingleInputQuestion(i[0])}},t.prototype.getShowQuestionNumbers=function(){var e,i=this.showQuestionNumbers;if(i==="default"){var n=(e=this.survey)===null||e===void 0?void 0:e.showQuestionNumbers;if(n==="recursive")return n}return i},t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return this.showQuestionNumbers==="default"},Object.defineProperty(t.prototype,"panelRemoveButtonLocation",{get:function(){return this.removePanelButtonLocation},set:function(e){this.removePanelButtonLocation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRangeInProgress",{get:function(){return this.showProgressBar},set:function(e){this.showProgressBar=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderMode",{get:function(){var e=this.displayMode;if(e=="carousel"){var i=this.progressBarLocation;if(i=="top")return"progressTop";if(i=="bottom")return"progressBottom";if(i=="topBottom")return"progressTopBottom"}return e},set:function(e){(e||"").startsWith("progress")?(e=="progressTop"?this.progressBarLocation="top":e=="progressBottom"?this.progressBarLocation="bottom":e=="progressTopBottom"&&(this.progressBarLocation="topBottom"),this.displayMode="carousel"):this.displayMode=e},enumerable:!1,configurable:!0}),t.prototype.updatePanelView=function(){this.blockAnimations(),this.updateRenderedPanels(),this.releaseAnimations(),this.updatePanelsAnimation()},Object.defineProperty(t.prototype,"isRenderModeList",{get:function(){return this.displayMode==="list"||this.isSingleInputActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeTab",{get:function(){return this.displayMode==="tab"&&!this.isSingleInputActive},enumerable:!1,configurable:!0}),t.prototype.setVisibleIndex=function(e){var i=this.isDesignMode?[this.template]:this.visiblePanelsCore;if(this.isVisibleIndexNegative(e))return i.forEach(function(u){return u.setVisibleIndex(-1)}),r.prototype.setVisibleIndex.call(this,-1);for(var n=this.getShowQuestionNumbers(),o=n==="default",s=o?e:0,a=0;a<i.length;a++){var l=this.setPanelVisibleIndex(i[a],s,n!="off");o&&(s+=l)}return r.prototype.setVisibleIndex.call(this,o?-1:e),o?s-e:1},t.prototype.setPanelVisibleIndex=function(e,i,n){return n?e.setVisibleIndex(i):(e.setVisibleIndex(-1),0)},Object.defineProperty(t.prototype,"canAddPanel",{get:function(){return this.isDesignMode||!this.legacyNavigation&&!this.isRenderModeList&&this.currentIndex<this.visiblePanelCount-1&&this.newPanelPosition!=="next"?!1:this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemovePanel",{get:function(){return this.isDesignMode?!1:this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount},enumerable:!1,configurable:!0}),t.prototype.rebuildPanels=function(){var e;if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var i=[];if(this.useTemplatePanel)new ai(this,this.template),i.push(this.template);else for(var n=0;n<this.panelCount;n++)i.push(this.createNewPanel());(e=this.panelsCore).splice.apply(e,z([0,this.panelsCore.length],i,!1)),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.updateTabToolbar()}},Object.defineProperty(t.prototype,"defaultValueFromLastPanel",{get:function(){return this.copyDefaultValueFromLastEntry},set:function(e){this.copyDefaultValueFromLastEntry=e},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return r.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultPanelValue)},t.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultPanelValue)||!this.isValueEmpty(this.defaultValue)){r.prototype.setDefaultValue.call(this);return}if(!(!this.isEmpty()||this.panelCount==0)){for(var e=[],i=0;i<this.panelCount;i++)e.push(this.defaultPanelValue);this.value=e}},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var i=0;i<e.length;i++)if(!this.isRowEmpty(e[i]))return!1;return!0},t.prototype.getProgressInfo=function(){return ae.getProgressInfoByElements(this.visiblePanelsCore,this.isRequired)},t.prototype.isRowEmpty=function(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0},t.prototype.addPanelUI=function(){return this.addPanel(void 0,!0)},t.prototype.addPanel=function(e,i){var n=i===!0;if(n&&(!this.canAddPanel||!this.canLeaveCurrentPanel()))return null;var o=this.addPanelCore(e);return this.panelOnFirstRendering(o),n&&(this.displayMode==="list"&&this.panelsState!=="default"&&o.expand(),this.focusNewPanelCallback=function(){o?.focusFirstQuestion()},this.isPanelsAnimationRunning||this.focusNewPanel()),o},t.prototype.addPanelCore=function(e){var i=this.currentIndex;return e===void 0&&(e=i<0?this.panelCount:i+1),(e<0||e>this.panelCount)&&(e=this.panelCount),this.updateValueOnAddingPanel(i<0?this.panelCount-1:i,e),this.isRenderModeList||(this.currentIndex=e),this.notifyOnPanelAddedRemoved(!0,e),this.panelsCore[e]},t.prototype.focusNewPanel=function(){this.focusNewPanelCallback&&(this.focusNewPanelCallback(),this.focusNewPanelCallback=void 0)},t.prototype.updateValueOnAddingPanel=function(e,i){this.panelCount++;var n=this.value;if(!(!Array.isArray(n)||n.length!==this.panelCount)){var o=!1,s=this.panelCount-1;if(i<s){o=!0;var a=n[s];n.splice(s,1),n.splice(i,0,a)}if(this.isValueEmpty(this.defaultPanelValue)||(o=!0,this.copyValue(n[i],this.defaultPanelValue)),this.copyDefaultValueFromLastEntry&&n.length>1){var l=e>-1&&e<=s?e:s;o=!0,this.copyValue(n[i],n[l])}o&&(this.value=n)}},t.prototype.canLeaveCurrentPanel=function(){return this.displayMode==="list"||!this.currentPanel||this.currentPanel.validate(!0,!0)},t.prototype.copyValue=function(e,i){for(var n in i)e[n]=i[n]},t.prototype.getPanelRemoveButtonId=function(e){return e.id+"_remove_button"},t.prototype.isRequireConfirmOnDelete=function(e){if(!this.confirmDelete)return!1;var i=this.getVisualPanelIndex(e);if(i<0||i>=this.visiblePanelCount)return!1;var n=this.visiblePanelsCore[i].getValue();return!this.isValueEmpty(n)&&(this.isValueEmpty(this.defaultPanelValue)||!this.isTwoValueEquals(n,this.defaultPanelValue))},t.prototype.goToNextPanel=function(){return this.currentIndex<0||!this.canLeaveCurrentPanel()?!1:(this.currentIndex++,!0)},t.prototype.goToPrevPanel=function(){this.currentIndex<0||this.currentIndex--},t.prototype.removePanelUI=function(e){this.removePanel(e,this.isRequireConfirmOnDelete(e))},t.prototype.removePanel=function(e,i){var n=this,o=this.getVisualPanelIndex(e);if(!(o<0||o>=this.visiblePanelCount)){var s=i!==void 0;if(s){if(!this.canRemovePanel)return;var a=function(){var l;n.removePanelCore(o);var u=n.visiblePanelCount,f=o>=u?u-1:o,y=u===0?n.addButtonId:f>-1?n.getPanelRemoveButtonId(n.visiblePanels[f]):"";y&&ae.FocusElement(y,!0,(l=n.survey)===null||l===void 0?void 0:l.rootElement)};i?ht({message:this.confirmDeleteText,funcOnYes:function(){a()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):a()}else this.removePanelCore(o)}},t.prototype.removePanelCore=function(e){this.removedPanelIndex=e;var i=this.visiblePanelsCore[e],n=this.panelsCore.indexOf(i);if(!(n<0)&&!(this.survey&&!this.survey.dynamicPanelRemoving(this,n,i))){this.panelsCore.splice(n,1),this.setPropertyValue("panelCount",this.panelCount),this.singleInputOnRemoveItem(e);var o=this.value;!o||!Array.isArray(o)||n>=o.length?this.updateFooterActions():(this.isValueChangingInternally=!0,o.splice(n,1),this.value=o,this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.notifyOnPanelAddedRemoved(!1,n,i),this.isValueChangingInternally=!1)}},t.prototype.notifyOnPanelAddedRemoved=function(e,i,n){n||(n=this.panelsCore[i]);var o=this.getShowQuestionNumbers();if(this.survey){var s=o==="default";e?this.survey.dynamicPanelAdded(this,i,n,s):this.survey.dynamicPanelRemoved(this,i,n,s)}e&&n&&(o==="onpanel"||o==="recursive")&&n.setVisibleIndex(0)},t.prototype.recursiveNoCallback=function(){return this.getShowQuestionNumbers()==="recursive"?this.no:""},t.prototype.getVisualPanelIndex=function(e){if(w.isNumber(e))return e;for(var i=this.visiblePanelsCore,n=0;n<i.length;n++)if(i[n]===e||i[n].data===e)return n;return-1},t.prototype.getPanelVisibleIndexById=function(e){for(var i=this.visiblePanelsCore,n=0;n<i.length;n++)if(i[n].id===e)return n;return-1},t.prototype.locStrsChanged=function(){r.prototype.locStrsChanged.call(this),this.locTemplateTitle.strChanged();for(var e=this.panelsCore,i=0;i<e.length;i++)e[i].locStrsChanged();this.tabbedMenu&&this.tabbedMenu.locStrsChanged()},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.panelsCore.length;e++)this.clearIncorrectValuesInPanel(e)},t.prototype.clearErrors=function(){r.prototype.clearErrors.call(this);for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].clearErrors()},t.prototype.getQuestionFromArray=function(e,i){return i<0||i>=this.panelsCore.length?null:this.panelsCore[i].getQuestionByName(e)},t.prototype.clearIncorrectValuesInPanel=function(e){var i=this.panelsCore[e];i.clearIncorrectValues();var n=this.value,o=n&&e<n.length?n[e]:null;if(o){var s=!1;for(var a in o)if(!this.getSharedQuestionFromArray(a,e)){var l=i.getQuestionByValueName(a);l||this.iscorrectValueWithPostPrefix(i,a,C.commentSuffix)||this.iscorrectValueWithPostPrefix(i,a,C.matrix.totalsSuffix)||(delete o[a],s=!0)}s&&(n[e]=o,this.value=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,i,n){return i.indexOf(n)!==i.length-n.length?!1:!!e.getQuestionByName(i.substring(0,i.indexOf(n)))},t.prototype.getSharedQuestionFromArray=function(e,i){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,i):null},t.prototype.addConditionObjectsByContext=function(e,i){for(var n=i?.isValidator?i.errorOwner:i,o=!!i&&(i===!0||this.template.questions.indexOf(n)>-1),s=new Array,a=this.template.questions,l=0;l<a.length;l++)a[l].addConditionObjectsByContext(s,i);for(var u=0;u<C.panel.maxPanelCountInCondition;u++)for(var f="["+u+"].",y=this.getValueName()+f,b=this.processedTitle+f,l=0;l<s.length;l++)s[l].context?e.push(s[l]):e.push({name:y+s[l].name,text:b+s[l].text,question:s[l].question});if(o){for(var y=i===!0?this.getValueName()+".":"",b=i===!0?this.processedTitle+".":"",E=C.expressionVariables.panel+".",l=0;l<s.length;l++)if(s[l].question!=i){var S={name:y+E+s[l].name,text:b+E+s[l].text,question:s[l].question};S.context=this,e.push(S)}}},t.prototype.collectNestedQuestionsCore=function(e,i,n,o){o&&e.push(this);var s=i?this.visiblePanelsCore:this.panelsCore;Array.isArray(s)&&s.forEach(function(a){a.questions.forEach(function(l){return l.addNestedQuestion(e,i,n,o)})})},t.prototype.getConditionJson=function(e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),!i)return r.prototype.getConditionJson.call(this,e);var n=i,o=i.indexOf(".");o>-1&&(n=i.substring(0,o),i=i.substring(o+1));var s=this.template.getQuestionByName(n);return s?s.getConditionJson(e,i):null},t.prototype.onReadOnlyChanged=function(){var e=this.isReadOnly;this.template.readOnly=e;for(var i=0;i<this.panelsCore.length;i++)this.panelsCore[i].readOnly=e;this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),r.prototype.onReadOnlyChanged.call(this)},t.prototype.updateNoEntriesTextDefaultLoc=function(){var e=this.getLocalizableString("noEntriesText");e&&(e.localizationName=this.getNoEntriesLocalizationName())},t.prototype.getNoEntriesLocalizationName=function(){return this.isReadOnly||!this.allowAddPanel?"noEntriesReadonlyText":"noEntriesText"},t.prototype.onSurveyLoad=function(){this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad();var e=this.adjustPanelCount();e>-1&&this.setPropertyValue("panelCount",e),r.prototype.onSurveyLoad.call(this)},t.prototype.adjustPanelCount=function(){var e=this.getPropertyValue("panelCount");return e<this.minPanelCount?this.minPanelCount:e>this.maxPanelCount?this.maxPanelCount:-1},t.prototype.buildPanelsFirstTime=function(e){if(e===void 0&&(e=!1),!this.hasPanelBuildFirstTime&&!(!e&&this.wasNotRenderedInSurvey)){if(this.blockAnimations(),this.hasPanelBuildFirstTime=!0,this.isBuildingPanelsFirstTime=!0,this.getPropertyValue("panelCount")>0&&(this.panelCount=this.getPropertyValue("panelCount")),this.useTemplatePanel&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),this.data&&this.isValueChangedWithoutPanels&&(this.isValueChangedWithoutPanels=!1,this.runTriggersOnBuildPanelsFirstTime()),this.survey)for(var i=0;i<this.panelCount;i++)this.notifyOnPanelAddedRemoved(!0,i);this.updateIsReady(),this.showAddPanelButton||this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),this.isBuildingPanelsFirstTime=!1,this.releaseAnimations()}},t.prototype.runTriggersOnBuildPanelsFirstTime=function(){var e=this;this.value,this.visiblePanelsCore.forEach(function(i){var n=e.getPanelItemData(i.data);if(!w.isValueEmpty(n)){var o=w.createCopyWithPrefix(n,C.expressionVariables.panel+".");i.questions.forEach(function(s){return s.runTriggers("",void 0,o)})}})},Object.defineProperty(t.prototype,"showAddPanelButton",{get:function(){return this.allowAddPanel&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasNotRenderedInSurvey",{get:function(){return!this.hasPanelBuildFirstTime&&!this.wasRendered&&!!this.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canBuildPanels",{get:function(){return!this.isLoadingFromJson&&!this.useTemplatePanel},enumerable:!1,configurable:!0}),t.prototype.onFirstRenderingCore=function(){r.prototype.onFirstRenderingCore.call(this),this.buildPanelsFirstTime(),this.template.onFirstRendering()},t.prototype.localeChanged=function(){r.prototype.localeChanged.call(this),this.panelsCore.forEach(function(e){return e.localeChanged()})},t.prototype.runConditionCore=function(e){r.prototype.runConditionCore.call(this,e),this.runPanelsCondition(this.panelsCore,e)},t.prototype.runTriggers=function(e,i,n){r.prototype.runTriggers.call(this,e,i,n),this.visiblePanelsCore.forEach(function(o){o.questions.forEach(function(s){return s.runTriggers(e,i,n)})})},t.prototype.reRunCondition=function(){this.data&&this.runCondition(this.getDataFilteredProperties())},t.prototype.runPanelsCondition=function(e,i){this.isValueChangingInternally=!0;for(var n=0;n<e.length;n++){var o=e[n],s=C.expressionVariables.panel,a=w.createCopy(i);a[s]=o,o.runCondition(a),o.isVisible}this.isValueChangingInternally=!1},t.prototype.onAnyValueChanged=function(e,i){r.prototype.onAnyValueChanged.call(this,e,i),!this.hasPanelBuildFirstTime&&e===this.getValueName()&&(this.isValueChangedWithoutPanels=!0);for(var n=0;n<this.panelsCore.length;n++)this.panelsCore[n].onAnyValueChanged(e,i),this.panelsCore[n].onAnyValueChanged(C.expressionVariables.panel,"")},t.prototype.hasKeysDuplicated=function(e){for(var i=[],n,o=0;o<this.panelsCore.length;o++)n=this.isValueDuplicated(this.panelsCore[o],i,e)||n;return n},t.prototype.updatePanelsContainsErrors=function(){var e=this.changingValueQuestions;if(!(!Array.isArray(e)||e.length===0)){for(var i=e[0],n=i.parent;n;)n.updateContainsErrors(),n=n.parent;this.updateContainsErrors()}},t.prototype.validateElementCore=function(e){if(this.isValueChangingInternally&&!this.hasInputInChangedQuestions()||this.isBuildingPanelsFirstTime)return!0;var i=!0,n=this.changingValueQuestions;if(Array.isArray(n)){var o=!0;n.forEach(function(s){o=s.validateElement(e)&&o}),i=!this.hasKeysDuplicated(e)&&o,this.updatePanelsContainsErrors()}else i=this.validateInPanels(e);return r.prototype.validateElementCore.call(this,e)&&i},t.prototype.hasInputInChangedQuestions=function(){var e=this.changingValueQuestions;if(!Array.isArray(e)||e.length===0)return!1;for(var i=0;i<e.length;i++)if(e[i].hasInput)return!0;return!1},t.prototype.getContainsErrors=function(){var e=r.prototype.getContainsErrors.call(this);if(e)return e;for(var i=this.panelsCore,n=0;n<i.length;n++)if(i[n].containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!r.prototype.getIsAnswered.call(this))return!1;for(var e=this.visiblePanelsCore,i=0;i<e.length;i++){var n=[];e[i].addQuestionsToList(n,!0);for(var o=0;o<n.length;o++)if(!n[o].isAnswered)return!1}return!0},t.prototype.clearValueOnHidding=function(e){if(!e){if(this.survey&&this.survey.getQuestionClearIfInvisible("onHidden")==="none")return;this.clearValueInPanelsIfInvisible("onHiddenContainer")}r.prototype.clearValueOnHidding.call(this,e)},t.prototype.clearValueIfInvisible=function(e){e===void 0&&(e="onHidden");var i=e==="onHidden"?"onHiddenContainer":e;this.clearValueInPanelsIfInvisible(i),r.prototype.clearValueIfInvisible.call(this,e)},t.prototype.clearValueInPanelsIfInvisible=function(e){for(var i=0;i<this.panelsCore.length;i++){var n=this.panelsCore[i],o=n.questions;this.isSetPanelItemData={};for(var s=0;s<o.length;s++){var a=o[s];a.visible&&!n.isVisible||(a.clearValueIfInvisible(e),this.isSetPanelItemData[a.getValueName()]=this.maxCheckCount+1)}}this.isSetPanelItemData={}},t.prototype.getIsRunningValidators=function(){if(r.prototype.getIsRunningValidators.call(this))return!0;for(var e=0;e<this.panelsCore.length;e++)for(var i=this.panelsCore[e].questions,n=0;n<i.length;n++)if(i[n].isRunningValidators)return!0;return!1},t.prototype.getAllErrors=function(){for(var e=r.prototype.getAllErrors.call(this),i=this.visiblePanelsCore,n=0;n<i.length;n++)for(var o=i[n].questions,s=0;s<o.length;s++){var a=o[s].getAllErrors();a&&a.length>0&&(e=e.concat(a))}return e},t.prototype.getValueGetterContext=function(){return new pu(this)},t.prototype.getDisplayValueCore=function(e,i){var n=this.getUnbindValue(i);if(!n||!Array.isArray(n))return n;for(var o=0;o<this.panelsCore.length&&o<n.length;o++){var s=n[o];s&&(n[o]=this.getPanelDisplayValue(o,s,e))}return n},t.prototype.getPanelDisplayValue=function(e,i,n){if(!i)return i;for(var o=this.panelsCore[e],s=Object.keys(i),a=0;a<s.length;a++){var l=s[a],u=o.getQuestionByValueName(l);if(u||(u=this.getSharedQuestionFromArray(l,e)),u){var f=u.getDisplayValue(n,i[l]);i[l]=f,n&&u.title&&u.title!==l&&(i[u.title]=f,delete i[l])}}return i},t.prototype.validateInPanels=function(e){for(var i=!0,n=this.visiblePanels,o=[],s=0;s<n.length;s++){var a=n[s].validateElement(e);a=!this.isValueDuplicated(n[s],o,e)&&a,!this.isRenderModeList&&!a&&i&&e.focusOnFirstError&&(this.currentIndex=s),i=a&&i}return i},t.prototype.isValueDuplicated=function(e,i,n){if(!this.keyName)return!1;var o=e.getQuestionByValueName(this.keyName);if(!o||o.isEmpty())return!1;var s=o.value,a=this.changingValueQuestions;Array.isArray(a)&&a.indexOf(o)<0&&o.validateElement(n);for(var l=0;l<i.length;l++)if(s==i[l])return n.fireCallback&&o.addError(new Nr(this.keyDuplicationError,this)),n.setErrorElement(o),!0;return i.push(s),!1},t.prototype.getPanelActions=function(e){var i=this,n=e.footerActions;return this.removePanelButtonLocation!=="right"&&n.push(new G({id:"remove-panel-".concat(e.id),component:"sv-paneldynamic-remove-btn",visible:new $(function(){return[i.canRenderRemovePanel(e,"bottom")].every(function(o){return o===!0})}),data:{question:this,panel:e}})),this.survey&&(n=this.survey.getUpdatedPanelFooterActions(e,n,this)),n},t.prototype.canRenderRemovePanelOnRight=function(e){return this.canRenderRemovePanel(e,"right")},t.prototype.canRenderRemovePanel=function(e,i){var n=this.canRemovePanel,o=e.state!=="collapsed";return this.removePanelButtonLocation===i&&n&&o},t.prototype.createNewPanel=function(){var e=this,i=this.createAndSetupNewPanelObject(),n=this.template.toJSON();return new le().toObject(n,i),i.renderWidth="100%",i.updateCustomWidgets(),i.questions.forEach(function(o){return o.setParentQuestion(e)}),new ai(this,i),i.onGetFooterActionsCallback=function(){return e.getPanelActions(i)},i.onGetFooterToolbarCssCallback=function(){return e.cssClasses.panelFooter},i.registerPropertyChangedHandlers(["visible"],function(){i.visible?e.onPanelAdded(i):e.onPanelRemoved(i),e.updateFooterActions()}),i},t.prototype.createAndSetupNewPanelObject=function(){var e=this,i=this.createNewPanelObject();return i.isInteractiveDesignElement=!1,i.setParentQuestion(this),i.onGetQuestionTitleLocation=function(){return e.getTemplateQuestionTitleLocation()},i.onGetQuestionTitleWidth=function(){return e.templateQuestionTitleWidth},i.recursiveNoCallback=function(){return e.recursiveNoCallback()},i},t.prototype.getTemplateQuestionTitleLocation=function(){return this.templateQuestionTitleLocation!="default"?this.templateQuestionTitleLocation:this.getParentTitleLocation()},t.prototype.getChildErrorLocation=function(e){return this.templateErrorLocation!=="default"?this.templateErrorLocation:r.prototype.getChildErrorLocation.call(this,e)},t.prototype.createNewPanelObject=function(){return V.createClass("panel")},t.prototype.setPanelCountBasedOnValue=function(){if(!(this.isValueChangingInternally||this.useTemplatePanel)){var e=this.value,i=e&&Array.isArray(e)?e.length:0;i==0&&this.getPropertyValue("panelCount")>0&&(i=this.getPropertyValue("panelCount")),this.settingPanelCountBasedOnValue=!0,this.panelCount=i,this.settingPanelCountBasedOnValue=!1}},t.prototype.setQuestionValue=function(e){if(!this.settingPanelCountBasedOnValue){r.prototype.setQuestionValue.call(this,e,!1),this.setPanelCountBasedOnValue();for(var i=0;i<this.panelsCore.length;i++)this.panelUpdateValueFromSurvey(this.panelsCore[i]);this.updateIsAnswered()}},t.prototype.onSurveyValueChanged=function(e){if(!(e===void 0&&this.isAllPanelsEmpty())){r.prototype.onSurveyValueChanged.call(this,e);for(var i=0;i<this.panelsCore.length;i++)this.panelSurveyValueChanged(this.panelsCore[i]);e===void 0&&this.setValueBasedOnPanelCount(),this.updateIsReady()}},t.prototype.isAllPanelsEmpty=function(){for(var e=0;e<this.panelsCore.length;e++)if(!w.isValueEmpty(this.panelsCore[e].getValue()))return!1;return!0},t.prototype.panelUpdateValueFromSurvey=function(e){for(var i=e.questions,n=this.getPanelItemData(e.data),o=0;o<i.length;o++){var s=i[o];s.updateValueFromSurvey(n[s.getValueName()]),s.updateCommentFromSurvey(n[s.getValueName()+C.commentSuffix]),s.initDataUI()}},t.prototype.panelSurveyValueChanged=function(e){for(var i=e.questions,n=this.getPanelItemData(e.data),o=0;o<i.length;o++){var s=i[o];s.onSurveyValueChanged(n[s.getValueName()])}},t.prototype.onSetData=function(){r.prototype.onSetData.call(this),!this.isLoadingFromJson&&this.useTemplatePanel&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.getValueChangingOptions=function(e){for(var i=e.parent;i.parent;)i=i.parent;var n=i,o=this.panels.indexOf(n);return{question:this,panel:n,name:e.name,panelIndex:o,panelData:this.getPanelItemDataByIndex(o),oldValue:e.value}},t.prototype.getItemIndex=function(e){var i=this.items.indexOf(e);return i>-1?i:this.items.length},t.prototype.getVisibleItemIndex=function(e){for(var i=this.visiblePanelsCore,n=0;n<i.length;n++)if(i[n].data===e)return n;return i.length},t.prototype.getPanelItemData=function(e){return this.getPanelItemDataByIndex(this.items.indexOf(e))},t.prototype.getPanelItemDataByIndex=function(e){var i=this.items,n=this.value;return e<0&&Array.isArray(n)&&n.length>i.length&&(e=i.length),e<0?{}:!n||!Array.isArray(n)||n.length<=e?{}:n[e]},t.prototype.setPanelItemData=function(e,i,n){if(e!==this.template.data&&!(this.isSetPanelItemData[i]>this.maxCheckCount)){this.isSetPanelItemData[i]||(this.isSetPanelItemData[i]=0),this.isSetPanelItemData[i]++;var o=this.items,s=o.indexOf(e);s<0&&(s=o.length);var a=this.getUnbindValue(this.value);(!a||!Array.isArray(a))&&(a=[]);for(var l=Math.max(s+1,o.length),u=a.length;u<l;u++)a.push({});if(a[s]||(a[s]={}),this.isValueEmpty(n)?delete a[s][i]:a[s][i]=n,s>=0&&s<this.panelsCore.length){Array.isArray(this.changingValueQuestions)||(this.changingValueQuestions=[]);var f=this.panelsCore[s].getQuestionByValueName(i);f&&this.changingValueQuestions.push(f)}this.value=a,this.changingValueQuestions=null,this.isSetPanelItemData[i]--,this.isSetPanelItemData[i]-1&&delete this.isSetPanelItemData[i]}},t.prototype.getRootData=function(){return this.data},t.prototype.getPlainData=function(e){var i=this;e===void 0&&(e={includeEmpty:!0});var n=r.prototype.getPlainData.call(this,e);if(n){n.isNode=!0;var o=Array.isArray(n.data)?[].concat(n.data):[];n.data=this.panels.map(function(s,a){var l={name:s.name||a,title:s.title||"Panel",value:s.getValue(),displayValue:s.getValue(),getString:function(u){return i.getValueAsString(u)},isNode:!0,data:s.questions.map(function(u){return u.getPlainData(e)}).filter(function(u){return!!u})};return(e.calculations||[]).forEach(function(u){l[u.propertyName]=s[u.propertyName]}),l}),n.data=n.data.concat(o)}return n},t.prototype.updateElementCss=function(e){r.prototype.updateElementCss.call(this,e);for(var i=0;i<this.panelsCore.length;i++){var n=this.panelsCore[i];n.updateElementCss(e)}},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.visiblePanelCount;return this.getLocalizationFormatString("panelDynamicProgressText",this.currentIndex+1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return(this.currentIndex+1)/this.visiblePanelCount*100+"%"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return te("progressbar",this.getLocale())},enumerable:!1,configurable:!0}),t.prototype.getRootCss=function(){return new I().append(r.prototype.getRootCss.call(this)).append(this.cssClasses.empty,this.getShowNoEntriesPlaceholder()).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){var e=this.isRenderModeTab&&!!this.visiblePanelCount;return new I().append(r.prototype.getCssHeader.call(this,this.cssClasses)).append(this.cssClasses.headerTab,this.hasTitleOnTop&&e).toString()},enumerable:!1,configurable:!0}),t.prototype.getTabsContainerCss=function(){return new I().append(this.cssClasses.tabsContainer).append(this.cssClasses.tabsContainerWithHeader,this.hasTitleOnTop).toString()},t.prototype.getPanelWrapperCss=function(e){return new I().append(this.cssClasses.panelWrapper,!e||e.visible).append(this.cssClasses.panelWrapperList,this.isRenderModeList).append(this.cssClasses.panelWrapperInRow,this.removePanelButtonLocation==="right").toString()},t.prototype.getPanelRemoveButtonCss=function(){return new I().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).append(this.cssClasses.buttonRemoveRight,this.removePanelButtonLocation==="right").toString()},t.prototype.getAddButtonCss=function(){return new I().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.buttonAdd+"--list-mode",this.displayMode==="list").toString()},t.prototype.getPrevButtonCss=function(){return new I().append(this.cssClasses.buttonPrev).append(this.cssClasses.buttonPrevDisabled,!this.isPrevButtonVisible).toString()},t.prototype.getNextButtonCss=function(){return new I().append(this.cssClasses.buttonNext).append(this.cssClasses.buttonNextDisabled,!this.isNextButtonVisible).toString()},Object.defineProperty(t.prototype,"noEntriesText",{get:function(){return this.getLocStringText(this.locNoEntriesText)},set:function(e){this.setLocStringText(this.locNoEntriesText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoEntriesText",{get:function(){return this.getOrCreateLocStr("noEntriesText",!1,this.getNoEntriesLocalizationName())},enumerable:!1,configurable:!0}),t.prototype.getShowNoEntriesPlaceholder=function(){return!!this.cssClasses.noEntriesPlaceholder&&!this.isDesignMode&&this.visiblePanelCount===0},t.prototype.needResponsiveWidth=function(){for(var e=this.getPanels(),i=0;i<e.length;i++){var n=e[i];if(n.isVisible&&n.needResponsiveWidth())return!0}return!1},Object.defineProperty(t.prototype,"hasTabbedMenu",{get:function(){return this.isRenderModeTab&&this.visiblePanels.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabbedMenu",{get:function(){return this.isRenderModeTab?(this.tabbedMenuValue||(this.tabbedMenuValue=new Ft,this.tabbedMenuValue.dotsItem.popupModel.showPointer=!1,this.tabbedMenuValue.dotsItem.popupModel.verticalPosition="bottom",this.tabbedMenuValue.dotsItem.popupModel.horizontalPosition="center",this.updateElementCss(!1)),this.tabbedMenuValue):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooterToolbar",{get:function(){return this.footerToolbar&&this._showFooterToolbar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.initFooterToolbar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.updateFooterActions=function(){this.updateFooterActionsCallback&&this.updateFooterActionsCallback()},t.prototype.initFooterToolbar=function(){var e=this;this.footerToolbarValue=this.createActionContainer();var i=[],n=new G({id:"sv-pd-prev-btn",title:this.prevPanelText,action:function(){e.goToPrevPanel()}}),o=new G({id:"sv-pd-next-btn",title:this.nextPanelText,action:function(){e.goToNextPanel()}}),s=new G({id:"sv-pd-add-btn",component:"sv-paneldynamic-add-btn",data:{question:this}}),a=new G({id:"sv-prev-btn-icon",component:"sv-paneldynamic-prev-btn",data:{question:this}}),l=new G({id:"sv-pd-progress-text",component:"sv-paneldynamic-progress-text",data:{question:this}}),u=new G({id:"sv-pd-next-btn-icon",component:"sv-paneldynamic-next-btn",data:{question:this}});i.push(n,o,s,a,l,u),this.updateFooterActionsCallback=function(){var f=e.legacyNavigation,y=e.isRenderModeList,b=e.isMobile,E=!f&&!y;n.visible=E&&e.currentIndex>0,o.visible=E&&e.currentIndex<e.visiblePanelCount-1,o.needSpace=b&&o.visible&&n.visible,s.visible=e.canAddPanel,s.needSpace=e.isMobile&&!o.visible&&n.visible,l.visible=!e.isRenderModeList&&!b,l.needSpace=!f&&!e.isMobile;var S=f&&!y;a.visible=S,u.visible=S,a.needSpace=S},this.updateFooterActionsCallback(),this.footerToolbarValue.setItems(i),this.footerToolbar.flushUpdates(),this._showFooterToolbar=new $(function(){var f;return(f=e.footerToolbarValue)===null||f===void 0?void 0:f.hasVisibleActions})},t.prototype.createTabByPanel=function(e,i){var n=this;if(this.isRenderModeTab){var o=new me(e,!0);o.onGetTextCallback=function(u){if(u||(u=n.locTabTitlePlaceholder.renderedHtml),!n.survey)return u;var f={title:u,panel:e,visiblePanelIndex:i};return n.survey.dynamicPanelGetTabTitle(n,f),f.title},o.sharedData=this.locTemplateTabTitle;var s=e.id,a=this.getPanelVisibleIndexById(s)===this.currentIndex,l=new hu({id:"".concat(this.id,"_tab_").concat(s),panelId:s,pressed:a,locTitle:o,disableHide:a,action:function(){n.currentIndex=n.getPanelVisibleIndexById(s)}});return l}},t.prototype.getTabbedMenuCss=function(e){var i=e??this.cssClasses;return new I().append(i.tabsRoot).append(i.tabsLeft,this.tabAlign==="left").append(i.tabsRight,this.tabAlign==="right").append(i.tabsCenter,this.tabAlign==="center").toString()},t.prototype.updateTabToolbarItemsPressedState=function(){if(this.isRenderModeTab&&!(this.currentIndex<0||this.currentIndex>=this.visiblePanelCount)){var e=this.visiblePanelsCore[this.currentIndex];this.tabbedMenu.actions.forEach(function(i){var n=i.panelId===e.id;i.pressed=n,i.disableHide=n})}},t.prototype.updateTabToolbar=function(){var e=this;if(this.isRenderModeTab){for(var i=[],n=this.visiblePanelsCore,o=function(l){s.visiblePanelsCore.forEach(function(u){return i.push(e.createTabByPanel(n[l],l))})},s=this,a=0;a<n.length;a++)o(a);this.tabbedMenu.setItems(i)}},t.prototype.addTabFromToolbar=function(e,i){if(this.isRenderModeTab){var n=this.createTabByPanel(e,i);this.tabbedMenu.actions.splice(i,0,n),this.updateTabToolbarItemsPressedState()}},t.prototype.removeTabFromToolbar=function(e){if(this.isRenderModeTab){var i=this.tabbedMenu.actions.find(function(n){return n.panelId==e.id});i&&(this.tabbedMenu.actions.splice(this.tabbedMenu.actions.indexOf(i),1),this.updateTabToolbarItemsPressedState())}},Object.defineProperty(t.prototype,"showNavigation",{get:function(){return this.isReadOnly&&this.visiblePanelCount==1?!1:this.visiblePanelCount>0&&!!this.cssClasses.footer},enumerable:!1,configurable:!0}),t.prototype.showSeparator=function(e){return this.isRenderModeList&&e<this.renderedPanels.length-1},t.prototype.calcCssClasses=function(e){var i=r.prototype.calcCssClasses.call(this,e),n=this.tabbedMenu;return n&&(n.containerCss=this.getTabbedMenuCss(i),n.cssClasses=i.tabs,n.dotsItem.cssClasses=i.tabs,n.dotsItem.popupModel.contentComponentData.model.cssClasses=e.list),i},t.prototype.onMobileChanged=function(){r.prototype.onMobileChanged.call(this),this.updateFooterActions()},t.maxCheckCount=3,c([p({localizable:{defaultStr:"panelDynamicTabTextFormat",markdown:!0}})],t.prototype,"templateTabTitle",void 0),c([p({localizable:{defaultStr:!0,markdown:!0}})],t.prototype,"tabTitlePlaceholder",void 0),c([re({})],t.prototype,"_renderedPanels",void 0),c([p()],t.prototype,"confirmDelete",void 0),c([p({defaultValue:""})],t.prototype,"keyName",void 0),c([p({localizable:{defaultStr:"confirmDelete"}})],t.prototype,"confirmDeleteText",void 0),c([p({localizable:{defaultStr:!0}})],t.prototype,"keyDuplicationError",void 0),c([p({localizable:{defaultStr:"pagePrevText"}})],t.prototype,"prevPanelText",void 0),c([p({localizable:{defaultStr:"pageNextText"}})],t.prototype,"nextPanelText",void 0),c([p({localizable:{defaultStr:"addPanel"}})],t.prototype,"addPanelText",void 0),c([p({localizable:{defaultStr:"removePanel"}})],t.prototype,"removePanelText",void 0),c([p()],t.prototype,"panelsState",void 0),c([p({onSetting:function(e){return e<0?0:e}})],t.prototype,"minPanelCount",void 0),c([p({onSetting:function(e){return e<=0?1:e<C.panel.maxPanelCount?e:C.panel.maxPanelCount}})],t.prototype,"maxPanelCount",void 0),c([p()],t.prototype,"allowAddPanel",void 0),c([p()],t.prototype,"newPanelPosition",void 0),c([p()],t.prototype,"allowRemovePanel",void 0),c([p()],t.prototype,"templateQuestionTitleLocation",void 0),c([p()],t.prototype,"templateQuestionTitleWidth",void 0),c([p()],t.prototype,"templateErrorLocation",void 0),c([p({onSetting:function(e){return e?(e=e.toLowerCase(),e==="onsurvey"?"default":e):"off"}})],t.prototype,"showQuestionNumbers",void 0),c([p()],t.prototype,"removePanelButtonLocation",void 0),c([p({onSet:function(e,i){i.fireCallback(i.renderModeChangedCallback),i.updatePanelView()}})],t.prototype,"displayMode",void 0),c([p({onSet:function(e,i){i.fireCallback(i.currentIndexChangedCallback)}})],t.prototype,"showProgressBar",void 0),c([p({onSet:function(e,i){}})],t.prototype,"progressBarLocation",void 0),c([p()],t.prototype,"tabAlign",void 0),c([p()],t.prototype,"defaultPanelValue",void 0),c([p()],t.prototype,"copyDefaultValueFromLastEntry",void 0),c([p({defaultValue:!1})],t.prototype,"_showFooterToolbar",void 0),c([p({defaultValue:!1,onSet:function(e,i){i.updateFooterActions()}})],t.prototype,"legacyNavigation",void 0),t})(ie);V.addClass("paneldynamic",[{name:"showCommentArea:switch",visible:!0},{name:"templateElements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateTabTitle",serializationProperty:"locTemplateTabTitle",visibleIf:function(r){return r.displayMode==="tab"}},{name:"tabTitlePlaceholder",serializationProperty:"locTabTitlePlaceholder",visibleIf:function(r){return r.displayMode==="tab"}},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"noEntriesText:text",serializationProperty:"locNoEntriesText"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"newPanelPosition",choices:["next","last"],default:"last"},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",defaultFunc:function(){return C.panel.maxPanelCount}},"defaultPanelValue:panelvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastPanel"},{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"],visibleIf:function(r){return r.displayMode==="list"}},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText",visibleIf:function(r){return r.confirmDelete}},{name:"addPanelText",alternativeName:"panelAddText",serializationProperty:"locAddPanelText",visibleIf:function(r){return r.allowAddPanel}},{name:"removePanelText",alternativeName:"panelRemoveText",serializationProperty:"locRemovePanelText",visibleIf:function(r){return r.allowRemovePanel}},{name:"prevPanelText",alternativeName:"panelPrevText",serializationProperty:"locPrevPanelText",visibleIf:function(r){return r.displayMode!=="list"}},{name:"nextPanelText",alternativeName:"panelNextText",serializationProperty:"locNextPanelText",visibleIf:function(r){return r.displayMode!=="list"}},{name:"showQuestionNumbers",default:"off",choices:["default","onpanel","recursive","off"]},{name:"questionStartIndex",visibleIf:function(r){var t=r.showQuestionNumbers;return t==="onpanel"||t==="recursive"}},{name:"renderMode",visible:!1,isSerializable:!1},{name:"displayMode",default:"list",choices:["list","carousel","tab"]},{name:"showProgressBar:boolean",alternativeName:"showRangeInProgress",default:!0,visibleIf:function(r){return r.displayMode==="carousel"}},{name:"progressBarLocation",default:"top",choices:["top","bottom","topBottom"],visibleIf:function(r){return r.showProgressBar&&r.displayMode==="carousel"}},{name:"tabAlign",default:"center",choices:["left","center","right"],visibleIf:function(r){return r.displayMode==="tab"}},{name:"templateQuestionTitleLocation",alternativeName:"templateTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"templateQuestionTitleWidth",visibleIf:function(r){return!!r&&r.template.availableQuestionTitleWidth()}},{name:"templateErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"templateVisibleIf:expression"},{name:"removePanelButtonLocation",alternativeName:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"],visibleIf:function(r){return r.allowRemovePanel}}],function(){return new Rn("")},"question"),K.Instance.registerQuestion("paneldynamic",function(r){return new Rn(r)});var du=(function(){function r(){}return r.getProgressTextInBarCss=function(t){return new I().append(t.progressText).append(t.progressTextInBar).toString()},r.getProgressTextUnderBarCss=function(t){return new I().append(t.progressText).append(t.progressTextUnderBar).toString()},r})(),Ko=(function(r){P(t,r);function t(){return r.call(this)||this}return Object.defineProperty(t,"operators",{get:function(){return t.operatorsValue!=null||(t.operatorsValue={empty:function(e,i){return!e},notempty:function(e,i){return!!e},equal:function(e,i){return e==i},notequal:function(e,i){return e!=i},contains:function(e,i){return e&&e.indexOf&&e.indexOf(i)>-1},notcontains:function(e,i){return!e||!e.indexOf||e.indexOf(i)==-1},greater:function(e,i){return e>i},less:function(e,i){return e<i},greaterorequal:function(e,i){return e>=i},lessorequal:function(e,i){return e<=i}}),t.operatorsValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.uniqueId},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"triggerbase"},t.prototype.toString=function(){var e=this.getType().replace("trigger",""),i=this.expression;return i&&(e+=", "+i),e},Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isGhost===!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.getPropertyValue("operator","equal")},set:function(e){e&&(e=e.toLowerCase(),t.operators[e]&&this.setPropertyValue("operator",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression",this.buildExpression())},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return!0},t.prototype.canBeExecutedOnComplete=function(){return!1},t.prototype.checkExpression=function(e){var i=this;if(this.isExecutingOnNextPage=e.isOnNextPage,this.isExecutingOnNavigation=e.isOnNavigation||e.isOnNextPage,!!this.canBeExecuted(e.isOnNextPage)&&!(e.isOnComplete&&!this.canBeExecutedOnComplete())){var n=Object.keys(e.keys);if(!(Array.isArray(n)&&!this.canBeExecuteOnKeysChange(n))){var o=e.properties||null;this.runExpressionByProperty("expression",o,function(s){i.triggerResult(s===!0,o)},function(s){return i.isCheckRequired(s,e.keys)})||this.isCheckRequired(null,e.keys)&&this.canSuccessOnEmptyExpression()&&this.triggerResult(!0,o)}}},t.prototype.canBeExecuteOnKeysChange=function(e){return!0},t.prototype.canSuccessOnEmptyExpression=function(){return!1},t.prototype.check=function(e){var i=t.operators[this.operator](e,this.value);i?this.onSuccess(null):this.onFailure()},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.triggerResult=function(e,i){e?(this.onSuccess(i),this.onSuccessExecuted()):this.onFailure()},t.prototype.onSuccess=function(e){},t.prototype.onFailure=function(){},t.prototype.onSuccessExecuted=function(){},t.prototype.buildExpression=function(){return!this.name||this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+de.toOperandString(this.value)},t.prototype.isCheckRequired=function(e,i){return i?e?.hasFunction()===!0?!0:new Re().isAnyKeyChanged(i,this.getUsedVariables(e)):!1},t.prototype.getUsedVariables=function(e){if(!e)return[];var i=e.getVariables();if(Array.isArray(i))for(var n=C.expressionVariables.unwrapPostfix,o=i.length-1;o>=0;o--){var s=i[o];s.endsWith(n)&&i.push(s.substring(0,s.length-n.length))}return i},Object.defineProperty(t.prototype,"isRequireValue",{get:function(){return this.operator!=="empty"&&this.operator!="notempty"},enumerable:!1,configurable:!0}),t.operatorsValue=null,c([p()],t.prototype,"value",void 0),c([p()],t.prototype,"name",void 0),t})(U),Ue=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.ownerValue=null,e}return Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},enumerable:!1,configurable:!0}),t.prototype.setOwner=function(e){this.ownerValue=e},t.prototype.getOwner=function(){return this.owner},t.prototype.getSurvey=function(e){return this.owner&&this.owner.getSurvey?this.owner.getSurvey():null},t.prototype.isRealExecution=function(){return!0},t.prototype.onSuccessExecuted=function(){this.owner&&this.isRealExecution()&&this.owner.triggerExecuted(this)},t})(Ko),Yo=(function(r){P(t,r);function t(){var e=r.call(this)||this;return e.pages=[],e.questions=[],e}return t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(e){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(this.owner)for(var i=this.owner.getObjects(this.pages,this.questions),n=0;n<i.length;n++)e(i[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t})(Ue),Xo=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isRealExecution=function(){return!C.triggers.executeCompleteOnValueChanged===this.isExecutingOnNavigation},t.prototype.onSuccess=function(e){this.owner&&(this.isRealExecution()?this.owner.setCompleted(this):this.owner.canBeCompleted(this,!0))},t.prototype.onFailure=function(){this.owner.canBeCompleted(this,!1)},t})(Ue),Zo=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.getType=function(){return"setvaluetrigger"},t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName},t.prototype.canBeExecuteOnKeysChange=function(e){return e.length===1&&e[0]===this.setToName?!1:r.prototype.canBeExecuteOnKeysChange.call(this,e)},t.prototype.onPropertyValueChanged=function(e,i,n){if(r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="setToName"){var o=this.getSurvey();o&&!o.isLoadingFromJson&&o.isDesignMode&&(this.setValue=void 0)}},t.prototype.onSuccess=function(e){!this.setToName||!this.owner||this.owner.setTriggerValue(this.setToName,w.getUnbindValue(this.setValue),this.isVariable)},c([p()],t.prototype,"setToName",void 0),c([p()],t.prototype,"setValue",void 0),c([p()],t.prototype,"isVariable",void 0),t})(Ue),es=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.getType=function(){return"skiptrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return this.canBeExecuted(!1)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return e===!C.triggers.executeSkipOnValueChanged},t.prototype.onSuccess=function(e){!this.gotoName||!this.owner||this.owner.focusQuestion(this.gotoName)},c([p()],t.prototype,"gotoName",void 0),t})(Ue),ts=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.getType=function(){return"runexpressiontrigger"},t.prototype.canBeExecuted=function(e){return!e},t.prototype.onSuccess=function(e){var i=this;this.owner&&this.runExpressionByProperty("runExpression",e,function(n){i.onCompleteRunExpression(n)})},t.prototype.onCompleteRunExpression=function(e){this.setToName&&e!==void 0&&this.owner.setTriggerValue(this.setToName,w.convertValToQuestionVal(e),!1)},c([p()],t.prototype,"setToName",void 0),c([p()],t.prototype,"runExpression",void 0),t})(Ue),is=(function(r){P(t,r);function t(){return r.call(this)||this}return t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName&&!!this.fromName},t.prototype.getType=function(){return"copyvaluetrigger"},t.prototype.canBeExecuteOnKeysChange=function(e){return e.length===1&&e[0]===this.setToName?!1:r.prototype.canBeExecuteOnKeysChange.call(this,e)},t.prototype.onSuccess=function(e){!this.setToName||!this.owner||this.owner.copyTriggerValue(this.setToName,this.fromName,this.copyDisplayValue)},t.prototype.canSuccessOnEmptyExpression=function(){return!0},t.prototype.getUsedVariables=function(e){var i=r.prototype.getUsedVariables.call(this,e);return i.length===0&&this.fromName&&i.push(this.fromName),i},c([p()],t.prototype,"setToName",void 0),c([p()],t.prototype,"fromName",void 0),c([p()],t.prototype,"copyDisplayValue",void 0),t})(Ue);V.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),V.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),V.addClass("visibletrigger",["pages:pages","questions:questions"],function(){return new Yo},"surveytrigger"),V.addClass("completetrigger",[],function(){return new Xo},"surveytrigger"),V.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(r){return!!r&&!!r.setToName}},{name:"isVariable:boolean",visible:!1}],function(){return new Zo},"surveytrigger"),V.addClass("copyvaluetrigger",[{name:"!fromName:questionvalue"},{name:"!setToName:questionvalue"},{name:"copyDisplayValue:boolean",visible:!1}],function(){return new is},"surveytrigger"),V.addClass("skiptrigger",[{name:"!gotoName:question"}],function(){return new es},"surveytrigger"),V.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],function(){return new ts},"surveytrigger");var ns=(function(r){P(t,r);function t(e,i){i===void 0&&(i=null);var n=r.call(this)||this;return n.closeOnCompleteTimeout=0,i?n.surveyValue=i:n.surveyValue=n.createSurvey(e),n.surveyValue.fitToContainer=!0,n.windowElement=D.createElement("div"),n.survey.onComplete.add(function(o,s){n.onSurveyComplete()}),n.width=new $(function(){return n.survey.width}),n.width=n.survey.width,n.updateCss(),n}return t.prototype.onPropertyValueChanged=function(e,i,n){if(r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="isShowing"){var o=this.showingChangedCallback;o&&o()}e==="isExpanded"&&(this.isFullScreen&&!n&&(this.isFullScreen=!1),this.onExpandedChanged()),e==="isFullScreen"&&(n&&!this.isExpanded&&(this.isExpanded=!0),this.setCssRoot())},t.prototype.getType=function(){return"popupsurvey"},Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isShowing=!0},t.prototype.hide=function(){this.isShowing=!1},t.prototype.toggleFullScreen=function(){this.isFullScreen=!this.isFullScreen},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return!this.isExpanded},enumerable:!1,configurable:!0}),t.prototype.onExpandedChanged=function(){this.expandedChangedCallback&&this.expandedChangedCallback(),this.updateCssButton()},Object.defineProperty(t.prototype,"title",{get:function(){return this.survey.title},set:function(e){this.survey.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locDescription},enumerable:!1,configurable:!0}),t.prototype.expand=function(){this.isExpanded=!0},t.prototype.collapse=function(){this.isExpanded=!1},t.prototype.changeExpandCollapse=function(){this.isExpanded=!this.isExpanded},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey.css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssButton",{get:function(){return this.getPropertyValue("cssButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRoot",{get:function(){var e=this.getPropertyValue("cssRoot","");return this.isCollapsed&&(e+=" "+this.getPropertyValue("cssRootCollapsedMod","")),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootCollapsedMod",{get:function(){return this.getPropertyValue("cssRootCollapsedMod")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootContent",{get:function(){return this.getPropertyValue("cssRootContent")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssBody",{get:function(){return this.getPropertyValue("cssBody","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderRoot",{get:function(){return this.getPropertyValue("cssHeaderRoot","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderTitleCollapsed",{get:function(){return this.getPropertyValue("cssHeaderTitleCollapsed","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderButtonsContainer",{get:function(){return this.getPropertyValue("cssHeaderButtonsContainer","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCollapseButton",{get:function(){return this.getPropertyValue("cssHeaderCollapseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCloseButton",{get:function(){return this.getPropertyValue("cssHeaderCloseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderFullScreenButton",{get:function(){return this.getPropertyValue("cssHeaderFullScreenButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width","60%");return e&&!isNaN(e)&&(e=e+"px"),e},enumerable:!1,configurable:!0}),t.prototype.updateCss=function(){if(!(!this.css||!this.css.window)){var e=this.css.window;this.setCssRoot(),this.setPropertyValue("cssRootCollapsedMod",e.rootCollapsedMod),this.setPropertyValue("cssRootContent",e.rootContent),this.setPropertyValue("cssBody",e.body);var i=e.header;i&&(this.setPropertyValue("cssHeaderRoot",i.root),this.setPropertyValue("cssHeaderTitleCollapsed",i.titleCollapsed),this.setPropertyValue("cssHeaderButtonsContainer",i.buttonsContainer),this.setPropertyValue("cssHeaderCollapseButton",i.collapseButton),this.setPropertyValue("cssHeaderCloseButton",i.closeButton),this.setPropertyValue("cssHeaderFullScreenButton",i.fullScreenButton),this.updateCssButton())}},t.prototype.setCssRoot=function(){var e=this.css.window;this.isFullScreen?this.setPropertyValue("cssRoot",e.root+" "+e.rootFullScreenMode):this.setPropertyValue("cssRoot",e.root)},t.prototype.updateCssButton=function(){var e=this.css.window?this.css.window.header:null;e&&this.setCssButton(this.isExpanded?e.buttonExpanded:e.buttonCollapsed)},t.prototype.setCssButton=function(e){e&&this.setPropertyValue("cssButton",e)},t.prototype.createSurvey=function(e){return new Me(e)},t.prototype.onSurveyComplete=function(){if(!(this.closeOnCompleteTimeout<0))if(this.closeOnCompleteTimeout==0)this.hide();else{var e=this,i=null,n=function(){e.hide(),clearInterval(i)};i=setInterval(n,this.closeOnCompleteTimeout*1e3)}},t.prototype.onScroll=function(){this.survey.onScroll()},c([p({defaultValue:!1})],t.prototype,"isShowing",void 0),c([p({defaultValue:!1})],t.prototype,"isFullScreen",void 0),c([p({defaultValue:!1})],t.prototype,"isExpanded",void 0),c([p({defaultValue:!1})],t.prototype,"allowClose",void 0),c([p({defaultValue:!1})],t.prototype,"allowFullScreen",void 0),c([p()],t.prototype,"width",void 0),t})(U),gu=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(ns),yu=(function(){function r(){this._lockScroll=!1}return r.prototype.setRootElement=function(t){var e=this;this._containerElementValue=t?.querySelector(".sv-scroll__scroller"),this._scrollbarElement=t?.querySelector(".sv-scroll__scrollbar"),this._scrollbarSizerElement=t?.querySelector(".sv-scroll__scrollbar-sizer"),this._containerBodyElement=t?.querySelector(".sv-scroll__container"),!(!t||!k.isAvailable())&&(this._containerBodyResizeObserver=new ResizeObserver(function(i){for(var n=0,o=i;n<o.length;n++){var s=o[n],a=s.contentBoxSize?s.contentBoxSize[0].blockSize:s.contentRect.width;e._scrollbarSizerElement.style.height=a+"px"}e.onInnerHeightChanged&&e.onInnerHeightChanged(e._containerBodyElement.clientHeight>e._containerElementValue.clientHeight)}),this._containerBodyResizeObserver.observe(this._containerBodyElement))},r.prototype.onScrollContainer=function(){this._lockScroll=!0,this._scrollbarElement.scrollTop=this._containerElementValue.scrollTop},r.prototype.onScrollScrollbar=function(){if(this._lockScroll){this._lockScroll=!1;return}this._containerElementValue.scrollTop=this._scrollbarElement.scrollTop},r.prototype.unsubscribeRootElement=function(){this._containerBodyResizeObserver&&(this._containerBodyResizeObserver.disconnect(),this._containerBodyResizeObserver=void 0)},r})(),rs=["input:not(:disabled):not([readonly]):not([type=hidden])","select:not(:disabled)","textarea:not(:disabled):not([readonly])",'button:not(:disabled):not([tabindex="-1"])','[tabindex]:not([tabindex^="-"])'].join(","),On=(function(r){P(t,r);function t(e){var i=r.call(this)||this;return i.popupSelector=".sv-popup",i.fixedPopupContainer=".sv-popup",i.containerSelector=".sv-popup__container",i.scrollingContentSelector=".sv-popup__scrolling-content",i.visibilityAnimation=new Ri(i,function(n){i._isVisible!==n&&(n?(i.updateBeforeShowing(),i.updateIsVisible(n)):(i.updateOnHiding(),i.updateIsVisible(n),i.updateAfterHiding(),i._isPositionSetValue=!1))},function(){return i._isVisible}),i.onVisibilityChanged=new se,i.onModelIsVisibleChangedCallback=function(){i.isVisible=i.model.isVisible},i._isPositionSetValue=!1,i.model=e,i.locale=i.model.locale,i}return t.prototype.updateIsVisible=function(e){this._isVisible=e,this.onVisibilityChanged.fire(this,{isVisible:e})},t.prototype.updateBeforeShowing=function(){this.model.onShow()},t.prototype.updateAfterHiding=function(){this.model.onHiding()},t.prototype.getLeaveOptions=function(){return{cssClass:"sv-popup--leave",onBeforeRunAnimation:function(e){e.setAttribute("inert","")},onAfterRunAnimation:function(e){return e.removeAttribute("inert")}}},t.prototype.getEnterOptions=function(){return{cssClass:"sv-popup--enter"}},t.prototype.getAnimatedElement=function(){return this.getAnimationContainer()},t.prototype.isAnimationEnabled=function(){return this.model.displayMode!=="overlay"&&C.animationEnabled},t.prototype.getRerenderEvent=function(){return this.onElementRerendered},t.prototype.getAnimationContainer=function(){var e;return(e=this.container)===null||e===void 0?void 0:e.querySelector(this.fixedPopupContainer)},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this.visibilityAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.containerElement||this.createdContainer},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locale?this.locale:r.prototype.getLocale.call(this)},t.prototype.hidePopup=function(){this.model.isVisible=!1},t.prototype.getStyleClass=function(){return new I().append(this.model.cssClass)},t.prototype.getShowFooter=function(){return this.isOverlay},t.prototype.getShowHeader=function(){return this.getShowCloseButton()},t.prototype.getShowCloseButton=function(){return!!this.model.showCloseButton},t.prototype.getPopupHeaderTemplate=function(){return this.model.showCloseButton?"popup-close-button":void 0},t.prototype.createFooterActionBar=function(){this.footerToolbarValue=new be},t.prototype.resetDimensionsAndPositionStyleProperties=function(){var e="";this.top=e,this.left=e,this.height=e,this.width=e,this.minWidth=e},t.prototype.onModelChanging=function(e){},t.prototype.setupModel=function(e){this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.onModelChanging(e),this._model=e,e.onVisibilityChanged.add(this.onModelIsVisibleChangedCallback),this.onModelIsVisibleChangedCallback()},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(e){this.setupModel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.model.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentName",{get:function(){return this.model.contentComponentName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentData",{get:function(){return this.model.contentComponentData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isModal",{get:function(){return this.model.isModal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContent",{get:function(){return this.model.isFocusedContent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContainer",{get:function(){return this.model.isFocusedContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.getShowFooter()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getShowHeader()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCloseButton",{get:function(){return this.getShowCloseButton()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupHeaderTemplate",{get:function(){return this.getPopupHeaderTemplate()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOverlay",{get:function(){return this.model.displayMode==="overlay"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleClass",{get:function(){return this.getStyleClass().toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelButtonText",{get:function(){return this.getLocalizationString("modalCancelButtonText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.createFooterActionBar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),t.prototype.onKeyDown=function(e){e.key==="Tab"||e.keyCode===9?this.trapFocus(e):(e.key==="Escape"||e.keyCode===27)&&this.hidePopup()},t.prototype.trapFocus=function(e){var i=this.container.querySelectorAll(rs),n=i[0],o=i[i.length-1],s=Rr();e.shiftKey?s===n&&(o.focus(),e.preventDefault()):s===o&&(n.focus(),e.preventDefault())},t.prototype.switchFocus=function(){this.isFocusedContent?this.focusFirstInput():this.isFocusedContainer&&this.focusContainer()},Object.defineProperty(t.prototype,"isPositionSet",{get:function(){return this._isPositionSetValue},enumerable:!1,configurable:!0}),t.prototype.updateOnShowing=function(){var e=Rr();this.prevActiveElement=e,this.isOverlay&&this.resetDimensionsAndPositionStyleProperties(),this.switchFocus(),this._isPositionSetValue=!0},t.prototype.updateOnHiding=function(){this.isFocusedContent&&this.prevActiveElement&&this.prevActiveElement.focus({preventScroll:!0})},t.prototype.focusContainer=function(){if(this.container){var e=this.container.querySelector(this.popupSelector);e?.focus()}},t.prototype.focusFirstInput=function(){var e=this;setTimeout(function(){if(e.container){var i=e.container.querySelector(e.model.focusFirstInputSelector||rs);i?i.focus():e.focusContainer()}},100)},t.prototype.clickClose=function(e){this.hidePopup(),e?.stopPropagation()},t.prototype.clickOutside=function(e){this.hidePopup(),e?.stopPropagation()},t.prototype.blur=function(e){this.model.onBlur()},t.prototype.cancel=function(){this.model.onCancel(),this.hidePopup()},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.createdContainer&&(this.createdContainer.remove(),this.createdContainer=void 0),this.footerToolbarValue&&this.footerToolbarValue.dispose(),this.resetComponentElement()},t.prototype.initializePopupContainer=function(){if(!this.container){var e=D.createElement("div");this.createdContainer=e,Vr(C.environment.popupMountContainer).appendChild(e)}},t.prototype.setComponentElement=function(e){e&&(this.containerElement=e)},t.prototype.resetComponentElement=function(){this.containerElement=void 0,this.prevActiveElement=void 0},t.prototype.preventScrollOuside=function(e,i){for(var n=e.target;n!==this.container;){if(D.getComputedStyle(n).overflowY==="auto"&&n.scrollHeight!==n.offsetHeight){var o=n.scrollHeight,s=n.scrollTop,a=n.clientHeight;if(!(i>0&&Math.abs(o-a-s)<1)&&!(i<0&&s<=0))return}n=n.parentElement}e.cancelable&&e.preventDefault()},c([p({defaultValue:"0px"})],t.prototype,"top",void 0),c([p({defaultValue:"0px"})],t.prototype,"left",void 0),c([p({defaultValue:"auto"})],t.prototype,"height",void 0),c([p({defaultValue:"auto"})],t.prototype,"width",void 0),c([p({defaultValue:"auto"})],t.prototype,"minWidth",void 0),c([p({defaultValue:!1})],t.prototype,"_isVisible",void 0),c([p()],t.prototype,"locale",void 0),t})(U),An=(function(){function r(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),r})(),We=(function(){function r(){}return r.calculatePosition=function(t,e,i,n,o,s){s===void 0&&(s="flex");var a=t.left,l=t.top;return s==="flex"&&(o=="center"?a=(t.left+t.right-i)/2:o=="left"?a=t.left-i:a=t.right),n=="middle"?l=(t.top+t.bottom-e)/2:n=="top"?l=t.top-e:l=t.bottom,o!="center"&&n!="middle"&&(n=="top"?l=l+t.height:l=l-t.height),{left:Math.round(a),top:Math.round(l)}},r.getCorrectedVerticalDimensions=function(t,e,i,n,o,s){o===void 0&&(o=!0),s===void 0&&(s={top:0,bottom:0});var a,l=i-r.bottomIndent;if(n==="top"&&(a={height:e,top:t}),t<-s.top)a={height:o?e+t:e,top:-s.top};else if(e+t>i){var u=Math.min(e,l-t);a={height:o?u:e,top:o?t:t-(e-u)}}return a&&(a.height=Math.min(a.height,l),a.top=Math.max(a.top,-s.top)),a},r.updateHorizontalDimensions=function(t,e,i,n,o,s){o===void 0&&(o="flex"),s===void 0&&(s={left:0,right:0}),e+=s.left+s.right;var a=void 0,l=t;return n==="center"&&(o==="fixed"?(t+e>i&&(a=i-t),l-=s.left):t<0?(l=s.left,a=Math.min(e,i)):e+t>i&&(l=i-e,l=Math.max(l,s.left),a=Math.min(e,i))),n==="left"&&t<0&&(l=s.left,a=Math.min(e,i)),n==="right"&&e+t>i&&(a=i-t),{width:a-s.left-s.right,left:l}},r.updateVerticalPosition=function(t,e,i,n,o){if(n==="middle")return n;var s=e-(t.top+(i!=="center"?t.height:0)),a=e+t.bottom-(i!=="center"?t.height:0)-o;return s>0&&a<=0&&n=="top"?n="bottom":a>0&&s<=0&&n=="bottom"?n="top":a>0&&s>0&&(n=s<a?"top":"bottom"),n},r.updateHorizontalPosition=function(t,e,i,n){if(i==="center")return i;var o=e-t.left,s=e+t.right-n;return o>0&&s<=0&&i=="left"?i="right":s>0&&o<=0&&i=="right"?i="left":s>0&&o>0&&(i=o<s?"left":"right"),i},r.calculatePopupDirection=function(t,e){var i;return e=="center"&&t!="middle"?i=t:e!="center"&&(i=e),i},r.calculatePointerTarget=function(t,e,i,n,o,s,a){s===void 0&&(s=0),a===void 0&&(a=0);var l={};return o!="center"?(l.top=t.top+t.height/2,l.left=t[o]):n!="middle"&&(l.top=t[n],l.left=t.left+t.width/2),l.left=Math.round(l.left-i),l.top=Math.round(l.top-e),o=="left"&&(l.left-=s+a),o==="center"&&(l.left-=s),l},r.bottomIndent=16,r})(),os=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.scrollEventCallBack=function(n){if(i.isOverlay&&m.IsTouch){n.stopPropagation(),n.preventDefault();return}i.hidePopup()},i.resizeEventCallback=function(){if(k.isAvailable()){var n=k.getVisualViewport(),o=D.getDocumentElement();o&&n&&o.style.setProperty("--sv-popup-overlay-height","".concat(n.height*n.scale,"px"))}},i.resizeWindowCallback=function(){i.isOverlay||i.updatePosition(!0,Me.platform==="vue"||Me.platform==="vue3"||Me.platform=="react"||Me.platform=="js-ui")},i.clientY=0,i.touchStartEventCallback=function(n){i.clientY=n.touches[0].clientY},i.touchMoveEventCallback=function(n){i.preventScrollOuside(n,i.clientY-n.changedTouches[0].clientY)},i.model.onRecalculatePosition.add(i.recalculatePositionHandler),i}return t.prototype.createFooterActionBar=function(){var e=this;r.prototype.createFooterActionBar.call(this),this.footerToolbar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode,item:"sd-action sv-menu-popup__button"},!1),this.footerToolbar.containerCss="sv-menu-footer-action-bar";var i=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:function(){e.cancel()}}];i=this.model.updateFooterActions(i),this.footerToolbarValue.setItems(i)},t.prototype.getAvailableAreaRect=function(){var e=this.model.getAreaCallback?this.model.getAreaCallback(this.container):void 0;if(e){var i=e.getBoundingClientRect();return new An(i.x,i.y,i.width,i.height)}return new An(0,0,k.getInnerWidth(),k.getInnerHeight())},t.prototype.getTargetElementRect=function(e){var i=this.container,n=this.model.getTargetCallback?this.model.getTargetCallback(i):void 0;if(i&&i.parentElement&&!this.isModal&&!n&&(n=i.parentElement),!n)return null;var o=n.getBoundingClientRect();return new An(o.left-e.left,o.top-e.top,o.width,o.height)},t.prototype._updatePosition=function(){var e,i,n,o=this.getAvailableAreaRect(),s=this.getTargetElementRect(o);if(s){var a=(e=this.container)===null||e===void 0?void 0:e.querySelector(this.containerSelector);if(a){var l=(i=this.container)===null||i===void 0?void 0:i.querySelector(this.fixedPopupContainer),u=a.querySelector(this.scrollingContentSelector),f=D.getComputedStyle(a),y=parseFloat(f.marginLeft)||0,b=parseFloat(f.marginRight)||0,E=parseFloat(f.marginTop)||0,S=parseFloat(f.marginBottom)||0,O=a.offsetHeight-u.offsetHeight+u.scrollHeight,R=a.getBoundingClientRect().width;this.model.setWidthByTarget&&(this.minWidth=s.width+"px");var A=this.model.verticalPosition,Q=this.getActualHorizontalPosition();if(k.isAvailable()){var ee=[O,k.getInnerHeight()*.9,(n=k.getVisualViewport())===null||n===void 0?void 0:n.height];O=Math.ceil(Math.min.apply(Math,ee.filter(function(kn){return typeof kn=="number"}))),A=We.updateVerticalPosition(s,O,this.model.horizontalPosition,this.model.verticalPosition,o.height),Q=We.updateHorizontalPosition(s,R,Q,o.width)}this.popupDirection=We.calculatePopupDirection(A,Q);var X=We.calculatePosition(s,O,R+y+b,A,Q,this.model.positionMode);if(k.isAvailable()){var we=We.getCorrectedVerticalDimensions(X.top,O,o.height,A,this.model.canShrink,{top:E,bottom:S});if(we&&(this.height=we.height+"px",X.top=we.top),this.model.setWidthByTarget)this.width=s.width+"px",X.left=s.left;else{var ve=We.updateHorizontalDimensions(X.left,R,k.getInnerWidth(),Q,this.model.positionMode,{left:y,right:b});ve&&(this.width=ve.width?ve.width+"px":void 0,X.left=ve.left)}}if(l){var nt=l.getBoundingClientRect();X.top-=nt.top,X.left-=nt.left}this.showHeader&&(this.pointerTarget=We.calculatePointerTarget(s,X.top,X.left,A,Q,y,b),this.pointerTarget.top+="px",this.pointerTarget.left+="px"),X.left+=o.left,X.top+=o.top,this.left=X.left+"px",this.top=X.top+"px"}}},t.prototype.getActualHorizontalPosition=function(){var e=this.model.horizontalPosition;if(D.isAvailable()){var i=D.getComputedStyle(D.getBody()).direction=="rtl";i&&(this.model.horizontalPosition==="left"?e="right":this.model.horizontalPosition==="right"&&(e="left"))}return e},t.prototype.getStyleClass=function(){var e=this.model.getDisplayMode();return r.prototype.getStyleClass.call(this).append("sv-popup--menu-phone",e==="menu-overlay").append("sv-popup--menu-tablet",e==="menu-popup-overlay").append("sv-popup--menu-popup",e==="menu-popup").append("sv-popup--show-pointer",e==="menu-popup"&&this.showHeader).append("sv-popup--".concat(this.popupDirection),e==="menu-popup"&&(this.showHeader||this.popupDirection=="top"||this.popupDirection=="bottom"))},t.prototype.getShowHeader=function(){return this.model.showPointer&&!this.isOverlay},t.prototype.getPopupHeaderTemplate=function(){return"popup-pointer"},t.prototype.setComponentElement=function(e){r.prototype.setComponentElement.call(this,e)},t.prototype.resetComponentElement=function(){r.prototype.resetComponentElement.call(this)},t.prototype.updateOnShowing=function(){var e=Qe(this.container);e&&(this.prevActiveElement=e.activeElement,this.isOverlay?this.resetDimensionsAndPositionStyleProperties():this.updatePosition(!0,!1),this.switchFocus(),k.addEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(k.getVisualViewport().addEventListener("resize",this.resizeEventCallback),this.container&&(this.container.addEventListener("touchstart",this.touchStartEventCallback),this.container.addEventListener("touchmove",this.touchMoveEventCallback)),this.resizeEventCallback()),k.addEventListener("scroll",this.scrollEventCallBack),this._isPositionSetValue=!0)},Object.defineProperty(t.prototype,"shouldCreateResizeCallback",{get:function(){return!!k.getVisualViewport()&&this.isOverlay},enumerable:!1,configurable:!0}),t.prototype.updatePosition=function(e,i){var n=this;i===void 0&&(i=!0),e&&(this.height="auto"),i?setTimeout(function(){n._updatePosition()},1):this._updatePosition()},t.prototype.updateOnHiding=function(){r.prototype.updateOnHiding.call(this),k.removeEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(k.getVisualViewport().removeEventListener("resize",this.resizeEventCallback),this.container&&(this.container.removeEventListener("touchstart",this.touchStartEventCallback),this.container.removeEventListener("touchmove",this.touchMoveEventCallback))),k.removeEventListener("scroll",this.scrollEventCallBack),this.isDisposed||(this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.minWidth=void 0)},t.prototype.onModelChanging=function(e){var i=this;this.model&&this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler||(this.recalculatePositionHandler=function(n,o){i.isOverlay||i.updatePosition(o.isResetHeight)}),r.prototype.onModelChanging.call(this,e),e.onRecalculatePosition.add(this.recalculatePositionHandler)},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.updateOnHiding(),this.model&&(this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler=void 0),this.resetComponentElement()},t.tabletSizeBreakpoint=600,c([p({defaultValue:"left"})],t.prototype,"popupDirection",void 0),c([p({defaultValue:{left:"0px",top:"0px"}})],t.prototype,"pointerTarget",void 0),t})(On),Dn=(function(r){P(t,r);function t(e){var i=r.call(this,e)||this;return i.onScrollOutsideCallback=function(n){i.preventScrollOuside(n,n.deltaY)},i}return t.prototype.getStyleClass=function(){var e=this.model.getDisplayMode();return r.prototype.getStyleClass.call(this).append("sv-popup--modal-popup",e==="modal-popup").append("sv-popup--modal-overlay",e==="modal-overlay")},t.prototype.getShowFooter=function(){return!0},t.prototype.createFooterActionBar=function(){var e=this;r.prototype.createFooterActionBar.call(this),this.footerToolbar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode,item:"sv-popup__body-footer-item sv-popup__button sv-modal-popup__button sd-btn sd-btn--small"},!1),this.footerToolbar.containerCss="sv-modal-footer-action-bar";var i=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:function(){e.cancel()}},{id:"apply",visibleIndex:20,title:this.applyButtonText,innerCss:"sv-popup__button--apply sd-btn--action",action:function(){e.apply()}}];i=this.model.updateFooterActions(i),this.footerToolbarValue.setItems(i)},Object.defineProperty(t.prototype,"applyButtonText",{get:function(){return this.getLocalizationString("modalApplyButtonText")},enumerable:!1,configurable:!0}),t.prototype.apply=function(){this.model.onApply&&!this.model.onApply()||this.hidePopup()},t.prototype.clickOutside=function(){},t.prototype.onKeyDown=function(e){(e.key==="Escape"||e.keyCode===27)&&this.model.onCancel(),r.prototype.onKeyDown.call(this,e)},t.prototype.updateOnShowing=function(){this.container&&this.container.addEventListener("wheel",this.onScrollOutsideCallback,{passive:!1}),r.prototype.updateOnShowing.call(this)},t.prototype.updateOnHiding=function(){this.container&&this.container.removeEventListener("wheel",this.onScrollOutsideCallback),r.prototype.updateOnHiding.call(this)},t})(On);function ss(r,t){var e,i=$e({},r);i.verticalPosition="top",i.horizontalPosition="left",i.showPointer=!1,i.isModal=!0,i.displayMode=r.displayMode||"popup";var n=new pt(r.componentName,r.data,i);n.isFocusedContent=(e=r.isFocusedContent)!==null&&e!==void 0?e:!0,n.showCloseButton=!!r.showCloseButton;var o=new Dn(n);if(t&&t.appendChild){var s=D.createElement("div");t.appendChild(s),o.setComponentElement(s)}o.container||o.initializePopupContainer();var a=function(l,u){u.isVisible||s&&o.resetComponentElement(),o.onVisibilityChanged.remove(a)};return o.onVisibilityChanged.add(a),o}function mu(r){return r.isModal?new Dn(r):new os(r)}var vu=(function(){function r(){this.modals=[]}return r.prototype.onModalsChanged=function(t,e){t===void 0&&(t=[]),e===void 0&&(e=[]),this.onModalsChangedCallback&&this.onModalsChangedCallback(this.modals,t,e)},r.prototype.addModal=function(t){var e=this,i=function(n,o){if(!o.isVisible){var s=e.modals.indexOf(t);s>=0&&e.modals.splice(s,1),t.onVisibilityChanged.remove(i),e.onModalsChanged(void 0,[t]),t.dispose()}};t.onVisibilityChanged.add(i),this.modals.push(t),this.onModalsChanged([t]),t.model.isVisible=!0},r.prototype.addDialog=function(t,e){var i=ss(t,e);return this.addModal(i),i},r.prototype.getModals=function(){return this.modals},r.prototype.clear=function(){var t=this.modals;this.modals=[],this.onModalsChanged(void 0,t);for(var e=0,i=t;e<i.length;e++){var n=i[e];n.dispose()}},r})(),as=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getBaseType=function(){return"buttongroupitemvalue"},c([p()],t.prototype,"iconName",void 0),c([p()],t.prototype,"iconSize",void 0),c([p()],t.prototype,"showCaption",void 0),t})(Ct),ls=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._allowClear=!0,e}return t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n);var o=["value","renderAs","placeholder","choices","visibleChoices"];o.indexOf(e)>-1&&this.resetReadOnlyText()},t.prototype.locStrsChanged=function(){var e;r.prototype.locStrsChanged.call(this),this.resetReadOnlyText(),(e=this.dropdownListModelValue)===null||e===void 0||e.locStrsChanged()},t.prototype.getType=function(){return"buttongroup"},t.prototype.getItemValueType=function(){return"buttongroupitemvalue"},t.prototype.supportOther=function(){return!1},t.prototype.getControlClass=function(){return this.isEmpty(),new I().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getInputId=function(e){return this.inputId+"_"+e},Object.defineProperty(t.prototype,"allowClear",{get:function(){return this._allowClear},set:function(e){this._allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.locReadOnlyText.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){var e=this;return this.getOrCreateLocStr("readOnlyText",!0,!1,function(i){i.onGetTextCallback=function(){return e.displayValue||e.placeholder}})},enumerable:!1,configurable:!0}),t.prototype.resetReadOnlyText=function(){this.resetPropertyValue("readOnlyText")},Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e;return(e=this.selectedItem)===null||e===void 0?void 0:e.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.renderAs==="dropdown"&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),t.prototype.onBlurCore=function(e){var i;(i=this.dropdownListModel)===null||i===void 0||i.onBlur(e),r.prototype.onBlurCore.call(this,e)},t.prototype.updateCssClasses=function(e,i){r.prototype.updateCssClasses.call(this,e,i),qt(e,i)},t.prototype.calcCssClasses=function(e){var i=r.prototype.calcCssClasses.call(this,e);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(i.popup,i.list),i},t.prototype.needResponsiveWidth=function(){return!0},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getCompactRenderAs=function(){return"dropdown"},t.prototype.getObservedElementSelector=function(){return".sd-button-group-scrollable-container"},t.prototype.onBeforeSetCompactRenderer=function(){!this.isDisposed&&!this.dropdownListModelValue&&(this.dropdownListModelValue=new Pt(this))},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},c([p({localizable:{defaultStr:"buttongroupOptionsCaption"}})],t.prototype,"placeholder",void 0),c([p({defaultValue:!1})],t.prototype,"inputHasValue",void 0),t})(wt);V.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],function(){return new ls("")},"checkboxbase"),V.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],function(r){return new as(r)},"choiceitem");var bu=(function(){function r(t,e,i){this.question=t,this.item=e,this.index=i}return Object.defineProperty(r.prototype,"value",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"iconName",{get:function(){return this.item.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"iconSize",{get:function(){return this.item.iconSize||24},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"caption",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showCaption",{get:function(){return this.item.showCaption||this.item.showCaption===void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRequired",{get:function(){return this.question.isRequired},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.question.isItemSelected(this.item)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"readOnly",{get:function(){return this.question.isInputReadOnly||!this.item.isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.question.name+"_"+this.question.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this.question.inputId+"_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasErrors",{get:function(){return this.question.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"describedBy",{get:function(){return this.question.errors.length>0?this.question.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelClass",{get:function(){return new I().append(this.question.cssClasses.item).append(this.question.cssClasses.itemSelected,this.selected).append(this.question.cssClasses.itemHover,!this.readOnly&&!this.selected).append(this.question.cssClasses.itemDisabled,this.question.isReadOnly||!this.item.isEnabled).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"css",{get:function(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}},enumerable:!1,configurable:!0}),r.prototype.onChange=function(){this.question.selectItem(this.item)},r})(),li=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getSurvey=function(e){var i;return(i=this.owner)===null||i===void 0?void 0:i.getSurvey()},t.prototype.getType=function(){return"masksettings"},t.prototype.setData=function(e){var i=this,n=V.getProperties(this.getType());n.forEach(function(o){var s=e[o.name];i[o.name]=s!==void 0?s:o.getDefaultValue(i)})},t.prototype.getData=function(){var e=this,i={},n=V.getProperties(this.getType());return n.forEach(function(o){var s=e[o.name];o.isDefaultValue(s)||(i[o.name]=s)}),i},t.prototype.processInput=function(e){return{value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1}},t.prototype.getUnmaskedValue=function(e){return e},t.prototype.getMaskedValue=function(e){return e},t.prototype.getTextAlignment=function(){return"auto"},t.prototype.getTypeForExpressions=function(){return"text"},c([p()],t.prototype,"saveMaskedValue",void 0),t})(U);V.addClass("masksettings",[{name:"saveMaskedValue:boolean",visibleIf:function(r){return r?r.getType()!=="masksettings":!1}}],function(){return new li});function Ln(r){for(var t=[],e=!1,i=Object.keys(C.maskSettings.patternDefinitions),n=0;n<r.length;n++){var o=r[n];o===C.maskSettings.patternEscapeChar?e=!0:e?(e=!1,t.push({type:"fixed",value:o})):t.push({type:i.indexOf(o)!==-1?"regex":"const",value:o})}return t}function Cu(r,t,e){for(var i=C.maskSettings.patternDefinitions[e.value];t<r.length;){if(r[t].match(i))return t;t++}return t}function wu(r,t,e){for(var i=r??"",n="",o=0,s=typeof t=="string"?Ln(t):t,a=0;a<s.length;a++)switch(s[a].type){case"regex":if(o<i.length&&(o=Cu(i,o,s[a])),o<i.length)n+=i[o];else if(e)n+=C.maskSettings.patternPlaceholderChar;else return n;o++;break;case"const":case"fixed":n+=s[a].value,s[a].value===i[o]&&o++;break}return n}function Mn(r,t,e,i){i===void 0&&(i=!1);var n="";if(!r)return n;for(var o=typeof t=="string"?Ln(t):t,s=0;s<o.length;s++)if(o[s].type==="fixed"&&!i&&(n+=o[s].value),o[s].type==="regex"){var a=C.maskSettings.patternDefinitions[o[s].value];if(r[s]&&r[s].match(a))n+=r[s];else if(e){n="";break}else break}return n}var Fn=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.literals=[],e}return t.prototype.updateLiterals=function(){this.literals=Ln(this.pattern||"")},t.prototype.onPropertyValueChanged=function(e,i,n){r.prototype.onPropertyValueChanged.call(this,e,i,n),e==="pattern"&&this.updateLiterals()},t.prototype.getType=function(){return"patternmask"},t.prototype.fromJSON=function(e,i){r.prototype.fromJSON.call(this,e,i),this.updateLiterals()},t.prototype._getMaskedValue=function(e,i){i===void 0&&(i=!1);var n=e??"";return wu(n,this.literals,i)},t.prototype._getUnmaskedValue=function(e,i){i===void 0&&(i=!1);var n=e??"";return Mn(n,this.literals,i)},t.prototype.processInput=function(e){var i={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1};if(!e.insertedChars&&e.selectionStart===e.selectionEnd)return i;var n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=Mn(e.prevValue.slice(0,e.selectionStart),this.literals.slice(0,e.selectionStart),!1),s=Mn(e.prevValue.slice(e.selectionEnd),this.literals.slice(e.selectionEnd),!1,!0);return i.value=this._getMaskedValue(o+(e.insertedChars||"")+s,!0),!e.insertedChars&&e.inputDirection==="backward"?i.caretPosition=e.selectionStart:i.caretPosition=this._getMaskedValue(n).length,i},t.prototype.getMaskedValue=function(e){return this._getMaskedValue(e,!0)},t.prototype.getUnmaskedValue=function(e){return this._getUnmaskedValue(e,!0)},c([p()],t.prototype,"pattern",void 0),t})(li);V.addClass("patternmask",[{name:"pattern"}],function(){return new Fn},"masksettings");function Pu(r,t,e){t===void 0&&(t=!0),e===void 0&&(e=3);var i=[];if(t){for(var n=r.length-e;n>-e;n-=e)i.push(r.substring(n,n+e));i=i.reverse()}else for(var n=0;n<r.length;n+=e)i.push(r.substring(n,n+e));return i}var Nn=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.calccaretPosition=function(e,i,n){for(var o=e?this.displayNumber(this.parseNumber(e),!1).length:0,s=0,a=i.selectionStart,l=!i.insertedChars&&i.inputDirection==="forward",u=0;u<n.length;u++){var f=n[u];if(f!==this.thousandsSeparator&&s++,s===o+(l?1:0)){l?a=u:a=u+1;break}}return a},t.prototype.numericalCompositionIsEmpty=function(e){return!e.integralPart&&!e.fractionalPart},t.prototype.displayNumber=function(e,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var o=e.integralPart;i&&o&&(o=Pu(o).join(this.thousandsSeparator));var s=e.fractionalPart,a=e.isNegative?"-":"";if(s===""){if(n)return!o||o==="0"?o:a+o;var l=e.hasDecimalSeparator&&!n?this.decimalSeparator:"",u=o+l;return u==="0"?u:a+u}else return o=o||"0",s=s.substring(0,this.precision),[a+o,s].join(this.decimalSeparator)},t.prototype.convertNumber=function(e){var i,n=e.isNegative?"-":"";return e.fractionalPart?i=parseFloat(n+(e.integralPart||"0")+"."+e.fractionalPart.substring(0,this.precision)):i=parseInt(n+e.integralPart||"0"),i},t.prototype.validateNumber=function(e,i){var n=this.min||Number.MIN_SAFE_INTEGER,o=this.max||Number.MAX_SAFE_INTEGER;if(this.numericalCompositionIsEmpty(e))return!0;if(this.min!==void 0||this.max!==void 0){var s=this.convertNumber(e);if(Number.isNaN(s)||s>=n&&s<=o)return!0;if(!i){if(!e.hasDecimalSeparator&&s!=0){var a=s,l=s;if(s>0){if(s+1>n&&s<=o)return!0;for(;a=a*10+9,l=l*10,!(l>o);)if(a>n)return!0;return!1}if(s<0){if(s>=n&&s-1<o)return!0;for(;a=a*10,l=l*10-9,!(a<n);)if(l<o)return!0;return!1}}else{var u=Math.pow(.1,(e.fractionalPart||"").length);if(s>=0)return s+u>n&&s<=o;if(s<0)return s>=n&&s-u<o}return s>=0&&s<=o||s<0&&s>=n}return!1}return!0},t.prototype.parseNumber=function(e){for(var i={integralPart:"",fractionalPart:"",hasDecimalSeparator:!1,isNegative:!1},n=e==null?"":e.toString(),o=0,s=0;s<n.length;s++){var a=n[s];switch(a){case"-":{this.allowNegativeValues&&(this.min===void 0||this.min<0)&&o++;break}case this.decimalSeparator:{this.precision>0&&(i.hasDecimalSeparator=!0);break}case this.thousandsSeparator:break;default:a.match(cn)&&(i.hasDecimalSeparator?i.fractionalPart+=a:i.integralPart+=a)}}return i.isNegative=o%2!==0,i.integralPart.length>1&&i.integralPart[0]==="0"&&(i.integralPart=i.integralPart.slice(1)),i},t.prototype.getNumberMaskedValue=function(e,i){i===void 0&&(i=!1);var n=this.parseNumber(e);if(!this.validateNumber(n,i))return null;var o=this.displayNumber(n,!0,i);return o},t.prototype.getNumberUnmaskedValue=function(e){var i=this.parseNumber(e);if(!this.numericalCompositionIsEmpty(i))return this.convertNumber(i)},t.prototype.getTextAlignment=function(){return"right"},t.prototype.getMaskedValue=function(e){var i=e==null?"":e.toString();return i=i.replace(".",this.decimalSeparator),this.getNumberMaskedValue(i,!0)},t.prototype.getUnmaskedValue=function(e){return this.getNumberUnmaskedValue(e)},t.prototype.processInput=function(e){var i={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=e.prevValue.slice(e.selectionEnd),s=n+o,a=this.parseNumber(s);if(!this.validateNumber(a,!1))return i;var l=this.getNumberMaskedValue(s),u=this.calccaretPosition(n,e,l);return i.value=l,i.caretPosition=u,i},t.prototype.getType=function(){return"numericmask"},t.prototype.isValueUndefined=function(e){return e===""||r.prototype.isValueUndefined.call(this,e)},c([p()],t.prototype,"allowNegativeValues",void 0),c([p()],t.prototype,"decimalSeparator",void 0),c([p()],t.prototype,"precision",void 0),c([p()],t.prototype,"thousandsSeparator",void 0),c([p()],t.prototype,"min",void 0),c([p()],t.prototype,"max",void 0),t})(li);V.addClass("numericmask",[{name:"allowNegativeValues:boolean",default:!0},{name:"decimalSeparator",default:".",maxLength:1},{name:"thousandsSeparator",default:",",maxLength:1},{name:"precision:number",default:2,minValue:0},{name:"min:number"},{name:"max:number"}],function(){return new Nn},"masksettings");function us(r,t){switch(r){case"hour":case"minute":case"second":case"day":case"month":return 2;case"timeMarker":case"year":return t;default:return 1}}function Vu(r,t){var e=t;return r.count<r.maxCount&&(r.type==="day"&&parseInt(t[0])===0||r.type==="month"&&parseInt(t[0])===0)&&(e=t.slice(1,t.length)),e}function Su(r){for(var t=[],e,i=function(s,a,l){if(l===void 0&&(l=!1),e&&e===s){t[t.length-1].count++;var u=us(s,t[t.length-1].count);t[t.length-1].maxCount=u}else{var u=us(s,1);t.push({type:s,value:a,count:1,maxCount:u,upperCase:l})}},n=0;n<r.length;n++){var o=r[n];switch(o){case"m":i("month",o);break;case"d":i("day",o);break;case"y":i("year",o);break;case"h":i("hour",o,!1);break;case"H":i("hour",o,!0);break;case"M":i("minute",o);break;case"s":i("second",o);break;case"t":i("timeMarker",o);break;case"T":i("timeMarker",o,!0);break;default:t.push({type:"separator",value:o,count:1,maxCount:1,upperCase:!1});break}e=t[t.length-1].type}return t}var cs=(function(r){P(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.defaultDate="1970-01-01T",e.turnOfTheCentury=68,e.twelve=12,e.lexems=[],e.inputDateTimeData=[],e.validBeginningOfNumbers={hour:1,hourU:2,minute:5,second:5,day:3,month:1},e}return Object.defineProperty(t.prototype,"hasDatePart",{get:function(){return this.lexems.some(function(e){return e.type==="day"||e.type==="month"||e.type==="year"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTimePart",{get:function(){return this.lexems.some(function(e){return e.type==="hour"||e.type==="minute"||e.type==="second"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSeconds",{get:function(){return this.lexems.some(function(e){return e.type==="second"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is12Hours",{get:function(){return this.lexems.filter(function(e){return e.type==="hour"&&!e.upperCase}).length>0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"datetimemask"},t.prototype.getTypeForExpressions=function(){return this.hasTimePart&&this.hasSeconds?"datetime-seconds":this.hasTimePart?"datetime-local":"datetime"},t.prototype.updateLiterals=function(){this.lexems=Su(this.pattern||"")},t.prototype.leaveOnlyNumbers=function(e){for(var i="",n=0;n<e.length;n++)e[n].match(cn)&&(i+=e[n]);return i},t.prototype.getMaskedStrFromISO=function(e){var i=this,n=new Date(e);return this.initInputDateTimeData(),this.hasTimePart||(n=new Date(e+"T00:00:00")),this.hasDatePart||(n=new Date(this.defaultDate+e)),isNaN(n)||this.lexems.forEach(function(o,s){var a=i.inputDateTimeData[s];switch(a.isCompleted=!0,o.type){case"hour":{i.is12Hours?a.value=((n.getHours()-1)%i.twelve+1).toString():a.value=n.getHours().toString();break}case"minute":{a.value=n.getMinutes().toString();break}case"second":{a.value=n.getSeconds().toString();break}case"timeMarker":{var l=n.getHours()>=i.twelve?"pm":"am";a.value=o.upperCase?l.toUpperCase():l;break}case"day":{a.value=n.getDate().toString();break}case"month":{a.value=(n.getMonth()+1).toString();break}case"year":{var u=n.getFullYear();o.count==2&&(u=u%100),a.value=u.toString();break}}}),this.getFormatedString(!0)},t.prototype.initInputDateTimeData=function(){var e=this;this.inputDateTimeData=[],this.lexems.forEach(function(i){e.inputDateTimeData.push({lexem:i,isCompleted:!1,value:void 0})})},t.prototype.getISO_8601Format=function(e){var i=[],n=[];if(e.year!==void 0){var o=this.getPlaceholder(4,e.year.toString(),"0")+e.year;i.push(o)}if(e.month!==void 0&&e.year!==void 0){var s=this.getPlaceholder(2,e.month.toString(),"0")+e.month;i.push(s)}if(e.day!==void 0&&e.month!==void 0&&e.year!==void 0){var a=this.getPlaceholder(2,e.day.toString(),"0")+e.day;i.push(a)}if(e.hour!==void 0){var l=this.getPlaceholder(2,e.hour.toString(),"0")+e.hour;n.push(l)}if(e.minute!==void 0&&e.hour!==void 0){var u=this.getPlaceholder(2,e.minute.toString(),"0")+e.minute;n.push(u)}if(e.second!==void 0&&e.minute!==void 0&&e.hour!==void 0){var f=this.getPlaceholder(2,e.second.toString(),"0")+e.second;n.push(f)}var y=[];return i.length>0&&y.push(i.join("-")),n.length>1&&y.push(n.join(":")),y.join("T")},t.prototype.isYearValid=function(e){if(e.min===void 0&&e.max===void 0)return!1;var i=e.year.toString(),n=e.min.toISOString().slice(0,i.length),o=e.max.toISOString().slice(0,i.length);return e.year>=parseInt(n)&&e.year<=parseInt(o)},t.prototype.createIDateTimeCompositionWithDefaults=function(e,i){var n=e.day==29&&e.month==2,o=e.min.getFullYear(),s=e.max.getFullYear();n&&(o=Math.ceil(o/4)*4,s=Math.floor(s/4)*4,o>s&&(o=void 0,s=void 0));var a=e.year!==void 0?e.year:i?s:o,l=e.month!==void 0?e.month:i&&this.hasDatePart?12:1,u=e.day!==void 0?e.day:i&&this.hasDatePart?this.getMaxDateForMonth(a,l):1,f=e.hour!==void 0?e.hour:i?23:0,y=e.minute!==void 0?e.minute:i?59:0,b=e.second!==void 0?e.second:i?59:0;return{year:a,month:l,day:u,hour:f,minute:y,second:b}},t.prototype.getMaxDateForMonth=function(e,i){return i==2?e%4==0&&e%100!=0||e%400==0?29:28:[31,28,31,30,31,30,31,31,30,31,30,31][i-1]},t.prototype.isDateValid=function(e){var i=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!1))),n=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!0)));return!isNaN(i)&&(i.getDate()===e.day||e.day===void 0)&&(i.getMonth()===e.month-1||e.month===void 0)&&(i.getFullYear()===e.year||e.year===void 0)&&n>=e.min&&i<=e.max},t.prototype.getPlaceholder=function(e,i,n){var o=e-(i||"").length,s=o>0?n.repeat(o):"";return s},t.prototype.isDateValid12=function(e){return this.is12Hours?this.is12Hours&&e.hour>this.twelve?!1:e.timeMarker?e.timeMarker[0].toLowerCase()==="p"?(e.hour!==this.twelve&&(e.hour+=this.twelve),this.isDateValid(e)):(e.hour===this.twelve&&(e.hour=0),this.isDateValid(e)):this.isDateValid(e)?!0:(e.hour+=this.twelve,this.isDateValid(e)):this.isDateValid(e)},t.prototype.updateTimeMarkerInputDateTimeData=function(e,i){var n=e.value;if(n){var o="timeMarker",s=$e({},i);s[o]=n,this.isDateValid12(s)?e.isCompleted=!0:n=n.slice(0,n.length-1),e.value=n||void 0,i[o]=n||void 0}},t.prototype.updateInputDateTimeData=function(e,i){var n=e.value;if(n){var o=e.lexem.type,s=$e({},i);if(s[o]=parseInt(this.parseTwoDigitYear(e)),n.length===e.lexem.maxCount)if(this.isDateValid12(s)){e.isCompleted=!0,e.value=n||void 0,i[o]=parseInt(n)>0?parseInt(n):void 0;return}else n=n.slice(0,n.length-1);s[o]=parseInt(n);var a=parseInt(n[0]),l=this.validBeginningOfNumbers[o+(e.lexem.upperCase?"U":"")];o==="year"&&!this.isYearValid(s)?(n=n.slice(0,n.length-1),e.isCompleted=!1):l!==void 0&&a>l?this.isDateValid12(s)?e.isCompleted=!0:n=n.slice(0,n.length-1):l!==void 0&&a!==0&&a<=l&&(this.checkValidationDateTimePart(s,o,e),e.isCompleted&&!this.isDateValid12(s)&&(n=n.slice(0,n.length-1))),e.value=n||void 0,i[o]=parseInt(n)>0?parseInt(n):void 0}},t.prototype.checkValidationDateTimePart=function(e,i,n){var o=e[i],s=o*10,a=10;i==="month"&&(a=3),i==="hour"&&(a=this.is12Hours?3:5),n.isCompleted=!0;for(var l=0;l<a;l++)if(e[i]=s+l,this.isDateValid12(e)){n.isCompleted=!1;break}e[i]=o},t.prototype.getCorrectDatePartFormat=function(e,i){var n=e.lexem,o=e.value||"";if(o&&n.type==="timeMarker")return i&&(o=o+this.getPlaceholder(n.count,o,n.value)),o;if(o&&e.isCompleted&&(o=parseInt(o).toString()),o&&e.isCompleted){var s=this.getPlaceholder(n.count,o,"0");o=s+o}else o=Vu(n,o),i&&(o+=this.getPlaceholder(n.count,o,n.value));return o},t.prototype.createIDateTimeComposition=function(){var e,i;this.hasDatePart?(e=this.min||"0001-01-01",i=this.max||"9996-12-31"):(e=this.defaultDate+(this.min||"00:00:00"),i=this.defaultDate+(this.max||"23:59:59"));var n={hour:void 0,minute:void 0,second:void 0,day:void 0,month:void 0,year:void 0,min:new Date(e),max:new Date(i)};return n},t.prototype.parseTwoDigitYear=function(e){var i=e.value;if(e.lexem.type!=="year"||e.lexem.count>2)return i;this.max&&this.max.length>=4&&(this.turnOfTheCentury=parseInt(this.max.slice(2,4)));var n=parseInt(i),o=(n>this.turnOfTheCentury?"19":"20")+i;return o},t.prototype.getFormatedString=function(e){var i="",n="",o=!1,s=this.inputDateTimeData.length-1;if(!e){var a=this.inputDateTimeData.filter(function(b){return!!b.value});s=this.inputDateTimeData.indexOf(a[a.length-1])}for(var l=0;l<this.inputDateTimeData.length;l++){var u=this.inputDateTimeData[l];switch(u.lexem.type){case"timeMarker":case"hour":case"minute":case"second":case"day":case"month":case"year":if(u.value===void 0&&!e)return i+=o?n:"",i;var f=e||s>l,y=this.getCorrectDatePartFormat(u,f);i+=n+y,o=u.isCompleted;break;case"separator":n=u.lexem.value;break}}return i},t.prototype.cleanTimeMarker=function(e,i){var n="";e=e.toUpperCase();for(var o=0;o<e.length;o++)(!n&&(e[o]=="P"||e[o]=="A")||n&&e[o]=="M")&&(n+=e[o]);return i?n=n.toUpperCase():n=n.toLowerCase(),n},t.prototype.setInputDateTimeData=function(e){var i=this,n=0;this.initInputDateTimeData(),this.lexems.forEach(function(o,s){if(e.length>0&&n<e.length){if(o.type==="separator")return;var a=i.inputDateTimeData[s],l=e[n],u=void 0;o.type==="timeMarker"?u=i.cleanTimeMarker(l,o.upperCase):u=i.leaveOnlyNumbers(l),a.value=u.slice(0,o.maxCount),n++}})},t.prototype._getMaskedValue=function(e,i){var n=this;i===void 0&&(i=!0);var o=e==null?"":e.toString(),s=this.getParts(o);this.setInputDateTimeData(s);var a=this.createIDateTimeComposition();this.inputDateTimeData.forEach(function(u){u.lexem.type==="timeMarker"?n.updateTimeMarkerInputDateTimeData(u,a):n.updateInputDateTimeData(u,a)});var l=this.getFormatedString(i);return l},t.prototype.getParts=function(e){for(var i=[],n=this.lexems.filter(function(y){return y.type!=="separator"}),o=this.lexems.filter(function(y){return y.type==="separator"}).map(function(y){return y.value}),s="",a=!1,l=!1,u=0;u<e.length;u++){var f=e[u];if(f.match(cn)||f===n[i.length].value||n[i.length].type==="timeMarker"?(a=!1,l=!1,s+=f):o.indexOf(f)!==-1?l||(a=!0,i.push(s),s=""):a||(l=!0,i.push(s),s=""),i.length>=n.length){a=!1;break}}return(s!=""||a)&&i.push(s),i},t.prototype.getUnmaskedValue=function(e){var i=this,n,o=e==null?"":e.toString(),s=this.getParts(o);this.setInputDateTimeData(s);var a=(n=this.inputDateTimeData.filter(function(f){return f.lexem.type==="timeMarker"})[0])===null||n===void 0?void 0:n.value.toLowerCase()[0],l=this.createIDateTimeComposition(),u=!1;return this.inputDateTimeData.forEach(function(f){var y=f.value;if(!(f.lexem.type=="timeMarker"||f.lexem.type=="separator")){if(!y||y.length<f.lexem.count){u=!0;return}var b=parseInt(i.parseTwoDigitYear(f));f.lexem.type=="hour"&&a==="p"&&b!=i.twelve&&(b+=i.twelve),l[f.lexem.type]=b}}),u?"":this.getISO_8601Format(l)},t.prototype.getMaskedValue=function(e){return this.getMaskedStrFromISO(e)},t.prototype.processInput=function(e){var i={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart),o=e.prevValue.slice(e.selectionEnd);return i.value=this._getMaskedValue(n+(e.insertedChars||"")+o),!e.insertedChars&&e.inputDirection==="backward"?i.caretPosition=e.selectionStart:i.caretPosition=this._getMaskedValue(n+(e.insertedChars||""),!1).length,i},c([p()],t.prototype,"min",void 0),c([p()],t.prototype,"max",void 0),t})(Fn);V.addClass("datetimemask",[{name:"min",type:"datetime",enableIf:function(r){return!!r.pattern}},{name:"max",type:"datetime",enableIf:function(r){return!!r.pattern}}],function(){return new cs},"patternmask");var ps=(function(r){P(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getType=function(){return"currencymask"},t.prototype.wrapText=function(e){var i=this.prefix||"",n=this.suffix||"",o=e;return o&&(o.indexOf(i)===-1&&(o=i+o),o.indexOf(n)===-1&&(o+=n),o)},t.prototype.unwrapInputArgs=function(e){var i=e.prevValue;if(i){if(this.prefix&&i.indexOf(this.prefix)!==-1){i=i.slice(i.indexOf(this.prefix)+this.prefix.length);var n=(this.prefix||"").length;e.selectionStart=Math.max(e.selectionStart-n,0),e.selectionEnd-=n}this.suffix&&i.indexOf(this.suffix)!==-1&&(i=i.slice(0,i.indexOf(this.suffix))),e.prevValue=i}},t.prototype.processInput=function(e){this.unwrapInputArgs(e);var i=r.prototype.processInput.call(this,e),n=(this.prefix||"").length;return i.value&&(i.caretPosition+=n),i.value=this.wrapText(i.value),i},t.prototype.getMaskedValue=function(e){var i=r.prototype.getMaskedValue.call(this,e);return this.wrapText(i)},c([p()],t.prototype,"prefix",void 0),c([p()],t.prototype,"suffix",void 0),t})(Nn);V.addClass("currencymask",[{name:"prefix"},{name:"suffix"}],function(){return new ps},"numericmask"),m.Version=void 0,m.ReleaseDate=void 0,m.Version="".concat("2.5.11"),C.version=m.Version,m.ReleaseDate="".concat("2026-02-17");function xu(r,t){if(m.Version!=r){var e="survey-core has version '"+m.Version+"' and "+t+" has version '"+r+"'. SurveyJS libraries should have the same versions to work correctly.";console.error(e)}}function Iu(r){hs(r)}function hs(r){Tu(r,ds,m.ReleaseDate)}function Eu(r){return fs(r)===!0}function fs(r){var t=ds[r.toString()];return t||!1}var ds={};function Tu(r,t,e){if(r){var i=function(s){var a={},l,u=0,f,y=0,b,E="",S=String.fromCharCode,O=s.length,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0;l<64;l++)a[R.charAt(l)]=l;for(f=0;f<O;f++){var A=a[s.charAt(f)];for(u=(u<<6)+A,y+=6;y>=8;)((b=u>>>(y-=8)&255)||f<O-2)&&(E+=S(b))}return E},n=i(r);if(n){var o=n.indexOf(";");o<0||Ru(n.substring(0,o))&&(n=n.substring(o+1),n.split(",").forEach(function(s){var a=s.indexOf("=");if(a>0){var l=new Date(s.substring(a+1));t[s.substring(0,a)]=new Date(e)<=l?!0:l}}))}}}function Ru(r){if(!r)return!0;var t="domains:",e=r.indexOf(t);if(e<0)return!0;var i=r.substring(e+t.length).toLowerCase().split(",");if(!Array.isArray(i)||i.length===0)return!0;var n=k.getLocation();if(n&&n.hostname){var o=n.hostname.toLowerCase();i.push("localhost");for(var s=0;s<i.length;s++)if(o.indexOf(i[s])>-1)return!0;return!1}return!0}var gs=(function(){function r(){this.icons={},this.iconPrefix="icon-",this.onIconsChanged=new se}return r.prototype.processId=function(t,e){return t.indexOf(e)==0&&(t=t.substring(e.length)),t=Di[t]||t,t},r.prototype.registerIconFromSymbol=function(t,e){this.icons[t]=e},r.prototype.registerIconFromSvgViaElement=function(t,e,i){if(i===void 0&&(i=this.iconPrefix),!!D.isAvailable()){t=this.processId(t,i);var n=D.createElement("div");n.innerHTML=e;var o=D.createElement("symbol"),s=n.querySelector("svg");o.innerHTML=s.innerHTML;for(var a=0;a<s.attributes.length;a++)o.setAttributeNS("http://www.w3.org/2000/svg",s.attributes[a].name,s.attributes[a].value);o.id=i+t,this.registerIconFromSymbol(t,o.outerHTML)}},r.prototype.registerIconFromSvg=function(t,e,i){i===void 0&&(i=this.iconPrefix),t=this.processId(t,i);var n="<svg ",o="</svg>";e=e.trim();var s=e.toLowerCase();return s.substring(0,n.length)===n&&s.substring(s.length-o.length,s.length)===o?(this.registerIconFromSymbol(t,'<symbol id="'+i+t+'" '+e.substring(n.length,s.length-o.length)+"</symbol>"),!0):!1},r.prototype.registerIconsFromFolder=function(t){var e=this;t.keys().forEach(function(i){e.registerIconFromSvg(i.substring(2,i.length-4).toLowerCase(),t(i))})},r.prototype.registerIcons=function(t){for(var e in t)this.registerIconFromSvg(e,t[e]);this.updateMarkup()},r.prototype.registerIcon=function(t,e,i){var n;i===void 0&&(i="v2"),this.registerIconFromSvg(t,e),ys(i,(n={},n[t]=e,n))},r.prototype.iconsRenderedHtml=function(){var t=this;return Object.keys(this.icons).map(function(e){return t.icons[e]}).join("")},r.prototype.updateMarkup=function(){this.onIconsChanged.fire(this,{})},r})(),Ou=new gs,ui={};function ys(r,t){ui[r]||(ui[r]={});var e=ui[r];for(var i in t)e[i]=t[i]}m.Action=G,m.ActionContainer=be,m.ActionDropdownViewModel=sl,m.AdaptiveActionContainer=Ft,m.AnimationBoolean=Ri,m.AnimationGroup=Ae,m.AnimationGroupUtils=Ti,m.AnimationProperty=Nt,m.AnimationPropertyUtils=br,m.AnimationTab=Oi,m.AnimationUtils=Ei,m.AnswerCountValidator=jr,m.AnswerRequiredError=Or,m.ArrayChanges=Be,m.ArrayOperand=Dt,m.Base=U,m.BaseAction=Mt,m.BinaryOperand=lr,m.ButtonGroupItemModel=bu,m.ButtonGroupItemValue=as,m.CalculatedValue=Gr,m.CharacterCounter=xo,m.CheckboxItem=Fo,m.ChoiceItem=Ct,m.ChoicesRestful=qe,m.ChoicesRestfull=Dl,m.ComponentCollection=Gt,m.ComponentQuestionJSON=Xr,m.ComputedUpdater=$,m.ConditionRunner=ge,m.ConditionsParser=pr,m.Const=vi,m.Cover=Zt,m.CoverCell=ho,m.CssClassBuilder=I,m.CustomError=ce,m.CustomWidgetCollection=Qi,m.DefaultTitleModel=eu,m.DomDocumentHelper=D,m.DomWindowHelper=k,m.DragDropChoices=Bo,m.DragDropCore=Yi,m.DragDropRankingSelectToRank=Qo,m.DragOrClickHelper=Yt,m.DropdownListModel=Pt,m.DropdownMultiSelectListModel=ko,m.ElementFactory=De,m.EmailValidator=_i,m.Event=wi,m.EventBase=se,m.ExceedFilesCountError=Mr,m.ExceedSizeError=Lr,m.ExpressionExecutor=Ci,m.ExpressionRunner=fr,m.ExpressionValidator=Hr,m.FlowPanelModel=Lo,m.FunctionFactory=W,m.FunctionOperand=cr,m.Helpers=w,m.HtmlConditionItem=Jr,m.ImageItemValue=Uo,m.InputMaskBase=li,m.InputMaskCurrency=ps,m.InputMaskDateTime=cs,m.InputMaskNumeric=Nn,m.InputMaskPattern=Fn,m.IsMobile=Lt,m.ItemValue=q,m.JsonError=Ke,m.JsonIncorrectTypeError=Yn,m.JsonMetadata=Jn,m.JsonMetadataClass=Gn,m.JsonMissingTypeError=Kn,m.JsonMissingTypeErrorBase=di,m.JsonObject=le,m.JsonObjectProperty=lt,m.JsonRequiredPropertyError=Xn,m.JsonUnknownPropertyError=$n,m.ListModel=ct,m.LocalizableString=me,m.LocalizableStrings=Cr,m.MatrixCells=So,m.MatrixColumn=ln,m.MatrixDropdownCell=Ji,m.MatrixDropdownColumn=mt,m.MatrixDropdownRowModel=so,m.MatrixDropdownRowModelBase=vt,m.MatrixDynamicRowModel=lo,m.MatrixRowModel=Vo,m.Model=Me,m.MultiSelectListModel=No,m.MultipleTextCell=fn,m.MultipleTextEditorModel=Oo,m.MultipleTextErrorCell=Do,m.MultipleTextItemModel=pn,m.MutlipleTextErrorRow=Ao,m.MutlipleTextRow=hn,m.Notifier=po,m.NumericValidator=_r,m.OneAnswerRequiredError=Ar,m.Operand=Ye,m.PageModel=rn,m.PanelModel=bt,m.PanelModelBase=nn,m.PopupBaseViewModel=On,m.PopupDropdownViewModel=os,m.PopupModalManager=vu,m.PopupModalViewModel=Dn,m.PopupModel=pt,m.PopupSurveyModel=ns,m.ProcessValue=yi,m.ProgressButtons=yo,m.ProgressButtonsResponsivityManager=Wl,m.Question=ie,m.QuestionBooleanModel=Sn,m.QuestionButtonGroupModel=ls,m.QuestionCheckboxBase=wt,m.QuestionCheckboxModel=St,m.QuestionCommentModel=yn,m.QuestionCompositeModel=to,m.QuestionCustomModel=eo,m.QuestionCustomWidget=zr,m.QuestionDropdownModel=Vt,m.QuestionEmptyModel=Mo,m.QuestionExpressionModel=Ui,m.QuestionFactory=K,m.QuestionFileModel=vn,m.QuestionFileModelBase=mn,m.QuestionFilePage=jo,m.QuestionHtmlModel=bn,m.QuestionImageMapModel=Wo,m.QuestionImageModel=xn,m.QuestionImagePickerModel=Et,m.QuestionMatrixBaseModel=zi,m.QuestionMatrixDropdownModel=Ki,m.QuestionMatrixDropdownModelBase=et,m.QuestionMatrixDropdownRenderedCell=Se,m.QuestionMatrixDropdownRenderedErrorRow=ro,m.QuestionMatrixDropdownRenderedRow=Kt,m.QuestionMatrixDropdownRenderedTable=Gi,m.QuestionMatrixDynamicModel=en,m.QuestionMatrixModel=un,m.QuestionMultipleTextModel=ii,m.QuestionNonValue=ni,m.QuestionPanelDynamicItem=ai,m.QuestionPanelDynamicModel=Rn,m.QuestionRadiogroupModel=Cn,m.QuestionRankingModel=gn,m.QuestionRatingModel=wn,m.QuestionRowModel=go,m.QuestionSelectBase=sn,m.QuestionSignaturePadModel=En,m.QuestionSingleInputSummary=Zi,m.QuestionSingleInputSummaryItem=Xi,m.QuestionSliderModel=Vn,m.QuestionTagboxModel=dn,m.QuestionTextBase=ei,m.QuestionTextModel=ti,m.RatingItemValue=It,m.RegexValidator=qr,m.RenderedRatingItem=It,m.RendererFactory=Ur,m.RequreNumericError=Dr,m.ResponsivityManager=Pi,m.ScrollViewModel=yu,m.Serializer=V,m.SliderLabelItemValue=Pn,m.SurveyElement=ae,m.SurveyElementCore=kt,m.SurveyError=ue,m.SurveyModel=Me,m.SurveyProgressModel=du,m.SurveyTimer=tn,m.SurveyTimerModel=co,m.SurveyTrigger=Ue,m.SurveyTriggerComplete=Xo,m.SurveyTriggerCopyValue=is,m.SurveyTriggerRunExpression=ts,m.SurveyTriggerSetValue=Zo,m.SurveyTriggerSkip=es,m.SurveyTriggerVisible=Yo,m.SurveyValidator=je,m.SurveyWindowModel=gu,m.SvgIconRegistry=gs,m.SvgRegistry=Ou,m.SvgThemeSets=ui,m.TOCModel=ze,m.TextAreaModel=Ut,m.TextPreProcessor=Yr,m.TextValidator=Qr,m.Trigger=Ko,m.UnaryOperand=mi,m.UrlConditionItem=$r,m.ValidatorResult=Ce,m.ValidatorRunner=Br,m.Variable=ur,m.VerticalResponsivityManager=Ya,m._setIsTablet=tl,m._setIsTouch=el,m.activateLazyRenderingChecks=Qt,m.addIconsToThemeSet=ys,m.checkLibraryVersion=xu,m.chooseFiles=Tr,m.classesToSelector=pe,m.cleanHtmlElementAfterAnimation=he,m.confirmAction=wr,m.confirmActionAsync=ht,m.createDropdownActionModel=ol,m.createDropdownActionModelAdvanced=xi,m.createPopupModalViewModel=ss,m.createPopupModelWithListModel=Ii,m.createPopupViewModel=mu,m.createSvg=hl,m.createTOCListModel=bo,m.defaultActionBarCss=ye,m.defaultCss=Xt,m.defaultThemeName=uo,m.detectIEOrEdge=ft,m.doKey2ClickBlur=xr,m.doKey2ClickDown=gl,m.doKey2ClickUp=Fi,m.englishStrings=hi,m.getActionDropdownButtonTarget=vr,m.getElement=Vr,m.getIconNameFromProxy=Sr,m.getLocaleString=te,m.getLocaleStrings=sa,m.getOriginalEvent=yl,m.getTocRootCss=wo,m.glc=fs,m.hasLicense=Eu,m.increaseHeightByContent=Ni,m.loadFileFromBase64=Pr,m.matrixDropdownColumnTypes=Wi,m.prepareElementForVerticalAnimation=Ve,m.property=p,m.propertyArray=re,m.registerFunction=pa,m.renamedIcons=Di,m.sanitizeEditableContent=vl,m.setLicenseKey=Iu,m.settings=C,m.setupLocale=aa,m.slk=hs,m.surveyCss=He,m.surveyLocalization=oe,m.surveyStrings=la,m.tryFocusPage=mo,m.unwrap=dl}));
